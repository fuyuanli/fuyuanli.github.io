Index: linux-2.6.15.3/include/asm-arm/arch-pxa/creator-regs.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/creator-regs.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/creator-regs.h	(revision 7613)
@@ -0,0 +1,36 @@
+/*
+ *  linux/include/asm-arm/arch-pxa/create-regs.h
+ *
+
+ */
+
+#ifndef __CREATE_REGS_H
+#define __CREATE_REGS_H
+
+#include <linux/config.h>
+#include <asm/arch/pxa-regs.h>
+
+
+#define OSSR_M4		(1 << 4)	/* Match status channel 4 */
+#define OSSR_M5		(1 << 5)	/* Match status channel 5 */
+#define OSSR_M6		(1 << 6)	/* Match status channel 6 */
+#define OSSR_M7		(1 << 7)	/* Match status channel 7 */
+#define OSSR_M8		(1 << 8)	/* Match status channel 8 */
+#define OSSR_M9		(1 << 9)	/* Match status channel 9 */
+#define OSSR_M10	(1 << 10)   /* Match status channel 10*/
+#define OSSR_M11	(1 << 11)	/* Match status channel 11*/
+
+#define OIER_E4		(1 << 4)	/* Interrupt enable channel 4 */
+#define OIER_E5		(1 << 5)	/* Interrupt enable channel 5 */
+#define OIER_E6		(1 << 6)	/* Interrupt enable channel 6 */
+#define OIER_E7		(1 << 7)	/* Interrupt enable channel 7 */
+#define OIER_E8		(1 << 8)	/* Interrupt enable channel 8 */
+#define OIER_E9		(1 << 9)	/* Interrupt enable channel 9 */
+#define OIER_E10	(1 << 10)   /* Interrupt enable channel 10*/
+#define OIER_E11	(1 << 11)   /* Interrupt enable channel 11*/
+
+
+
+
+
+#endif // __CREATE_REGS_H

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/creator-regs.h
___________________________________________________________________
Name: svn:executable
   + *

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/hardware.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/hardware.h	(revision 1)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/hardware.h	(revision 7613)
@@ -80,4 +80,8 @@
 
 #endif
 
+#ifdef CONFIG_MACH_CREATOR_PXA270
+#include "creator-pxa270.h"
+#endif
+
 #endif  /* _ASM_ARCH_HARDWARE_H */
Index: linux-2.6.15.3/include/asm-arm/arch-pxa/creator-pxa270.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/creator-pxa270.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/creator-pxa270.h	(revision 7613)
@@ -0,0 +1,365 @@
+/*
+ *  linux/include/asm-arm/arch-pxa/creator-pxa270.h
+ * *
+ * Copyright (c) 2006 Microtime Computer Inc. <sales@microtime.com.tw>
+ *
+ */
+
+#include <asm/arch/pxa-regs.h>
+#include <asm/arch/irqs.h>
+
+
+/*
+ * Note: include file for assembler and C
+ */
+
+
+/*============================================================================================
+; Memory mapping
+;============================================================================================*/
+#define CREATOR_FLASH_PHYS		PXA_CS0_PHYS    /* 0x00000000 */
+#define CREATOR_FLASH_VIRT		
+#define CREATOR_FLASH_SIZE		(0x02000000)
+
+#define CREATOR_ETH_PHYS		PXA_CS1_PHYS    /* 0x04000000 */
+#define CREATOR_ETH_VIRT		(0xF0000000)
+#define CREATOR_ETH_SIZE		(0x00100000)
+
+#define CREATOR_MASTER_PHYS		PXA_CS2_PHYS    /* 0x08000000 */
+#define CREATOR_MASTER_VIRT		(CREATOR_ETH_VIRT+CREATOR_ETH_SIZE)
+	#define MASTER_ECS0_PHYS		(CREATOR_MASTER_PHYS+0x00000000)    /* 0x08000000 */
+	#define MASTER_ECS0_VIRT		(CREATOR_MASTER_VIRT)
+	#define MASTER_ECS0_SIZE		(0x00100000)	
+	#define MASTER_RCS0_PHYS		(CREATOR_MASTER_PHYS+0x01000000)    /* 0x09000000 */
+	#define MASTER_RCS0_VIRT		(MASTER_ECS0_VIRT+MASTER_ECS0_SIZE)
+	#define MASTER_RCS0_SIZE		(0x00200000)	
+	#define MASTER_ECS3_PHYS		(CREATOR_MASTER_PHYS+0x02000000)    /* 0x0A000000 */
+	#define MASTER_ECS3_VIRT		(MASTER_RCS0_VIRT+MASTER_RCS0_SIZE)
+	#define MASTER_ECS3_SIZE		(0x00100000)	
+	#define MASTER_RCS3_PHYS		(CREATOR_MASTER_PHYS+0x03000000)    /* 0x0B000000 */
+	#define MASTER_RCS3_VIRT		(MASTER_ECS3_VIRT+MASTER_ECS3_SIZE)
+	#define MASTER_RCS3_SIZE		(0x00100000)	
+#define CREATOR_MASTER_SIZE		(MASTER_ECS0_SIZE+MASTER_RCS0_SIZE+MASTER_ECS3_SIZE+MASTER_RCS3_SIZE)
+
+#define CREATOR_RSV1_PHYS		PXA_CS3_PHYS    /* 0x0C000000 */
+
+#define CREATOR_CPLD_PHYS		PXA_CS4_PHYS    /* 0x10000000 */
+#define CREATOR_CPLD_VIRT		(CREATOR_MASTER_VIRT+CREATOR_MASTER_SIZE)
+	#define CPLD_1_PHYS			(CREATOR_CPLD_PHYS+0x00000000)    /* 0x10000000 */
+	#define CPLD_1_VIRT			(CREATOR_CPLD_VIRT)
+	#define CPLD_1_SIZE			(0x00100000)	
+	#define CPLD_2_PHYS			(CREATOR_CPLD_PHYS+0x01000000)    /* 0x11000000 */
+	#define CPLD_2_VIRT			(CPLD_1_VIRT+CPLD_1_SIZE)
+	#define CPLD_2_SIZE			(0x00100000)	
+#define CREATOR_CPLD_SIZE		(CPLD_1_SIZE+CPLD_2_SIZE)	
+
+#define CREATOR_RSV2_PHYS       PXA_CS5_PHYS    /* 0x14000000 */
+
+#define SMC_IOADDR		        CREATOR_ETH_VIRT
+
+
+
+/*============================================================================================
+;Ethernet
+;============================================================================================*/
+#define GPIO_ETH_IRQ    0
+#define CREATOR_ETH_IRQ IRQ_GPIO(GPIO_ETH_IRQ)
+
+/*============================================================================================
+; Video settings	TODO
+;============================================================================================*/
+#define COLLIE_TC35143_GPIO_TBL_CHK     UCB_IO_1	/* GPIO1=TBL_CHK. used drivers/mfd/ucb1x00-ts.c     */ 
+
+
+
+
+/*============================================================================================
+;Compact Flash/PCMCIA
+;============================================================================================*/
+//#define GPIO_PCMCIA0_CD_IRQ     1
+//#define CREATOR_PCMCIA0_CD_IRQ  IRQ_GPIO(GPIO_PCMCIA0_CD_IRQ)
+//#define COLIBRI_PCMCIA_CD_EDGE  IRQT_BOTHEDGE
+//#define GPIO_PCMCIA0_RDY_IRQ    1
+//#define COLIBRI_PCMCIA0_RDY_IRQ IRQ_GPIO(GPIO_PCMCIA0_RDY_IRQ)
+//#define COLIBRI_PCMCIA_RDY_EDGE IRQT_FALLING
+//#define GPIO_PCMCIA_POW_EN      107
+#define GPIO_PCMCIA_NPOE        48
+#define GPIO_PCMCIA_NPOE_AF     GPIO_ALT_FN_2_OUT
+#define GPIO_PCMCIA_NPIOR       50
+#define GPIO_PCMCIA_NPIOR_AF    GPIO_ALT_FN_2_OUT
+#define GPIO_PCMCIA_NPIOW       51
+#define GPIO_PCMCIA_NPIOW_AF    GPIO_ALT_FN_2_OUT
+#define GPIO_PCMCIA_NPCE1       85
+#define GPIO_PCMCIA_NPCE1_AF    GPIO_ALT_FN_1_OUT
+#define GPIO_PCMCIA_NPCE2       54
+#define GPIO_PCMCIA_NPCE2_AF    GPIO_ALT_FN_2_OUT
+#define GPIO_PCMCIA_NPREG       55
+#define GPIO_PCMCIA_NPREG_AF    GPIO_ALT_FN_2_OUT
+#define GPIO_PCMCIA_NPWAIT      56
+#define GPIO_PCMCIA_NPWAIT_AF   GPIO_ALT_FN_1_IN
+#define GPIO_PCMCIA_NPIOIS16    57
+#define GPIO_PCMCIA_NPIOIS16_AF GPIO_ALT_FN_1_IN
+#define GPIO_PCMCIA_PSKTSEL     79
+#define GPIO_PCMCIA_PSKTSEL_AF  GPIO_ALT_FN_1_OUT
+#define PCC_RESET_ASSERT      	MASTER_CTRL1 |= 0x08;
+#define PCC_RESET_DEASSERT     	MASTER_CTRL1 &= 0xF7;
+//#define GPIO_PCMCIA0_BVD1       83
+//#define GPIO_PCMCIA0_BVD2       82
+
+#define PCC_DETECT 		(MASTER_STATUS2 & 0x04)
+#define PCC_READY 		(MASTER_STATUS2 & 0x08)
+#define PCC_BVD1()  	(MASTER_STATUS2 & 0x10)
+#define PCC_BVD2()  	(MASTER_STATUS2 & 0x20)
+#define PCC_VS3V()  	1       /* only 3.3V supported */
+#define PCC_VS5V()  	0       /* only 3.3V supported */
+#define PCC_PWR_ON() 	MASTER_CTRL1 |= 4;
+#define PCC_PWR_OFF() 	MASTER_CTRL1 &= (~4);
+
+
+
+/*============================================================================================
+; MMC/SD
+;============================================================================================*/
+//#define GPIO_MMC_CD_IRQ         1
+#define CREATOR_MMC_CD_IRQ      CREATOR_MMCI_IRQ
+#define GPIO_MMCCLK_AF          GPIO32_MMCCLK_MD
+#define GPIO_MMCDAT0_AF         GPIO92_MMCDAT0_MD
+#define GPIO_MMCDAT1_AF         GPIO109_MMCDAT1_MD
+#define GPIO_MMCDAT2_AF         GPIO110_MMCDAT2_MD
+#define GPIO_MMCDAT3_AF         GPIO111_MMCDAT3_MD
+#define GPIO_MMCCMD_AF          GPIO112_MMCCMD_MD
+#define MMC_WP()                (MASTER_STATUS1 & (1<<2)) 
+//#define GPIO_MMCCS0_AF          GPIO110_MMCCS0_MD
+
+/*============================================================================================
+; AC97/Touch screen
+;============================================================================================*/
+//#define GPIO_TOUCH_IRQ          1
+//#define COLIBRI_TOUCH_IRQ       IRQ_GPIO(GPIO_TOUCH_IRQ)
+
+#define GPIO_AC97_RESET         113
+#define GPIO_AC97_RST_AF        GPIO_ALT_FN_2_OUT
+#define GPIO_AC97_SYSCLK        98
+#define GPIO_AC97_SYSCLK_AF     GPIO_ALT_FN_1_OUT
+
+#define RAMDISK_DN_ADDR          0xA0800000       /* used in arch/arm/mach-pxa/colibri.c     */
+
+/*============================================================================================
+;Create-xscale-pxa27x master board CPLD control registers
+;============================================================================================*/
+#ifndef __ASSEMBLY__
+#  define CPLD_REG(x)           (*((volatile unsigned short *)(CPLD_1_VIRT + (x))))
+#else
+#  define CPLD_REG(x)           (CPLD_1_VIRT + (x))
+#endif
+
+
+//CPLD Registers
+#define CPLD_INTPEND1 	CPLD_REG(0x2)
+						//Write '1' to clear the corresponding pending bit
+						//00 : CF_IDE		: R/W-(0)1 = CF IRQ Pending (IDE Mode)
+						//01 : TOUCH		: R/W-(0)1 = Touch Screen Pending
+						//02 : CF_IRQ		: R/W-(0)1 = CF IRQ Pending (IO Mode)
+						//03 : CF_STS		: R/W-(0)1 = CF STSCHG Pending
+						//04 : MIRQ0		: R/W-(0)1 = Master Bus IRQ(0) Pending
+						//05 : MIRQ1		: R/W-(0)1 = Master Bus IRQ(1) Pending
+						//06 : MIRQ2		: R/W-(0)1 = Master Bus IRQ(2) Pending
+						//07 : MIRQ3		: R/W-(0)1 = Master Bus IRQ(3) Pending
+#define CPLD_INTPEND2 	CPLD_REG(0x4)
+						//Write '1' to clear the corresponding pending bit
+						//00 : CF_I			: R/W-(0)1 = CF Inserted Pending
+						//01 : CF_O			: R/W-(0)1 = CF Removed Pending
+						//02 : MMC_I		: R/W-(0)1 = MMC Inserted Pending
+						//03 : MMC_O		: R/W-(0)1 = MMC Removed Pending
+						//04 : USB_I		: R/W-(0)1 = USB Device Cable Attached Pending
+						//05 : USB_O		: R/W-(0)1 = USB Device Cable Detached Pending
+						//06 : RSV			: R/W-(0)X   Should Be 0
+						//07 : RSV			: R/W-(0)X   Should Be 0
+#define CPLD_INTMASK1 	CPLD_REG(0x6)
+						//Write '1' to disable the corresponding IRQ
+						//00 : CF_IDE		: R/W-(1)1 = Mask CF IRQ (IDE Mode)
+						//01 : TOUCH		: R/W-(1)1 = Mask Touch Screen IRQ
+						//02 : CF_IRQ		: R/W-(1)1 = Mask CF IRQ (IO Mode)
+						//03 : CF_STS		: R/W-(1)1 = Mask CF STSCHG IRQ
+						//04 : MIRQ0		: R/W-(1)1 = Mask Master Bus IRQ(0) 
+						//05 : MIRQ1		: R/W-(1)1 = Mask Master Bus IRQ(1) 
+						//06 : MIRQ2		: R/W-(1)1 = Mask Master Bus IRQ(2) 
+						//07 : MIRQ3		: R/W-(1)1 = Mask Master Bus IRQ(3) 
+#define CPLD_INTMASK2 	CPLD_REG(0x8)
+						//Write '1' to disable the corresponding IRQ
+						//00 : CF_I			: R/W-(1)1 = Mask CF Inserted IRQ
+						//01 : CF_O			: R/W-(1)1 = Mask CF Removed IRQ
+						//02 : MMC_I		: R/W-(1)1 = Mask MMC Inserted IRQ
+						//03 : MMC_O		: R/W-(1)1 = Mask MMC Removed IRQ
+						//04 : USB_I		: R/W-(1)1 = Mask USB Device Cable Attached IRQ
+						//05 : USB_O		: R/W-(1)1 = Mask USB Device Cable Detached IRQ
+						//06 : RSV			: R/W-(1)X   Should Be 1
+						//07 : RSV			: R/W-(1)X   Should Be 1
+#define CPLD_CTRL1		CPLD_REG(0xa)
+						//00 : USB_FS		: R/W-(0)1 = D+ Pull Hi 1.5K (Attached)
+						//01 : FF_UART		: R/W-(1)1 = COM2 (FF-UART) Enable
+						//02 : CF_PWR		: R/W-(0)1 = CF Power ON
+						//03 : CF_RST		: R/W-(0)1 = CF Reset
+						//04 : ROM_WP		: R/W-(1)0 = SOM-PXA270 Flash Write Protect
+						//05 : LCD_PWR		: R/W-(0)1 = TFT-LCD Power ON
+						//06 : ETH_RST		: R/W-(0)1 = Reset LAN91C111
+						//07 : SB0			: R/W-(0)X   Should Be 0
+#define CPLD_CTRL2		CPLD_REG(0xc)
+						//00 : EMU_FA		: R/W-(1)0 = Use KEY(0) to emulation nBATT_FAULT
+						//							 	 Use KEY(1) to emulation nVDD_FAULT
+						//01 : SB1			: R/W-(1)X   Should Be 1
+						//02 : N_MIRQ3		: R/W-(1)0 = Polarity change on MIRQ 
+						//03 : ADACK		: R/W-(1)X   Auto DACK
+						//04 : LED0			: R/W-(1)0 = D1 On
+						//05 : LED1			: R/W-(1)0 = D2 On
+						//06 : LED2			: R/W-(1)0 = D3 On
+						//07 : LED3			: R/W-(1)0 = D4 On						
+#define CPLD_CTRL3		CPLD_REG(0x10)
+						//00 : SB0			: W-(0)X   Should Be 0
+						//...				: W-(0)X   Should Be 0
+						//07 : SB0			: W-(0)X   Should Be 0
+#define CPLD_STATUS1 	CPLD_REG(0x0)
+						//00 : KEY0			: State of S1
+						//01 : KEY1			: State of S2
+						//02 : MMC_WP		: State of MMC/SD WP Pin
+						//03 : MMC_CD		: State of MMC/SD nCD Pin
+						//04 : Version		: Version Number
+						//05 : Version		: 0001 = Ver 1.0
+						//06 : Version		: 0010 = Ver 2.0
+						//07 : Version		: ...
+#define CPLD_STATUS2 	CPLD_REG(0xe)
+						//00 : USBC_IRQ		: USB Device Cable Status, (1)=Cable Inserted
+						//01 : CF_nINPACK	: State of CF nINPACK Pin
+						//02 : CF_nCD1		: State of CF CF_nCD1 Pin
+						//03 : CF_RDY		: State of CF CF_RDY Pin
+						//04 : CF_BVD1		: State of CF CF_BVD1 Pin
+						//05 : CF_BVD2		: State of CF CF_BVD2 Pin
+						//06 : RSV			: Reserved
+						//07 : RSV			: Reserved
+
+
+/*============================================================================================
+;Creator main board peripheral control registers
+;============================================================================================*/
+#define ECS0_BASE 		MASTER_ECS0_VIRT	//Creator main I/O
+#define ECS1_BASE 							//Unuse
+#define ECS2_BASE 							//Unuse
+#define RCS0_BASE 		MASTER_RCS0_VIRT	//Creator 2M FLASH
+#define ECS3_BASE 		MASTER_ECS3_VIRT 	//FPGA board I/O
+#define RCS3_BASE 		MASTER_RCS3_VIRT	//FPGA board SRAM
+
+#define CF_TASK_BASE 	(ECS0_BASE+0x0000)	/* CF_nCS0 */
+#define CF_STATUS_BASE	(ECS0_BASE+0x0200)	/* CF_nCS1 : not used */
+
+#define ATA_BYTDAT_OFFSET 		(0) 		/* DATA read/write */
+#define ATA_ERRFEA_OFFSET   	(2) 		/* read error/write feature */
+#define ATA_SECTCOUNT_OFFSET    (4) 		/* sector count */
+#define ATA_SECTORNO_OFFSET     (6)			/* sector number */
+#define ATA_CYLINDLOW_OFFSET    (8)			/* cylinder low */
+#define ATA_CYLINDHI_OFFSET     (0xa)		/* cylinder high */
+#define ATA_SCARDHEAD_OFFSET    (0xc)		/* select card/head */
+#define ATA_STATCOMMD_OFFSET    (0xe)
+#define ATA_CONTROL_OFFSET		(0X200+0xc)	/* control */
+
+#define ATA_BYTDATREG   (*(volatile unsigned short *)(CF_TASK_BASE+0x0000)) /* DATA read/write */
+#define ATA_ERRFEAREG   (*(volatile unsigned short *)(CF_TASK_BASE+0x0002)) /* read error/write feature */
+#define ATA_SECTCOUNT   (*(volatile unsigned short *)(CF_TASK_BASE+0x0004)) /* sector count */
+#define ATA_SECTORNO    (*(volatile unsigned short *)(CF_TASK_BASE+0x0006)) /* sector number */
+#define ATA_CYLINDLOW   (*(volatile unsigned short *)(CF_TASK_BASE+0x0008)) /* cylinder low */
+#define ATA_CYLINDHI    (*(volatile unsigned short *)(CF_TASK_BASE+0x000A)) /* cylinder high */
+#define ATA_SCARDHEAD   (*(volatile unsigned short *)(CF_TASK_BASE+0x000C)) /* select card/head */
+#define ATA_STATCOMMD   (*(volatile unsigned short *)(CF_TASK_BASE+0x000E)) /* read status/write command */
+#define ATA_CONTROL		(*(volatile unsigned short *)(CF_TASK_BASE+ATA_CONTROL_OFFSET))	/* control */
+
+#define USB_DATA 		(*(volatile unsigned short *)(ECS0_BASE+0x0400))
+#define USB_CMD 		(*(volatile unsigned short *)(ECS0_BASE+0x0402))
+#define CCM_DATA 		(*(volatile unsigned short *)(ECS0_BASE+0x0600))
+#define LCD_CMD 		(*(volatile unsigned short *)(ECS0_BASE+0x0800))
+#define LCD_DATA 		(*(volatile unsigned short *)(ECS0_BASE+0x0802))
+#define CODEC_DATA 		(*(volatile unsigned short *)(ECS0_BASE+0x0A00))
+#define IO_REG0			(*(volatile unsigned short *)(ECS0_BASE+0x0C00))
+#define IO_REG1 		(*(volatile unsigned short *)(ECS0_BASE+0x0C02))	
+#define IO_REG2 		(*(volatile unsigned short *)(ECS0_BASE+0x0C04))	
+#define CPLD_CTRL 		(*(volatile unsigned short *)(ECS0_BASE+0x0E00))	/* Write */
+						//00	: IO_nRST
+						//01	: AIC_ON
+						//02	: EXPTM1
+						//03	: EXPTM2
+						//04	: FPGA_nPGM
+						//05	: FPGA_CCLK
+						//06	: IRQ3_SEL	0 : IRQ3=CCM(CMOS sensor)
+						//					1 : IRQ3=X_nINT(FPGA Slave Bus)
+						//07	: DMA_SEL	0 : DMA0=CODEC_nDRQ, 	DMA1=X_nDRQ
+						//					1 : DMA0=USB_DRQ, 		DMA1=X_nDRQ 
+						
+#define CPLD_STATUS		(*(volatile unsigned short *)(ECS0_BASE+0x0E00))	/* Read */
+						//00 	: EE_DO
+						//01 	: USB_nEOT
+						//02 	: USB_ON
+						//03 	: NA
+						//04 	: CCD_nRDY
+						//07-05 : 0
+						//15-08	: Version (0x10=V1.0, 0x11=V1.1, ...)
+
+#define IRQ_SELECT 		(*(volatile unsigned short *)(ECS0_BASE+0x0E02))	/* For CPLD(U16) V1.1 or later */
+						//02-00	: IRQ0_MUX (see IRQ mapping)
+						//05-03	: IRQ1_MUX (see IRQ mapping)
+						//08-06	: IRQ2_MUX (see IRQ mapping)
+						//11-09	: IRQ3_MUX (see IRQ mapping)
+						//12	: INV_CF_IRQ 	: (0)1 => CF_IRQ Inversed	/* For CPLD(U16) V1.2 or later */
+						//13	: IRQ3_MODE		: (0)1 => IRQ3 = Function of IRQ3_PEND and IRQ3_MASK
+						//14	: IRQ0_MODE		: (0)0 => IRQ0 = Main Board PHY_nINT(U19:PHY)
+						//							 1 => IRQ0 = Main Board CF_IRQ
+						//15	: IRQ_DEFAULT (0=use default)
+						//		: 0 : 	IRQ0=PHY_nINT(U19),		IRQ1=USB_nINT(U25)
+						//				IRQ2=CODEC_IRQ(U21),	IRQ3=CCM or X_nINT (CPLD_CTRL bit6)
+						//		: 1 :	Controlled by IRQ?_MUX
+						
+						//IRQ mapping :	000 -> PHY_nINT(U19:PHY)	001 -> USB_nINT(U25:USB)
+						//				010 -> CODEC_IRQ(U21:AIC)	011 -> X_nINT(FPGA Slave Bus)
+						//				100 -> CCM (CMOS sensor)	101 -> RTC_nINT(U32:RTC)
+						//				110 -> Reserved (J4:CF card)
+
+
+#define DMA_SELECT 		(*(volatile unsigned short *)(ECS0_BASE+0x0E04))	/* For CPLD(U16) V1.1 or later */
+						//01-00	: DMA0_MUX (see IRQ mapping)
+						//02-01	: DMA1_MUX (see IRQ mapping)
+						//07	: DMA_DEFAULT (0=use default)
+						//		: 0 : 	DMA0=CODEC_nDRQ, 	DMA1=X_nDRQ (when DMA_SEL(CPLD_CTRL bit7)=0)
+						//				DMA0=USB_nDRQ, 		DMA1=X_nDRQ (when DMA_SEL(CPLD_CTRL bit7)=1)
+						//		: 1 : 	Controlled by DMA?_MUX
+						
+						//DMA mapping :	00 -> CODEC_nDRQ(U21:AIC)	01 -> USB_nDRQ(U25:USB)
+						//				10 -> X_nDRQ(FPGA Slave Bus
+#define IRQ3_PEND 		(*(volatile unsigned short *)(ECS0_BASE+0x0A02))
+						//Write '1' to clear the corresponding pending bit
+						//00 	: CF_IRQ		: R/W-(0)1 = CF IRQ Pending
+						//01 	: X_nINT		: R/W-(0)1 = Slave Bus IRQ Pending
+						//02-15 : Reserved		: R/W-(0)X   Should Be 0
+#define IRQ3_MASK 		(*(volatile unsigned short *)(ECS0_BASE+0x0A04))
+						//Write '1' to disable the corresponding IRQ
+						//00 	: CF_IRQ		: R/W-(1)1 = Mask CF_IRQ IRQ
+						//01 	: X_nINT		: R/W-(1)1 = Mask Slave Bus IRQ
+						//02-15 : Reserved		: R/W-(1)X   Should Be 1
+
+
+#define FPGA_CTRL 		(*(volatile unsigned short *)(ECS3_BASE+0x0000))	//CD_PORT & ADDRL=0 & WR
+#define FPGA_STATUS 	(*(volatile unsigned short *)(ECS3_BASE+0x0000))	//CD_PORT & ADDRL=0 & RD
+#define SCAN_OUT 		(*(volatile unsigned short *)(ECS3_BASE+0x0002))	//CS_PORT & ADDRL=1 & WR
+#define FPGA_LED_HUHU	(*(volatile unsigned short *)(ECS3_BASE+0x0004))	//CS_PORT & ADDRL=2 & WR
+#define CODEC_DATA_FPGA	(*(volatile unsigned short *)(ECS3_BASE+0x0200))	//CS_AIC  & ADDRL=X & RD/WR
+
+
+
+#define MASTER_STATUS1          CPLD_STATUS1T
+#define MASTER_INTPEND1     	CPLD_INTPEND1
+#define MASTER_INTPEND2     	CPLD_INTPEND2
+#define MASTER_INTMASK1    		CPLD_INTMASK1
+#define MASTER_INTMASK2    		CPLD_INTMASK2
+#define MASTER_CTRL1      		CPLD_CTRL1
+#define MASTER_CTRL2   			CPLD_CTRL2
+#define MASTER_STATUS2     		CPLD_STATUS2
+#define MASTER_IO1     	 		CPLD_IO1
+#define MASTER_IO2     	 		CPLD_IO2
+#define MASTER_IRQ3_PEND     	IRQ3_PEND
+#define MASTER_IRQ3_MASK     	IRQ3_MASK
Index: linux-2.6.15.3/include/asm-arm/arch-pxa/irqs.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/irqs.h	(revision 1)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/irqs.h	(revision 7613)
@@ -176,8 +176,10 @@
 #elif defined(CONFIG_SHARP_LOCOMO)
 #define NR_IRQS			(IRQ_LOCOMO_SPI_TEND + 1)
 #elif defined(CONFIG_ARCH_LUBBOCK) || \
-      defined(CONFIG_MACH_MAINSTONE)
+      defined(CONFIG_MACH_MAINSTONE) 
 #define NR_IRQS			(IRQ_BOARD_END)
+#elif defined(CONFIG_MACH_CREATOR_PXA270) 
+#define NR_IRQS			(CREATOR_LAST_IRQ + 1)
 #else
 #define NR_IRQS			(IRQ_BOARD_START)
 #endif
@@ -217,3 +219,40 @@
 #define IRQ_LOCOMO_GPIO_BASE	(IRQ_BOARD_START + 1)
 #define IRQ_LOCOMO_LT_BASE	(IRQ_BOARD_START + 2)
 #define IRQ_LOCOMO_SPI_BASE	(IRQ_BOARD_START + 3)
+
+
+#define CREATOR_IRQ(x)	    (IRQ_BOARD_START + (x))
+#define CREATOR_ETHERNET_IRQ	CREATOR_IRQ(0)
+#define CREATOR_TOUCH_IRQ	 CREATOR_IRQ(1) 
+#define CREATOR_CF_IRQ  	 CREATOR_IRQ(2) 
+#define CREATOR_STSCHG_IRQ   CREATOR_IRQ(3)
+#define CREATOR_IO_XIRQ0_IRQ CREATOR_IRQ(4)
+#define CREATOR_IO_XIRQ1_IRQ CREATOR_IRQ(5)
+#define CREATOR_IO_XIRQ2_IRQ CREATOR_IRQ(6)
+#define CREATOR_IO_XIRQ3_IRQ CREATOR_IRQ(7)
+#define CREATOR_CFI_IRQ      CREATOR_IRQ(8)
+#define CREATOR_CFO_IRQ      CREATOR_IRQ(9)
+#define CREATOR_MMCI_IRQ     CREATOR_IRQ(10)
+#define CREATOR_MMCO_IRQ     CREATOR_IRQ(11)
+#define CREATOR_USBI_IRQ     CREATOR_IRQ(12)
+#define CREATOR_USBO_IRQ     CREATOR_IRQ(13)
+#define CREATOR_MMCWP_IRQ    CREATOR_IRQ(14)
+#define CREATOR_MISC_IRQ     CREATOR_IRQ(15)
+#define CREATOR_OST_4_IRQ    CREATOR_IRQ(16)
+#define CREATOR_OST_5_IRQ    CREATOR_IRQ(17)
+#define CREATOR_OST_6_IRQ    CREATOR_IRQ(18)
+#define CREATOR_OST_7_IRQ    CREATOR_IRQ(19)
+#define CREATOR_OST_8_IRQ    CREATOR_IRQ(20)
+#define CREATOR_OST_9_IRQ    CREATOR_IRQ(21)
+#define CREATOR_OST_10_IRQ   CREATOR_IRQ(22)
+#define CREATOR_OST_11_IRQ   CREATOR_IRQ(23)
+#define CREATOR_IO_XIRQ3_EXT_CF_IRQ     CREATOR_IRQ(24)
+#define CREATOR_IO_XIRQ3_EXT_SLAVE_IRQ  CREATOR_IRQ(25)
+#define CREATOR_IO_XIRQ3_EXT_RTC_IRQ    CREATOR_IRQ(26)
+#define CREATOR_IO_XIRQ3_EXT_CCD_IRQ    CREATOR_IRQ(27)
+#define CREATOR_LAST_IRQ     CREATOR_IO_XIRQ3_EXT_CCD_IRQ
+
+#define CREATOR_IRQ_BIT(x)   (((x) <= (CREATOR_IO_XIRQ3_IRQ)) ? (x-CREATOR_ETHERNET_IRQ) : (x-CREATOR_CFI_IRQ))
+
+#define CREATOR_FPGA_IRQ     CREATOR_IO_XIRQ3_IRQ 
+
Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_addr.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_addr.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_addr.h	(revision 7613)
@@ -0,0 +1,30 @@
+/*=============================================================================
+// File Name : pxa270addr.h
+// Function  : Xscale PXA270 Define Address Register
+// Program   :
+// Date      : 06/17/2004
+// Version   : 1.00
+// History
+//   1.0.0 : Programming start (06/17/2004) -> SOP
+============================================================================== */
+
+#ifndef __CREATOR_PXA270_ADDR_H__
+#define __CREATOR_PXA270_ADDR_H__
+
+
+#ifndef __CREATOR_DEF_H__
+#include "asm/arch/lib/def.h"
+#endif
+
+#ifndef __S3C2410_H
+#include "asm/arch/creator-pxa270.h"
+#endif
+
+
+#include <asm/arch/creator-regs.h>
+
+#define DSP_BASE_ADDR        ECS3_BASE
+#define GRPS_BASE_ADDR       RCS3_BASE
+
+
+#endif	//  __CREATOR_PXA270_ADDR_H__

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_addr.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/def.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/def.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/def.h	(revision 7613)
@@ -0,0 +1,49 @@
+
+#ifndef __CREATOR_DEF_H__
+#define __CREATOR_DEF_H__
+
+#define U32 unsigned int
+#define U16 unsigned short
+#define S32 int
+#define S16 short int
+#define U8  unsigned char
+#define	S8  char
+
+#define UL	U32
+#define UI	U16
+#define UC	U8
+#define C	S8
+#define I	S16
+#define L	S32
+
+/***********************************************************************
+        return flag
+************************************************************************/
+#define OK       1
+#define YES      1
+#define ON       1
+#define TRUE     1
+#define FALSE    0
+#define UM       0
+#define OFF      0
+#define NO       0
+#define STRMATCH 0
+
+/***********************************************************************
+        union reference size
+************************************************************************/
+#define BYTE1   3
+#define BYTE2   2
+#define BYTE3   1
+#define BYTE4   0
+#define WORD1   1
+#define WORD2   0
+typedef union   CVT {
+        UL  l ;
+        UI  w[2] ;
+        UC  b[4] ;
+} UN_CVT;
+
+#define ARRAY_LENGTH(x)     ( sizeof(x) / sizeof(x[0]) )
+
+#endif /*__CREATOR_DEF_H__*/

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/def.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb.h	(revision 7613)
@@ -0,0 +1,192 @@
+#ifndef _USB_H_ 
+#define _USB_H_ 
+
+
+/*************************************************************************/
+// basic #defines
+/*************************************************************************/
+#define MAX_ENDPOINTS      (unsigned char)0x3
+
+#define EP0_TX_FIFO_SIZE   16
+#define EP0_RX_FIFO_SIZE   16
+#define EP0_PACKET_SIZE    16
+
+#define EP1_TX_FIFO_SIZE   4
+#define EP1_RX_FIFO_SIZE   4
+#define EP1_PACKET_SIZE    4
+
+#define EP2_TX_FIFO_SIZE   64
+#define EP2_RX_FIFO_SIZE   64
+#define EP2_PACKET_SIZE    64
+
+
+#define USB_IDLE           0
+#define USB_TRANSMIT       1
+#define USB_RECEIVE        2
+
+#define USB_CLASS_CODE_TEST_CLASS_DEVICE                    0xdc
+#define USB_SUBCLASS_CODE_TEST_CLASS_D12                    0xA0
+#define USB_PROTOCOL_CODE_TEST_CLASS_D12                    0xB0
+
+/*************************************************************************/
+// masks
+/*************************************************************************/
+
+#define USB_RECIPIENT            (unsigned char)0x1F
+#define USB_RECIPIENT_DEVICE     (unsigned char)0x00
+#define USB_RECIPIENT_INTERFACE  (unsigned char)0x01
+#define USB_RECIPIENT_ENDPOINT   (unsigned char)0x02
+
+#define USB_REQUEST_TYPE_MASK    (unsigned char)0x60
+#define USB_STANDARD_REQUEST     (unsigned char)0x00
+#define USB_CLASS_REQUEST        (unsigned char)0x20
+#define USB_VENDOR_REQUEST       (unsigned char)0x40
+
+#define USB_REQUEST_MASK         (unsigned char)0x0F
+
+#define DEVICE_ADDRESS_MASK      0x7F
+
+/*************************************************************************/
+// macros
+/*************************************************************************/
+#define SWAP(x)   (x)	//((((x) & 0xFF) << 8) | (((x) >> 8) & 0xFF))
+
+#define MSB(x)    (((x) >> 8) & 0xFF)
+#define LSB(x)    ((x) & 0xFF)
+
+#define FALSE   0
+#define TRUE    (!FALSE)
+
+/*************************************************************************/
+// basic typedefs
+/*************************************************************************/
+typedef unsigned char   UCHAR;
+typedef unsigned short  USHORT;
+typedef unsigned long   ULONG;
+typedef unsigned char   BOOL;
+
+/*************************************************************************/
+// structure and union definitions
+/*************************************************************************/
+typedef union _epp_flags
+{
+	struct _flags
+	{
+		unsigned char timer               	: 1;
+		unsigned char bus_reset           	: 1;
+		unsigned char suspend             	: 1;
+		unsigned char setup_packet  	  	: 1;
+		unsigned char remote_wakeup		   	: 1;
+		unsigned char in_isr		      	: 1;
+		unsigned char control_state			: 2;
+
+		unsigned char configuration			: 1;
+		unsigned char verbose				: 1;
+		unsigned char ep1_rxdone			: 1;
+		unsigned char setup_dma				: 2; // V2.3
+		unsigned char dma_state      		: 2;
+		unsigned char power_down			: 1; // Smart Board
+	}__attribute__ ((packed))  bits;
+	unsigned short value;
+}__attribute__ ((packed))  EPPFLAGS;
+
+typedef struct _device_request
+{
+	unsigned char bmRequestType;
+	unsigned char bRequest;
+	unsigned short wValue;
+	unsigned short wIndex;
+	unsigned short wLength;
+}__attribute__ ((packed))  DEVICE_REQUEST;
+
+typedef struct _IO_REQUEST {
+	unsigned short	uAddressL;
+	unsigned char	bAddressH;
+	unsigned short	uSize;
+	unsigned char	bCommand;
+}__attribute__ ((packed))  IO_REQUEST, *PIO_REQUEST;
+
+#define MAX_CONTROLDATA_SIZE	8
+
+typedef struct _control_xfer
+{
+	DEVICE_REQUEST DeviceRequest;
+	unsigned short wLength;
+	unsigned short wCount;
+	unsigned char * pData;
+	unsigned char dataBuffer[MAX_CONTROLDATA_SIZE];
+}__attribute__ ((packed))  CONTROL_XFER;
+
+/*************************************************************************/
+// USB utility functions
+/*************************************************************************/
+
+/*void fn_usb_isr();
+
+extern void suspend_change(void);
+extern void stall_ep0(void);
+extern void disconnect_USB(void);
+extern void connect_USB(void);
+extern void reconnect_USB(void);
+extern void init_unconfig(void);
+extern void init_config(void);
+extern void single_transmit(unsigned char * pData, unsigned char len);
+extern void code_transmit(unsigned char code * pRomData, unsigned short len);
+
+extern void control_handler();
+extern void check_key_LED(void);
+extern void setup_dma();
+
+void dma_start(PIO_REQUEST);
+
+*/
+
+#define IN_TOKEN_DMA 	1
+#define OUT_TOKEN_DMA 	0
+
+#define DMA_BUFFER_SIZE		256
+
+#define DMA_IDLE	0
+#define DMA_RUNNING	1
+#define DMA_PENDING	2
+
+#define SETUP_DMA_REQUEST 		0x0471
+#define GET_FIRMWARE_VERSION    0x0472
+#define GET_SET_TWAIN_REQUEST   0x0473
+#define GET_BUFFER_SIZE		    0x0474
+
+typedef struct _TWAIN_FILEINFO {
+	unsigned char	bPage;    // bPage bit 7 - 5 map to uSize bit 18 - 16
+	unsigned char	uSizeH;    // uSize bit 15 - 8
+	unsigned char	uSizeL;    // uSize bit 7 - 0
+}__attribute__ ((packed))  TWAIN_FILEINFO, *PTWAIN_FILEINFO;
+
+
+
+
+////////////////////////////////////////////////////////////////////////////////////////////
+//usb initial and connect
+////////////////////////////////////////////////////////////////////////////////////////////
+void init_usb(void);
+void exit_usb(void);
+
+//void connect_usb(void);
+
+void disconnect_USB(void);
+void connect_USB(void);
+void reconnect_USB(void);
+
+
+
+void USB_TEST1(void);
+
+
+/////////////////////////////////////////////////////////////////////////////////////
+//interrupt πÔ¿≥®Áº∆
+////////////////////////////////////////////////////////////////////////////////////
+void ep0_rxdone(void);
+
+
+
+#endif /*_CODEC_H_ */
+

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbccmd.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbccmd.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbccmd.h	(revision 7613)
@@ -0,0 +1,663 @@
+
+////////////////////////////////////////////////////////////////////////////////////
+//
+// Copyright (c) 1999-2003 PHILIPS Semiconductors - APIC
+//
+// Module Name:
+//
+//	rbcCMD.h
+//
+// Abstract:
+//
+//    These are the structures and defines used in the Reduced Block Command set//
+
+// Author:
+//
+//     Hilbert Zhang ZhenYu
+//
+// Revision History:
+//
+//		Created  29 Apr. 1999
+//
+// Copyright @ 1999-2003, PHILIPS Semiconductors - APIC. All rights reserved.
+//
+//  Implementation Notes:
+//      1. LUN
+//          In SCSI-2, 3 bits LUN locates the highest 3 bits of the byte next to
+//          OperationCode of the command Request.
+//          In SCSI-3, 4 Bits LUN is controlled by Transport Protocol,
+//              RBC and SPC-2 are parts of SCSI-3
+//
+
+
+#ifndef __RBC_COMMAND_
+#define __RBC_COMMAND_
+
+//#ifndef BIG_ENDIAN
+//#define BIG_ENDIAN
+//#endif
+
+#include "asm/arch/lib/usb/basictyp.h"
+#include "asm/arch/lib/usb/Ata.h"
+
+
+// RBC commands
+#define RBC_CMD_FORMAT						0x04
+#define RBC_CMD_READ10						0x28
+#define RBC_CMD_READCAPACITY				0x25
+#define RBC_CMD_STARTSTOPUNIT				0x1B
+#define RBC_CMD_SYNCCACHE					0x35
+#define RBC_CMD_VERIFY10					0x2F
+#define RBC_CMD_WRITE10						0x2A
+
+
+// SPC-2 commands
+#define SPC_CMD_INQUIRY						0x12
+#define SPC_CMD_MODESELECT6					0x15
+#define SPC_CMD_MODESENSE6					0x1A
+#define SPC_CMD_PERSISTANTRESERVIN			0x5E
+#define SPC_CMD_PERSISTANTRESERVOUT			0x5F
+#define SPC_CMD_PRVENTALLOWMEDIUMREMOVAL	0x1E
+#define SPC_CMD_RELEASE6					0x17
+#define SPC_CMD_REQUESTSENSE				0x03
+#define SPC_CMD_RESERVE6					0x16
+#define SPC_CMD_TESTUNITREADY				0x00
+#define SPC_CMD_WRITEBUFFER					0x3B
+#define SPC_CMD_READLONG					0x23
+
+
+
+// for START_STOP_RBC
+#define PWR_NOCHANGE    0
+#define PWR_ACTIVE      1
+#define PWR_IDLE        2
+#define PWR_STANDBY     3
+#define PWR_SLEEP       5
+#define PWR_DEVCTRL     7
+
+#define MEDIUM_STOP     0
+#define MEDIUM_READY    1
+#define MEDIUM_UNLOAD   2
+#define MEDIUM_LOAD     3
+
+
+// DeviceType field for Inquiry Data
+#define DIRECT_ACCESS_DEVICE            0x00    /* disks */
+#define SEQUENTIAL_ACCESS_DEVICE        0x01    /* tapes */
+#define PRINTER_DEVICE                  0x02    /* printers */
+#define PROCESSOR_DEVICE                0x03    /* scanners, printers, etc */
+#define WRITE_ONCE_READ_MULTIPLE_DEVICE 0x04    /* worms */
+#define READ_ONLY_DIRECT_ACCESS_DEVICE  0x05    /* cdroms */
+#define SCANNER_DEVICE                  0x06    /* scanners */
+#define OPTICAL_DEVICE                  0x07    /* optical disks */
+#define MEDIUM_CHANGER                  0x08    /* jukebox */
+#define COMMUNICATION_DEVICE            0x09    /* network */
+
+#define ASC0T18_DEVICE                  0x0A    /* ASC IT8 */
+#define ASC1T18_DEVICE                  0x0B    /* ASC IT8 */
+
+#define SCC2_DEVICE                     0x0C    /* Storage Controller device */
+#define SES_DEVICE                      0x0D    /* Enclousre Service device */
+#define RBC_DEVICE                      0x0E    /* RBC device */
+#define OCRW_DEVICE                     0x0F    /* optical Card Reader /writer Device */
+
+#define LOGICAL_UNIT_NOT_PRESENT_DEVICE 0x7F
+#define DEVICE_QUALIFIER_NOT_SUPPORTED  0x03
+
+// DeviceTypeQualifier field
+#define REMOVABLE_MASK  0x80
+#define NOT_REMOVABLE   0x0         /* disks  */
+#define REMOVABLE       0x80        /* CD-ROM  */
+
+
+#define VPDPAGE_SERIAL_NUMBER   0x80
+#define VPDPAGE_DEVICE_IDENTITY 0x83
+
+
+// Mode Sense/Select page constants.
+#define MODE_PAGE_RBC_DEVICE_PARAMETERS 0x06
+
+#define PAGECTRL_CURRENT    0x0
+#define PAGECTRL_CHANGEABLE 0x1
+#define PAGECTRL_DEFAULT    0x2
+#define PAGECTRL_SAVED      0x3
+
+#define MEDIUMREMOVAL_PROHIBITED_ALL    0x3
+#define MEDIUMREMOVAL_ALLOWED_ALL       0x0
+#define MEDIUMREMOVAL_ALLOWED_CHANGER   0x1
+#define MEDIUMREMOVAL_ALLOWED_DATA      0x2
+
+
+#define SCSI_RESPONSECODE_CURRENT_ERROR     0x70
+#define SCSI_RESPONSECODE_PREVIOUS_ERROR    0x71
+
+//
+// Sense codes
+//
+
+#define SCSI_SENSE_NO_SENSE         0x00
+#define SCSI_SENSE_RECOVERED_ERROR  0x01
+#define SCSI_SENSE_NOT_READY        0x02
+#define SCSI_SENSE_MEDIUM_ERROR     0x03
+#define SCSI_SENSE_HARDWARE_ERROR   0x04
+#define SCSI_SENSE_ILLEGAL_REQUEST  0x05
+#define SCSI_SENSE_UNIT_ATTENTION   0x06
+#define SCSI_SENSE_DATA_PROTECT     0x07
+#define SCSI_SENSE_BLANK_CHECK      0x08
+#define SCSI_SENSE_UNIQUE           0x09
+#define SCSI_SENSE_COPY_ABORTED     0x0A
+#define SCSI_SENSE_ABORTED_COMMAND  0x0B
+#define SCSI_SENSE_EQUAL            0x0C
+#define SCSI_SENSE_VOL_OVERFLOW     0x0D
+#define SCSI_SENSE_MISCOMPARE       0x0E
+#define SCSI_SENSE_RESERVED         0x0F
+
+
+// Additional tape bit
+#define SCSI_ILLEGAL_LENGTH         0x20
+#define SCSI_EOM                    0x40
+#define SCSI_FILE_MARK              0x80
+
+// Additional Sense codes
+#define SCSI_ADSENSE_NO_SENSE       0x00
+#define SCSI_ADSENSE_LUN_NOT_READY  0x04
+#define SCSI_ADSENSE_ILLEGAL_COMMAND 0x20
+#define SCSI_ADSENSE_ILLEGAL_BLOCK  0x21
+#define SCSI_ADSENSE_INVALID_PARAMETER    0x26
+#define SCSI_ADSENSE_INVALID_LUN    0x25
+#define SCSI_ADSENSE_INVALID_CDB    0x24
+#define SCSI_ADSENSE_MUSIC_AREA     0xA0
+#define SCSI_ADSENSE_DATA_AREA      0xA1
+#define SCSI_ADSENSE_VOLUME_OVERFLOW 0xA7
+
+#define SCSI_ADSENSE_NO_MEDIA_IN_DEVICE 0x3A
+#define SCSI_ADSENSE_FORMAT_ERROR		0x31
+#define SCSI_ADSENSE_CMDSEQ_ERROR		0x2C
+#define SCSI_ADSENSE_MEDIUM_CHANGED 0x28
+#define SCSI_ADSENSE_BUS_RESET      0x29
+#define SCSI_ADWRITE_PROTECT        0x27
+#define SCSI_ADSENSE_TRACK_ERROR    0x14
+#define SCSI_ADSENSE_SAVE_ERROR     0x39
+#define SCSI_ADSENSE_SEEK_ERROR     0x15
+#define SCSI_ADSENSE_REC_DATA_NOECC 0x17
+#define SCSI_ADSENSE_REC_DATA_ECC   0x18
+
+
+// Additional sense code qualifier
+#define SCSI_SENSEQ_FORMAT_IN_PROGRESS 0x04
+#define SCSI_SENSEQ_INIT_COMMAND_REQUIRED 0x02
+#define SCSI_SENSEQ_MANUAL_INTERVENTION_REQUIRED 0x03
+#define SCSI_SENSEQ_BECOMING_READY 0x01
+#define SCSI_SENSEQ_FILEMARK_DETECTED 0x01
+#define SCSI_SENSEQ_SETMARK_DETECTED 0x03
+#define SCSI_SENSEQ_END_OF_MEDIA_DETECTED 0x02
+#define SCSI_SENSEQ_BEGINNING_OF_MEDIA_DETECTED 0x04
+
+
+#define WRBUFF_MODE_COMBINED            0x0
+#define WRBUFF_MODE_Vendor              0x1
+#define WRBUFF_MODE_DATA                0x2
+#define WRBUFF_MODE_DOWNLD              0x4
+#define WRBUFF_MODE_DOWNLD_SAVE         0x2
+#define WRBUFF_MODE_DOWNLD_OFFSET       0x6
+#define WRBUFF_MODE_DOWNLD_SAVE_OFFSET  0x7
+#define WRBUFF_MODE_ECHO                0xA
+
+
+
+
+
+
+
+
+
+
+
+// unsolicited status sense code qualifier values
+#define RBC_UNSOLICITED_STATUS              0x02
+#define RBC_UNSOLICITED_SENSE_KEY           0x06
+
+#define RBC_UNSOLICITED_SC_PWR_STATE_CHNG   0xFF
+#define RBC_UNSOLICITED_SC_EVENT_STATUS     0xFE
+
+#define RBC_UNSOLICITED_CLASS_ASQ_DEVICE    0x06
+#define RBC_UNSOLICITED_CLASS_ASQ_MEDIA     0x04
+#define RBC_UNSOLICITED_CLASS_ASQ_POWER     0x02
+
+
+////////////////////////////////////////////////////////////////////////////////////
+// Command Descriptor Block
+//      _RBC : Reduced Block Command
+//      _SPC : SPC-2 SCSI primary Command - 2
+////////////////////////////////////////////////////////////////////////////////////
+
+
+
+// Generic
+
+// Generic
+typedef struct _GENERIC_CDB {
+	INT8 OperationCode;
+    INT8 Reserved[15];
+} __attribute__ ((packed))  GENERIC_CDB,*PGENERIC_CDB;
+
+typedef struct _GENERIC_RBC {
+	INT8 OperationCode;
+    INT8 Reserved[8];
+	INT8 Control;
+} __attribute__ ((packed))  GENERIC_RBC,*PGENERIC_RBC;
+
+
+// format unit
+
+typedef struct _FORMAT_RBC {
+	INT8 OperationCode;	/* 04H */
+	INT8 VendorSpecific;
+	INT8 Increment : 1;
+	INT8 PercentorTime : 1;
+	INT8 Progress : 1;
+    INT8 Immediate : 1;
+	INT8 VendorSpecific1 : 4;
+	INT8 Reserved2[2];
+	INT8 Control;
+} __attribute__ ((packed))  FORMAT_RBC, *PFORMAT_RBC;
+
+
+
+// Read Command
+typedef struct _READ_RBC {
+	INT8 OperationCode;	/* 10H */
+	INT8 VendorSpecific;
+    union{
+        struct
+        {
+	        INT8 LBA_3;
+	        INT8 LBA_2;
+	        INT8 LBA_1;
+	        INT8 LBA_0;
+        }__attribute__ ((packed))  LBA_W8 ;
+
+       INT32 LBA_W32;
+    } __attribute__ ((packed))   LBA;
+	INT8 Reserved;
+    INT8 XferLength_1;
+	INT8 XferLength_0;
+    INT8 Control;
+} __attribute__ ((packed))  READ_RBC, *PREAD_RBC;
+
+
+
+// Read Capacity Data - returned in Big Endian format
+typedef struct _READ_CAPACITY_DATA {
+
+    INT8 LBA_3;
+    INT8 LBA_2;
+    INT8 LBA_1;
+    INT8 LBA_0;
+
+    INT8 BlockLen_3;
+    INT8 BlockLen_2;
+    INT8 BlockLen_1;
+    INT8 BlockLen_0;
+} __attribute__ ((packed))  READ_CAPACITY_DATA, *PREAD_CAPACITY_DATA;
+
+
+// Read Capacity command
+typedef struct _READ_CAPACITY_RBC {
+	INT8                OperationCode;	/* 10H */
+    union   {
+		FLEXI_INT32			l0[2];
+        INT32               l[2];
+        READ_CAPACITY_DATA  CapData;       /* Reserved area, here is used as temp*/
+    } __attribute__ ((packed))  tmpVar;
+
+	INT8                Control;
+} __attribute__ ((packed))  READ_CAPACITY_RBC, *PREAD_CAPACITY_RBC;
+
+
+// START_STOP_UNIT
+typedef struct _START_STOP_RBC {
+    INT8 OperationCode;    /*1BH*/
+    INT8 Immediate: 1;
+    INT8 Reserved1 : 7;
+    INT8 Reserved2[2];
+	union _START_STOP_FLAGS
+    {
+        struct
+        {
+            INT8 Start          : 1;
+            INT8 LoadEject      : 1;
+            INT8 Reserved3      : 2;
+            INT8 PowerConditions: 4;
+        }__attribute__ ((packed))  bits0;
+
+        struct
+        {
+            INT8 MediumState    : 2;
+            INT8 Reserved3      : 2;
+            INT8 PowerConditions: 4;
+        }__attribute__ ((packed))  bits1;
+    }__attribute__ ((packed))  Flags;
+    INT8 Control;
+} __attribute__ ((packed))  START_STOP_RBC, *PSTART_STOP_RBC;
+
+
+// Synchronize Cache
+typedef struct _SYNCHRONIZE_CACHE_RBC {
+
+	INT8 OperationCode;    /* 0x35 */
+	INT8 Reserved[8];
+	INT8 Control;
+
+} __attribute__ ((packed))  SYNCHRONIZE_CACHE_RBC, *PSYNCHRONIZE_CACHE_RBC;
+
+
+// Write Command
+typedef struct _WRITE_RBC {
+    INT8 OperationCode;	/* 2AH      */
+    INT8 Reserved0 : 3;
+	INT8 FUA : 1;
+	INT8 Reserved1 : 4;
+    union{
+        struct
+        {
+	        INT8 LBA_3;
+	        INT8 LBA_2;
+	        INT8 LBA_1;
+	        INT8 LBA_0;
+        }__attribute__ ((packed))  LBA_W8 ;
+
+       INT32 LBA_W32;
+    } __attribute__ ((packed))   LBA;
+	INT8 Reserved2;
+    INT8 XferLength_1;
+	INT8 XferLength_0;
+    INT8 Control;
+} __attribute__ ((packed))  WRITE_RBC, *PWRITE_RBC;
+
+
+// VERIFY Command
+typedef struct _VERIFY_RBC {
+    INT8 OperationCode;	/* 2FH */
+    INT8 Reserved0;
+	INT8 LBA_3;			/* Big Endian */
+	INT8 LBA_2;
+	INT8 LBA_1;
+	INT8 LBA_0;
+	INT8 Reserved1;
+    INT8 VerifyLength_1;		/* Big Endian */
+	INT8 VerifyLength_0;
+	INT8 Control;
+} __attribute__ ((packed))  VERIFY_RBC, *PVERIFY_RBC;
+
+
+/*************************************************************************/
+// SPC-2 of SCSI-3 commands
+/*************************************************************************/
+
+// INQUIRY Command
+typedef struct _INQUIRY_SPC {
+	INT8 OperationCode;	/* 12H */
+	INT8 EnableVPD:1 ;
+    INT8 CmdSupportData:1 ;
+	INT8 Reserved0:6 ;
+	INT8 PageCode;
+	INT8 Reserved1;
+	INT8 AllocationLen;
+    INT8 Control;
+} __attribute__ ((packed))  INQUIRY_SPC, *PINQUIRY_SPC;
+
+
+typedef struct _STD_INQUIRYDATA {
+    INT8 DeviceType : 5;
+    INT8 Reserved0 : 3;
+
+    INT8 Reserved1 : 7;
+    INT8 RemovableMedia : 1;
+
+    INT8 Reserved2;
+
+    INT8 Reserved3 : 5;
+    INT8 NormACA : 1;
+    INT8 Obsolete0 : 1;
+    INT8 AERC : 1;
+
+    INT8 Reserved4[3];
+
+    INT8 SoftReset : 1;
+    INT8 CommandQueue : 1;
+	INT8 Reserved5 : 1;
+	INT8 LinkedCommands : 1;
+	INT8 Synchronous : 1;
+	INT8 Wide16Bit : 1;
+	INT8 Wide32Bit : 1;
+	INT8 RelativeAddressing : 1;
+
+	INT8 VendorId[8];
+
+	INT8 ProductId[16];
+
+	INT8 ProductRevisionLevel[4];
+
+//  Above is 36 bytes
+//  can be tranmitted by Bulk
+
+    INT8 VendorSpecific[20];
+    INT8 InfoUnitSupport : 1;
+    INT8 QuickArbitSupport : 1;
+    INT8 Clocking : 2;
+    INT8 Reserved6 : 4;
+
+    INT8  Reserved7 ;
+    INT16 VersionDescriptor[8] ;
+
+    INT8 Reserved8[22];
+} __attribute__ ((packed))  STD_INQUIRYDATA, *PSTD_INQUIRYDATA;
+
+typedef struct _SERIALNUMBER_PAGE {
+    INT8 DeviceType : 5;
+    INT8 DeviceTypeQualifier : 3;
+
+    INT8 PageCode ;
+    INT8 Reserved0 ;
+
+    INT8 PageLength ;
+    INT8 SerialNumber[24] ;
+
+} __attribute__ ((packed)) VPD_SERIAL_PAGE,* PVPD_SERIAL_PAGE;
+
+#define ASCII_ID_STRING 32
+typedef struct _ID_DESCRIPTOR {
+	INT8   CodeSet : 4;
+	INT8   Reserved0 : 4;
+
+	INT8   IDType : 4;
+    INT8   Association : 2;
+    INT8   Reserved1 : 2;
+
+    INT8   Reserved2;
+
+	INT8   IDLength ;
+	INT8   AsciiID[ASCII_ID_STRING];
+} __attribute__ ((packed))  ASCII_ID_DESCRIPTOR,* PASCII_ID_DESCRIPTOR;
+
+typedef struct _DEVICE_ID_PAGE
+{
+    INT8 DeviceType : 5;
+    INT8 DeviceTypeQualifier : 3;
+
+    INT8 PageCode ;
+    INT8 Reserved0 ;
+
+    INT8 PageLength ;
+
+    ASCII_ID_DESCRIPTOR   AsciiIdDescriptor[1];
+} __attribute__ ((packed))  VPD_DEVICE_ID_PAGE, * PVPD_DEVICE_ID_PAGE;
+
+
+
+// Mode Select
+typedef struct _MODE_SELECT_SPC {
+	INT8 OperationCode;	/* 15H */
+	INT8 SavePage : 1 ;
+	INT8 Reseved0 : 3 ;
+	INT8 PageFormat : 1 ;
+	INT8 Reserved1 : 3 ;
+	INT8 Reserved2[2];
+	INT8 ParameterLen;
+	INT8 Control;
+} __attribute__ ((packed))  MODE_SELECT_SPC, * PMODE_SELECT_SPC;
+
+// Mode Sense
+typedef struct _MODE_SENSE_SPC {
+    INT8 OperationCode;	/* 1AH */
+    INT8 Reseved0 : 3 ;
+    INT8 DisableBlockDescriptor : 1 ;
+    INT8 Reserved0 : 4 ;
+    INT8 PageCode:6 ;
+    INT8 PageControl : 2 ;
+    INT8 Reserved1;
+    INT8 ParameterLen;
+    INT8 Control;
+} __attribute__ ((packed))  MODE_SENSE_SPC, * PMODE_SENSE_SPC;
+
+typedef struct _MODE_PARAMETER_HEAD {
+    INT8 DataLen;
+    INT8 MediumType;
+    INT8 DeviceParameter;
+    INT8 BlockDescriptorLen;
+} __attribute__ ((packed))  MODE_PARAMETER_HEAD, * PMODE_PARAMETER_HEAD;
+
+
+// Define Device Capabilities page.
+typedef struct _MODE_RBC_DEVICE_PARAMETERS_PAGE {
+    INT8 PageCode : 6;
+	INT8 Reserved : 1;
+    INT8 PageSavable : 1;
+    INT8 PageLength;
+    INT8 WriteCacheDisable : 1;
+    INT8 Reserved1 : 7;
+    INT8 LogicalBlockSize[2];
+    INT8 NumberOfLogicalBlocks[5];
+    INT8 PowerPerformance;
+    INT8 Lockable : 1;
+    INT8 Formattable : 1;
+    INT8 Writable : 1;
+    INT8 Readable : 1;
+    INT8 Reserved2 : 4;
+    INT8 Reserved3;
+} __attribute__ ((packed)) MODE_RBC_DEVICE_PARAMETERS_PAGE, *PMODE_RBC_DEVICE_PARAMETERS_PAGE;
+
+
+// prevent/allow medium removal
+typedef struct _MEDIA_REMOVAL_SPC {
+	INT8 OperationCode;    /* 1EH */
+	INT8 Reserved0[3];
+	INT8 Prevent:2 ;
+	INT8 Reserved1:6 ;
+	INT8 Control;
+} __attribute__ ((packed))  MEDIA_REMOVAL_SPC, *PMEDIA_REMOVAL_SPC;
+
+
+// Request Sense
+typedef struct _REQUEST_SENSE_SPC {
+    INT8 OperationCode;    /* 03H */
+	INT8 Reserved[3];
+    INT8 AllocationLen;
+    INT8 Control;
+} __attribute__ ((packed))  REQUEST_SENSE_SPC, *PREQUEST_SENSE_SPC;
+
+typedef struct _REQUEST_SENSE_DATA {
+    INT8 ResponseCode : 7;
+    INT8 Valid : 1;
+
+    INT8 SegmentNum;
+
+    INT8 SenseKey : 4;
+    INT8 Reserved0 : 1;
+    INT8 WrongLenIndicator : 1;
+    INT8 EndofMedium : 1;
+    INT8 FileMark : 1;
+
+    INT8 Info_0;
+    INT8 Info_1;
+    INT8 Info_2;
+    INT8 Info_3;
+
+    INT8 AdditionalSenseLen;
+
+    INT8 CommandSpecInfo_0;
+    INT8 CommandSpecInfo_1;
+    INT8 CommandSpecInfo_2;
+    INT8 CommandSpecInfo_3;
+
+    INT8 ASC;
+    INT8 ASCQ;
+    INT8 FieldReplacableUnitCode;
+    INT8 SenseKeySpec_0 : 7;
+    INT8 SenseKeySpecValid : 1;
+    INT8 SenseKeySpec_1;
+    INT8 SenseKeySpec_2;
+
+} __attribute__ ((packed))  REQUEST_SENSE_DATA, *PREQUEST_SENSE_DATA;
+
+
+// Test Unit Ready
+typedef struct _TEST_UNIT_SPC {
+	INT8 OperationCode;    /* 00H */
+	INT8 Reserved[4];
+	INT8 Control;
+} __attribute__ ((packed))  TEST_UNIT_SPC, *PTEST_UNIT_SPC;
+
+
+// Write Buffer
+typedef struct _WRITE_BUFFER_SPC {
+    INT8 OperationCode;    /* 3BH */
+    INT8 Mode:4 ;
+    INT8 Reserved0:4 ;
+	INT8 BufferID;
+    INT8 BufferOff_2;
+    INT8 BufferOff_1;
+    INT8 BufferOff_0;
+    INT8 ParameterLen_2;
+    INT8 ParameterLen_1;
+	INT8 ParameterLen_0;
+    INT8 Control;
+} __attribute__ ((packed))  WRITE_BUFFER_SPC, *PWRITE_BUFFER_SPC;
+
+typedef union _CDB_RBC {
+    GENERIC_CDB             Cdb_Generic;
+    
+    // RBC commands
+    GENERIC_RBC             RbcCdb_Generic;
+
+    FORMAT_RBC              RbcCdb_Format;
+	READ_RBC                RbcCdb_Read;
+    READ_CAPACITY_RBC       RbcCdb_ReadCapacity;
+    START_STOP_RBC          RbcCdb_OnOffUnit;
+    SYNCHRONIZE_CACHE_RBC   RbcCdb_SyncCache;
+    VERIFY_RBC              RbcCdb_Verify;
+    WRITE_RBC               RbcCdb_Write;
+
+    
+    // SPC-2 commands
+    INQUIRY_SPC             SpcCdb_Inquiry;
+    MODE_SELECT_SPC         SpcCdb_ModeSelect;
+    MODE_SENSE_SPC          SpcCdb_ModeSense;
+    MEDIA_REMOVAL_SPC       SpcCdb_Remove;
+    REQUEST_SENSE_SPC       SpcCdb_RequestSense;
+    TEST_UNIT_SPC           SpcCdb_TestUnit;
+    WRITE_BUFFER_SPC        SpcCdb_WriteBuffer;
+
+
+    // ATAPI Commands
+    READ_10         CmdRead10;
+    WRITE_10        CmdWrite10;
+    MODE_SELECT_10  CmdModeSel10;
+    MODE_SENSE_10   CmdModeSen10;
+
+} __attribute__ ((packed))  CDB_RBC, *PCDB_RBC;
+
+
+#endif
+

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbccmd.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb-storage.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb-storage.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb-storage.h	(revision 7613)
@@ -0,0 +1,60 @@
+   /*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:        usb-storage.H
+   // Author:           Hilbert Zhang ZhenYu
+   //                   Chew Thing Piao
+   // Created:          Oct. 1 99
+   // Modified:
+   // Revision: 		0.0
+   //
+   /*************************************************************************/
+
+
+#ifndef __USB-STORAGE_H__
+#define __USB-STORAGE_H__
+
+
+#define MAX_STD_REQUEST     12
+#define MAX_CLASS_REQUEST   2
+#define MAX_VENDOR_REQUEST  1
+
+/*************************************************************************/
+// basic #defines
+/*************************************************************************/
+
+/*************************************************************************/
+// structure and union definitions
+/*************************************************************************/
+
+
+/*************************************************************************/
+// USB utility functions
+/*************************************************************************/
+#ifndef MAX_SPEED
+void MLsup_XferWordFrUSB2IDE(void);
+void MLsup_XferWordFrIDE2USB(void);
+#endif
+
+void MLsup_XferPktFrIDE2USB(void);
+INT8 MLsup_XferPktFrMEM2USB(void);
+void MLsup_XferPktFrUSB2IDE(void);
+void MLsup_XferPktFrUSB2MEM(INT8 Len);
+
+void MLsup_DisconnectUSB(void);
+void MLsup_ConnectUSB(void);
+void MLsup_ReconnectUSB(void);
+
+void MLsup_USBSetupTokenHandler(void);
+
+void MLsup_AcknowledgeSETUP(void);
+void MLsup_StallEP0(void);
+
+void usb_EventCheck(void);
+
+#endif
+

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb-storage.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/s3c2410_sys.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/s3c2410_sys.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/s3c2410_sys.h	(revision 7613)
@@ -0,0 +1,79 @@
+/*=============================================================================
+// File Name : 2410addr.h
+// Function  : S3C2410 Define Address Register
+// Program   :
+// Date      : 06/17/2004
+// Version   : 1.00
+// History
+//   1.0.0 : Programming start (06/17/2004) -> SOP
+============================================================================== */
+
+#ifndef __S3C2410_SYS_H__
+#define __S3C2410_SYS_H__
+
+
+#ifndef __CREATOR_DEF_H__
+#include "asm/arch/lib/def.h"
+#endif
+
+#ifndef __S3C2410_H
+#include "asm/arch/s3c2410.h"
+#endif
+
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+#include "asm/arch/lib/creator_s3c2410_addr.h"
+
+
+#define EnableInterrupt(x) 	rINTMSK &= (~x);
+#define DisableInterrupt(x) rINTMSK |= (x);
+
+/*============================================================================================
+;Peripheral control registers
+;============================================================================================*/
+
+#define ATA_ADDR_BYTDATREG   (CF_TASK_BASE+0x0000) // DATA read/write 
+#define ATA_ADDR_ERRFEAREG   (CF_TASK_BASE+0x0002) // read error/write feature 
+#define ATA_ADDR_SECTCOUNT   (CF_TASK_BASE+0x0004) // sector count 
+#define ATA_ADDR_SECTORNO    (CF_TASK_BASE+0x0006) // sector number 
+#define ATA_ADDR_CYLINDLOW   (CF_TASK_BASE+0x0008) // cylinder low 
+#define ATA_ADDR_CYLINDHI    (CF_TASK_BASE+0x000A) // cylinder high 
+#define ATA_ADDR_SCARDHEAD   (CF_TASK_BASE+0x000C) // select card/head 
+#define ATA_ADDR_STATCOMMD   (CF_TASK_BASE+0x000E) // read status/write command 
+#define ATA_ADDR_CONTROL	 (CF_STATUS_BASE+0x000E) // write control 
+
+
+
+#define ATAREG4OUT_DATA             ATA_ADDR_BYTDATREG
+#define ATAREG4IN_DATA              ATA_ADDR_BYTDATREG
+#define ATAREG4OUT_FEATURE          ATA_ADDR_ERRFEAREG
+#define ATAREG4IN_ERROR             ATA_ADDR_ERRFEAREG
+#define ATAREG4OUT_SECTOR_COUNT     ATA_ADDR_SECTCOUNT
+#define ATAREG4IN_SECTOR_COUNT      ATA_ADDR_SECTCOUNT
+#define ATAREG4OUT_SECTOR_NUMBER    ATA_ADDR_SECTORNO
+#define ATAREG4IN_SECTOR_NUMBER     ATA_ADDR_SECTORNO
+#define ATAREG4OUT_CYLINDER_LOW     ATA_ADDR_CYLINDLOW
+#define ATAREG4IN_CYLINDER_LOW      ATA_ADDR_CYLINDLOW
+#define ATAREG4OUT_CYLINDER_HIGH    ATA_ADDR_CYLINDHI
+#define ATAREG4IN_CYLINDER_HIGH     ATA_ADDR_CYLINDHI
+#define ATAREG4OUT_DEVICE_HEAD      ATA_ADDR_SCARDHEAD
+#define ATAREG4IN_DEVICE_HEAD       ATA_ADDR_SCARDHEAD
+#define ATAREG4OUT_COMMAND          ATA_ADDR_STATCOMMD
+#define ATAREG4IN_STATUS			ATA_ADDR_STATCOMMD
+#define ATAREG4OUT_CONTROL          ATA_ADDR_CONTROL
+#define ATAREG4IN_ALTERNATE_STATUS  ATA_ADDR_STATCOMMD
+
+
+#define ATARead2BWriteD12_1B        0x4002
+#define ATARead0BWriteD12_2B        0x4004
+
+
+#define RaiseIRQL()	        DisableInterrupt(BIT_EINT1)  
+#define LowerIRQL()	        EnableInterrupt(BIT_EINT1)
+
+
+
+#endif	//  __S3C2410_SYS_H__

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/s3c2410_sys.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Isr.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Isr.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Isr.h	(revision 7613)
@@ -0,0 +1,36 @@
+   /*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	Hal4sys.H
+   // Author:       Hilbert Zhang ZhenYu
+   // Created:		Nov. 26 99
+   // Modified:
+   // Revision:		0.0
+   //
+   /*************************************************************************/
+   //
+   /*************************************************************************/
+#ifndef __ISR_H__
+#define __ISR_H__
+
+//#include    	"asm/arch/lib/creator_s3c2410_addr.h"
+
+
+
+
+
+
+
+void ISR_struct_init(void);
+void Init_D12(void);
+void close_D12(void);
+
+void Init_timer(void);
+void Close_timer(void);
+
+
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Isr.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4d12.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4d12.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4d12.h	(revision 7613)
@@ -0,0 +1,164 @@
+   /*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	    Hal4D12.H
+   // Author:           Hilbert Zhang ZhenYu
+   //                   Chew Thing Piao
+   // Created:		Oct. 1 99
+   // Modified:
+   // Revision:		0.0
+   //
+   /*************************************************************************/
+   //
+   /*************************************************************************/
+#ifndef __HAL4D12_H__
+#define __HAL4D12_H__
+
+
+
+// D12 data sheet
+#define D12_FIFOEMPTY      0xff
+
+#define EP0_TX_FIFO_SIZE   16
+#define EP0_RX_FIFO_SIZE   16
+#define EP0_PACKET_SIZE    16
+
+#define EP1_TX_FIFO_SIZE   16
+#define EP1_RX_FIFO_SIZE   16
+#define EP1_PACKET_SIZE    16
+
+#define EP2_TX_FIFO_SIZE   64
+#define EP2_RX_FIFO_SIZE   64
+#define EP2_PACKET_SIZE    64
+
+#define D12CMD_SNDRESUME        0xF6
+#define D12CMD_RDCURFRAME       0xF5
+
+#define D12CMD_SETADDR          0xD0
+#define D12CMD_SETENDP          0xD8
+#define D12CMD_SETMODE          0xF3
+#define D12CMD_SETDMA           0xFB
+
+#define D12CMD_RDIR             0xF4
+
+#define D12CMD_SELEP0OUT        0x00
+#define D12CMD_SELEP0IN         0x01
+#define D12CMD_SELEP1OUT        0x02
+#define D12CMD_SELEP1IN         0x03
+#define D12CMD_SELEP2OUT        0x04
+#define D12CMD_SELEP2IN         0x05
+
+#define D12CMD_RDBUFFER         0xF0
+#define D12CMD_WRBUFFER         0xF0
+#define D12CMD_ACKSETUP         0xF1
+#define D12CMD_CLRBUFFER        0xF2
+#define D12CMD_VALIDBUFFER      0xFA
+
+#define D12CMD_RDLTSEP0OUT      0x40
+#define D12CMD_RDLTSEP0IN       0x41
+#define D12CMD_RDLTSEP1OUT      0x42
+#define D12CMD_RDLTSEP1IN       0x43
+#define D12CMD_RDLTSEP2OUT      0x44
+#define D12CMD_RDLTSEP2IN       0x45
+
+#define D12CMD_SETEP0OUTSTS     0x40
+#define D12CMD_SETEP0INSTS      0x41
+#define D12CMD_SETEP1OUTSTS     0x42
+#define D12CMD_SETEP1INSTS      0x43
+#define D12CMD_SETEP2OUTSTS     0x44
+#define D12CMD_SETEP2INSTS      0x45
+
+#define D12CMD_RDEP0OUTSTS      0x80
+#define D12CMD_RDEP0INSTS       0x81
+#define D12CMD_RDEP1OUTSTS      0x82
+#define D12CMD_RDEP1INSTS       0x83
+#define D12CMD_RDEP2OUTSTS      0x84
+#define D12CMD_RDEP2INSTS       0x85
+
+
+
+#define D12_NOLAZYCLOCK			0x02
+#define D12_CLOCKRUNNING        0x04
+#define D12_INTERRUPTMODE		0x08
+#define D12_SOFTCONNECT			0x10
+#define D12_ENDP_NONISO			0x00
+#define D12_ENDP_ISOOUT			0x40
+#define D12_ENDP_ISOIN			0x80
+#define D12_ENDP_ISOIO			0xC0
+
+#define D12_CLOCK_12M			0x03
+#define D12_CLOCK_4M			0x0b
+#define D12_SETTOONE            0x40
+#define D12_SOFONLY				0x80
+
+#define D12_DMASINGLE			0x00
+#define D12_BURST_4				0x01
+#define D12_BURST_8				0x02
+#define D12_BURST_16			0x03
+#define D12_DMAENABLE           0x04
+#define D12_DMA_INTOKEN			0x08
+#define D12_AUTOLOAD			0x10
+#define D12_NORMALPLUSSOF		0x20
+#define D12_ENDP4INTENABLE		0x40
+#define D12_ENDP5INTENABLE		0x80	// bug fixed in V2.1
+
+#define D12_INT_ENDP0OUT		0x01
+#define D12_INT_ENDP0IN			0x02
+#define D12_INT_ENDP1OUT		0x04
+#define D12_INT_ENDP1IN			0x08
+#define D12_INT_ENDP2OUT		0x10
+#define D12_INT_ENDP2IN			0x20
+#define D12_INT_BUSRESET		0x40
+#define D12_INT_SUSPENDCHANGE	0x80
+#define D12_INT_EOT				0x0100
+
+#define D12_SETUPPACKET			0x20
+
+#define D12_BUFFER0FULL			0x20
+#define D12_BUFFER1FULL			0x40
+
+#define D12_FULLEMPTY			0x01
+#define D12_STALL				0x02
+
+
+void Hal4D12_SetAddressEnable(INT8 bAddress, bit bEnable);
+
+void Hal4D12_SetEndpointEnable(bit bEnable);
+
+//void Hal4D12_SendResume(void);
+
+void Hal4D12_AcknowledgeEndpoint(INT8 endp);
+
+void Hal4D12_SetMode(INT8 bConfig, INT8 bClkDiv);
+
+void Hal4D12_SetDMA(INT8 bMode);
+//INT8 Hal4D12_GetDMA(void);
+
+//INT16 Hal4D12_ReadInterruptRegister(void);
+void Hal4D12_ReadInterruptRegister( INT16 * pInterruptReg);
+
+INT8 Hal4D12_ReadLastTransactionStatus(INT8 bEndp);
+
+//INT8 Hal4D12_ReadEndpointStatus(INT8 bEndp);
+void Hal4D12_SetEndpointStatus(INT8 bEndp, INT8 bStalled);
+
+INT8 Hal4D12_SelectEndpoint(INT8 bEndp);
+
+INT8 Hal4D12_ReadEndpoint(INT8 endp, INT8 len, INT8 * buf);
+INT8 Hal4D12_ReadEPAtCode(INT8 endp, INT8 len);
+INT8 Hal4D12_WriteEndpoint(INT8 endp, INT8 len, INT8 * buf);
+INT8 Hal4D12_WriteEPAtCode(INT8 endp, INT8 len, INT8 * buf);
+
+void Hal4D12_ValidateBuffer(INT8 endp);
+void Hal4D12_ClearBuffer(INT8 endp);
+
+
+void Hal4D12_SingleTransmitEP0(INT8 * pData, INT8 len);
+void Hal4D12_AcknowledgeSETUP(void);
+void Hal4D12_StallEP0(void);
+
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4d12.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/tpbulk.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/tpbulk.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/tpbulk.h	(revision 7613)
@@ -0,0 +1,116 @@
+/*************************************************************************/   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	TPBulk.H
+   // Author:		ZhenYu Zhang
+   // Created:		Feb. 1, 1999
+   // Modified:
+   // Revision:		0.0
+   //
+/*************************************************************************/
+   //
+/*************************************************************************/
+
+#ifndef __TPBULK_H__
+#define __TPBULK_H__
+
+
+#include "asm/arch/lib/usb/basictyp.h"
+#include "asm/arch/lib/usb/rbccmd.h"
+
+
+#define CSW_GOOD        0x00
+#define CSW_FAIL        0x01
+#define CSW_PHASE_ERROR 0x02
+
+#ifdef  LITTLE_ENDIAN
+#define CBW_SIGNATURE   0x43425355
+#define CSW_SIGNATURE   0x53425355
+#endif
+
+#ifdef   BIG_ENDIAN
+#define CBW_SIGNATURE   0x55534243
+#define CSW_SIGNATURE   0x55534253
+#endif
+
+#define CBW_FLAG_IN     0x80
+
+#define MAX_CDBLEN      0x10
+
+typedef struct _COMMAND_BLOCK_WRAPPER{
+    INT32   dCBW_Signature;
+    INT32   dCBW_Tag;
+    INT32   dCBW_DataXferLen;
+    INT8    bCBW_Flag;
+    INT8    bCBW_LUN;
+    INT8    bCBW_CDBLen;
+    CDB_RBC cdbRBC;
+} __attribute__ ((packed)) CBW, *PCBW;
+
+typedef struct _COMMAND_STATUS_WRAPPER{
+    INT32   dCSW_Signature;
+    INT32   dCSW_Tag;
+    INT32   dCSW_DataResidue;
+    INT8    bCSW_Status;
+} __attribute__ ((packed)) CSW, *PCSW;
+
+typedef union _TPBULK_STRUC {
+    CBW     TPBulk_CommandBlock;
+    CSW     TPBulk_CommandStatus;
+
+} __attribute__ ((packed)) TPBLK_STRUC, * PTPBLK_STRUC;
+
+/*************************************************************************/
+// USB Class Request Functions
+// and
+// Public Functions 
+/*************************************************************************/
+
+// Host Device Disagreement Matrix
+enum _HOST_DEV_DISAGREE {
+CASEOK = 0,
+CASE1,
+CASE2,
+CASE3,
+CASE4,
+CASE5,
+CASE6,
+CASE7,
+CASE8,
+CASE9,
+CASE10,
+CASE11,
+CASE12,
+CASE13,
+CASECBW,
+CASECMDFAIL
+};
+
+
+
+/*************************************************************************/
+// C[ommand]D[ata]S[tatus] architecture for mass storage device over Bulk
+// only Transport
+/*************************************************************************/
+void TPBulk_GetMaxLUN(void);
+void TPBulk_ResetATA(void);
+
+
+void TPBulk_CBWHandler( void );
+void TPBulk_CSWHandler( void );
+
+
+/*************************************************************************/
+// Bulk Only Transport support functions
+/*************************************************************************/
+
+INT8 TPBulksup_ReadFrBOEP(INT8 Len);
+INT8 TPBulksup_WriteToBIEP(INT8 Len);
+
+BOOLEAN TPBulksup_IsCBWValid(void);
+void TPBulksup_ErrorHandler(INT8 HostDevCase,INT16 wByteCounterDevWillXfer);
+
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/tpbulk.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/chap_9.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/chap_9.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/chap_9.h	(revision 7613)
@@ -0,0 +1,130 @@
+   /*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	CHAP_9.H
+   // Author:       Hilbert Zhang ZhenYu
+   // Created:		Nov. 26 99
+   // Modified:
+   // Revision:		0.0
+   //
+   /*************************************************************************/
+   //
+   /*************************************************************************/
+
+
+#ifndef __CHAP_9_H__
+#define __CHAP_9_H__
+
+
+/*************************************************************************/
+// basic #defines
+/*************************************************************************/
+#define MAX_ENDPOINTS      0x16
+
+#define STR_INDEX_LANGUAGE						    0x00	
+#define STR_INDEX_MANUFACTURER					    0x01	
+#define STR_INDEX_PRODUCT						    0x02	
+#define STR_INDEX_SERIALNUMBER					    0x03
+#define STR_INDEX_CONFIGURATION					    0x04	
+#define STR_INDEX_INTERFACE						    0x05
+
+#define USB_CLASS_CODE_MASSSTORAGE_CLASS_DEVICE             0x08
+
+#define USB_SUBCLASS_CODE_RBC			                    0x01
+#define USB_SUBCLASS_CODE_SFF8020I			                0x02
+#define USB_SUBCLASS_CODE_QIC157			                0x03
+#define USB_SUBCLASS_CODE_UFI			                    0x04
+#define USB_SUBCLASS_CODE_SFF8070I			                0x05
+#define USB_SUBCLASS_CODE_SCSI			                    0x06
+
+#define USB_PROTOCOL_CODE_CBI0								0x00
+#define USB_PROTOCOL_CODE_CBI1								0x01
+#define USB_PROTOCOL_CODE_BULK								0x50
+
+/*************************************************************************/
+// masks
+/*************************************************************************/
+
+#define USB_RECIPIENT            (INT8)0x1F
+#define USB_RECIPIENT_DEVICE     (INT8)0x00
+#define USB_RECIPIENT_INTERFACE  (INT8)0x01
+#define USB_RECIPIENT_ENDPOINT   (INT8)0x02
+
+#define USB_REQUEST_TYPE_MASK    (INT8)0x60
+#define USB_STANDARD_REQUEST     (INT8)0x00
+#define USB_CLASS_REQUEST        (INT8)0x20
+#define USB_VENDOR_REQUEST       (INT8)0x40
+
+#define USB_REQUEST_MASK         (INT8)0xFF
+
+#define DEVICE_ADDRESS_MASK      0x7F
+
+/* GetStatus */
+#define DEVSTS_SELFPOWERED       0x01
+#define DEVSTS_REMOTEWAKEUP      0x02
+
+#define ENDPSTS_HALT             0x01
+
+/*************************************************************************/
+// USB Protocol Layer
+/*************************************************************************/
+
+typedef struct _USB_STRING_LANGUAGE_DESCRIPTOR {
+	INT8  bLength;
+	INT8  bDescriptorType;
+	INT16 ulanguageID;
+} __attribute__ ((packed))  USB_STRING_LANGUAGE_DESCRIPTOR,*PUSB_STRING_LANGUAGE_DESCRIPTOR;
+
+typedef struct _USB_STRING_INTERFACE_DESCRIPTOR {
+	INT8  bLength;
+	INT8  bDescriptorType;
+	INT8  Interface[22];
+} __attribute__ ((packed))  USB_STRING_INTERFACE_DESCRIPTOR,*PUSB_STRING_INTERFACE_DESCRIPTOR;
+
+typedef struct _USB_STRING_CONFIGURATION_DESCRIPTOR {
+	INT8  bLength;
+	INT8  bDescriptorType;
+	INT8  Configuration[16];
+} __attribute__ ((packed))  USB_STRING_CONFIGURATION_DESCRIPTOR,*PUSB_STRING_CONFIGURATION_DESCRIPTOR;
+
+typedef struct _USB_STRING_SERIALNUMBER_DESCRIPTOR {
+	INT8  bLength;
+	INT8  bDescriptorType;
+	INT8  SerialNum[24];
+} __attribute__ ((packed))  USB_STRING_SERIALNUMBER_DESCRIPTOR,*PUSB_STRING_SERIALNUMBER_DESCRIPTOR;
+
+typedef struct _USB_STRING_PRODUCT_DESCRIPTOR {
+	INT8  bLength;
+	INT8  bDescriptorType;
+	INT8  Product[30];
+} __attribute__ ((packed))  USB_STRING_PRODUCT_DESCRIPTOR,*PUSB_STRING_PRODUCT_DESCRIPTOR;
+
+typedef struct _USB_STRING_MANUFACTURER_DESCRIPTOR {
+	INT8  bLength;
+	INT8  bDescriptorType;
+	INT8  Manufacturer[24];
+} __attribute__ ((packed))  USB_STRING_MANUFACTURER_DESCRIPTOR,*PUSB_STRING_MANUFACTURER_DESCRIPTOR;
+
+/*************************************************************************/
+// USB standard device requests
+/*************************************************************************/
+void Chap9_GetStatus(void);
+void Chap9_ClearFeature(void);
+void Chap9_SetFeature(void);
+void Chap9_SetAddress(void);
+void Chap9_GetDescriptor(void);
+void Chap9_GetConfiguration(void);
+void Chap9_SetConfiguration(void);
+void Chap9_GetInterface(void);
+void Chap9_SetInterface(void);
+
+/*************************************************************************/
+// Chap9 support functions
+/*************************************************************************/
+void Chap9sup_SingleTransmitEP0(INT8 * buf, INT8 len);
+void Chap9sup_BurstTransmitEP0(void);
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/chap_9.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Ata.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Ata.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Ata.h	(revision 7613)
@@ -0,0 +1,351 @@
+////////////////////////////////////////////////////////////////////////////////////
+//
+// Copyright (c) 1999-2003 PHILIPS Semiconductors - APIC
+//
+// Module Name:
+//
+//	ATA.h
+//
+// Abstract:
+//
+//     This module contains the structures and definitions for the ATAPI
+//     IDE miniport driver.
+//
+// Author:
+//
+//     Hilbert Zhang ZhenYu
+//
+// Revision History:
+//
+//		Created  29 Apr. 1999
+//
+// Copyright @ 1999-2003, PHILIPS Semiconductors - APIC. All rights reserved.
+//
+
+
+#ifndef __ATA_H
+#define __ATA_H
+
+#include "asm/arch/lib/usb/basictyp.h"
+#include "asm/arch/lib/usb/Hal4d12.h"
+
+#define SECTOR_SIZE     512
+#if(EP2_PACKET_SIZE == 8)
+#define EP2PKTNUM_PER_SECTOR        64
+#define BITNUM4EP2PKT_PER_SECTOR    6
+#elif(EP2_PACKET_SIZE == 16)
+#define EP2PKTNUM_PER_SECTOR        32
+#define BITNUM4EP2PKT_PER_SECTOR    5
+#elif(EP2_PACKET_SIZE == 32)
+#define EP2PKTNUM_PER_SECTOR        16
+#define BITNUM4EP2PKT_PER_SECTOR    4
+#elif(EP2_PACKET_SIZE == 64)
+#define EP2PKTNUM_PER_SECTOR        8
+#define BITNUM4EP2PKT_PER_SECTOR    3
+#endif
+
+
+#define MULTI_BLOCK_1   1
+#define MULTI_BLOCK_2   2
+#define MULTI_BLOCK_4   4
+#define MULTI_BLOCK_8   8
+#define MULTI_BLOCK_16  16
+#define MULTI_BLOCK_32  32
+#define MULTI_BLOCK_64  64
+#define MULTI_BLOCK_128 128
+
+//
+// IDE register definition
+//
+
+typedef struct _IDE_REGISTERS_1 {
+	INT16 	Data;
+	INT8 	BlockCount;
+	INT8 	BlockNumber;
+	INT8 	CylinderLow;
+	INT8 	CylinderHigh;
+	INT8 	DriveSelect;
+	INT8 	Command;
+} __attribute__ ((packed))  IDE_REGISTERS_1, *PIDE_REGISTERS_1;
+
+typedef struct _IDE_REGISTERS_2 {
+	INT8 AlternateStatus;
+	INT8 DriveAddress;
+} __attribute__ ((packed))  IDE_REGISTERS_2, *PIDE_REGISTERS_2;
+
+typedef struct _IDE_REGISTERS_3 {
+	INT32 Data;
+	INT8 Others[4];
+} __attribute__ ((packed))  IDE_REGISTERS_3, *PIDE_REGISTERS_3;
+
+
+
+// IDE command definitions
+#define IDE_COMMAND_ATAPI_RESET      0x08
+#define IDE_COMMAND_RECALIBRATE      0x10
+#define IDE_COMMAND_READ             0x20
+#define IDE_COMMAND_WRITE            0x30
+#define IDE_COMMAND_VERIFY           0x40
+#define IDE_COMMAND_SEEK             0x70
+#define IDE_COMMAND_EXEC_DIAGNOSE    0x90
+#define IDE_COMMAND_SET_DRIVE_PARAMETERS 0x91
+#define IDE_COMMAND_ATAPI_PACKET     0xA0
+#define IDE_COMMAND_ATAPI_IDENTIFY   0xA1
+#define IDE_COMMAND_READ_MULTIPLE    0xC4
+#define IDE_COMMAND_WRITE_MULTIPLE   0xC5
+#define IDE_COMMAND_SET_MULTIPLE     0xC6
+#define IDE_COMMAND_READ_DMA         0xC8
+#define IDE_COMMAND_WRITE_DMA             0xCA
+#define IDE_COMMAND_GET_MEDIA_STATUS      0xDA
+#define IDE_COMMAND_ENABLE_MEDIA_STATUS   0xEF
+#define IDE_COMMAND_IDENTIFY              0xEC
+#define IDE_COMMAND_MEDIA_EJECT           0xED
+
+
+// IDE status definitions
+
+#define IDE_STATUS_ERROR             0x01
+#define IDE_STATUS_INDEX             0x02
+#define IDE_STATUS_CORRECTED_ERROR   0x04
+#define IDE_STATUS_DRQ               0x08
+#define IDE_STATUS_DSC               0x10
+#define IDE_STATUS_DRDY              0x40
+#define IDE_STATUS_IDLE              0x50
+#define IDE_STATUS_BUSY              0x80
+
+
+// IDE drive select/head definitions
+
+#define IDE_DRIVE_SELECT_1           0xA0
+#define IDE_DRIVE_SELECT_2           0x10
+
+
+// IDE drive control definitions
+
+#define IDE_DC_DISABLE_INTERRUPTS    0x02
+#define IDE_DC_RESET_CONTROLLER      0x04
+#define IDE_DC_REENABLE_CONTROLLER   0x00
+
+
+// IDE error definitions
+
+#define IDE_ERROR_BAD_BLOCK          0x80
+#define IDE_ERROR_DATA_ERROR         0x40
+#define IDE_ERROR_MEDIA_CHANGE       0x20
+#define IDE_ERROR_ID_NOT_FOUND       0x10
+#define IDE_ERROR_MEDIA_CHANGE_REQ   0x08
+#define IDE_ERROR_COMMAND_ABORTED    0x04
+#define IDE_ERROR_END_OF_MEDIA       0x02
+#define IDE_ERROR_ILLEGAL_LENGTH     0x01
+
+
+
+// ATAPI Register Files
+
+
+
+typedef struct _ATAPI_REGISTERS_1 {
+	INT16 Data;
+	INT8 InterruptReason;
+	INT8 Unused1;
+	INT8 ByteCountLow;
+	INT8 ByteCountHigh;
+	INT8 DriveSelect;
+	INT8 Command;
+} __attribute__ ((packed))  ATAPI_REGISTERS_1, *PATAPI_REGISTERS_1;
+
+typedef struct _ATAPI_REGISTERS_2 {
+	INT8 AlternateStatus;
+	INT8 DriveAddress;
+} __attribute__ ((packed))  ATAPI_REGISTERS_2, *PATAPI_REGISTERS_2;
+
+
+
+
+// ATAPI interrupt reasons
+#define ATAPI_IR_COD 0x01
+#define ATAPI_IR_IO  0x02
+
+
+// ATAPI command definitions
+#define ATAPI_READ10       0x28
+#define ATAPI_WRITE10      0x2A
+#define ATAPI_MODE_SENSE   0x5A
+#define ATAPI_MODE_SELECT  0x55
+#define ATAPI_FORMAT_UNIT  0x24
+
+
+// ATAPI Command Descriptor Block
+typedef struct _READ_10 {
+		INT8 OperationCode;
+		INT8 Reserved1;
+		INT8 LBA_3;
+		INT8 LBA_2;
+        INT8 LBA_1;
+		INT8 LBA_0;
+		INT8 Reserved2;
+		INT8 XferLen_1;
+		INT8 XferLen_0;
+		INT8 Reserved3[3];
+} __attribute__ ((packed))  READ_10, * PREAD_10;
+
+
+
+typedef struct _WRITE_10 {
+		INT8 OperationCode;
+		INT8 Reserved1;
+		INT8 LBA_3;
+		INT8 LBA_2;
+        INT8 LBA_1;
+		INT8 LBA_0;
+		INT8 Reserved2;
+		INT8 XferLen_1;
+		INT8 XferLen_0;
+		INT8 Reserved3[3];
+} __attribute__ ((packed))  WRITE_10, *PWRITE_10;
+
+typedef struct _MODE_SENSE_10 {
+		INT8 OperationCode;
+		INT8 Reserved1;
+		INT8 PageCode : 6;
+		INT8 Pc : 2;
+		INT8 Reserved2[4];
+		INT8 ParameterListLengthMsb;
+		INT8 ParameterListLengthLsb;
+		INT8 Reserved3[3];
+} __attribute__ ((packed))  MODE_SENSE_10, *PMODE_SENSE_10;
+
+typedef struct _MODE_SELECT_10 {
+		INT8 OperationCode;
+		INT8 Reserved1 : 4;
+		INT8 PFBit : 1;
+		INT8 Reserved2 : 3;
+		INT8 Reserved3[5];
+		INT8 ParameterListLengthMsb;
+		INT8 ParameterListLengthLsb;
+		INT8 Reserved4[3];
+} __attribute__ ((packed))  MODE_SELECT_10, *PMODE_SELECT_10;
+
+typedef union _ATAPI_COMMAND_PACKET {
+
+    READ_10         CmdRead10;
+    WRITE_10        CmdWrite10;
+    MODE_SELECT_10  CmdModeSel10;
+    MODE_SENSE_10   CmdModeSen10;
+} __attribute__ ((packed))  ATAPI_COMMAND_PACKET, * PATAPI_COMMAND_PACKET;
+
+typedef struct _MODE_PARAMETER_HEADER_10 {
+	INT8 ModeDataLengthMsb;
+	INT8 ModeDataLengthLsb;
+	INT8 MediumType;
+	INT8 Reserved[5];
+} __attribute__ ((packed)) MODE_PARAMETER_HEADER_10, *PMODE_PARAMETER_HEADER_10;
+
+
+// IDENTIFY data
+typedef struct _IDENTIFY_DATA {
+	INT16 GeneralConfiguration;            // 00 00
+	INT16 NumberOfCylinders;               // 02  1
+	INT16 Reserved1;                       // 04  2
+	INT16 NumberOfHeads;                   // 06  3
+	INT16 UnformattedBytesPerTrack;        // 08  4
+	INT16 UnformattedBytesPerSector;       // 0A  5
+	INT16 SectorsPerTrack;                 // 0C  6
+	INT16 VendorUnique1[3];                // 0E  7-9
+	INT16 SerialNumber[10];                // 14  10-19
+	INT16 BufferType;                      // 28  20
+	INT16 BufferSectorSize;                // 2A  21
+	INT16 NumberOfEccBytes;                // 2C  22
+	INT16 FirmwareRevision[4];             // 2E  23-26
+    INT16 ModelNumber[20];                 // 36  27-46
+    INT16  MaximumBlockTransfer;            // 5E 47
+	//INT8  VendorUnique2;                   // 5F
+    INT16 DoubleWordIo;                    // 60  48
+    INT16 Capabilities;                    // 62  49
+    INT16 Reserved2;                       // 64  50
+    INT8  VendorUnique3;                   // 66  51
+    INT8  PioCycleTimingMode;              // 67
+    INT8  VendorUnique4;                   // 68  52
+    INT8  DmaCycleTimingMode;              // 69
+    INT16 TranslationFieldsValid:1;        // 6A  53
+    INT16 Reserved3:15;
+    INT16 NumberOfCurrentCylinders;        // 6C  54
+    INT16 NumberOfCurrentHeads;            // 6E  55
+    INT16 CurrentSectorsPerTrack;          // 70  56
+    INT32  CurrentSectorCapacity;           // 72  57-58
+    INT16 CurrentMultiSectorSetting;       //     59
+    INT32  UserAddressableSectors;          //     60-61
+    INT16 SingleWordDMASupport : 8;        //     62
+    INT16 SingleWordDMAActive : 8;
+    INT16 MultiWordDMASupport : 8;         //     63
+    INT16 MultiWordDMAActive : 8;
+    INT16 AdvancedPIOModes : 8;            //     64
+    INT16 Reserved4 : 8;
+    INT16 MinimumMWXferCycleTime;          //     65
+    INT16 RecommendedMWXferCycleTime;      //     66
+	INT16 MinimumPIOCycleTime;             //     67
+	INT16 MinimumPIOCycleTimeIORDY;        //     68
+    INT16 Reserved5[2];                    //     69-70
+    INT16 ReleaseTimeOverlapped;           //     71
+    INT16 ReleaseTimeServiceCommand;       //     72
+    INT16 MajorRevision;                   //     73
+    INT16 MinorRevision;                   //     74
+    INT16 Reserved6[50];                   //     75-126
+    INT16 SpecialFunctionsEnabled;         //     127
+    INT16 Reserved7[128];                  //     128-255
+} __attribute__ ((packed))  IDENTIFY_DATA, *PIDENTIFY_DATA;
+
+
+// Identify data without the Reserved4.
+typedef struct _IDENTIFY_DATA2 {
+    INT16 GeneralConfiguration;            // 00
+    INT16 NumberOfCylinders;               // 02
+//    INT16 Reserved1;                       // 04
+    INT16 NumberOfHeads;                   // 06
+//    INT16 UnformattedBytesPerTrack;        // 08
+//    INT16 UnformattedBytesPerSector;       // 0A
+    INT16 SectorsPerTrack;                 // 0C
+//    INT16 VendorUnique1[3];                // 0E
+//    INT16 SerialNumber[10];                // 14
+//    INT16 BufferType;                      // 28
+//    INT16 BufferSectorSize;                // 2A
+//	INT16 NumberOfEccBytes;                // 2C
+//    INT16 FirmwareRevision[4];             // 2E
+//    INT16 ModelNumber[20];                 // 36
+    INT16  MaximumBlockTransfer;            // 5E
+//    INT8  VendorUnique2;                   // 5F
+//    INT16 DoubleWordIo;                    // 60
+    INT16 Capabilities;                    // 62
+//    INT16 Reserved2;                       // 64
+//    INT8  VendorUnique3;                   // 66
+//	INT8  PioCycleTimingMode;              // 67
+//    INT8  VendorUnique4;                   // 68
+//    INT8  DmaCycleTimingMode;              // 69
+//    INT16 TranslationFieldsValid:1;        // 6A
+//    INT16 Reserved3:15;
+    INT16 NumberOfCurrentCylinders;        // 6C
+    INT16 NumberOfCurrentHeads;            // 6E
+    INT16 CurrentSectorsPerTrack;          // 70
+    FLEXI_INT32 CurrentSectorCapacity;           // 72
+} __attribute__ ((packed))  IDENTIFY_DATA2, *PIDENTIFY_DATA2;
+
+#define IDENTIFY_DATA_SIZE sizeof(IDENTIFY_DATA)
+
+// IDENTIFY capability bit definitions.
+#define IDENTIFY_CAPABILITIES_DMA_SUPPORTED 0x0100
+#define IDENTIFY_CAPABILITIES_LBA_SUPPORTED 0x0200
+
+// IDENTIFY DMA timing cycle modes.
+#define IDENTIFY_DMA_CYCLES_MODE_0 0x00
+#define IDENTIFY_DMA_CYCLES_MODE_1 0x01
+#define IDENTIFY_DMA_CYCLES_MODE_2 0x02
+
+
+
+
+
+#endif /* ATAPI_H */
+
+
+
+

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Ata.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbc.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbc.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbc.h	(revision 7613)
@@ -0,0 +1,81 @@
+////////////////////////////////////////////////////////////////////////////////////
+//
+// Copyright (c) 1999-2003 PHILIPS Semiconductors - APIC
+//
+// Module Name:
+//
+//	rbc.h
+//
+// Abstract:
+//
+//    These are the structures and defines used in the Reduced Block Command set//
+
+// Author:
+//
+//     Hilbert Zhang ZhenYu
+//
+// Revision History:
+//
+//		Created  29 Apr. 1999
+//
+// Copyright @ 1999-2003, PHILIPS Semiconductors - APIC. All rights reserved.
+//
+//  Implementation Notes:
+//      1. LUN
+//          In SCSI-2, 3 bits LUN locates the highest 3 bits of the byte next to
+//          OperationCode of the command Request.
+//          In SCSI-3, 4 Bits LUN is controlled by Transport Protocol,
+//              RBC and SPC-2 are parts of SCSI-3
+//
+
+#ifndef __RBC_
+#define __RBC_
+
+#include "asm/arch/lib/usb/basictyp.h"
+
+typedef union _RBC_PROP {
+	struct {
+        INT8    MediumRemovFlag : 2;
+	    INT8    MediumState : 2;
+	    INT8    PowerState : 4;
+    }__attribute__ ((packed))  bits;
+
+    INT8 value;
+} __attribute__ ((packed))  RBC_PROPERTY, * PRBC_PROPERTY;
+
+
+////////////////////////////////////////////////////////////////////////////////////
+// Functions
+////////////////////////////////////////////////////////////////////////////////////
+
+
+BOOLEAN RBC_Handler(void);
+
+BOOLEAN RBC_Read(void);
+BOOLEAN RBC_ReadCapacity(void);
+BOOLEAN RBC_OnOffUnit(void);
+BOOLEAN RBC_Verify(void);
+BOOLEAN RBC_Write(void);
+BOOLEAN RBC_SyncCache(void);
+
+BOOLEAN SPC_Inquiry(void);
+BOOLEAN SPC_ModeSelect(void);
+BOOLEAN SPC_ModeSense(void);
+BOOLEAN SPC_LockMedia(void);
+BOOLEAN SPC_TestUnit(void);
+BOOLEAN SPC_RequestSense(void);
+
+//Optional
+BOOLEAN RBC_Format(void);
+BOOLEAN SPC_Reserve6(void);
+BOOLEAN SPC_Release6(void);
+BOOLEAN SPC_PersisReserveIn(void);
+BOOLEAN SPC_PersisReserveOut(void);
+BOOLEAN SPC_WriteBuff(void);
+BOOLEAN SPC_READLONG(void);
+
+
+void RBC_BuildSenseData(INT8 SenseKey,INT8 ASC, INT8 ASCQ);
+
+#endif
+

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/rbc.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb100.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb100.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb100.h	(revision 7613)
@@ -0,0 +1,243 @@
+/*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	USB100.H
+   // Author:       Hilbert Zhang ZhenYu
+   // Created:		Nov. 26 99
+   // Modified:
+   // Revision:		0.0
+   //
+/*************************************************************************/
+   //
+/*************************************************************************/
+
+#ifndef   __USB100_H__
+#define   __USB100_H__
+
+
+#define MAXIMUM_USB_STRING_LENGTH 255
+
+// values for the bits returned by the USB GET_STATUS command
+#define USB_GETSTATUS_SELF_POWERED                0x01
+#define USB_GETSTATUS_REMOTE_WAKEUP_ENABLED       0x02
+
+
+#define USB_DEVICE_DESCRIPTOR_TYPE                0x01
+#define USB_CONFIGURATION_DESCRIPTOR_TYPE         0x02
+#define USB_STRING_DESCRIPTOR_TYPE                0x03
+#define USB_INTERFACE_DESCRIPTOR_TYPE             0x04
+#define USB_ENDPOINT_DESCRIPTOR_TYPE              0x05
+#define USB_POWER_DESCRIPTOR_TYPE                 0x06
+
+#define USB_DESCRIPTOR_MAKE_TYPE_AND_INDEX(d, i) ((INT16)((INT16)d<<8 | i))
+
+//
+// Values for bmAttributes field of an
+// endpoint descriptor
+//
+
+#define USB_ENDPOINT_TYPE_MASK                    0x03
+
+#define USB_ENDPOINT_TYPE_CONTROL                 0x00
+#define USB_ENDPOINT_TYPE_ISOCHRONOUS             0x01
+#define USB_ENDPOINT_TYPE_BULK                    0x02
+#define USB_ENDPOINT_TYPE_INTERRUPT               0x03
+
+
+//
+// definitions for bits in the bmAttributes field of a 
+// configuration descriptor.
+//
+#define USB_CONFIG_POWERED_MASK                   0xc0
+
+#define USB_CONFIG_BUS_POWERED                    0x80
+#define USB_CONFIG_SELF_POWERED                   0x40
+#define USB_CONFIG_REMOTE_WAKEUP                  0x20
+
+//
+// Endpoint direction bit, stored in address
+//
+
+#define USB_ENDPOINT_DIRECTION_MASK               0x80
+
+// test direction bit in the bEndpointAddress field of
+// an endpoint descriptor.
+#define USB_ENDPOINT_DIRECTION_OUT(addr)          (!((addr) & USB_ENDPOINT_DIRECTION_MASK))
+#define USB_ENDPOINT_DIRECTION_IN(addr)           ((addr) & USB_ENDPOINT_DIRECTION_MASK)
+
+//
+// USB defined request codes
+// see chapter 9 of the USB 1.0 specifcation for
+// more information.
+//
+
+// These are the correct values based on the USB 1.0
+// specification
+
+#define USB_REQUEST_GET_STATUS                    0x00
+#define USB_REQUEST_CLEAR_FEATURE                 0x01
+
+#define USB_REQUEST_SET_FEATURE                   0x03
+
+#define USB_REQUEST_SET_ADDRESS                   0x05
+#define USB_REQUEST_GET_DESCRIPTOR                0x06
+#define USB_REQUEST_SET_DESCRIPTOR                0x07
+#define USB_REQUEST_GET_CONFIGURATION             0x08
+#define USB_REQUEST_SET_CONFIGURATION             0x09
+#define USB_REQUEST_GET_INTERFACE                 0x0A
+#define USB_REQUEST_SET_INTERFACE                 0x0B
+#define USB_REQUEST_SYNC_FRAME                    0x0C
+
+
+//
+// defined USB device classes
+//
+
+
+#define USB_DEVICE_CLASS_RESERVED           0x00
+#define USB_DEVICE_CLASS_AUDIO              0x01
+#define USB_DEVICE_CLASS_COMMUNICATIONS     0x02
+#define USB_DEVICE_CLASS_HUMAN_INTERFACE    0x03
+#define USB_DEVICE_CLASS_MONITOR            0x04
+#define USB_DEVICE_CLASS_PHYSICAL_INTERFACE 0x05
+#define USB_DEVICE_CLASS_POWER              0x06
+#define USB_DEVICE_CLASS_PRINTER            0x07
+#define USB_DEVICE_CLASS_STORAGE            0x08
+#define USB_DEVICE_CLASS_HUB                0x09
+#define USB_DEVICE_CLASS_VENDOR_SPECIFIC    0xFF
+
+//
+// USB defined Feature selectors
+//
+
+#define USB_FEATURE_ENDPOINT_STALL          0x0000
+#define USB_FEATURE_REMOTE_WAKEUP           0x0001
+#define USB_FEATURE_POWER_D0                0x0002
+#define USB_FEATURE_POWER_D1                0x0003
+#define USB_FEATURE_POWER_D2                0x0004
+#define USB_FEATURE_POWER_D3                0x0005
+
+typedef struct _USB_DEVICE_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+    INT16 bcdUSB;
+    INT8 bDeviceClass;
+    INT8 bDeviceSubClass;
+    INT8 bDeviceProtocol;
+    INT8 bMaxPacketSize0;
+    INT16 idVendor;
+    INT16 idProduct;
+    INT16 bcdDevice;
+    INT8 iManufacturer;
+    INT8 iProduct;
+    INT8 iSerialNumber;
+    INT8 bNumConfigurations;
+} __attribute__ ((packed)) USB_DEVICE_DESCRIPTOR, *PUSB_DEVICE_DESCRIPTOR;
+
+#define MAX_ENDPOINTS      0x16
+
+typedef struct _USB_ENDPOINT_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+    INT8 bEndpointAddress;
+    INT8 bmAttributes;
+    INT16 wMaxPacketSize;
+    INT8 bInterval;
+} __attribute__ ((packed))  USB_ENDPOINT_DESCRIPTOR, *PUSB_ENDPOINT_DESCRIPTOR;
+
+//
+// values for bmAttributes Field in
+// USB_CONFIGURATION_DESCRIPTOR
+//
+
+#define BUS_POWERED                           0x80
+#define SELF_POWERED                          0x40
+#define REMOTE_WAKEUP                         0x20
+
+typedef struct _USB_CONFIGURATION_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+    INT16 wTotalLength;
+    INT8 bNumInterfaces;
+    INT8 bConfigurationValue;
+    INT8 iConfiguration;
+    INT8 bmAttributes;
+    INT8 MaxPower;
+} __attribute__ ((packed)) USB_CONFIGURATION_DESCRIPTOR, *PUSB_CONFIGURATION_DESCRIPTOR;
+
+typedef struct _USB_INTERFACE_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+    INT8 bInterfaceNumber;
+    INT8 bAlternateSetting;
+    INT8 bNumEndpoints;
+    INT8 bInterfaceClass;
+    INT8 bInterfaceSubClass;
+    INT8 bInterfaceProtocol;
+    INT8 iInterface;
+} __attribute__ ((packed))  USB_INTERFACE_DESCRIPTOR, *PUSB_INTERFACE_DESCRIPTOR;
+
+typedef struct _USB_STRING_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+    INT8 bString[1];
+} __attribute__ ((packed))  USB_STRING_DESCRIPTOR, *PUSB_STRING_DESCRIPTOR;
+
+//
+// USB power descriptor added to core specification
+//
+
+#define USB_SUPPORT_D0_COMMAND      0x01
+#define USB_SUPPORT_D1_COMMAND      0x02
+#define USB_SUPPORT_D2_COMMAND      0x04
+#define USB_SUPPORT_D3_COMMAND      0x08
+
+#define USB_SUPPORT_D1_WAKEUP       0x10
+#define USB_SUPPORT_D2_WAKEUP       0x20
+
+
+typedef struct _USB_POWER_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+    INT8 bCapabilitiesFlags;
+    INT16 EventNotification;
+    INT16 D1LatencyTime;
+    INT16 D2LatencyTime;
+    INT16 D3LatencyTime;
+    INT8 PowerUnit;
+    INT16 D0PowerConsumption;
+    INT16 D1PowerConsumption;
+    INT16 D2PowerConsumption;
+} __attribute__ ((packed))  USB_POWER_DESCRIPTOR, *PUSB_POWER_DESCRIPTOR;
+
+
+typedef struct _USB_COMMON_DESCRIPTOR {
+    INT8 bLength;
+    INT8 bDescriptorType;
+} __attribute__ ((packed))  USB_COMMON_DESCRIPTOR, *PUSB_COMMON_DESCRIPTOR;
+
+
+//
+// Standard USB HUB definitions 
+//
+// See Chapter 11
+//
+
+typedef struct _USB_HUB_DESCRIPTOR {
+    INT8        bDescriptorLength;      // Length of this descriptor
+    INT8        bDescriptorType;        // Hub configuration type
+    INT8        bNumberOfPorts;         // number of ports on this hub
+    INT16       wHubCharacteristics;    // Hub Charateristics
+    INT8        bPowerOnToPowerGood;    // port power on till power good in 2ms
+    INT8        bHubControlCurrent;     // max current in mA
+    //
+    // room for 255 ports power control and removable bitmask
+    INT8        bRemoveAndPowerMask[64];
+} __attribute__ ((packed))  USB_HUB_DESCRIPTOR, *PUSB_HUB_DESCRIPTOR;
+
+
+#endif   /* __USB100_H__ */

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/usb100.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/syscnfg.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/syscnfg.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/syscnfg.h	(revision 7613)
@@ -0,0 +1,36 @@
+/*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	syscnfg.H
+   // Author:       Hilbert Zhang ZhenYu
+   // Created:		Nov. 26 99
+   // Modified:
+   // Revision:		0.0
+   //
+/*************************************************************************/
+   //
+/*************************************************************************/
+#ifndef __SYSCONFIG_H__
+#define __SYSCONFIG_H__
+
+//#define DEBUG
+#undef DEBUG
+
+//#define MAX_SPEED
+#undef MAX_SPEED
+
+#define WORK_AT_24MHZ
+#undef  WORK_AT_12MHZ
+#undef  WORK_AT_36MHZ
+#undef  WORK_AT_48MHZ
+
+//#define BIG_ENDIAN
+//#undef  LITTLE_ENDIAN
+#undef BIG_ENDIAN
+#define  LITTLE_ENDIAN
+
+#endif
\ No newline at end of file

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/syscnfg.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/basictyp.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/basictyp.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/basictyp.h	(revision 7613)
@@ -0,0 +1,175 @@
+   //*************************************************************************
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:        BasicTyp.H
+   // Author:           Hilbert Zhang ZhenYu
+   //                   Chew Thing Piao
+   // Created:          Oct. 1 99
+   // Modified:
+   // Revision: 		0.0
+   //
+   /*************************************************************************/
+   //
+   /*************************************************************************/
+
+
+#ifndef __BASIC_TYPE_H__
+#define __BASIC_TYPE_H__
+
+
+#define IRQL_0
+#define IRQL_1
+
+#define OUT
+#define IN
+
+/*************************************************************************/
+// basic typedefs
+/*************************************************************************/
+typedef unsigned char       sbit;
+typedef unsigned char       bit;
+typedef unsigned char   	BOOLEAN;
+
+typedef unsigned char       INT8;
+typedef unsigned short      INT16;
+typedef unsigned long       INT32;
+typedef unsigned char *     PINT8;
+typedef unsigned short *    PINT16;
+typedef unsigned long *     PINT32;
+
+
+//typedef bit                 BOOLEAN;
+//typedef bit                 int;
+
+
+
+#define SFR    sfr		 // 8 bits special function register
+#define SBIT   sbit		 // bit access special function register
+
+#define DATA   data		 // direct access internal data RAM
+#define IDATA  idata		 // indirect access internal data RAM
+#define XDATA  xdata		 // external access external data RAM
+#define PDATA  pdata		 // paged access external data RAM
+#define CODE   code		 // program code area
+
+
+/*************************************************************************/
+// basic typedefs for structures
+/*************************************************************************/
+#ifdef BIG_ENDIAN
+typedef union {
+    struct 
+    {
+        INT8    Type;
+        INT8    Index;
+    } Descriptor;
+
+    struct 
+    {
+        INT8 tx0;  // MSB for 8051 Keil C
+        INT8 tx1;   
+        INT8 endp;   
+        INT8 c0;   // LSB for 8051 Keil C
+    } chars;
+
+    struct 
+    {
+        INT8 c3;  // MSB for 8051 Keil C
+        INT8 c2;   
+        INT8 c1;   
+        INT8 c0;   // LSB for 8051 Keil C
+    } chars0;
+
+    struct
+    {
+        INT16 i1;    // MSW for 8051 keil C
+        INT16 i0;    // LSW for 8051 Keil C
+    } ints;
+
+    INT32 u0;
+
+} FLEXI_INT32;
+
+typedef union  {
+    struct 
+    {
+        INT8 c1;   // MSB for 8051 Keil C
+        INT8 c0;   // LSB for 8051 Keil C
+    } chars;
+
+    INT16 i0;
+} FLEXI_INT16, * PFLEXI_INT16;
+
+#else // Little Endian
+
+typedef union {
+    struct 
+    {       
+        INT8    Index;
+        INT8    Type;
+        INT8    desc0;
+        INT8    desc1;
+    }__attribute__ ((packed))  Descriptor;
+
+    struct 
+    {
+        INT8 endp;   
+        INT8 c0;   
+        INT8 tx0;  
+        INT8 tx1;   
+    }__attribute__ ((packed))  chars;
+
+    struct 
+    {
+        INT8 c0;	// LSB
+        INT8 c1;   
+        INT8 c2;   
+        INT8 c3;	// MSB 
+    }__attribute__ ((packed))  chars0;
+
+    struct
+    {
+        INT16 i0;    // LSW 
+        INT16 i1;    // MSW 
+    }__attribute__ ((packed))  ints;
+
+    INT32 u0;
+
+}__attribute__ ((packed))  FLEXI_INT32;
+
+typedef union  {
+    struct 
+    {
+        INT8 c0;   // LSB for 8051 Keil C
+        INT8 c1;   // MSB for 8051 Keil C
+    }__attribute__ ((packed))  chars;
+
+    INT16 i0;
+}__attribute__ ((packed))  FLEXI_INT16, * PFLEXI_INT16;
+#endif 
+
+
+#define DATA_SEG    data
+#define BDATA_SEG   bdata
+#define IDATA_SEG   idata
+#define XDATA_SEG   xdata
+
+#ifdef  GLOBAL_EXT
+#define BIT_EXT     bit
+#define STRUC_EXT   
+#define INT8_EXT    INT8
+#define INT16_EXT   INT16
+#define INT32_EXT   INT32
+#else
+#define BIT_EXT     extern bit
+#define STRUC_EXT   extern 
+#define INT8_EXT    extern INT8
+#define INT16_EXT   extern INT16
+#define INT32_EXT   extern INT32
+#endif
+
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/basictyp.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4ata.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4ata.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4ata.h	(revision 7613)
@@ -0,0 +1,152 @@
+
+////////////////////////////////////////////////////////////////////////////////////
+//
+// Copyright (c) 1998 - 1999
+//
+// Module Name:
+//
+//      Hal4ATA.h
+//
+// Abstract:
+//
+//     This module contains the USB interfaces for the ATAPI IDE miniport driver.
+//
+// Author:
+//
+//     Zhang ZhenYu
+//
+// Created Date: 26 Nov. 1999
+//
+///////////////////////////////////////////////////////////////////////////////////
+
+
+#ifndef __HAL4ATA_H
+#define __HAL4ATA_H
+
+
+#include "asm/arch/lib/usb/basictyp.h"
+#include "asm/arch/lib/usb/Ata.h"
+
+
+#define HAL4ATA_MAX_ATADEV   1
+
+typedef struct _HW_ATA_DEVICES_EXTENSION {
+
+	IDENTIFY_DATA2 IdentifyData;//[HAL4ATA_MAX_ATADEV];
+
+} __attribute__ ((packed))  HW_ATA_DEVICES_EXTENSION, *PHW_ATA_DEVICES_EXTENSION;
+
+
+
+//
+// Device Extension Device Flags
+//
+
+#define DFLAGS_DEVICE_PRESENT        0x0001    /* Indicates that some device is present.*/
+#define DFLAGS_ATAPI_DEVICE          0x0002    /* Indicates whether Atapi commands can be used.*/
+#define DFLAGS_TAPE_DEVICE           0x0004    /* Indicates whether this is a tape device.*/
+#define DFLAGS_INT_DRQ               0x0008    /* Indicates whether device interrupts as DRQ is set after*/
+											   /* receiving Atapi Packet Command*/
+#define DFLAGS_REMOVABLE_DRIVE       0x0010    /* Indicates that the drive has the 'removable' bit set in*/
+											   /* identify data (offset 128)*/
+#define DFLAGS_MEDIA_STATUS_ENABLED  0x0020    /* Media status notification enabled*/
+#define DFLAGS_ATAPI_CHANGER         0x0040    /* Indicates atapi 2.5 changer present.*/
+#define DFLAGS_SANYO_ATAPI_CHANGER   0x0080    /* Indicates multi-platter device, not conforming to the 2.5 spec.*/
+#define DFLAGS_CHANGER_INITED        0x0100    /* Indicates that the init path for changers has already been done.*/
+
+#define DFLAGS_LBA                   0x2000    /* If Device is IDE harddisk, Check it as LBA mode or CHS mode */
+
+//
+// Subroutines
+//
+
+void
+Hal4ATA_GetStatus(
+	void
+);
+
+BOOLEAN
+Hal4ATA_WaitOnBusy(
+	void
+);
+
+BOOLEAN
+Hal4ATA_WaitOnBusyNDrdy(
+	void
+);
+
+BOOLEAN
+Hal4ATA_WaitOnBusyNDrq(
+	void
+);
+
+/*
+BOOLEAN
+Hal4ATA_WaitForDrq(
+	void
+);
+*/
+
+
+BOOLEAN
+Hal4ATA_IdeSoftReset(
+	void
+) ;
+
+BOOLEAN
+Hal4ATA_IdeHardReset(
+    void
+);
+
+BOOLEAN
+Hal4ATA_SelDevice(
+    void
+);
+
+BOOLEAN
+Hal4ATA_IsModeOK(
+    void
+);
+
+BOOLEAN
+Hal4ATA_IsLBAmode(
+    void
+);
+
+BOOLEAN
+Hal4ATA_IssueIDEIdentify(
+    void
+);
+
+BOOLEAN
+Hal4ATA_SetDriveParameters(
+    void
+);
+
+BOOLEAN
+Hal4ATA_SetMultipleMode(
+    void
+);
+
+BOOLEAN
+Hal4ATA_SetFeature(
+    void
+);
+
+
+BOOLEAN
+Hal4ATA_FindIDEDevice(
+    void
+);
+
+BOOLEAN
+Hal4ATA_ReadWriteSetting(
+    void
+);
+
+BOOLEAN
+Hal4ATA_InitDevExt(
+    void
+);
+
+#endif  /*Hal4ATA.H*/

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4ata.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/kthread.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/kthread.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/kthread.h	(revision 7613)
@@ -0,0 +1,63 @@
+/////////////////////////////////////////////////////////////////////
+//kthread.h 
+////////////////////////////////////////////////////////////////////
+
+#ifndef _KTHREAD_H 
+#define _KTHREAD_H 
+#include <linux/config.h> 
+#include <linux/version.h> 
+
+#include <linux/kernel.h> 
+#include <linux/sched.h> 
+#include <linux/tqueue.h> 
+#include <linux/wait.h> 
+
+#include <asm/unistd.h> 
+#include <asm/semaphore.h> 
+
+/* a structure to store all information we need 
+for our thread */ 
+typedef struct kthread_struct 
+{ 
+	/* private data */ 
+	
+	/* Linux task structure of thread */ 
+	struct task_struct *thread; 
+	/* Task queue need to launch thread */ 
+	struct tq_struct tq; 
+	/* function to be started as thread */ 
+	void (*function) (struct kthread_struct *kthread); 
+	/* semaphore needed on start and creation of thread. */ 
+	struct semaphore startstop_sem; 
+	
+	/* public data */ 
+	
+	/* queue thread is waiting on. Gets initialized by 
+	init_kthread, can be used by thread itself. 
+	*/ 
+	wait_queue_head_t queue; 
+	/* flag to tell thread whether to die or not. 
+	When the thread receives a signal, it must check 
+	the value of terminate and call exit_kthread and terminate 
+	if set. 
+	*/ 
+	int terminate; 
+	/* additional data to pass to kernel thread */ 
+	void *arg; 
+} kthread_t; 
+
+/* prototypes */ 
+
+/* start new kthread (called by creator) */ 
+void start_kthread(void (*func)(kthread_t *), kthread_t *kthread); 
+
+/* stop a running thread (called by "killer") */ 
+void stop_kthread(kthread_t *kthread); 
+
+/* setup thread environment (called by new thread) */ 
+void init_kthread(kthread_t *kthread, char *name); 
+
+/* cleanup thread environment (called by thread upon receiving termination signal) */ 
+void exit_kthread(kthread_t *kthread); 
+
+#endif 

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/kthread.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4sys.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4sys.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4sys.h	(revision 7613)
@@ -0,0 +1,241 @@
+   /*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:	Hal4sys.H
+   // Author:       Hilbert Zhang ZhenYu
+   // Created:		Nov. 26 99
+   // Modified:
+   // Revision:		0.0
+   //
+   /*************************************************************************/
+   //
+   /*************************************************************************/
+#ifndef __HAL4SYS_H__
+#define __HAL4SYS_H__
+
+#include    	"asm/arch/lib/creator_s3c2410_addr.h"
+
+
+char P0,P1,P2,P3;
+
+
+
+// 8051 I/O map
+#define MCU_P0          P0
+#define MCU_P1          P1
+#define MCU_P2          P2
+#define MCU_P3          P3
+
+
+// 8051 Machine cycle factor 1@12MHz, 2@24MHz, 3@36MHz
+#define LOOP_MC                 10
+#define MACHINECYCLE_AT12MHZ    0x01
+#define MACHINECYCLE_AT24MHZ    0x02
+#define MACHINECYCLE_AT36MHZ    0x03
+#define MACHINECYCLE_AT48MHZ    0x04
+
+// 8051 Timer
+#define TIMER0_AT12MHZ          (0xFC)
+#define TIMER0_AT24MHZ          (0xF8)
+#define TIMER0_AT36MHZ          (0xF4)
+#define TIMER0_AT48MHZ          (0xF0)
+
+// 8051 REG Map
+#define D12INT_EDGE	        IT0
+#define D12INT_PRIORITY	    PX0
+#define D12INT_ENABLE	    EX0
+
+#define TIMER0_MODE	        TMOD
+#define TIMER0_LOW          TL0
+#define TIMER0_HIGH         TH0
+#define TIMER0_PRIORITY	    PT0
+#define TIMER0_IRQ_ENABLE	ET0
+#define TIMER0_START    	TR0
+
+// 8051 P1 port Map
+//#define D12REG_ONLY         0xB8
+#define D12REG_ONLY         0x38
+
+#define D12REG_MASK         0x40
+//#define D12REG_ATAREG4IN    0xD0    //ATA_CS0_N == ATA_CS1_N == 1
+#define D12REG_ATAREG4IN    0x50
+
+//#define D12REG_ATAREG4OUT   0x18    //ATA_CS0_N == ATA_CS1_N == 1 D12_CS == 0
+#define D12REG_ATAREG4OUT   0x98
+
+// 8051 Mem Address Space
+#define ADDR_D12COMMAND     0x81
+#define ADDR_D12DATA        0x80
+
+// D12  map
+#define D12_DATABUS        P0
+
+//D12 map at P1
+sbit D12CS_N            = 0x96;
+
+// D12 map at P3
+sbit D12A0              = 0xB0;
+sbit IDE_CS             = 0xB1;
+sbit D12INT_N           = 0xB2;
+sbit D12RST_N           = 0xB5;
+sbit D12WR_N            = 0xB6;
+sbit D12RD_N            = 0xB7;
+sbit D12SUSPD			= 0xB3;
+
+// ATA  map
+#define ATA_DATABUS_LO  MCU_P2
+#define ATA_DATABUS_HI  MCU_P0
+
+//ATA map at P1
+sbit ATA_A0             = 0x90;
+sbit ATA_A1             = 0x91;
+sbit ATA_A2             = 0x92;
+sbit ATA_CS0_N          = 0x93;
+sbit ATA_CS1_N          = 0x94;
+sbit BUFF_OE_N          = 0x95;
+sbit BUFF_DIR_RD        = 0x97;
+
+//ATA map at P3
+sbit ATA_IORDY          = 0xB3;
+sbit ATA_RST_N          = 0xB4;
+sbit ATA_WR_N           = 0xB7;
+sbit ATA_RD_N           = 0xB6;
+
+/*
+// ATA register file definition
+*/
+#define ATAREG_GRP0         0x50
+#define ATAREG_GRP1         0x48
+
+/*
+#define ATAREG4OUT_DATA             0x1F0
+#define ATAREG4IN_DATA              0x1F0
+#define ATAREG4IN_DATA_H            0x1F0
+#define ATAREG4IN_DATA_L            0x2F0   // special
+#define ATAREG4OUT_FEATURE          0x1F1
+#define ATAREG4IN_ERROR             0x1F1
+#define ATAREG4OUT_SECTOR_COUNT     0x1F2
+#define ATAREG4IN_SECTOR_COUNT      0x1F2
+#define ATAREG4OUT_SECTOR_NUMBER    0x1F3
+#define ATAREG4IN_SECTOR_NUMBER     0x1F3
+#define ATAREG4OUT_CYLINDER_LOW     0x1F4
+#define ATAREG4IN_CYLINDER_LOW      0x1F4
+#define ATAREG4OUT_CYLINDER_HIGH    0x1F5
+#define ATAREG4IN_CYLINDER_HIGH     0x1F5
+#define ATAREG4OUT_DEVICE_HEAD      0x1F6
+#define ATAREG4IN_DEVICE_HEAD       0x1F6
+#define ATAREG4OUT_COMMAND          0x1F7
+#define ATAREG4IN_STATUS			0x1F7
+#define ATAREG4OUT_CONTROL          0x3F6
+#define ATAREG4IN_ALTERNATE_STATUS  0x3F6
+
+#define D12_command					0x100/
+#define D12_data					0x101
+#define D12_read_CPLD_writeL		0x102
+#define D12_read_CPLD_writeH		0x103
+
+*/
+//Register Mapping
+//================
+/*
+#define		UC			unsigned char
+#define		UI			unsigned int
+#define		US			unsigned short
+#define		UL			unsigned long
+#define		ULI			unsigned long int
+
+//UC	xdata	D12_command _at_ 0x4001;	//Single Byte
+//UC  xdata   D12_data    _at_ 0x4000;	//Single Byte
+
+
+UI  xdata   IDE_WR_1F0  _at_ 0x8000;	//2 bytes
+									//Eg, IDE_WR_1F0 = 0x0506;
+									//(0x8000) = 0x05;
+									//(0x8001) = 0x06;
+
+UI  xdata   IDE_RD_1F0  _at_ 0x8002;	//2 bytes
+									//Eg, IDE_WR_1F0 = 0x0506;
+									//(0x8002) = 0x05;
+									//(0x8003) = 0x06;
+UC  xdata   IDE_1F1 	_at_ 0x8004; //Single Byte
+UC  xdata   IDE_1F2 	_at_ 0x8005; //Single Byte
+UC  xdata   IDE_1F3 	_at_ 0x8006; //Single Byte
+UC  xdata   IDE_1F4 	_at_ 0x8007; //Single Byte
+UC  xdata   IDE_1F5 	_at_ 0x8008; //Single Byte
+UC  xdata   IDE_1F6 	_at_ 0x8009; //Single Byte
+UC  xdata   IDE_1F7 	_at_ 0x800a; //Single Byte
+UC  xdata   IDE_3F6 	_at_ 0x800b; //Single Byte
+UC  xdata   IDE_3F7 	_at_ 0x800c; //Single Byte
+*/
+
+/*
+#define D12_command					0x4001
+#define D12_data					0x4000
+
+#define ATAREG4OUT_DATA             0x8000
+
+#define ATAREG4IN_DATA              0x8002
+
+
+#define ATAREG4OUT_FEATURE          0x8004
+#define ATAREG4IN_ERROR             0x8004
+#define ATAREG4OUT_SECTOR_COUNT     0x8005
+#define ATAREG4IN_SECTOR_COUNT      0x8005
+#define ATAREG4OUT_SECTOR_NUMBER    0x8006
+#define ATAREG4IN_SECTOR_NUMBER     0x8006
+#define ATAREG4OUT_CYLINDER_LOW     0x8007
+#define ATAREG4IN_CYLINDER_LOW      0x8007
+#define ATAREG4OUT_CYLINDER_HIGH    0x8008
+#define ATAREG4IN_CYLINDER_HIGH     0x8008
+#define ATAREG4OUT_DEVICE_HEAD      0x8009
+#define ATAREG4IN_DEVICE_HEAD       0x8009
+#define ATAREG4OUT_COMMAND          0x800a
+#define ATAREG4IN_STATUS			0x800a
+#define ATAREG4OUT_CONTROL          0x800b
+#define ATAREG4IN_ALTERNATE_STATUS  0x800b
+
+#define ATARead2BWriteD12_1B        0x4002
+#define ATARead0BWriteD12_2B        0x4004
+
+*/
+// Functions
+//#define RaiseIRQL()	        EA=0
+//#define LowerIRQL()	        EA=1
+
+/*Give up all ports*/ 
+#define Hal4Sys_InitMCU()   MCU_P0 = 0xFF; MCU_P1 = 0xFF; MCU_P2 = 0xFF; MCU_P3 = 0xFF
+
+                        	
+
+
+INT16 Hal4Sys_SwapINT16(INT16 wData);
+INT32 Hal4Sys_SwapINT32(INT32 dData);
+
+void Hal4Sys_InitTimer0(void);
+
+void Hal4Sys_Wait4US(void);
+void Hal4Sys_WaitInUS(INT16 time);
+void Hal4Sys_WaitInMS(INT8 time);
+
+void Hal4Sys_D12CmdPortOutB( INT8 val);
+void Hal4Sys_D12DataPortOutB( INT8 val);
+unsigned char Hal4Sys_D12DataPortInB( void);
+
+void Hal4Sys_ResetD12(void);
+void Hal4Sys_InitD12(void);
+
+//    something different
+
+void Hal4Sys_ATAPortOutB(INT32 Addr, INT8 Data);
+INT8 Hal4Sys_ATAPortInB(INT32 Addr);
+INT16 Hal4Sys_ATADataPortInW(void);
+/*
+void Hal4Sys_ATAPortOutB(INT16 Addr, INT8 Data);
+INT8 Hal4Sys_ATAPortInB(INT16 Addr);
+INT16 Hal4Sys_ATADataPortInW(void);
+*/
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Hal4sys.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Common.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Common.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Common.h	(revision 7613)
@@ -0,0 +1,245 @@
+   /*************************************************************************/
+   //
+   //                  P H I L I P S   P R O P R I E T A R Y
+   //
+   //           COPYRIGHT (c)   1999 BY PHILIPS SINGAPORE.
+   //                     --  ALL RIGHTS RESERVED  --
+   //
+   // File Name:        Common.H
+   // Author:           ZhenYu Zhang	
+   // Created:          Feb. 1, 1999
+   // Modified:
+   // Revision: 		0.0
+   //
+   /*************************************************************************/
+   //
+   /*************************************************************************/
+#ifndef __COMMON_H__
+#define __COMMON_H__
+
+#include "asm/arch/lib/usb/basictyp.h"
+#include "asm/arch/lib/usb/tpbulk.h"
+#include "asm/arch/lib/usb/Hal4ata.h"
+
+
+
+/*************************************************************************/
+// print message 
+/*************************************************************************/
+#define DEF_USB_PRINT 0
+#define DEF_PRINT 0
+#define DEF_PRINT1 0
+
+/*************************************************************************/
+// macros
+/*************************************************************************/
+
+/*************************************************************************/
+// macros
+/*************************************************************************/
+#define SWAP(x)   (x)	//((((x) & 0xFF) << 8) | (((x) >> 8) & 0xFF))
+
+#define MSB(x)    (((x) >> 8) & 0xFF)
+#define LSB(x)    ((x) & 0xFF)
+
+#define FALSE   0
+#define TRUE    1
+
+
+//#define LOBYTE(x)  (INT8)((x) >> 8)	//C51 byte ording uses Big Endian(Motorola)
+//#define HIBYTE(x)  (INT8)((x) & 0x00ff) //High byte is stored first
+
+
+
+#define NULL_LENGTH 0xff
+
+
+
+// MAX_CONTROLDATA_SIZE is between ADSC command and 50ms*384Bytes/ms=18KBytes
+// MaxSize for RBC command is 16 Bytes
+typedef union _bit_flags
+{
+	struct _flags
+	{
+		INT8 timer               	: 1;    //MCUBF_Timer
+		INT8 setup_overwritten  	: 1;    //D12BF_SetupOverwritten
+		INT8 configuration			: 1;    //D12BF_Configuration    
+        INT8 DCPRequst_Dir          : 1;    //REQBF_DCPRequest_dir ==1 Read(from Dev to Host)
+        INT8 DCPRequst_EPDir        : 1;    //REQBF_DCPRequest_EPdir ==1 for In Endpoint
+        INT8 Stall_DCPRequest       : 1;    //REQBF_StallDCPRequest
+        INT8 BO_Stalled             : 1;    //BOTBF_StallSrcAtBulkOut
+        INT8 BI_Stalled             : 1;    //BOTBF_StallSrcAtBulkIn
+
+        INT8 Abort_BOT              : 1;    //Abort BOT Xfer
+        INT8 ATABF_IsAttached       : 1;	//HardDisk is Attached
+        INT8 ATABF_IsSupportMultiSector: 1; //MultiBlock support  
+        INT8 ATABF_IDEXfer_dir      : 1;     // ATABF_Xfer_dir==1 Read(from Dev to Host)
+        INT8 ATABF_IsSkipSetParameters: 1;   
+        INT8 Reserved               : 3;  
+	
+    }__attribute__ ((packed))  bits;
+
+    INT16 value;
+}__attribute__ ((packed))  BITFLAGS;
+
+
+
+
+
+typedef struct _device_request
+{
+	INT8 bmRequestType;
+	INT8 bRequest;
+	INT16 wValue;
+	INT16 wIndex;
+	INT16 wLength;
+} __attribute__ ((packed))  DEVICE_REQUEST;
+
+
+#define MAX_CONTROLDATA_SIZE	8
+
+typedef struct _control_xfer
+{
+	INT16 wLength;
+	INT16 wCount;
+	INT8 * pData;
+	INT8 dataBuffer[MAX_CONTROLDATA_SIZE];
+} __attribute__ ((packed))  CONTROL_XFER, * PCONTROL_XFER;
+
+
+/*************************************************************************/
+// basic FSM state
+/*************************************************************************/
+
+// FSM for Device
+#define USBFSM4DEV_ATTACHED             0
+#define USBFSM4DEV_POWRED               1
+#define USBFSM4DEV_DEFAULT              2
+#define USBFSM4DEV_ADDRESS              3
+#define USBFSM4DEV_CONFIGURED           4
+#define USBFSM4DEV_SUSPENDED            5
+#define USBFSM4DEV_RESET                USBFSM_DEFAULT
+
+
+// FSM for Default Control Pipe
+// One-Hot dinfition4DCPFSM
+#define USBFSM4DCP_IDLE             0x00
+#define USBFSM4DCP_SETUPPROC        0x01
+#define USBFSM4DCP_DATAIN           0x02
+#define USBFSM4DCP_DATAOUT          0x04
+#define USBFSM4DCP_HANDSHAKE4CO     0x08
+#define USBFSM4DCP_HANDSHAKE4CI     0x10
+#define USBFSM4DCP_STALL            0x80
+
+// FSM for Bulk-Only Transfer
+// One-Hot dinfition4BOTFSM
+#define USBFSM4BOT_STALL            0x80
+#define USBFSM4BOT_IDLE             0x01
+#define USBFSM4BOT_CBWPROC          0x02
+#define USBFSM4BOT_DATAIN           0x04
+#define USBFSM4BOT_DATAOUT          0x08
+#define USBFSM4BOT_CSWPROC          0x10
+#define USBFSM4BOT_CSW              0x20
+
+// One-Hot dinfition4XferSpace
+#define DCPXFERSPACE_MASK           0xF0
+#define DCPXFERSPACE_UNKNOWN        0x00
+#define DCPXFERSPACE_MCUCODE        0x01
+#define DCPXFERSPACE_MCURAM         0x02
+#define DCPXFERSPACE_EEROM          0x04
+#define DCPXFERSPACE_ATAPORT        0x08
+
+#define BOTXFERSPACE_MASK           0x0F
+#define BOTXFERSPACE_UNKNOWN        0x00
+#define BOTXFERSPACE_MCURAM         0x10
+#define BOTXFERSPACE_ATAPORT        0x20
+#define BOTXFERSPACE_MCUCODE        0x40
+
+#define STALLSRC_BULKIN             0x1
+#define STALLSRC_BULKOUT            0x2
+
+
+
+
+////////////////////////////////////////////
+// DefaultControlPipe Finite State Machine [One-Hot]
+typedef union _dcpfsm_status
+{
+	struct _dcpfsm
+	{
+		INT8 SetupProc		: 1;   
+		INT8 DataIn  		: 1;    
+		INT8 DataOut		: 1;       
+        INT8 COhandshake    : 1;    
+        INT8 CIhandshake    : 1;    
+        INT8 Reserved       : 2;    
+        INT8 Stall          : 1;    
+    }__attribute__ ((packed))  dcpfsm_bits;
+
+    INT8 value;
+}__attribute__ ((packed))  DCPFSM_STATUS;
+
+
+// Bulk-Only TP Finite State Machine [One-Hot]
+typedef union _botfsm_status
+{
+	struct _botfsm
+	{
+		INT8 IDLE			: 1;   
+		INT8 CBWProc  		: 1;    
+		INT8 DataIn			: 1;       
+        INT8 DataOut    	: 1;    
+        INT8 CSWProc    	: 1;    
+        INT8 CSW       		: 1;    
+        INT8 Reserved       : 1;    
+        INT8 Stall          : 1;    
+    }__attribute__ ((packed))  botfsm_bits;
+
+    INT8 value;
+}__attribute__ ((packed))  BOTFSM_STATUS;
+
+
+// Xfer_Space
+typedef union _xfer_space
+{
+	struct _xfer
+	{
+		INT8 DCPXfer_atMCUCODE 		: 1;   
+		INT8 DCPXfer_atMCURAM  		: 1;    
+		INT8 DCPXfer_atEEROM		: 1;       
+        INT8 DCPXfer_atATA    		: 1;    
+        INT8 BOTXfer_atRAM    		: 1;    
+        INT8 BOTXfer_atATA       	: 1;    
+        INT8 BOTXfer_atROM       	: 1;    
+        INT8 Reserved          		: 1;    
+    }__attribute__ ((packed))  xfer_bits;
+
+    INT8 value;
+}__attribute__ ((packed))  XFER_SPACE;
+
+
+typedef union _flex_byte
+{
+	struct _flex
+	{
+		INT8 b0 		: 1;   
+		INT8 b1  		: 1;    
+		INT8 b2			: 1;       
+        INT8 b3    		: 1;    
+        INT8 b4    		: 1;    
+        INT8 b5       	: 1;    
+        INT8 b6       	: 1;    
+        INT8 b7    		: 1;    
+    }__attribute__ ((packed))  flex_bits;
+
+    INT8 value;
+}__attribute__ ((packed))  FLEX_BYTE;
+
+
+
+
+
+
+
+
+#endif

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/usb/Common.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_core.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_core.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_core.h	(revision 7613)
@@ -0,0 +1,62 @@
+/*=============================================================================
+// File Name : creator-pxa270-core.h
+// Function  : creator I/O variable
+// Program   :
+// Date      : 02/14/2006
+// Version   : 1.00
+// History
+============================================================================== */
+
+#ifndef __CREATOR_PXA270_CORE_H__
+#define __CREATOR_CORE_H__
+
+
+#ifndef __CREATOR_DEF_H__
+#include "asm/arch/lib/def.h"
+#endif
+
+//#ifndef __S3C2410_H
+#include "asm/arch/creator-pxa270.h"
+//#endif
+
+#ifndef _CREATOR_PXA270_ADDR_H
+#include <asm/arch/lib/creator_pxa270_addr.h>
+#endif
+
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+
+void creator_cf_reset(void);
+
+typedef	void (creator_cf_reset_proc)(void);
+
+typedef struct creator_io_s {
+	unsigned short cpld_ctrl;
+	unsigned short io_reg0;
+	creator_cf_reset_proc *cf_reset;
+	
+	spinlock_t creator_lock ;
+} creator_io_t ;
+
+extern creator_io_t creator_io ;
+
+
+#define CREATOR_BOARD_NOT_EXIST  0xff
+void creator_cf_reset (void);
+unsigned char creator_GetCreatorCPLDVersion (void);
+
+/* ****** irq Information *********************************************** */
+// arch/arm/mach-pxa/creator-pxa270-irq.c
+int  creator_get_irq_extirq3 (unsigned int extirq3_subid) ;
+
+
+
+#ifdef __cplusplus
+}
+#endif
+
+#endif	//  __CREATOR_PXA270_CORE_H__
+

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_core.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_usb.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_usb.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_usb.h	(revision 7613)
@@ -0,0 +1,32 @@
+//=============================================================================
+// File Name : creator_s3c2410_usb.h
+// Function  : usb storage device drvier define
+// Program   :
+// Date      : 03/05/2004
+// Version   : 1.00
+// History
+//   1.0.0 : Programming start (03/05/2004) -> SOP
+//=============================================================================
+ 
+#ifndef _CREATOR_S3C2410_usb_H_ 
+#define _CREATOR_S3C2410_usb_H_ 
+
+#include <linux/config.h>
+#if defined(__linux__)
+#include <asm/ioctl.h>		/* For _IO* macros */
+#define USB_IOCTL_NR(n)	     		_IOC_NR(n)
+#elif defined(__FreeBSD__)
+#include <sys/ioccom.h>
+#define USB_IOCTL_NR(n)	     		((n) & 0xff)
+#endif
+
+#define USB_MAJOR_NUM			125
+#define USB_IOCTL_MAGIC			USB_MAJOR_NUM
+#define USB_IO(nr)			_IO(USB_IOCTL_MAGIC,nr)
+#define USB_IOR(nr,size)		_IOR(USB_IOCTL_MAGIC,nr,size)
+#define USB_IOW(nr,size)		_IOW(USB_IOCTL_MAGIC,nr,size)
+#define USB_IOWR(nr,size)		_IOWR(USB_IOCTL_MAGIC,nr,size)
+
+
+
+#endif // _CREATOR_S3C2410_USB_H_ 

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/creator_pxa270_usb.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/genfont8_8.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/lib/genfont8_8.h	(revision 0)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/lib/genfont8_8.h	(revision 7613)
@@ -0,0 +1,166 @@
+#ifndef _CREATOR_FONT_H_ 
+#define _CREATOR_FONT_H_
+
+static const unsigned short charset[][8] = { 
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    0    0  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    1    1  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    2    2  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    3    3  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    4    4  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    5    5  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    6    6  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    7    7  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    8    8  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '    9    9  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   10    a  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   11    b  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   12    c  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   13    d  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   14    e  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   15    f  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   16   10  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   17   11  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   18   12  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   19   13  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   20   14  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   21   15  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   22   16  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   23   17  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   24   18  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   25   19  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   26   1a  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   27   1b  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   28   1c  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   29   1d  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   30   1e  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   31   1f  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '   32   20  */
+{ 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0000, 0x0000, 0x0C00, 0x0000 },   /* '!'   33   21  */
+{ 0x3300, 0x3300, 0x3300, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* '"'   34   22  */
+{ 0x3300, 0x3300, 0xFFC0, 0x3300, 0xFFC0, 0x3300, 0x3300, 0x0000 },   /* '#'   35   23  */
+{ 0x0C00, 0xFF00, 0x0CC0, 0x3F00, 0xCC00, 0x3FC0, 0x0C00, 0x0000 },   /* '$'   36   24  */
+{ 0x03C0, 0xC3C0, 0x3000, 0x0C00, 0x0300, 0xF0C0, 0xF000, 0x0000 },   /* '%'   37   25  */
+{ 0x0F00, 0x30C0, 0x0CC0, 0x0300, 0xCCC0, 0x30C0, 0xCF00, 0x0000 },   /* '&'   38   26  */
+{ 0x0F00, 0x0C00, 0x0300, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* '''   39   27  */
+{ 0x3000, 0x0C00, 0x0300, 0x0300, 0x0300, 0x0C00, 0x3000, 0x0000 },   /* '('   40   28  */
+{ 0x0300, 0x0C00, 0x3000, 0x3000, 0x3000, 0x0C00, 0x0300, 0x0000 },   /* ')'   41   29  */
+{ 0x0000, 0x0C00, 0xCCC0, 0x3F00, 0xCCC0, 0x0C00, 0x0000, 0x0000 },   /* '*'   42   2a  */
+{ 0x0000, 0x0C00, 0x0C00, 0xFFC0, 0x0C00, 0x0C00, 0x0000, 0x0000 },   /* '+'   43   2b  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0F00, 0x0C00, 0x0300, 0x0000 },   /* ','   44   2c  */
+{ 0x0000, 0x0000, 0x0000, 0xFFC0, 0x0000, 0x0000, 0x0000, 0x0000 },   /* '-'   45   2d  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0F00, 0x0F00, 0x0000 },   /* '.'   46   2e  */
+{ 0x0000, 0xC000, 0x3000, 0x0C00, 0x0300, 0x00C0, 0x0000, 0x0000 },   /* '/'   47   2f  */
+{ 0x3F00, 0xC0C0, 0xF0C0, 0xCCC0, 0xC3C0, 0xC0C0, 0x3F00, 0x0000 },   /* '0'   48   30  */
+{ 0x0C00, 0x0F00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x3F00, 0x0000 },   /* '1'   49   31  */
+{ 0x3F00, 0xC0C0, 0xC000, 0x3000, 0x0C00, 0x0300, 0xFFC0, 0x0000 },   /* '2'   50   32  */
+{ 0xFFC0, 0x3000, 0x0C00, 0x3000, 0xC000, 0xC0C0, 0x3F00, 0x0000 },   /* '3'   51   33  */
+{ 0x3000, 0x3C00, 0x3300, 0x30C0, 0xFFC0, 0x3000, 0x3000, 0x0000 },   /* '4'   52   34  */
+{ 0xFFC0, 0x00C0, 0x3FC0, 0xC000, 0xC000, 0xC0C0, 0x3F00, 0x0000 },   /* '5'   53   35  */
+{ 0x3C00, 0x0300, 0x00C0, 0x3FC0, 0xC0C0, 0xC0C0, 0x3F00, 0x0000 },   /* '6'   54   36  */
+{ 0xFFC0, 0xC000, 0x3000, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0000 },   /* '7'   55   37  */
+{ 0x3FC0, 0xC0C0, 0xC0C0, 0x3F00, 0xC0C0, 0xC0C0, 0x3F00, 0x0000 },   /* '8'   56   38  */
+{ 0x3F00, 0xC0C0, 0xC0C0, 0xFF00, 0xC000, 0x3000, 0x0F00, 0x0000 },   /* '9'   57   39  */
+{ 0x0000, 0x0F00, 0x0F00, 0x0000, 0x0F00, 0x0F00, 0x0000, 0x0000 },   /* ':'   58   3a  */
+{ 0x0000, 0x0F00, 0x0F00, 0x0000, 0x0F00, 0x0C00, 0x0300, 0x0000 },   /* ';'   59   3b  */
+{ 0x3000, 0x0C00, 0x0300, 0x00C0, 0x0300, 0x0C00, 0x3000, 0x0000 },   /* '<'   60   3c  */
+{ 0x0000, 0x0000, 0xFFC0, 0x0000, 0xFFC0, 0x0000, 0x0000, 0x0000 },   /* '='   61   3d  */
+{ 0x0300, 0x0C00, 0x3000, 0xC000, 0x3000, 0x0C00, 0x0300, 0x0000 },   /* '>'   62   3e  */
+{ 0x3F00, 0xC0C0, 0xC000, 0x3000, 0x0C00, 0x0000, 0x0C00, 0x0000 },   /* '?'   63   3f  */
+{ 0x3F00, 0xC0C0, 0xC000, 0xCF00, 0xCCC0, 0xCCC0, 0x3F00, 0x0000 },   /* '@'   64   40  */
+{ 0x3F00, 0xC0C0, 0xC0C0, 0xC0C0, 0xFFC0, 0xC0C0, 0xC0C0, 0x0000 },   /* 'A'   65   41  */
+{ 0x3FC0, 0xC300, 0xC300, 0x3F00, 0xC300, 0xC300, 0x3FC0, 0x0000 },   /* 'B'   66   42  */
+{ 0x3F00, 0xC0C0, 0x00C0, 0x00C0, 0x00C0, 0xC0C0, 0x3F00, 0x0000 },   /* 'C'   67   43  */
+{ 0x3FC0, 0xC300, 0xC300, 0xC300, 0xC300, 0xC300, 0x3FC0, 0x0000 },   /* 'D'   68   44  */
+{ 0xFFC0, 0x00C0, 0x00C0, 0xFFC0, 0x00C0, 0x00C0, 0xFFC0, 0x0000 },   /* 'E'   69   45  */
+{ 0xFFC0, 0x00C0, 0x00C0, 0x3FC0, 0x00C0, 0x00C0, 0x00C0, 0x0000 },   /* 'F'   70   46  */
+{ 0x3F00, 0xC0C0, 0x00C0, 0xF0C0, 0xC0C0, 0xC0C0, 0xFF00, 0x0000 },   /* 'G'   71   47  */
+{ 0xC0C0, 0xC0C0, 0xC0C0, 0xFFC0, 0xC0C0, 0xC0C0, 0xC0C0, 0x0000 },   /* 'H'   72   48  */
+{ 0x3F00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x3F00, 0x0000 },   /* 'I'   73   49  */
+{ 0xFC00, 0x3000, 0x3000, 0x3000, 0x3000, 0x30C0, 0x0F00, 0x0000 },   /* 'J'   74   4a  */
+{ 0xC0C0, 0x30C0, 0x0CC0, 0x03C0, 0x0CC0, 0x30C0, 0xC0C0, 0x0000 },   /* 'K'   75   4b  */
+{ 0x00C0, 0x00C0, 0x00C0, 0x00C0, 0x00C0, 0x00C0, 0xFFC0, 0x0000 },   /* 'L'   76   4c  */
+{ 0xC0C0, 0xF3C0, 0xCCC0, 0xCCC0, 0xC0C0, 0xC0C0, 0xC0C0, 0x0000 },   /* 'M'   77   4d  */
+{ 0xC0C0, 0xC3C0, 0xC3C0, 0xCCC0, 0xF0C0, 0xF0C0, 0xC0C0, 0x0000 },   /* 'N'   78   4e  */
+{ 0x3F00, 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0x3F00, 0x0000 },   /* 'O'   79   4f  */
+{ 0x3FC0, 0xC0C0, 0xC0C0, 0x3FC0, 0x00C0, 0x00C0, 0x00C0, 0x0000 },   /* 'P'   80   50  */
+{ 0x3F00, 0xC0C0, 0xC0C0, 0xC0C0, 0xCCC0, 0x30C0, 0xCFC0, 0x0000 },   /* 'Q'   81   51  */
+{ 0x3FC0, 0xC0C0, 0xC0C0, 0x3FC0, 0x0CC0, 0x30C0, 0xC0C0, 0x0000 },   /* 'R'   82   52  */
+{ 0x3F00, 0xC0C0, 0x00C0, 0x3F00, 0xC000, 0xC0C0, 0x3F00, 0x0000 },   /* 'S'   83   53  */
+{ 0xFFC0, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0000 },   /* 'T'   84   54  */
+{ 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0x3F00, 0x0000 },   /* 'U'   85   55  */
+{ 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0xC0C0, 0x3300, 0x0C00, 0x0000 },   /* 'V'   86   56  */
+{ 0xC0C0, 0xC0C0, 0xC0C0, 0xCCC0, 0xCCC0, 0xF3C0, 0xC0C0, 0x0000 },   /* 'W'   87   57  */
+{ 0xC0C0, 0xC0C0, 0x3300, 0x0C00, 0x3300, 0xC0C0, 0xC0C0, 0x0000 },   /* 'X'   88   58  */
+{ 0xC0C0, 0xC0C0, 0xC0C0, 0x3300, 0x0C00, 0x0C00, 0x0C00, 0x0000 },   /* 'Y'   89   59  */
+{ 0xFFC0, 0xC000, 0x3000, 0x0C00, 0x0300, 0x00C0, 0xFFC0, 0x0000 },   /* 'Z'   90   5a  */
+{ 0x3F00, 0x0300, 0x0300, 0x0300, 0x0300, 0x0300, 0x3F00, 0x0000 },   /* '['   91   5b  */
+{ 0x00C0, 0x0300, 0x0C00, 0x3000, 0xC000, 0x0000, 0x0000, 0x0000 },   /* '\'   92   5c  */
+{ 0x3F00, 0x3000, 0x3000, 0x3000, 0x3000, 0x3000, 0x3F00, 0x0000 },   /* ']'   93   5d  */
+{ 0x0C00, 0x3300, 0xC0C0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* '^'   94   5e  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFFC0, 0x0000 },   /* '_'   95   5f  */
+{ 0x00C0, 0x0300, 0x0C00, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* '`'   96   60  */
+{ 0x0000, 0x0000, 0x3F00, 0xC000, 0xFF00, 0xC0C0, 0xFF00, 0x0000 },   /* 'a'   97   61  */
+{ 0x00C0, 0x00C0, 0x3CC0, 0xC3C0, 0xC0C0, 0xC0C0, 0x3FC0, 0x0000 },   /* 'b'   98   62  */
+{ 0x0000, 0x0000, 0x3F00, 0xC0C0, 0x00C0, 0xC0C0, 0x3F00, 0x0000 },   /* 'c'   99   63  */
+{ 0xC000, 0xC000, 0xCF00, 0xF0C0, 0xC0C0, 0xC0C0, 0xFF00, 0x0000 },   /* 'd'  100   64  */
+{ 0x0000, 0x0000, 0x3F00, 0xC0C0, 0xFFC0, 0x00C0, 0x3F00, 0x0000 },   /* 'e'  101   65  */
+{ 0x3000, 0xCC00, 0x0C00, 0x3F00, 0x0C00, 0x0C00, 0x0C00, 0x0000 },   /* 'f'  102   66  */
+{ 0x0000, 0xCF00, 0xF0C0, 0xF0C0, 0xCF00, 0xC000, 0x3F00, 0x0000 },   /* 'g'  103   67  */
+{ 0x00C0, 0x00C0, 0x3CC0, 0xC3C0, 0xC0C0, 0xC0C0, 0xC0C0, 0x0000 },   /* 'h'  104   68  */
+{ 0x0C00, 0x0000, 0x0F00, 0x0C00, 0x0C00, 0x0C00, 0x3F00, 0x0000 },   /* 'i'  105   69  */
+{ 0x3000, 0x0000, 0x3C00, 0x3000, 0x3000, 0x30C0, 0x0F00, 0x0000 },   /* 'j'  106   6a  */
+{ 0x0300, 0x0300, 0xC300, 0x3300, 0x0F00, 0x3300, 0xC300, 0x0000 },   /* 'k'  107   6b  */
+{ 0x0F00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x0C00, 0x3F00, 0x0000 },   /* 'l'  108   6c  */
+{ 0x0000, 0x0000, 0x33C0, 0xCCC0, 0xCCC0, 0xCCC0, 0xCCC0, 0x0000 },   /* 'm'  109   6d  */
+{ 0x0000, 0x0000, 0x3CC0, 0xC3C0, 0xC0C0, 0xC0C0, 0xC0C0, 0x0000 },   /* 'n'  110   6e  */
+{ 0x0000, 0x0000, 0x3F00, 0xC0C0, 0xC0C0, 0xC0C0, 0x3F00, 0x0000 },   /* 'o'  111   6f  */
+{ 0x0000, 0x3CC0, 0xC3C0, 0xC3C0, 0x3CC0, 0x00C0, 0x00C0, 0x0000 },   /* 'p'  112   70  */
+{ 0x0000, 0xCF00, 0xF0C0, 0xF0C0, 0xCF00, 0xC000, 0xC000, 0x0000 },   /* 'q'  113   71  */
+{ 0x0000, 0x0000, 0x3CC0, 0xC3C0, 0x00C0, 0x00C0, 0x00C0, 0x0000 },   /* 'r'  114   72  */
+{ 0x0000, 0x0000, 0xFF00, 0x00C0, 0x3FC0, 0xC000, 0xFFC0, 0x0000 },   /* 's'  115   73  */
+{ 0x0300, 0x0300, 0x0FC0, 0x0300, 0x0300, 0xC300, 0x3C00, 0x0000 },   /* 't'  116   74  */
+{ 0x0000, 0x0000, 0x30C0, 0x30C0, 0x30C0, 0x30C0, 0xCF00, 0x0000 },   /* 'u'  117   75  */
+{ 0x0000, 0x0000, 0xC0C0, 0xC0C0, 0xC0C0, 0x3300, 0x0C00, 0x0000 },   /* 'v'  118   76  */
+{ 0x0000, 0x0000, 0xC0C0, 0xC0C0, 0xCCC0, 0xCCC0, 0x3300, 0x0000 },   /* 'w'  119   77  */
+{ 0x0000, 0x0000, 0xC0C0, 0x3300, 0x0C00, 0x3300, 0xC0C0, 0x0000 },   /* 'x'  120   78  */
+{ 0x0000, 0x0000, 0xC0C0, 0xC0C0, 0xF0C0, 0xCF00, 0xC000, 0x3F00 },   /* 'y'  121   79  */
+{ 0x0000, 0x0000, 0xFFC0, 0x3000, 0x0C00, 0x0300, 0xFFC0, 0x0000 },   /* 'z'  122   7a  */
+{ 0x3000, 0x0C00, 0x0C00, 0x0300, 0x0C00, 0x0C00, 0x3000, 0x0000 },   /* '{'  123   7b  */
+{ 0x0C00, 0x0C00, 0x0C00, 0x0000, 0x0C00, 0x0C00, 0x0C00, 0x0000 },   /* '|'  124   7c  */
+{ 0x0300, 0x0C00, 0x0C00, 0x3000, 0x0C00, 0x0C00, 0x0300, 0x0000 },   /* '}'  125   7d  */
+{ 0x0300, 0xCCC0, 0x3000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* '~'  126   7e  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  127   7f  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  128   80  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  129   81  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  130   82  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  131   83  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  132   84  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  133   85  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  134   86  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  135   87  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  136   88  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  137   89  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  138   8a  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  139   8b  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  140   8c  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  141   8d  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  142   8e  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  143   8f  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  144   90  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  145   91  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  146   92  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  147   93  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  148   94  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  149   95  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  150   96  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  151   97  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  152   98  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  153   99  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  154   9a  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  155   9b  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  156   9c  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  157   9d  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 },   /* ' '  158   9e  */
+{ 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000 }   /* ' '  159   9f  */
+};
+#endif // _CREATOR_FONT_H_

Property changes on: linux-2.6.15.3/include/asm-arm/arch-pxa/lib/genfont8_8.h
___________________________________________________________________
Name: svn:executable
   + 

Index: linux-2.6.15.3/include/asm-arm/arch-pxa/pxa-regs.h
===================================================================
--- linux-2.6.15.3/include/asm-arm/arch-pxa/pxa-regs.h	(revision 1)
+++ linux-2.6.15.3/include/asm-arm/arch-pxa/pxa-regs.h	(revision 7613)
@@ -1354,6 +1354,93 @@
 #define GPIO_DFLT_LOW		0x400
 #define GPIO_DFLT_HIGH		0x800
 
+#if 1
+#define GPIO1_RST_MD		( 1 | GPIO_ALT_FN_1_IN)
+#define GPIO9_IO_MD		( 9 | GPIO_IN)
+#define GPIO10_IO_MD		(10 | GPIO_IN)
+#define GPIO11_48MHz_MD	(11 | GPIO_ALT_FN_1_IN)
+
+#define GPIO15_nCS_1_MD	(15 | GPIO_ALT_FN_2_OUT | GPIO_DFLT_HIGH)
+#define GPIO16_PWM0_MD		(16 | GPIO_ALT_FN_1_IN)
+
+#define GPIO18_RDY_MD		(18 | GPIO_ALT_FN_1_IN)
+
+#define GPIO20_DREQ0_MD	(20 | GPIO_ALT_FN_1_IN)
+#define GPIO21_DVAL0_MD	(21 | GPIO_ALT_FN_2_OUT)
+#define GPIO22_IO_MD		(22 | GPIO_IN)
+
+#define GPIO28_BITCLK_MD		(28 | GPIO_ALT_FN_1_IN)
+#define GPIO28_BITCLK_AC97_MD	(28 | GPIO_ALT_FN_1_IN)
+#define GPIO28_BITCLK_IN_I2S_MD	(28 | GPIO_ALT_FN_2_IN)
+#define GPIO28_BITCLK_OUT_I2S_MD	(28 | GPIO_ALT_FN_1_OUT)
+#define GPIO29_SDATA_IN_MD		(29 | GPIO_ALT_FN_1_IN)
+#define GPIO29_SDATA_IN_AC97_MD	(29 | GPIO_ALT_FN_1_IN)
+#define GPIO29_SDATA_IN_I2S_MD	(29 | GPIO_ALT_FN_2_IN)
+#define GPIO30_SDATA_OUT_AC97_MD	(30 | GPIO_ALT_FN_2_OUT)
+#define GPIO30_SDATA_OUT_I2S_MD	(30 | GPIO_ALT_FN_1_OUT)
+#define GPIO30_SDATA_OUT_MD	(30 | GPIO_ALT_FN_2_OUT)
+#define GPIO31_SYNC_MD			(31 | GPIO_ALT_FN_2_OUT)
+#define GPIO31_SYNC_I2S_MD	(31 | GPIO_ALT_FN_1_OUT)
+#define GPIO31_SYNC_AC97_MD	(31 | GPIO_ALT_FN_2_OUT)
+#define GPIO32_MMCCLK_MD		(32 | GPIO_ALT_FN_2_OUT)
+
+#define GPIO33_nCS_5_MD		(33 | GPIO_ALT_FN_2_OUT | GPIO_DFLT_HIGH)
+
+#define GPIO35_FFCTS_MD		(35 | GPIO_ALT_FN_1_IN)
+#define GPIO36_FFDCD_MD		(36 | GPIO_ALT_FN_1_IN)
+#define GPIO37_FFDSR_MD		(37 | GPIO_ALT_FN_1_IN)
+#define GPIO38_FFRI_MD			(38 | GPIO_ALT_FN_1_IN)
+#define GPIO39_FFTXD_MD		(39 | GPIO_ALT_FN_2_OUT)
+#define GPIO40_FFDTR_MD		(40 | GPIO_ALT_FN_2_OUT)
+#define GPIO41_FFRXD_MD		(41 | GPIO_ALT_FN_1_IN)
+#define GPIO42_BTRXD_MD		(42 | GPIO_ALT_FN_1_IN)
+#define GPIO43_BTTXD_MD		(43 | GPIO_ALT_FN_2_OUT)
+#define GPIO44_BTCTS_MD		(44 | GPIO_ALT_FN_1_IN)
+#define GPIO45_BTRTS_MD		(45 | GPIO_ALT_FN_2_OUT)
+#define GPIO46_ICPRXD_MD		(46 | GPIO_ALT_FN_1_IN)
+#define GPIO46_STRXD_MD		(46 | GPIO_ALT_FN_2_IN)
+#define GPIO47_ICPTXD_MD		(47 | GPIO_ALT_FN_2_OUT)
+#define GPIO47_STTXD_MD		(47 | GPIO_ALT_FN_1_OUT)
+#define GPIO48_nPOE_MD			(48 | GPIO_ALT_FN_2_OUT)
+#define GPIO49_nPWE_MD			(49 | GPIO_ALT_FN_2_OUT)
+#define GPIO50_nPIOR_MD		(50 | GPIO_ALT_FN_2_OUT)
+#define GPIO51_nPIOW_MD		(51 | GPIO_ALT_FN_2_OUT)
+
+#define GPIO53_IO_MD			(53 | GPIO_IN)
+#define GPIO54_nPCE_2_MD		(54 | GPIO_ALT_FN_2_OUT)
+#define GPIO55_nPREG_MD		(55 | GPIO_ALT_FN_2_OUT)
+#define GPIO56_nPWAIT_MD		(56 | GPIO_ALT_FN_1_IN)
+#define GPIO57_nIOIS16_MD		(57 | GPIO_ALT_FN_1_IN)
+
+#define GPIO74_LCD_FCLK_MD	(74 | GPIO_ALT_FN_2_OUT)
+#define GPIO75_LCD_LCLK_MD	(75 | GPIO_ALT_FN_2_OUT)
+#define GPIO76_LCD_PCLK_MD	(76 | GPIO_ALT_FN_2_OUT)
+#define GPIO77_LCD_ACBIAS_MD	(77 | GPIO_ALT_FN_2_OUT)
+
+#define GPIO78_nCS_2_MD		(78 | GPIO_ALT_FN_2_OUT | GPIO_DFLT_HIGH)
+#define GPIO79_pSKTSEL_MD		(79 | GPIO_ALT_FN_1_OUT | GPIO_DFLT_HIGH)
+#define GPIO80_nCS_4_MD		(80 | GPIO_ALT_FN_2_OUT | GPIO_DFLT_HIGH)
+#define GPIO81_IO_MD			(81 | GPIO_IN)
+
+#define GPIO83_FFRTS_MD		(83 | GPIO_ALT_FN_3_OUT)
+#define GPIO84_IO_MD			(84 | GPIO_IN)
+#define GPIO85_nPCE_1_MD		(85 | GPIO_ALT_FN_1_OUT)
+
+
+#define GPIO92_MMCDAT0_MD		(92 | GPIO_ALT_FN_1_IN)
+
+#define GPIO96_DVAL1_MD		(96 | GPIO_ALT_FN_2_OUT)
+#define GPIO97_DREQ1_MD		(97 | GPIO_ALT_FN_2_IN)
+
+
+#define GPIO109_MMCDAT1_MD		(109 | GPIO_ALT_FN_1_IN)
+#define GPIO110_MMCDAT2_MD		(110 | GPIO_ALT_FN_1_IN)
+#define GPIO111_MMCDAT3_MD		(111 | GPIO_ALT_FN_1_IN)
+#define GPIO112_MMCCMD_MD		(112 | GPIO_ALT_FN_1_IN)
+#define GPIO113_AC97_RESET_N_MD	(113 | GPIO_ALT_FN_2_OUT)
+#define GPIO117_I2CSCL_MD	(117 | GPIO_ALT_FN_1_OUT)
+#define GPIO118_I2CSDA_MD	(118 | GPIO_ALT_FN_1_IN)
+#else
 #define GPIO1_RTS_MD		( 1 | GPIO_ALT_FN_1_IN)
 #define GPIO6_MMCCLK_MD		( 6 | GPIO_ALT_FN_1_OUT)
 #define GPIO7_48MHz_MD		( 7 | GPIO_ALT_FN_1_OUT)
@@ -1482,6 +1569,7 @@
 #define GPIO113_AC97_RESET_N_MD	(113 | GPIO_ALT_FN_2_OUT)
 #define GPIO117_I2CSCL_MD	(117 | GPIO_ALT_FN_1_OUT)
 #define GPIO118_I2CSDA_MD	(118 | GPIO_ALT_FN_1_IN)
+#endif
 
 /*
  * Power Manager
Index: linux-2.6.15.3/include/linux/major.h
===================================================================
--- linux-2.6.15.3/include/linux/major.h	(revision 1)
+++ linux-2.6.15.3/include/linux/major.h	(revision 7613)
@@ -151,6 +151,8 @@
 #define USB_ACM_AUX_MAJOR	167
 #define USB_CHAR_MAJOR		180
 
+#define MMC_BLOCK_MAJOR		179
+
 #define VXVM_MAJOR		199	/* VERITAS volume i/o driver    */
 #define VXSPEC_MAJOR		200	/* VERITAS volume config driver */
 #define VXDMP_MAJOR		201	/* VERITAS volume multipath driver */
Index: linux-2.6.15.3/net/sunrpc/clnt.c
===================================================================
--- linux-2.6.15.3/net/sunrpc/clnt.c	(revision 1)
+++ linux-2.6.15.3/net/sunrpc/clnt.c	(revision 7613)
@@ -43,8 +43,8 @@
 #endif
 
 static DECLARE_WAIT_QUEUE_HEAD(destroy_wait);
+#define dprintfk printfk
 
-
 static void	call_start(struct rpc_task *task);
 static void	call_reserve(struct rpc_task *task);
 static void	call_reserveresult(struct rpc_task *task);
Index: linux-2.6.15.3/scripts/kconfig/Makefile
===================================================================
--- linux-2.6.15.3/scripts/kconfig/Makefile	(revision 1)
+++ linux-2.6.15.3/scripts/kconfig/Makefile	(revision 7613)
@@ -124,6 +124,7 @@
 ifeq ($(KBUILD_HAVE_NLS),no)
 HOSTCFLAGS	+= -DKBUILD_NO_NLS
 endif
+HOSTCFLAGS	+= -DKBUILD_NO_NLS
 
 # generated files seem to need this to find local include files
 HOSTCFLAGS_lex.zconf.o	:= -I$(src)
Index: linux-2.6.15.3/sound/arm/pxa2xx-ac97.c
===================================================================
--- linux-2.6.15.3/sound/arm/pxa2xx-ac97.c	(revision 1)
+++ linux-2.6.15.3/sound/arm/pxa2xx-ac97.c	(revision 7613)
@@ -119,9 +119,9 @@
 	wait_event_timeout(gsr_wq, gsr_bits & (GSR_PCR | GSR_SCR), 1);
 #endif
 
-	if (!((GSR | gsr_bits) & (GSR_PCR | GSR_SCR))) {
+	if (!((GSR | gsr_bits) & (GSR_PCR | GSR_SCR))) {		 
 		printk(KERN_INFO "%s: cold reset timeout (GSR=%#lx)\n",
-				 __FUNCTION__, gsr_bits);
+				 __FUNCTION__, gsr_bits);		 
 
 		/* let's try warm reset */
 		gsr_bits = 0;
@@ -212,10 +212,10 @@
 	snd_pcm_limit_hw_rates(runtime);
 
        	platform_ops = substream->pcm->card->dev->platform_data;
-	if (platform_ops && platform_ops->startup)
-		return platform_ops->startup(substream, platform_ops->priv);
+	if (platform_ops && platform_ops->startup)   
+		return platform_ops->startup(substream, platform_ops->priv);				
 	else
-		return 0;
+		return 0;	
 }
 
 static void pxa2xx_ac97_pcm_shutdown(snd_pcm_substream_t *substream)
@@ -231,7 +231,7 @@
 {
 	snd_pcm_runtime_t *runtime = substream->runtime;
 	int reg = (substream->stream == SNDRV_PCM_STREAM_PLAYBACK) ?
-		  AC97_PCM_FRONT_DAC_RATE : AC97_PCM_LR_ADC_RATE;
+		  AC97_PCM_FRONT_DAC_RATE : AC97_PCM_LR_ADC_RATE;	      
 	return snd_ac97_set_rate(pxa2xx_ac97_ac97, reg, runtime->rate);
 }
 
Index: linux-2.6.15.3/sound/sound_core.c
===================================================================
--- linux-2.6.15.3/sound/sound_core.c	(revision 1)
+++ linux-2.6.15.3/sound/sound_core.c	(revision 7613)
@@ -171,7 +171,6 @@
 		sprintf(s->name, "sound/%s", name);
 	else
 		sprintf(s->name, "sound/%s%d", name, r / SOUND_STEP);
-
 	devfs_mk_cdev(MKDEV(SOUND_MAJOR, s->unit_minor),
 			S_IFCHR | mode, s->name);
 	class_device_create(sound_class, NULL, MKDEV(SOUND_MAJOR, s->unit_minor),
Index: linux-2.6.15.3/fs/partitions/check.c
===================================================================
--- linux-2.6.15.3/fs/partitions/check.c	(revision 1)
+++ linux-2.6.15.3/fs/partitions/check.c	(revision 7613)
@@ -121,7 +121,7 @@
 		snprintf(buf, BDEVNAME_SIZE, "%sp%d", hd->disk_name, part);
 	else
 		snprintf(buf, BDEVNAME_SIZE, "%s%d", hd->disk_name, part);
-
+       
 	return buf;
 }
 
@@ -157,6 +157,7 @@
 	if (!state)
 		return NULL;
 
+
 #ifdef CONFIG_DEVFS_FS
 	if (hd->devfs_name[0] != '\0') {
 		printk(KERN_INFO " /dev/%s:", hd->devfs_name);
@@ -165,7 +166,8 @@
 #endif
 	else {
 		disk_name(hd, 0, state->name);
-		printk(KERN_INFO " %s:", state->name);
+		printk(KERN_INFO " %s:", state->name);	
+	//	printk("<1> check.c, %s(), line=%d, state->name=%s, hd->devfs_name=%s, hd->major=%d, hd->minors=%d\n", __FUNCTION__, __LINE__, state->name, hd->devfs_name, hd->major, hd->minors);
 		if (isdigit(state->name[strlen(state->name)-1]))
 			sprintf(state->name, "p");
 	}
@@ -173,7 +175,8 @@
 	i = res = 0;
 	while (!res && check_part[i]) {
 		memset(&state->parts, 0, sizeof(state->parts));
-		res = check_part[i++](state, bdev);
+	//	printk("<1> check.c, %s(), line=%d, i=%d\n", __FUNCTION__, __LINE__, i);		
+		res = check_part[i++](state, bdev);		
 	}
 	if (res > 0)
 		return state;
Index: linux-2.6.15.3/fs/partitions/msdos.c
===================================================================
--- linux-2.6.15.3/fs/partitions/msdos.c	(revision 1)
+++ linux-2.6.15.3/fs/partitions/msdos.c	(revision 7613)
@@ -56,6 +56,7 @@
 static inline int
 msdos_magic_present(unsigned char *p)
 {
+//    printk("<1> %s(), line=%d\n mag[0]=%x(%x), mag[1]=%x(%x)\n", __FUNCTION__, __LINE__, p[0], MSDOS_LABEL_MAGIC1, p[1], MSDOS_LABEL_MAGIC2);
 	return (p[0] == MSDOS_LABEL_MAGIC1 && p[1] == MSDOS_LABEL_MAGIC2);
 }
 
@@ -387,13 +388,15 @@
 	int slot;
 
 	data = read_dev_sector(bdev, 0, &sect);
+	//printk("%s(), line=%d, data=%d\n", __FUNCTION__, __LINE__, data);
 	if (!data)
 		return -1;
 	if (!msdos_magic_present(data + 510)) {
 		put_dev_sector(sect);
+	//printk("%s(), line=%d, \n", __FUNCTION__, __LINE__);		
 		return 0;
 	}
-
+//	printk("%s(), line=%d, \n", __FUNCTION__, __LINE__);
 	/*
 	 * Now that the 55aa signature is present, this is probably
 	 * either the boot sector of a FAT filesystem or a DOS-type
Index: linux-2.6.15.3/fs/block_dev.c
===================================================================
--- linux-2.6.15.3/fs/block_dev.c	(revision 1)
+++ linux-2.6.15.3/fs/block_dev.c	(revision 7613)
@@ -592,7 +592,7 @@
 					bdi = &default_backing_dev_info;
 				bdev->bd_inode->i_data.backing_dev_info = bdi;
 			}
-			if (bdev->bd_invalidated)
+			if (bdev->bd_invalidated)		    
 				rescan_partitions(disk, bdev);
 		} else {
 			struct hd_struct *p;
@@ -630,7 +630,7 @@
 				if (ret)
 					goto out;
 			}
-			if (bdev->bd_invalidated)
+			if (bdev->bd_invalidated)		    
 				rescan_partitions(bdev->bd_disk, bdev);
 		} else {
 			down(&bdev->bd_contains->bd_sem);
@@ -693,7 +693,7 @@
 	filp->f_flags |= O_LARGEFILE;
 
 	bdev = bd_acquire(inode);
-
+   
 	res = do_open(bdev, filp);
 	if (res)
 		return res;
Index: linux-2.6.15.3/arch/arm/Kconfig
===================================================================
--- linux-2.6.15.3/arch/arm/Kconfig	(revision 1)
+++ linux-2.6.15.3/arch/arm/Kconfig	(revision 7613)
@@ -549,7 +549,7 @@
 
 endmenu
 
-if (ARCH_SA1100 || ARCH_INTEGRATOR || ARCH_OMAP1)
+if (ARCH_SA1100 ||ARCH_PXA || ARCH_INTEGRATOR || ARCH_OMAP1)
 
 menu "CPU Frequency scaling"
 
@@ -565,6 +565,11 @@
 	depends on CPU_FREQ && (SA1100_ASSABET || SA1100_CERF || SA1100_PT_SYSTEM3)
 	default y
 
+config CPU_FREQ_PXA
+	bool
+	depends on CPU_FREQ && ARCH_PXA
+	default y
+
 config CPU_FREQ_INTEGRATOR
 	tristate "CPUfreq driver for ARM Integrator CPUs"
 	depends on ARCH_INTEGRATOR && CPU_FREQ
Index: linux-2.6.15.3/arch/arm/kernel/head.S
===================================================================
--- linux-2.6.15.3/arch/arm/kernel/head.S	(revision 1)
+++ linux-2.6.15.3/arch/arm/kernel/head.S	(revision 7613)
@@ -78,6 +78,8 @@
 	__INIT
 	.type	stext, %function
 ENTRY(stext)
+
+	LDR     r1,=0x2d9			@Jupiter add machine id
 	msr	cpsr_c, #PSR_F_BIT | PSR_I_BIT | MODE_SVC @ ensure svc mode
 						@ and irqs disabled
 	bl	__lookup_processor_type		@ r5=procinfo r9=cpuid
Index: linux-2.6.15.3/arch/arm/tools/mach-types
===================================================================
--- linux-2.6.15.3/arch/arm/tools/mach-types	(revision 1)
+++ linux-2.6.15.3/arch/arm/tools/mach-types	(revision 7613)
@@ -740,7 +740,7 @@
 cb3rufc			MACH_CB3RUFC		CB3RUFC			726
 mp2usb			MACH_MP2USB		MP2USB			727
 ntnp425c		MACH_NTNP425C		NTNP425C		728
-colibri			MACH_COLIBRI		COLIBRI			729
+#colibri			MACH_COLIBRI		COLIBRI			729
 pcm7220			MACH_PCM7220		PCM7220			730
 gateway7001		MACH_GATEWAY7001	GATEWAY7001		731
 pcm027			MACH_PCM027		PCM027			732
@@ -910,3 +910,5 @@
 nadia2vb		MACH_NADIA2VB		NADIA2VB		897
 r1000			MACH_R1000		R1000			898
 hw90250			MACH_HW90250		HW90250			899
+
+creator_pxa270	MACH_CREATOR_PXA270	CREATOR_PXA270	729
Index: linux-2.6.15.3/arch/arm/boot/compressed/Makefile
===================================================================
--- linux-2.6.15.3/arch/arm/boot/compressed/Makefile	(revision 1)
+++ linux-2.6.15.3/arch/arm/boot/compressed/Makefile	(revision 7613)
@@ -58,6 +58,10 @@
 OBJS		+= big-endian.o
 endif
 
+ifeq ($(CONFIG_MACH_CREATOR_PXA270),y)
+OBJS    	+= head-creator-pxa270.o
+endif
+
 #
 # We now have a PIC decompressor implementation.  Decompressors running
 # from RAM should not define ZTEXTADDR.  Decompressors running directly
Index: linux-2.6.15.3/arch/arm/boot/compressed/head-creator-pxa270.S
===================================================================
--- linux-2.6.15.3/arch/arm/boot/compressed/head-creator-pxa270.S	(revision 0)
+++ linux-2.6.15.3/arch/arm/boot/compressed/head-creator-pxa270.S	(revision 7613)
@@ -0,0 +1,944 @@
+/*--------------------------------------------------------------------
+;
+;   Title     :  linux/arch/arm/boot/compressed/head-creator-pxa270.S
+;             :
+;   Library   :
+;             :
+;   Developers:  MICROTIME MDS group
+;             :
+;   Purpose   :  Creator XScale-PXA270 Initialization routines
+;             :
+;   Limitation:
+;             :
+;   Note      :
+;             :
+;---------------------------------------------------------------------
+;   modification history :
+;---------------------------------------------------------------------
+;   Version| mod. date: |
+;   V1.0   | 04/22/2006 | First release
+;---------------------------------------------------------------------
+;
+; Note:
+;
+;       MICROTIME COMPUTER INC.
+;
+;------------------------------------------------------------------- */
+#include <linux/config.h>
+#include <linux/linkage.h>
+#include <asm/mach-types.h>
+
+		.section        ".start", #alloc, #execinstr
+
+#define MT_CONST(x, y)     .equ   x,   (y)		
+
+
+    .equ    CPU_520MHZ,		1 
+ 
+
+    MT_CONST(CFG_DRAM_BASE,	0xA0000000)
+
+
+	/*===========================================================
+     * CPU Registers
+     *==========================================================*/     
+
+    MT_CONST(OSCR, 0x40A00010)
+    
+	/*===========================================================
+     * ;;;;;;;;;;	GPIO Ddefination	;;;;;;;;;
+     *==========================================================*/
+
+    MT_CONST(GPI,  0)
+    MT_CONST(GPO,  1)
+    MT_CONST(GPIO, 0)
+    MT_CONST(ALT1, 1)
+    MT_CONST(ALT2, 2)
+    MT_CONST(ALT3, 3)
+
+    MT_CONST(GPIO_BASE,		0x40E00000)
+    MT_CONST(GPLR0_OFFSET,	0x00)
+    MT_CONST(GPLR1_OFFSET,	0x04)
+    MT_CONST(GPLR2_OFFSET,	0x08)
+    MT_CONST(GPDR0_OFFSET,	0x0C)
+    MT_CONST(GPDR1_OFFSET,	0x10)
+    MT_CONST(GPDR2_OFFSET,	0x14)
+
+    MT_CONST(GPSR0_OFFSET,	     0x18)
+    MT_CONST(GPSR1_OFFSET,	     0x1C)
+    MT_CONST(GPSR2_OFFSET,	     0x20)
+		
+    MT_CONST(GPCR0_OFFSET,	     0x24)
+    MT_CONST(GPCR1_OFFSET,	     0x28)
+    MT_CONST(GPCR2_OFFSET,	     0x2C)
+
+    MT_CONST(GRER0_OFFSET,	     0x30)
+    MT_CONST(GRER1_OFFSET,	     0x34)
+    MT_CONST(GRER2_OFFSET,	     0x38)
+
+    MT_CONST(GFER0_OFFSET,	     0x3C)
+    MT_CONST(GFER1_OFFSET,	     0x40)
+    MT_CONST(GFER2_OFFSET,	     0x44)
+
+    MT_CONST(GEDR0_OFFSET,	     0x48)
+    MT_CONST(GEDR1_OFFSET,	     0x4C)
+    MT_CONST(GEDR2_OFFSET,	     0x50)
+
+    MT_CONST(GAFR0_L_OFFSET,	     0x54)
+    MT_CONST(GAFR0_U_OFFSET,	     0x58)
+    MT_CONST(GAFR1_L_OFFSET,	     0x5C)
+    MT_CONST(GAFR1_U_OFFSET,	     0x60)
+    MT_CONST(GAFR2_L_OFFSET,	     0x64)
+    MT_CONST(GAFR2_U_OFFSET,	     0x68)
+    MT_CONST(GAFR3_L_OFFSET,	     0x6C)
+    MT_CONST(GAFR3_U_OFFSET,	     0x70)
+
+    MT_CONST(GPLR3_OFFSET,	     0x100)
+    MT_CONST(GPDR3_OFFSET,	     0x10C)
+    MT_CONST(GPSR3_OFFSET,	     0x118)
+    MT_CONST(GPCR3_OFFSET,	     0x124)
+    MT_CONST(GRER3_OFFSET,	     0x130)
+    MT_CONST(GFER3_OFFSET,	     0x13C)
+    MT_CONST(GEDR3_OFFSET,	     0x148)
+
+  
+
+	MT_CONST(AF000,					(GPIO	<< 	0))
+	MT_CONST(AF001,					(GPIO	<< 	2))
+	MT_CONST(AF002,					(GPIO	<< 	4))
+	MT_CONST(AF003,					(GPIO	<< 	6))
+	MT_CONST(AF004,					(GPIO	<< 	8))
+	MT_CONST(AF005,					(GPIO	<< 	10))
+	MT_CONST(AF006,					(GPIO	<< 	12))
+	MT_CONST(AF007,					(GPIO	<< 	14))
+	MT_CONST(AF008,					(GPIO	<< 	16))
+	MT_CONST(AF009,					(GPIO	<< 	18))
+	MT_CONST(AF010,					(GPIO	<< 	20))
+	MT_CONST(AF011,					(ALT3	<< 	22))
+	MT_CONST(AF012,					(GPIO	<< 	24))
+	MT_CONST(AF013,					(GPIO	<< 	26))
+	MT_CONST(AF014,					(ALT1	<< 	28))
+	MT_CONST(AF015,					(ALT2	<< 	30))
+	MT_CONST(AF016,					(GPIO	<< 	0))
+	MT_CONST(AF017,					(GPIO	<< 	2))
+	MT_CONST(AF018,					(ALT1	<< 	4))
+	MT_CONST(AF019,					(ALT2	<< 	6))
+	MT_CONST(AF020,					(ALT1	<< 	8))
+	MT_CONST(AF021,					(ALT2	<< 	10))
+	MT_CONST(AF022,					(GPIO	<< 	12))
+	MT_CONST(AF023,					(GPIO	<< 	14))
+	MT_CONST(AF024,					(GPIO	<< 	16))
+	MT_CONST(AF025,					(GPIO	<< 	18))
+	MT_CONST(AF026,					(GPIO	<< 	20))
+	MT_CONST(AF027,					(GPIO	<< 	22))
+	MT_CONST(AF028,					(ALT1	<< 	24))
+	MT_CONST(AF029,					(ALT1	<< 	26))
+	MT_CONST(AF030,					(ALT2	<< 	28))
+	MT_CONST(AF031,					(ALT2	<< 	30))
+	MT_CONST(AF032,					(ALT2	<< 	0))
+	MT_CONST(AF033,					(ALT2	<< 	2))
+	MT_CONST(AF034,					(GPIO	<< 	4))
+	MT_CONST(AF035,					(ALT1	<< 	6))
+	MT_CONST(AF036,					(ALT1	<< 	8))
+	MT_CONST(AF037,					(ALT1	<< 	10))
+	MT_CONST(AF038,					(ALT1	<< 	12))
+	MT_CONST(AF039,					(ALT2	<< 	14))
+	MT_CONST(AF040,					(ALT2	<< 	16))
+	MT_CONST(AF041,					(ALT1	<< 	18))
+	MT_CONST(AF042,					(ALT1	<< 	20))
+	MT_CONST(AF043,					(ALT2	<< 	22))
+	MT_CONST(AF044,					(ALT1	<< 	24))
+	MT_CONST(AF045,					(ALT2	<< 	26))
+	MT_CONST(AF046,					(ALT1	<< 	28))
+	MT_CONST(AF047,					(GPIO	<< 	30))
+	MT_CONST(AF048,					(ALT2	<< 	0))
+	MT_CONST(AF049,					(ALT2	<< 	2))
+	MT_CONST(AF050,					(ALT2	<< 	4))
+	MT_CONST(AF051,					(ALT2	<< 	6))
+	MT_CONST(AF052,					(GPIO	<< 	8))
+	MT_CONST(AF053,					(GPIO	<< 	10))
+	MT_CONST(AF054,					(ALT2	<< 	12))
+	MT_CONST(AF055,					(ALT2	<< 	14))
+	MT_CONST(AF056,					(ALT1	<< 	16))
+	MT_CONST(AF057,					(ALT1	<< 	18))
+	MT_CONST(AF058,					(ALT2	<< 	20))
+	MT_CONST(AF059,					(ALT2	<< 	22))
+	MT_CONST(AF060,					(ALT2	<< 	24))
+	MT_CONST(AF061,					(ALT2	<< 	26))
+	MT_CONST(AF062,					(ALT2	<< 	28))
+	MT_CONST(AF063,					(ALT2	<< 	30))
+	MT_CONST(AF064,					(ALT2	<< 	0))
+	MT_CONST(AF065,					(ALT2	<< 	2))
+	MT_CONST(AF066,					(ALT2	<< 	4))
+	MT_CONST(AF067,					(ALT2	<< 	6))
+	MT_CONST(AF068,					(ALT2	<< 	8))
+	MT_CONST(AF069,					(ALT2	<< 	10))
+	MT_CONST(AF070,					(ALT2	<< 	12))
+	MT_CONST(AF071,					(ALT2	<< 	14))
+	MT_CONST(AF072,					(ALT2	<< 	16))
+	MT_CONST(AF073,					(ALT2	<< 	18))
+	MT_CONST(AF074,					(ALT2	<< 	20))
+	MT_CONST(AF075,					(ALT2	<< 	22))
+	MT_CONST(AF076,					(ALT2	<< 	24))
+	MT_CONST(AF077,					(ALT2	<< 	26))
+	MT_CONST(AF078,					(ALT2	<< 	28))
+	MT_CONST(AF079,					(ALT1	<< 	30))
+	MT_CONST(AF080,					(ALT2	<< 	0))
+	MT_CONST(AF081,					(GPIO	<< 	2))
+	MT_CONST(AF082,					(GPIO	<< 	4))
+	MT_CONST(AF083,					(ALT3	<< 	6))
+	MT_CONST(AF084,					(GPIO	<< 	8))
+	MT_CONST(AF085,					(ALT1	<< 	10))
+	MT_CONST(AF086,					(ALT2	<< 	12))
+	MT_CONST(AF087,					(ALT2	<< 	14))
+	MT_CONST(AF088,					(ALT1	<< 	16))
+	MT_CONST(AF089,					(ALT2	<< 	18))
+	MT_CONST(AF090,					(GPIO	<< 	20))
+	MT_CONST(AF091,					(GPIO	<< 	22))
+	MT_CONST(AF092,					(ALT1	<< 	24))
+	MT_CONST(AF093,					(GPIO	<< 	26))
+	MT_CONST(AF094,					(GPIO	<< 	28))
+	MT_CONST(AF095,					(GPIO	<< 	30))
+	MT_CONST(AF096,					(ALT2	<< 	0))
+	MT_CONST(AF097,					(ALT2	<< 	2))
+	MT_CONST(AF098,					(GPIO	<< 	4))
+	MT_CONST(AF099,					(GPIO	<< 	6))
+	MT_CONST(AF100,					(GPIO	<< 	8))
+	MT_CONST(AF101,					(GPIO	<< 	10))
+	MT_CONST(AF102,					(GPIO	<< 	12))
+	MT_CONST(AF103,					(GPIO	<< 	14))
+	MT_CONST(AF104,					(GPIO	<< 	16))
+	MT_CONST(AF105,					(GPIO	<< 	18))
+	MT_CONST(AF106,					(GPIO	<< 	20))
+	MT_CONST(AF107,					(GPIO	<< 	22))
+	MT_CONST(AF108,					(GPIO	<< 	24))
+	MT_CONST(AF109,					(ALT1	<< 	26))
+	MT_CONST(AF110,					(ALT1	<< 	28))
+	MT_CONST(AF111,					(ALT1	<< 	30))
+	MT_CONST(AF112,					(ALT1	<< 	0))
+	MT_CONST(AF113,					(ALT2	<< 	2))
+	MT_CONST(AF114,					(GPIO	<< 	4))
+	MT_CONST(AF115,					(GPIO	<< 	6))
+	MT_CONST(AF116,					(GPIO	<< 	8))
+	MT_CONST(AF117,					(ALT1	<< 	10))
+	MT_CONST(AF118,					(ALT1	<< 	12))
+	MT_CONST(AF119,					(GPIO	<< 	14))
+	MT_CONST(AF120,					(GPIO	<< 	16))
+
+	MT_CONST(CFG_GAFR0_U_VAL1,		(AF031 | AF030 | AF029 | AF028 | AF027 | AF026 | AF025 | AF024))
+	MT_CONST(CFG_GAFR0_U_VAL0,		(AF023 | AF022 | AF021 | AF020 | AF019 | AF018 | AF017 | AF016))
+	MT_CONST(CFG_GAFR0_U_VAL,		(CFG_GAFR0_U_VAL1 | CFG_GAFR0_U_VAL0))
+	MT_CONST(CFG_GAFR0_L_VAL1,		(AF015 | AF014 | AF013 | AF012 | AF011 | AF010 | AF009 | AF008))
+	MT_CONST(CFG_GAFR0_L_VAL0,		(AF007 | AF006 | AF005 | AF004 | AF003 | AF002 | AF001 | AF000))
+	MT_CONST(CFG_GAFR0_L_VAL,		(CFG_GAFR0_L_VAL1 | CFG_GAFR0_L_VAL0))
+		
+	MT_CONST(CFG_GAFR1_U_VAL1,		(AF063 | AF062 | AF061 | AF060 | AF059 | AF058 | AF057 | AF056))
+	MT_CONST(CFG_GAFR1_U_VAL0,		(AF055 | AF054 | AF053 | AF052 | AF051 | AF050 | AF049 | AF048))
+	MT_CONST(CFG_GAFR1_U_VAL,		(CFG_GAFR1_U_VAL1 | CFG_GAFR1_U_VAL0))
+	MT_CONST(CFG_GAFR1_L_VAL1,		(AF047 | AF046 | AF045 | AF044 | AF043 | AF042 | AF041 | AF040))
+	MT_CONST(CFG_GAFR1_L_VAL0,		(AF039 | AF038 | AF037 | AF036 | AF035 | AF034 | AF033 | AF032))
+	MT_CONST(CFG_GAFR1_L_VAL,		(CFG_GAFR1_L_VAL1 | CFG_GAFR1_L_VAL0))
+
+	MT_CONST(CFG_GAFR2_U_VAL1,		(AF095 | AF094 | AF093 | AF092 | AF091 | AF090 | AF089 | AF088))
+	MT_CONST(CFG_GAFR2_U_VAL0,		(AF087 | AF086 | AF085 | AF084 | AF083 | AF082 | AF081 | AF080))
+	MT_CONST(CFG_GAFR2_U_VAL,		(CFG_GAFR2_U_VAL1 | CFG_GAFR2_U_VAL0))
+	MT_CONST(CFG_GAFR2_L_VAL1,		(AF079 | AF078 | AF077 | AF076 | AF075 | AF074 | AF073 | AF072))
+	MT_CONST(CFG_GAFR2_L_VAL0,		(AF071 | AF070 | AF069 | AF068 | AF067 | AF066 | AF065 | AF064))
+	MT_CONST(CFG_GAFR2_L_VAL,		(CFG_GAFR2_L_VAL1 | CFG_GAFR2_L_VAL0))
+
+	MT_CONST(CFG_GAFR3_U_VAL1,		(AF120))
+	MT_CONST(CFG_GAFR3_U_VAL0,		(AF119 | AF118 | AF117 | AF116 | AF115 | AF114 | AF113 | AF112))
+	MT_CONST(CFG_GAFR3_U_VAL,		(CFG_GAFR3_U_VAL1 | CFG_GAFR3_U_VAL0))
+	MT_CONST(CFG_GAFR3_L_VAL1,		(AF111 | AF110 | AF109 | AF108 | AF107 | AF106 | AF105 | AF104))
+	MT_CONST(CFG_GAFR3_L_VAL0,		(AF103 | AF102 | AF101 | AF100 | AF099 | AF098 | AF097 | AF096))
+	MT_CONST(CFG_GAFR3_L_VAL,		(CFG_GAFR3_L_VAL1 | CFG_GAFR3_L_VAL0))
+
+	MT_CONST(DR000,					(GPI	<< 	0))
+	MT_CONST(DR001,					(GPI	<< 	1))
+	MT_CONST(DR002,					(GPI	<< 	2))
+	MT_CONST(DR003,					(GPI	<< 	3))
+	MT_CONST(DR004,					(GPI	<< 	4))
+	MT_CONST(DR005,					(GPI	<< 	5))
+	MT_CONST(DR006,					(GPI	<< 	6))
+	MT_CONST(DR007,					(GPI	<< 	7))
+	MT_CONST(DR008,					(GPI	<< 	8))
+	MT_CONST(DR009,					(GPO	<< 	9))
+	MT_CONST(DR010,					(GPI	<< 	10))
+	MT_CONST(DR011,					(GPO	<< 	11))
+	MT_CONST(DR012,					(GPI	<< 	12))
+	MT_CONST(DR013,					(GPI	<< 	13))
+	MT_CONST(DR014,					(GPI	<< 	14))
+	MT_CONST(DR015,					(GPO	<< 	15))
+	MT_CONST(DR016,					(GPI	<< 	16))
+	MT_CONST(DR017,					(GPI	<< 	17))
+	MT_CONST(DR018,					(GPI	<< 	18))
+	MT_CONST(DR019,					(GPO	<< 	19))
+	MT_CONST(DR020,					(GPI	<< 	20))
+	MT_CONST(DR021,					(GPO	<< 	21))
+	MT_CONST(DR022,					(GPI	<< 	22))
+	MT_CONST(DR023,					(GPI	<< 	23))
+	MT_CONST(DR024,					(GPI	<< 	24))
+	MT_CONST(DR025,					(GPI	<< 	25))
+	MT_CONST(DR026,					(GPI	<< 	26))
+	MT_CONST(DR027,					(GPI	<< 	27))
+	MT_CONST(DR028,					(GPI	<< 	28))
+	MT_CONST(DR029,					(GPI	<< 	29))
+	MT_CONST(DR030,					(GPO	<< 	30))
+	MT_CONST(DR031,					(GPO	<< 	31))
+	MT_CONST(DR032,					(GPO	<< 	0))
+	MT_CONST(DR033,					(GPO	<< 	1))
+	MT_CONST(DR034,					(GPI	<< 	2))
+	MT_CONST(DR035,					(GPI	<< 	3))
+	MT_CONST(DR036,					(GPI	<< 	4))
+	MT_CONST(DR037,					(GPI	<< 	5))
+	MT_CONST(DR038,					(GPI	<< 	6))
+	MT_CONST(DR039,					(GPO	<< 	7))
+	MT_CONST(DR040,					(GPO	<< 	8))
+	MT_CONST(DR041,					(GPI	<< 	9))
+	MT_CONST(DR042,					(GPI	<< 	10))
+	MT_CONST(DR043,					(GPO	<< 	11))
+	MT_CONST(DR044,					(GPI	<< 	12))
+	MT_CONST(DR045,					(GPO	<< 	13))
+	MT_CONST(DR046,					(GPI	<< 	14))
+	MT_CONST(DR047,					(GPI	<< 	15))
+	MT_CONST(DR048,					(GPO	<< 	16))
+	MT_CONST(DR049,					(GPO	<< 	17))
+	MT_CONST(DR050,					(GPO	<< 	18))
+	MT_CONST(DR051,					(GPO	<< 	19))
+	MT_CONST(DR052,					(GPI	<< 	20))
+	MT_CONST(DR053,					(GPO	<< 	21))
+	MT_CONST(DR054,					(GPO	<< 	22))
+	MT_CONST(DR055,					(GPO	<< 	23))
+	MT_CONST(DR056,					(GPI	<< 	24))
+	MT_CONST(DR057,					(GPI	<< 	25))
+	MT_CONST(DR058,					(GPI	<< 	26))
+	MT_CONST(DR059,					(GPI	<< 	27))
+	MT_CONST(DR060,					(GPI	<< 	28))
+	MT_CONST(DR061,					(GPI	<< 	29))
+	MT_CONST(DR062,					(GPI	<< 	30))
+	MT_CONST(DR063,					(GPI	<< 	31))
+	MT_CONST(DR064,					(GPI	<< 	0))
+	MT_CONST(DR065,					(GPI	<< 	1))
+	MT_CONST(DR066,					(GPI	<< 	2))
+	MT_CONST(DR067,					(GPI	<< 	3))
+	MT_CONST(DR068,					(GPI	<< 	4))
+	MT_CONST(DR069,					(GPI	<< 	5))
+	MT_CONST(DR070,					(GPI	<< 	6))
+	MT_CONST(DR071,					(GPI	<< 	7))
+	MT_CONST(DR072,					(GPI	<< 	8))
+	MT_CONST(DR073,					(GPI	<< 	9))
+	MT_CONST(DR074,					(GPO	<< 	10))
+	MT_CONST(DR075,					(GPO	<< 	11))
+	MT_CONST(DR076,					(GPO	<< 	12))
+	MT_CONST(DR077,					(GPO	<< 	13))
+	MT_CONST(DR078,					(GPO	<< 	14))
+	MT_CONST(DR079,					(GPO	<< 	15))
+	MT_CONST(DR080,					(GPO	<< 	16))
+	MT_CONST(DR081,					(GPI	<< 	17))
+	MT_CONST(DR082,					(GPI	<< 	18))
+	MT_CONST(DR083,					(GPO	<< 	19))
+	MT_CONST(DR084,					(GPI	<< 	20))
+	MT_CONST(DR085,					(GPO	<< 	21))
+	MT_CONST(DR086,					(GPI	<< 	22))
+	MT_CONST(DR087,					(GPI	<< 	23))
+	MT_CONST(DR088,					(GPI	<< 	24))
+	MT_CONST(DR089,					(GPO	<< 	25))
+	MT_CONST(DR090,					(GPI	<< 	26))
+	MT_CONST(DR091,					(GPI	<< 	27))
+	MT_CONST(DR092,					(GPI	<< 	28))
+	MT_CONST(DR093,					(GPI	<< 	29))
+	MT_CONST(DR094,					(GPI	<< 	30))
+	MT_CONST(DR095,					(GPI	<< 	31))
+	MT_CONST(DR096,					(GPO	<< 	0))
+	MT_CONST(DR097,					(GPI	<< 	1))
+	MT_CONST(DR098,					(GPI	<< 	2))
+	MT_CONST(DR099,					(GPI	<< 	3))
+	MT_CONST(DR100,					(GPI	<< 	4))
+	MT_CONST(DR101,					(GPI	<< 	5))
+	MT_CONST(DR102,					(GPI	<< 	6))
+	MT_CONST(DR103,					(GPI	<< 	7))
+	MT_CONST(DR104,					(GPI	<< 	8))
+	MT_CONST(DR105,					(GPI	<< 	9))
+	MT_CONST(DR106,					(GPI	<< 	10))
+	MT_CONST(DR107,					(GPI	<< 	11))
+	MT_CONST(DR108,					(GPI	<< 	12))
+	MT_CONST(DR109,					(GPI	<< 	13))
+	MT_CONST(DR110,					(GPI	<< 	14))
+	MT_CONST(DR111,					(GPI	<< 	15))
+	MT_CONST(DR112,					(GPI	<< 	16))
+	MT_CONST(DR113,					(GPO	<< 	17))
+	MT_CONST(DR114,					(GPI	<< 	18))
+	MT_CONST(DR115,					(GPI	<< 	19))
+	MT_CONST(DR116,					(GPI	<< 	20))
+	MT_CONST(DR117,					(GPI	<< 	21))
+	MT_CONST(DR118,					(GPI	<< 	22))
+	MT_CONST(DR119,					(GPI	<< 	23))
+	MT_CONST(DR120,					(GPI	<< 	24))
+
+	MT_CONST(CFG_GPDR0_VAL3,		(DR031 | DR030 | DR029 | DR028 | DR027 | DR026 | DR025 | DR024))
+	MT_CONST(CFG_GPDR0_VAL2,		(DR023 | DR022 | DR021 | DR020 | DR019 | DR018 | DR017 | DR016))
+	MT_CONST(CFG_GPDR0_VAL1,		(DR015 | DR014 | DR013 | DR012 | DR011 | DR010 | DR009 | DR008))
+	MT_CONST(CFG_GPDR0_VAL0,		(DR007 | DR006 | DR005 | DR004 | DR003 | DR002 | DR001 | DR000))
+	MT_CONST(CFG_GPDR0_VAL,		    (CFG_GPDR0_VAL3 | CFG_GPDR0_VAL2 | CFG_GPDR0_VAL1 | CFG_GPDR0_VAL0))
+	MT_CONST(CFG_GPDR1_VAL3,		(DR063 | DR062 | DR061 | DR060 | DR059 | DR058 | DR057 | DR056))
+	MT_CONST(CFG_GPDR1_VAL2,		(DR055 | DR054 | DR053 | DR052 | DR051 | DR050 | DR049 | DR048))
+	MT_CONST(CFG_GPDR1_VAL1,		(DR047 | DR046 | DR045 | DR044 | DR043 | DR042 | DR041 | DR040))
+	MT_CONST(CFG_GPDR1_VAL0,		(DR039 | DR038 | DR037 | DR036 | DR035 | DR034 | DR033 | DR032))
+	MT_CONST(CFG_GPDR1_VAL,		    (CFG_GPDR1_VAL3 | CFG_GPDR1_VAL2 | CFG_GPDR1_VAL1 | CFG_GPDR1_VAL0))
+	MT_CONST(CFG_GPDR2_VAL3,		(DR095 | DR094 | DR093 | DR092 | DR091 | DR090 | DR089 | DR088))
+	MT_CONST(CFG_GPDR2_VAL2,		(DR087 | DR086 | DR085 | DR084 | DR083 | DR082 | DR081 | DR080))
+	MT_CONST(CFG_GPDR2_VAL1,		(DR079 | DR078 | DR077 | DR076 | DR075 | DR074 | DR073 | DR072))
+	MT_CONST(CFG_GPDR2_VAL0,		(DR071 | DR070 | DR069 | DR068 | DR067 | DR066 | DR065 | DR064))
+	MT_CONST(CFG_GPDR2_VAL,		    (CFG_GPDR2_VAL3 | CFG_GPDR2_VAL2 | CFG_GPDR2_VAL1 | CFG_GPDR2_VAL0))
+	MT_CONST(CFG_GPDR3_VAL3,		(DR120))
+	MT_CONST(CFG_GPDR3_VAL2,		(DR119 | DR118 | DR117 | DR116 | DR115 | DR114 | DR113 | DR112))
+	MT_CONST(CFG_GPDR3_VAL1,		(DR111 | DR110 | DR109 | DR108 | DR107 | DR106 | DR105 | DR104))
+	MT_CONST(CFG_GPDR3_VAL0,		(DR103 | DR102 | DR101 | DR100 | DR099 | DR098 | DR097 | DR096))
+	MT_CONST(CFG_GPDR3_VAL,		    (CFG_GPDR3_VAL3 | CFG_GPDR3_VAL2 | CFG_GPDR3_VAL1 | CFG_GPDR3_VAL0))
+
+
+	/*===========================================================
+     * ;;;;;;;;;;	Interrupt Ddefination	;;;;;;;;;
+     *==========================================================*/
+	MT_CONST(IC_BASE,               0x40D00000)
+	MT_CONST(ICMR_OFFSET,			0x04)
+	MT_CONST(ICLR_OFFSET,			0x08)
+
+	/*===========================================================
+     * ;;;;;;;;;;	CLK Ddefination	;;;;;;;;;
+     *==========================================================*/
+	MT_CONST(CC_BASE,	            0x41300000)
+	MT_CONST(CCCR_OFFSET,			0x00)
+	MT_CONST(CKEN_OFFSET,			0x04)
+
+.ifdef 	CPU_520MHZ
+	MT_CONST(CCCR_VALUE,			0x00000290)
+	
+	/*===========================================================
+     * ;;;;;	RUN = 208M, TURBO = 520M, SYSTEM_BUS==208M, CLK_MEM=104M, SDCLK=104M, SFLASH=52M, LCD=104M
+     * ==========================================================*/
+	MT_CONST(CLKCFG_VALUE,			0xb)
+.else
+	MT_CONST(CCCR_VALUE,			0x00000190)
+
+	/*===========================================================
+     * ;;;;;	RUN = 208M, TURBO = 312M, SYSTEM_BUS==104M, CLK_MEM=104M, SDCLK=104M, SFLASH=52M, LCD=104M
+     *==========================================================*/
+	MT_CONST(CLKCFG_VALUE,			2)	
+.endif
+
+	MT_CONST(PSSR,			        0x40F00004)
+
+	/*===========================================================
+     * ;;;;;;;;;;	MEMC Ddefination	;;;;;;;;;
+     *==========================================================*/
+	MT_CONST(MEMC_BASE,		        0x48000000)
+
+	/*===========================================================
+     *;;;;;	nCS0 = FLASH-16				OE=RDF0+2-1,	WE=RDN0+1,	CS(R/W)=OE/WE+2+1
+     *;;;;;					TEST RESULT	OE=90n			WE=90n(?60)	CS(R/W)=90n/120n(?90)
+     *==========================================================*/     
+	MT_CONST(MCS0_RT0,				0)			/* FLASH                    */
+	MT_CONST(MCS0_RBW0,				1)			/* BW = 16 BITS             */
+	MT_CONST(MCS0_RDF0,				8)			/*cycle time of RD = (8+2CLK_MEM:1'st acc) or (8+1CLK_MEM:others)*/
+	MT_CONST(MCS0_RDN0,				5)			/* cycle time of WE = 5+1 CLK_MEM */
+	MT_CONST(MCS0_RRR0,				1)			/* CS Recovery time = (1 * 2 + 1) CLK_MEM */
+	MT_CONST(MCS0_RBUFF0,			0)			/* Slower device            */
+	MT_CONST(MCS0_VALUE1,			(MCS0_RBUFF0<<15 |  MCS0_RRR0<<12 | MCS0_RDN0<<8 | MCS0_RDF0<<4 | MCS0_RBW0<<3 | MCS0_RT0))
+	MT_CONST(MCS0_VALUE1,			(0x7ff8))
+	
+	/*===========================================================	
+     * ;;;;;	nCS1 = ETHERNET-32			OE=RDF1+1+wait,	nPWE=OE,	CS(R/W)=OE+2+1
+     * ;;;;;					TEST RESULT	OE=40n			nPWE=40n	CS(R/W)=70n
+     *==========================================================*/
+	MT_CONST(MCS0_RT1,				4)			/* VLIO                                   */
+	MT_CONST(MCS0_RBW1,				0)			/* BW = 32 BITS                           */
+	MT_CONST(MCS0_RDF1,				3)			/* cycle time of RD/WE                    */
+	MT_CONST(MCS0_RDN1,				2)			/* nPWE/nOE deasserted period = RDN * 2   */
+	MT_CONST(MCS0_RRR1,				1)			/* CS Recovery time = (1 * 2 + 1) CLK_MEM */ 
+	MT_CONST(MCS0_RBUFF1,			0)			/* Slower device                          */
+	MT_CONST(MCS0_VALUE2,			(MCS0_RBUFF1<<15 |  MCS0_RRR1<<12 | MCS0_RDN1<<8 | MCS0_RDF1<<4 | MCS0_RBW1<<3 | MCS0_RT1))
+	MT_CONST(MCS0_VALUE,			(MCS0_VALUE2 << 16 | MCS0_VALUE1))
+
+	/*===========================================================
+     * ;;;;;	nCS2 = Creator_IO-16		OE=RDF2+1+wait,	nPWE=OE,	CS(R/W)=OE+2+1
+     * ;;;;;					TEST RESULT	OE=120n			nPWE=120n	CS(R/W)=150n
+     *==========================================================*/     
+	MT_CONST(MCS1_RT2,				4)			/* VLIO                                    */
+	MT_CONST(MCS1_RBW2,				1)			/* BW = 16 BITS                            */
+	MT_CONST(MCS1_RDF2,				12)			/* (11)cycle time of RD/WE (setup to 120ns)*/
+	MT_CONST(MCS1_RDN2,				2)			/* (2)nPWE/nOE deasserted period = RDN * 2 */
+	MT_CONST(MCS1_RRR2,				1)			/* CS Recovery time = (1 * 2 + 1) CLK_MEM  */
+	MT_CONST(MCS1_RBUFF2,			0)			/* Slower device                           */
+	MT_CONST(MCS1_VALUE1,			(MCS1_RBUFF2<<15 |  MCS1_RRR2<<12 | MCS1_RDN2<<8 | MCS1_RDF2<<4 | MCS1_RBW2<<3 | MCS1_RT2))
+	MT_CONST(MCS1_VALUE2,			(0x0000))
+	MT_CONST(MCS1_VALUE,			(MCS1_VALUE2 << 16 | MCS1_VALUE1))
+
+	/*===========================================================
+     * ;;;;;	nCS4 = SRAM-16				OE=RDF4+2-1,	WE=RDN4+1,	CS(R/W)=OE/WE+2+1
+     * ;;;;;					TEST RESULT	OE=60n			WE=40n		CS(R/W)=60n/70n
+     *==========================================================*/
+	MT_CONST(MCS2_RT4,				1)			/* SRAM             */
+	MT_CONST(MCS2_RBW4,				1)			/* BW = 16 BITS     */
+	MT_CONST(MCS2_RDF4,				5)			/* cycle time of RD = (5+2CLK_MEM:1'st acc) or (5+1CLK_MEM:others) */
+	MT_CONST(MCS2_RDN4,				3)			/* cycle time of WE = 3+1 CLK_MEM          */
+	MT_CONST(MCS2_RRR4,				1)			/* CS Recovery time = (1 * 2 + 1) CLK_MEM  */
+	MT_CONST(MCS2_RBUFF4,			0)			/* Slower device                           */
+	MT_CONST(MCS2_VALUE1,			(MCS2_RBUFF4<<15 |  MCS2_RRR4<<12 | MCS2_RDN4<<8 | MCS2_RDF4<<4 | MCS2_RBW4<<3 | MCS2_RT4))
+
+	/*===========================================================
+     * ;;;;;	nCS5 = Creator_IO-16-0WAIT	OE=RDF4+2-1,	WE=RDN4+1,	CS(R/W)=OE/WE+2+1
+     * ;;;;;					TEST RESULT	OE=60n			WE=40n		CS(R/W)=60n/70n
+     *==========================================================*/     
+	MT_CONST(MCS2_RT5,				1)			/* SRAM                                    */
+	MT_CONST(MCS2_RBW5,				1)			/* BW = 16 BITS                            */
+	MT_CONST(MCS2_RDF5,				5)			/* cycle time of RD = (5+2CLK_MEM:1'st acc) or (5+1CLK_MEM:others) */
+	MT_CONST(MCS2_RDN5,				3)			/* cycle time of WE = 3+1 CLK_MEM          */
+	MT_CONST(MCS2_RRR5,				1)			/* CS Recovery time = (1 * 2 + 1) CLK_MEM  */
+	MT_CONST(MCS2_RBUFF5,			0)			/* Slower device                           */
+	MT_CONST(MCS2_VALUE2,			(MCS2_RBUFF5<<15 |  MCS2_RRR5<<12 | MCS2_RDN5<<8 | MCS2_RDF5<<4 | MCS2_RBW5<<3 | MCS2_RT5))
+	MT_CONST(MCS2_VALUE,			(MCS2_VALUE2 << 16 | MCS2_VALUE1))
+
+
+	MT_CONST(MDCNFG_OFFSET,       0x0)
+	MT_CONST(MDREFR_OFFSET,       0x4)
+	MT_CONST(MSC0_OFFSET,         0x8)
+	MT_CONST(MSC1_OFFSET,         0xC)
+	MT_CONST(MSC2_OFFSET,         0x10)
+	MT_CONST(MECR_OFFSET,         0x14)
+	MT_CONST(SXLCR_OFFSET,        0x18)
+	MT_CONST(SXCNFG_OFFSET,       0x1C)
+	MT_CONST(FLYCNFG_OFFSET,      0x20)
+	MT_CONST(SXMRS_OFFSET,        0x24)
+	MT_CONST(MCMEM0_OFFSET,       0x28)
+	MT_CONST(MCMEM1_OFFSET,       0x2C)
+	MT_CONST(MCATT0_OFFSET,       0x30)
+	MT_CONST(MCATT1_OFFSET,       0x34)
+	MT_CONST(MCIO0_OFFSET,        0x38)
+	MT_CONST(MCIO1_OFFSET,        0x3C)
+	MT_CONST(MDMRS_OFFSET,        0x40)
+
+	MT_CONST(MDREFR_K0DB4,       (1 << 29))
+	MT_CONST(MDREFR_K2FREE,	     (1 << 25))
+	MT_CONST(MDREFR_K1FREE,	     (1 << 24))
+	MT_CONST(MDREFR_K0FREE,	     (1 << 23))
+	MT_CONST(MDREFR_SLFRSH,	     (1 << 22))
+	MT_CONST(MDREFR_APD,		 (1 << 20))
+	MT_CONST(MDREFR_K2DB2,	     (1 << 19))
+	MT_CONST(MDREFR_K2RUN,	     (1 << 18))
+	MT_CONST(MDREFR_K1DB2,	     (1 << 17))
+	MT_CONST(MDREFR_K1RUN,	     (1 << 16))
+	MT_CONST(MDREFR_E1PIN,	     (1 << 15))
+	MT_CONST(MDREFR_K0DB2,	     (1 << 14))
+	MT_CONST(MDREFR_K0RUN,	     (1 << 13))
+	MT_CONST(MDREFR_E0PIN,	     (1 << 12))
+
+
+
+	MT_CONST(MCMEM0_SET,		 (4-2))	/* 36ns  */
+	MT_CONST(MCMEM0_ASST,	     (3))	/* 150ns */
+	MT_CONST(MCMEM0_HOLD,	     (4))	/* 36ns  */
+	MT_CONST(MCATT0_SET,		 (4-2))	/* 36ns  */
+	MT_CONST(MCATT0_ASST,	     (8))	/* 300ns */
+	MT_CONST(MCATT0_HOLD,	     (4))	/* 36ns  */
+	MT_CONST(MCIO0_SET,	         (8-2))	/* 72ns  */
+	MT_CONST(MCIO0_ASST,	     (4))	/* 180ns */
+	MT_CONST(MCIO0_HOLD,	     (4))	/* 36ns  */
+	MT_CONST(CFG_MECR_VAL,		  0)
+	MT_CONST(CFG_MCMEM0_VAL,	 ((MCMEM0_HOLD << 14) | (MCMEM0_ASST << 7) | (MCMEM0_SET)))
+	MT_CONST(CFG_MCMEM1_VAL,	 0xfffff)
+	MT_CONST(CFG_MCATT0_VAL,	 ((MCATT0_HOLD << 14) | (MCATT0_ASST << 7) | (MCATT0_SET)))
+	MT_CONST(CFG_MCATT1_VAL,	 0xfffff)
+	MT_CONST(CFG_MCIO0_VAL,		 ((MCIO0_HOLD << 14) | (MCIO0_ASST << 7) | (MCIO0_SET)))
+	MT_CONST(CFG_MCIO1_VAL,		 0xfffff)
+
+
+    MT_CONST(CKEN,                0x41300004)
+    
+    MT_CONST(FFUART,              0x40100000)  
+    MT_CONST(UART_IER_OFFSET,     0x00000004)
+    MT_CONST(UART_FCR_OFFSET,     0x00000008)
+    MT_CONST(UART_LCR_OFFSET,     0x0000000C)
+    MT_CONST(UART_DLL_OFFSET,     0x00000000)
+    MT_CONST(UART_DLH_OFFSET,     0x00000004)
+    MT_CONST(CKEN6_FFUART,	     (1 << 6))
+
+    MT_CONST(PXA_BAUD_CLOCK,      921600)
+    MT_CONST(UART_BAUD,           9600)
+    MT_CONST(UART_QUAT_DLL,      ((PXA_BAUD_CLOCK/UART_BAUD) & 0xff))
+    MT_CONST(UART_QUAT_DLH,      ((PXA_BAUD_CLOCK/UART_BAUD) >>8))    
+    
+    MT_CONST(IER_UUE,		    (1 << 6))	/* UART Unit Enable */        
+    
+    MT_CONST(LCR_DLAB,	         (1 << 7))	/* Divisor Latch Access Bit */
+    MT_CONST(LCR_SB,	         (1 << 6))	/* Set Break */
+    MT_CONST(LCR_STKYP,	         (1 << 5))	/* Sticky Parity */
+    MT_CONST(LCR_EPS,		     (1 << 4))	/* Even Parity Select */
+    MT_CONST(LCR_PEN,		     (1 << 3))	/* Parity Enable */
+    MT_CONST(LCR_STB,		     (1 << 2))	/* Stop Bit */
+    MT_CONST(LCR_WLS1,	         (1 << 1))	/* Word Length Select */
+    MT_CONST(LCR_WLS0,	         (1 << 0))	/* Word Length Select */    
+
+__Creator_PXA270_start:
+
+		@ Preserve r8/r7 i.e. kernel entry values
+
+	/*===========================================================
+     * disable all IRQS
+     *==========================================================*/
+    ldr		r0, =IC_BASE
+    mov		r1, #0x00
+    str		r1, [r0, #ICMR_OFFSET]
+    str		r1, [r0, #ICLR_OFFSET]
+
+	
+	/*===========================================================
+	 * Disable and clear caches
+     *==========================================================*/	
+	mrc  	p15,0,r0,c1,c0,0
+	bic  	r0,r0,#0x1000        	/* disable ICache	*/
+	bic  	r0,r0,#0x000f           /* disable DCache, write buffer */	
+                                    /* MMU and alignment faults		*/
+	mcr  	p15,0,r0,c1,c0,0
+	nop
+	nop
+	mov  	r0,#0
+	mcr  	p15,0,r0,c7,c6,0        /* clear data cache		*/
+
+	/*===========================================================
+	 *;Set memory control registers
+     *==========================================================*/
+    
+  	/*===========================================================
+     * Initial CLK 
+     *==========================================================*/   
+	ldr		r0, =CC_BASE
+	
+	ldr		r1, =CCCR_VALUE
+	str		r1, [r0, #CCCR_OFFSET]
+	
+	mov		r0, #CLKCFG_VALUE
+	mcr		p14, 0, r0, c6, c0, 0
+
+ /*
+   ;	mov		r1, #0x00500000
+   ;	str		r1, [r0, #CKEN_OFFSET]
+  */ 
+
+
+  	/*===========================================================
+     * ########## Initial GPIO
+     *==========================================================*/  
+	ldr     r1,  =GPIO_BASE
+
+	/*===========================================================
+	 *	1=set
+     *==========================================================*/ 
+     	
+	ldr     r2,   =0x00008000	/* CFG_GPSR0_VAL */
+	str     r2,   [r1, #GPSR0_OFFSET]
+	
+	ldr     r2,   =0x00CF0002	/* CFG_GPSR1_VAL */
+	str     r2,   [r1, #GPSR1_OFFSET]
+
+	ldr     r2,   =0x0201c000	/* CFG_GPSR2_VAL */
+	str     r2,   [r1, #GPSR2_OFFSET]
+
+	ldr     r2,   =0	       /* CFG_GPSR3_VAL  */
+	str     r2,   [r1, #GPSR3_OFFSET]
+	
+	/*===========================================================	
+	 *	1=clear
+     *==========================================================*/ 	
+	
+	ldr     r2,   =0	/* CFG_GPCR0_VAL */
+	str     r2,   [r1, #GPCR0_OFFSET]
+	
+	ldr     r2,   =0	/* CFG_GPCR1_VAL */
+	str     r2,   [r1, #GPCR1_OFFSET]
+
+	ldr     r2,   =0	/* CFG_GPCR2_VAL */
+	str     r2,   [r1, #GPCR2_OFFSET]
+
+	ldr     r2,   =0	/* CFG_GPCR3_VAL */
+	str     r2,   [r1, #GPCR3_OFFSET]
+
+	/*===========================================================
+	 *	1=out/0=in
+     *==========================================================*/ 		
+
+	ldr     r2,   =CFG_GPDR0_VAL
+	str     r2,   [r1, #GPDR0_OFFSET]
+	
+	ldr     r2,   =CFG_GPDR1_VAL
+	str     r2,   [r1, #GPDR1_OFFSET]
+
+	ldr     r2,   =CFG_GPDR2_VAL
+	str     r2,   [r1, #GPDR2_OFFSET]
+
+	ldr     r2,   =CFG_GPDR3_VAL
+	str     r2,   [r1, #GPDR3_OFFSET]
+
+	/*===========================================================
+	 *	0=gpio
+     *==========================================================*/ 		
+
+	ldr     r2,   =CFG_GAFR0_L_VAL
+	str     r2,   [r1, #GAFR0_L_OFFSET]
+	ldr     r2,   =CFG_GAFR0_U_VAL
+	str     r2,   [r1, #GAFR0_U_OFFSET]
+
+	ldr     r2,   =CFG_GAFR1_L_VAL
+	str     r2,   [r1, #GAFR1_L_OFFSET]
+	ldr     r2,   =CFG_GAFR1_U_VAL
+	str     r2,   [r1, #GAFR1_U_OFFSET]
+
+	ldr     r2,   =CFG_GAFR2_L_VAL
+	str     r2,   [r1, #GAFR2_L_OFFSET]
+	ldr     r2,   =CFG_GAFR2_U_VAL
+	str     r2,   [r1, #GAFR2_U_OFFSET]
+
+	ldr     r2,   =CFG_GAFR3_L_VAL
+	str     r2,   [r1, #GAFR3_L_OFFSET]
+	ldr     r2,   =CFG_GAFR3_U_VAL
+	str     r2,   [r1, #GAFR3_U_OFFSET]
+
+	ldr		r0,	=PSSR
+	ldr		r1,	=0x30    /*	CFG_PSSR_VAL  */
+	str		r1,   [r0]
+
+	/*===========================================================
+     * ########## Initial Mmory Controller
+     *==========================================================*/ 
+mem_init:
+
+	ldr     r1,  =MEMC_BASE
+
+ 	/* ---------------------------------------------------------------- */
+ 	/* Step 2a: Initialize Asynchronous static memory controller        */
+ 	/* ---------------------------------------------------------------- */
+
+ 	/* MSC registers: timing, bus width, mem type                       */
+
+ 	/* MSC0: nCS(1,0)                                                   */
+	ldr     r2,  =MCS0_VALUE
+	str     r2,  [r1, #MSC0_OFFSET]
+	ldr     r2,  [r1, #MSC0_OFFSET]
+
+ 	/* MSC1: nCS(3,2)                                                   */
+	ldr     r2,  =MCS1_VALUE
+	str     r2,  [r1, #MSC1_OFFSET]
+	ldr     r2,  [r1, #MSC1_OFFSET]
+
+ 	/* MSC2: nCS(5,4)                                                   */
+	ldr     r2,  =MCS2_VALUE
+	str     r2,  [r1, #MSC2_OFFSET]
+	ldr     r2,  [r1, #MSC2_OFFSET]
+
+ 	/* ---------------------------------------------------------------- */
+    /* Step 2b: Initialize Card Interface                               */
+ 	/* ---------------------------------------------------------------- */
+
+ 	/* MECR: Memory Expansion Card Register                             */
+	ldr     r2, =CFG_MECR_VAL
+	str     r2, [r1, #MECR_OFFSET]
+	ldr		r2,	[r1, #MECR_OFFSET]
+
+ 	/* MCMEM0: Card Interface slot 0 timing                             */
+	ldr     r2, =CFG_MCMEM0_VAL
+	str     r2, [r1, #MCMEM0_OFFSET]
+	ldr		r2,	[r1, #MCMEM0_OFFSET]
+
+ 	/* MCMEM1: Card Interface slot 1 timing                             */
+	ldr     r2, =CFG_MCMEM1_VAL
+	str     r2, [r1, #MCMEM1_OFFSET]
+	ldr		r2,	[r1, #MCMEM1_OFFSET]
+
+ 	/* MCATT0: Card Interface Attribute Space Timing, slot 0            */
+	ldr     r2, =CFG_MCATT0_VAL
+	str     r2, [r1, #MCATT0_OFFSET]
+	ldr		r2,	[r1, #MCATT0_OFFSET]
+
+ 	/* MCATT1: Card Interface Attribute Space Timing, slot 1            */
+	ldr     r2, =CFG_MCATT1_VAL
+	str     r2, [r1, #MCATT1_OFFSET]
+	ldr		r2,	[r1, #MCATT1_OFFSET]
+
+    /* MCIO0: Card Interface I/O Space Timing, slot 0                   */
+	ldr     r2, =CFG_MCIO0_VAL
+	str     r2, [r1, #MCIO0_OFFSET]
+	ldr		r2,	[r1, #MCIO0_OFFSET]
+
+ 	/* MCIO1: Card Interface I/O Space Timing, slot 1                   */
+	ldr     r2, =CFG_MCIO1_VAL
+	str     r2, [r1, #MCIO1_OFFSET]
+	ldr		r2,	[r1, #MCIO1_OFFSET]
+
+ 	/* ---------------------------------------------------------------- */
+ 	/* Step 2d: Initialize Timing for Sync Memory (SDCLK0)              */
+ 	/* ---------------------------------------------------------------- */
+
+ 	/* ---------------------------------------------------------------- 
+     * ;	ldr     r4,	=0x23ca401e
+     * ;	str		r4,	[r1, #MDREFR_OFFSET]
+     * ;	ldr     r4, [r1, #MDREFR_OFFSET]
+ 	 * ---------------------------------------------------------------- */     
+
+
+	ldr		r4,	[r1, #MDREFR_OFFSET]
+	ldr     r2,     =0xFFF
+	bic		r4,     r4, r2
+	
+	ldr     r3,     =0x01e   /*	CFG_MDREFR_VAL */
+	and     r3,     r3,  r2
+
+	orr		r4,     r4, r3
+	str		r4,	[r1, #MDREFR_OFFSET]
+
+    bic     r4,  r4, #MDREFR_K0RUN
+    orr     r4,  r4, #MDREFR_K0DB4
+    orr     r4,  r4, #MDREFR_K0FREE
+    orr     r4,  r4, #MDREFR_K0DB2
+    bic     r4,  r4, #MDREFR_K1DB2
+    bic     r4,  r4, #MDREFR_K1FREE
+    bic     r4,  r4, #MDREFR_K2FREE
+		
+	str		r4,	 [r1, #MDREFR_OFFSET]
+	ldr     r4,  [r1, #MDREFR_OFFSET]
+
+ 	/* Note: preserve the mdrefr value in r4                            */
+
+
+ 	/* ---------------------------------------------------------------- */
+ 	/* Step 3: Initialize Synchronous Static Memory (Flash/Peripherals) */
+ 	/* ---------------------------------------------------------------- */
+
+ 	/* Initialize SXCNFG register. Assert the enable bits               */
+
+ 	/* Write SXMRS to cause an MRS command to all enabled banks of      */
+ 	/* synchronous static memory. Note that SXLCR need not be written   */
+ 	/* at this time.                                                    */
+
+    ldr     r2,  =0x40044004
+    str     r2,  [r1, #SXCNFG_OFFSET]
+
+    /* ---------------------------------------------------------------- */
+ 	/* Step 4: Initialize SDRAM                                         */
+ 	/* ---------------------------------------------------------------- */
+
+	bic     r4, r4, #(MDREFR_K2FREE |MDREFR_K1FREE | MDREFR_K0FREE)
+
+    orr     r4, r4, #MDREFR_K1RUN
+    bic     r4, r4, #MDREFR_K2DB2
+    str     r4, [r1, #MDREFR_OFFSET]
+    ldr     r4, [r1, #MDREFR_OFFSET]
+
+    bic     r4, r4, #MDREFR_SLFRSH
+    str     r4, [r1, #MDREFR_OFFSET]
+    ldr     r4, [r1, #MDREFR_OFFSET]
+
+    orr     r4, r4, #MDREFR_E1PIN
+    str     r4, [r1, #MDREFR_OFFSET]
+    ldr     r4, [r1, #MDREFR_OFFSET]
+
+    nop
+    nop
+
+    /* Step 4a: set memory buffer strengths                             */
+
+ 	/* Step 4d: write MDCNFG with MDCNFG:DEx deasserted (set to 0), to  */
+ 	/*          configure but not enable each SDRAM partition pair.     */
+
+	ldr		r4,	=0x08000ac9	  /* CFG_MDCNFG_VAL  */
+	str     r4, [r1, #MDCNFG_OFFSET]
+	ldr     r4, [r1, #MDCNFG_OFFSET]
+
+
+ 	/* Step 4e: Wait for the clock to the SDRAMs to stabilize,          */
+ 	/*          100..200 ¢FGgsec.                                          */
+
+	ldr 	r3, =OSCR
+	mov 	r2, #0
+	str 	r2, [r3]
+	ldr 	r4, =0x300
+
+loop1:
+	ldr 	r2, [r3]
+	cmp 	r4, r2
+	bgt 	loop1
+
+
+.ifdef LOADER
+ 	/* Step 4f: Trigger a number (usually 8) refresh cycles by          */
+ 	/*          attempting non-burst read or write accesses to disabled */
+ 	/*          SDRAM, as commonly specified in the power up sequence   */
+ 	/*          documented in SDRAM data sheets. The address(es) used   */
+ 	/*          for this purpose must not be cacheable.                 */
+
+	ldr		r3,	=CFG_DRAM_BASE
+	str		r2,	[r3]
+	str		r2,	[r3]
+	str		r2,	[r3]
+	str		r2,	[r3]
+	str		r2,	[r3]
+	str		r2,	[r3]
+	str		r2,	[r3]
+	str		r2,	[r3]
+.endif	
+
+
+ 	/* Step 4g: Write MDCNFG with enable bits asserted                  */
+ 	/*          (MDCNFG:DEx set to 1).                                  */
+
+	ldr     r3,	[r1, #MDCNFG_OFFSET]
+	mov		r4, r3
+	orr		r3,	r3,	#1	 /* MDCNFG_DE0 */
+	str     r3,	[r1, #MDCNFG_OFFSET]
+	mov		r0, r3
+
+ 	/* Step 4h: Write MDMRS.                                            */
+
+	ldr     r2,  =0	     /* CFG_MDMRS_VAL */
+	str     r2,  [r1, #MDMRS_OFFSET]
+
+ 	/* enable APD */
+	/*===========================================================
+     * ;   ldr     r3,  [r1, #MDREFR_OFFSET]
+     * ;   orr     r3,  r3,  #MDREFR_APD
+     * ;   str     r3,  [r1, #MDREFR_OFFSET]
+     * ==========================================================*/         
+
+	/* We are finished with Intel's memory controller initialisation    */	
+	
+	
+    /* ---------------------------------------------------------------- */
+ 	/* Initialize FFUART                                                */
+ 	/* ---------------------------------------------------------------- */    
+    ldr     r3,=CKEN                     /* Clock enable register */
+    ldr     r0,[r3, #0]
+    orr     r3,r3,#CKEN6_FFUART          /* enable FFUART clock   */
+    str     r3,[r3, #0]
+
+	ldr     r3,=FFUART					/* Disable for now */    
+	mov     r0,#0					
+	str     r0,[r3, #UART_IER_OFFSET]    /* Disable FFUART for now */	
+	str     r0,[r3, #UART_FCR_OFFSET]    /* No fifos enabled */
+
+	/* set baud rate */
+	mov     r0, #(LCR_WLS0 | LCR_WLS1 | LCR_DLAB)
+	str     r0,[r3, #UART_LCR_OFFSET]            /* Enable access DLL/DLH */
+	mov     r0,#UART_QUAT_DLL                   /* set baud to DLL */
+	str     r0,[r3, #UART_DLL_OFFSET]
+	mov     r0,#UART_QUAT_DLH
+	str     r0,[r3, #UART_DLH_OFFSET]	        /* set baud to DLH */
+	mov     r0, #(LCR_WLS0 | LCR_WLS1)	
+	str     r0,[r3, #UART_LCR_OFFSET]
+    mov     r0,#IER_UUE     
+	str     r0,[r3, #UART_IER_OFFSET]			/* Enable FFUART */    	
+	
+	    
+     b      __Creator_PXA270_end     
+	.pool	     
+
+__Creator_PXA270_end:
+

Property changes on: linux-2.6.15.3/arch/arm/boot/compressed/head-creator-pxa270.S
___________________________________________________________________
Name: svn:executable
   + *

Index: linux-2.6.15.3/arch/arm/Makefile
===================================================================
--- linux-2.6.15.3/arch/arm/Makefile	(revision 1)
+++ linux-2.6.15.3/arch/arm/Makefile	(revision 7613)
@@ -15,7 +15,7 @@
 
 # Do not use arch/arm/defconfig - it's always outdated.
 # Select a platform tht is kept up-to-date
-KBUILD_DEFCONFIG := versatile_defconfig
+KBUILD_DEFCONFIG := creator_pxa270_defconfig
 
 ifeq ($(CONFIG_FRAME_POINTER),y)
 CFLAGS		+=-fno-omit-frame-pointer -mapcs -mno-sched-prolog
Index: linux-2.6.15.3/arch/arm/configs/creator_device_pxa270_defconfig
===================================================================
--- linux-2.6.15.3/arch/arm/configs/creator_device_pxa270_defconfig	(revision 0)
+++ linux-2.6.15.3/arch/arm/configs/creator_device_pxa270_defconfig	(revision 7613)
@@ -0,0 +1,1208 @@
+#
+# Automatically generated make config: don't edit
+# Linux kernel version: 2.6.15
+# Wed Apr  2 10:52:30 2008
+#
+CONFIG_ARM=y
+CONFIG_MMU=y
+CONFIG_UID16=y
+CONFIG_RWSEM_GENERIC_SPINLOCK=y
+CONFIG_GENERIC_CALIBRATE_DELAY=y
+
+#
+# Code maturity level options
+#
+CONFIG_EXPERIMENTAL=y
+CONFIG_CLEAN_COMPILE=y
+CONFIG_BROKEN_ON_SMP=y
+CONFIG_INIT_ENV_ARG_LIMIT=32
+
+#
+# General setup
+#
+CONFIG_LOCALVERSION=""
+CONFIG_LOCALVERSION_AUTO=y
+CONFIG_SWAP=y
+CONFIG_SYSVIPC=y
+# CONFIG_POSIX_MQUEUE is not set
+# CONFIG_BSD_PROCESS_ACCT is not set
+CONFIG_SYSCTL=y
+# CONFIG_AUDIT is not set
+CONFIG_HOTPLUG=y
+CONFIG_KOBJECT_UEVENT=y
+CONFIG_IKCONFIG=y
+# CONFIG_IKCONFIG_PROC is not set
+CONFIG_INITRAMFS_SOURCE=""
+# CONFIG_CC_OPTIMIZE_FOR_SIZE is not set
+CONFIG_EMBEDDED=y
+CONFIG_KALLSYMS=y
+# CONFIG_KALLSYMS_ALL is not set
+# CONFIG_KALLSYMS_EXTRA_PASS is not set
+CONFIG_PRINTK=y
+CONFIG_BUG=y
+CONFIG_BASE_FULL=y
+CONFIG_FUTEX=y
+CONFIG_EPOLL=y
+CONFIG_SHMEM=y
+CONFIG_CC_ALIGN_FUNCTIONS=0
+CONFIG_CC_ALIGN_LABELS=0
+CONFIG_CC_ALIGN_LOOPS=0
+CONFIG_CC_ALIGN_JUMPS=0
+# CONFIG_TINY_SHMEM is not set
+CONFIG_BASE_SMALL=0
+
+#
+# Loadable module support
+#
+CONFIG_MODULES=y
+CONFIG_MODULE_UNLOAD=y
+# CONFIG_MODULE_FORCE_UNLOAD is not set
+CONFIG_OBSOLETE_MODPARM=y
+# CONFIG_MODVERSIONS is not set
+# CONFIG_MODULE_SRCVERSION_ALL is not set
+# CONFIG_KMOD is not set
+
+#
+# Block layer
+#
+CONFIG_LBD=y
+
+#
+# IO Schedulers
+#
+CONFIG_IOSCHED_NOOP=y
+# CONFIG_IOSCHED_AS is not set
+CONFIG_IOSCHED_DEADLINE=y
+# CONFIG_IOSCHED_CFQ is not set
+# CONFIG_DEFAULT_AS is not set
+CONFIG_DEFAULT_DEADLINE=y
+# CONFIG_DEFAULT_CFQ is not set
+# CONFIG_DEFAULT_NOOP is not set
+CONFIG_DEFAULT_IOSCHED="deadline"
+
+#
+# System Type
+#
+# CONFIG_ARCH_CLPS7500 is not set
+# CONFIG_ARCH_CLPS711X is not set
+# CONFIG_ARCH_CO285 is not set
+# CONFIG_ARCH_EBSA110 is not set
+# CONFIG_ARCH_CAMELOT is not set
+CONFIG_ARCH_SL2312=y
+# CONFIG_ARCH_FOOTBRIDGE is not set
+# CONFIG_ARCH_INTEGRATOR is not set
+# CONFIG_ARCH_IOP3XX is not set
+# CONFIG_ARCH_IXP4XX is not set
+# CONFIG_ARCH_IXP2000 is not set
+# CONFIG_ARCH_L7200 is not set
+# CONFIG_ARCH_PXA is not set
+# CONFIG_ARCH_RPC is not set
+# CONFIG_ARCH_SA1100 is not set
+# CONFIG_ARCH_S3C2410 is not set
+# CONFIG_ARCH_SHARK is not set
+# CONFIG_ARCH_LH7A40X is not set
+# CONFIG_ARCH_OMAP is not set
+# CONFIG_ARCH_VERSATILE is not set
+# CONFIG_ARCH_REALVIEW is not set
+# CONFIG_ARCH_IMX is not set
+# CONFIG_ARCH_H720X is not set
+# CONFIG_ARCH_AAEC2000 is not set
+
+#
+# SL2312
+#
+CONFIG_SL3516_ASIC=y
+CONFIG_PCI=y
+# CONFIG_SL2312_LPC is not set
+CONFIG_SL2312_USB=y
+# CONFIG_GEMINI_IPI is not set
+
+#
+# Processor Type
+#
+CONFIG_CPU_32=y
+CONFIG_CPU_FA526=y
+CONFIG_CPU_32v4=y
+CONFIG_CPU_ABRT_EV4=y
+CONFIG_CPU_CACHE_VIVT=y
+CONFIG_CPU_CACHE_FA=y
+CONFIG_CPU_COPY_FA=y
+CONFIG_CPU_FA_BTB=y
+CONFIG_CPU_TLB_FA=y
+
+#
+# Processor Features
+#
+# CONFIG_CPU_ICACHE_DISABLE is not set
+# CONFIG_CPU_DCACHE_DISABLE is not set
+# CONFIG_CPU_DCACHE_WRITETHROUGH is not set
+
+#
+# Bus support
+#
+CONFIG_ISA_DMA_API=y
+# CONFIG_PCI_LEGACY_PROC is not set
+# CONFIG_PCI_DEBUG is not set
+
+#
+# PCCARD (PCMCIA/CardBus) support
+#
+# CONFIG_PCCARD is not set
+
+#
+# Kernel Features
+#
+# CONFIG_PREEMPT is not set
+# CONFIG_NO_IDLE_HZ is not set
+# CONFIG_ARCH_DISCONTIGMEM_ENABLE is not set
+CONFIG_SELECT_MEMORY_MODEL=y
+CONFIG_FLATMEM_MANUAL=y
+# CONFIG_DISCONTIGMEM_MANUAL is not set
+# CONFIG_SPARSEMEM_MANUAL is not set
+CONFIG_FLATMEM=y
+CONFIG_FLAT_NODE_MEM_MAP=y
+# CONFIG_SPARSEMEM_STATIC is not set
+CONFIG_SPLIT_PTLOCK_CPUS=4096
+CONFIG_ALIGNMENT_TRAP=y
+
+#
+# Boot options
+#
+CONFIG_ZBOOT_ROM_TEXT=0
+CONFIG_ZBOOT_ROM_BSS=0
+CONFIG_CMDLINE="root=/dev/ram0 rw console=ttySL0,19200 initrd=0x00800000,16M ramdisk_size=16384"
+# CONFIG_XIP_KERNEL is not set
+
+#
+# Floating point emulation
+#
+
+#
+# At least one emulation must be selected
+#
+CONFIG_FPE_NWFPE=y
+# CONFIG_FPE_NWFPE_XP is not set
+# CONFIG_FPE_FASTFPE is not set
+
+#
+# Userspace binary formats
+#
+CONFIG_BINFMT_ELF=y
+CONFIG_BINFMT_AOUT=y
+# CONFIG_BINFMT_MISC is not set
+# CONFIG_ARTHUR is not set
+
+#
+# Power management options
+#
+# CONFIG_PM is not set
+
+#
+# Networking
+#
+CONFIG_NET=y
+
+#
+# Networking options
+#
+CONFIG_PACKET=y
+CONFIG_PACKET_MMAP=y
+CONFIG_UNIX=y
+# CONFIG_NET_KEY is not set
+CONFIG_INET=y
+CONFIG_IP_MULTICAST=y
+# CONFIG_IP_ADVANCED_ROUTER is not set
+CONFIG_IP_FIB_HASH=y
+# CONFIG_IP_PNP is not set
+# CONFIG_NET_IPIP is not set
+# CONFIG_NET_IPGRE is not set
+# CONFIG_IP_MROUTE is not set
+# CONFIG_ARPD is not set
+# CONFIG_SYN_COOKIES is not set
+# CONFIG_INET_AH is not set
+# CONFIG_INET_ESP is not set
+# CONFIG_INET_IPCOMP is not set
+# CONFIG_INET_TUNNEL is not set
+# CONFIG_INET_DIAG is not set
+# CONFIG_TCP_CONG_ADVANCED is not set
+CONFIG_TCP_CONG_BIC=y
+# CONFIG_IPV6 is not set
+# CONFIG_NETFILTER is not set
+
+#
+# DCCP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_DCCP is not set
+
+#
+# SCTP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_SCTP is not set
+# CONFIG_ATM is not set
+CONFIG_BRIDGE=y
+# CONFIG_VLAN_8021Q is not set
+# CONFIG_DECNET is not set
+# CONFIG_LLC2 is not set
+# CONFIG_IPX is not set
+# CONFIG_ATALK is not set
+# CONFIG_X25 is not set
+# CONFIG_LAPB is not set
+# CONFIG_NET_DIVERT is not set
+# CONFIG_ECONET is not set
+# CONFIG_WAN_ROUTER is not set
+
+#
+# QoS and/or fair queueing
+#
+# CONFIG_NET_SCHED is not set
+
+#
+# Network testing
+#
+# CONFIG_NET_PKTGEN is not set
+# CONFIG_HAMRADIO is not set
+# CONFIG_IRDA is not set
+# CONFIG_BT is not set
+# CONFIG_IEEE80211 is not set
+
+#
+# Device Drivers
+#
+
+#
+# Generic Driver Options
+#
+# CONFIG_STANDALONE is not set
+# CONFIG_PREVENT_FIRMWARE_BUILD is not set
+# CONFIG_FW_LOADER is not set
+# CONFIG_DEBUG_DRIVER is not set
+
+#
+# Connector - unified userspace <-> kernelspace linker
+#
+# CONFIG_CONNECTOR is not set
+
+#
+# Memory Technology Devices (MTD)
+#
+CONFIG_MTD=y
+# CONFIG_MTD_DEBUG is not set
+# CONFIG_MTD_CONCAT is not set
+CONFIG_MTD_PARTITIONS=y
+# CONFIG_MTD_REDBOOT_PARTS is not set
+# CONFIG_MTD_CMDLINE_PARTS is not set
+# CONFIG_MTD_AFS_PARTS is not set
+
+#
+# User Modules And Translation Layers
+#
+CONFIG_MTD_CHAR=y
+# CONFIG_MTD_BLOCK is not set
+# CONFIG_MTD_BLOCK_RO is not set
+# CONFIG_FTL is not set
+# CONFIG_NFTL is not set
+# CONFIG_INFTL is not set
+# CONFIG_RFD_FTL is not set
+
+#
+# RAM/ROM/Flash chip drivers
+#
+CONFIG_MTD_CFI=y
+# CONFIG_MTD_JEDECPROBE is not set
+CONFIG_MTD_GEN_PROBE=y
+CONFIG_MTD_CFI_ADV_OPTIONS=y
+CONFIG_MTD_CFI_NOSWAP=y
+# CONFIG_MTD_CFI_BE_BYTE_SWAP is not set
+# CONFIG_MTD_CFI_LE_BYTE_SWAP is not set
+CONFIG_MTD_CFI_GEOMETRY=y
+# CONFIG_MTD_MAP_BANK_WIDTH_1 is not set
+CONFIG_MTD_MAP_BANK_WIDTH_2=y
+# CONFIG_MTD_MAP_BANK_WIDTH_4 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_8 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_16 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_32 is not set
+CONFIG_MTD_CFI_I1=y
+# CONFIG_MTD_CFI_I2 is not set
+# CONFIG_MTD_CFI_I4 is not set
+# CONFIG_MTD_CFI_I8 is not set
+# CONFIG_MTD_OTP is not set
+# CONFIG_MTD_CFI_INTELEXT is not set
+CONFIG_MTD_CFI_AMDSTD=y
+CONFIG_MTD_CFI_AMDSTD_RETRY=100
+# CONFIG_MTD_CFI_STAA is not set
+CONFIG_MTD_CFI_UTIL=y
+# CONFIG_MTD_RAM is not set
+# CONFIG_MTD_ROM is not set
+# CONFIG_MTD_SERIAL is not set
+# CONFIG_MTD_ABSENT is not set
+# CONFIG_MTD_XIP is not set
+
+#
+# Mapping drivers for chip access
+#
+# CONFIG_MTD_COMPLEX_MAPPINGS is not set
+# CONFIG_MTD_PHYSMAP is not set
+# CONFIG_MTD_ARM_INTEGRATOR is not set
+# CONFIG_MTD_PLATRAM is not set
+CONFIG_MTD_SL2312_CFI=y
+# CONFIG_MTD_SL2312_SERIAL_ATMEL is not set
+# CONFIG_MTD_SL2312_SERIAL_ST is not set
+CONFIG_SL2312_SHARE_PIN=y
+
+#
+# Self-contained MTD device drivers
+#
+# CONFIG_MTD_PMC551 is not set
+# CONFIG_MTD_SLRAM is not set
+# CONFIG_MTD_PHRAM is not set
+# CONFIG_MTD_MTDRAM is not set
+# CONFIG_MTD_BLKMTD is not set
+# CONFIG_MTD_BLOCK2MTD is not set
+
+#
+# Disk-On-Chip Device Drivers
+#
+# CONFIG_MTD_DOC2000 is not set
+# CONFIG_MTD_DOC2001 is not set
+# CONFIG_MTD_DOC2001PLUS is not set
+
+#
+# NAND Flash Device Drivers
+#
+# CONFIG_MTD_NAND is not set
+
+#
+# OneNAND Flash Device Drivers
+#
+# CONFIG_MTD_ONENAND is not set
+
+#
+# Telephony Support
+#
+# CONFIG_PHONE is not set
+
+#
+# Parallel port support
+#
+# CONFIG_PARPORT is not set
+
+#
+# Plug and Play support
+#
+
+#
+# Block devices
+#
+# CONFIG_BLK_CPQ_DA is not set
+# CONFIG_BLK_CPQ_CISS_DA is not set
+# CONFIG_BLK_DEV_DAC960 is not set
+# CONFIG_BLK_DEV_UMEM is not set
+# CONFIG_BLK_DEV_COW_COMMON is not set
+CONFIG_BLK_DEV_LOOP=y
+CONFIG_BLK_DEV_CRYPTOLOOP=y
+# CONFIG_BLK_DEV_NBD is not set
+# CONFIG_BLK_DEV_SX8 is not set
+# CONFIG_BLK_DEV_UB is not set
+CONFIG_BLK_DEV_RAM=y
+CONFIG_BLK_DEV_RAM_COUNT=16
+CONFIG_BLK_DEV_RAM_SIZE=16384
+CONFIG_BLK_DEV_INITRD=y
+# CONFIG_CDROM_PKTCDVD is not set
+# CONFIG_ATA_OVER_ETH is not set
+
+#
+# ATA/ATAPI/MFM/RLL support
+#
+CONFIG_IDE=y
+CONFIG_BLK_DEV_IDE=y
+
+#
+# Please see Documentation/ide.txt for help/info on IDE drives
+#
+# CONFIG_BLK_DEV_IDE_SATA is not set
+CONFIG_BLK_DEV_IDEDISK=y
+# CONFIG_IDEDISK_MULTI_MODE is not set
+CONFIG_BLK_DEV_IDECD=y
+# CONFIG_BLK_DEV_IDETAPE is not set
+# CONFIG_BLK_DEV_IDEFLOPPY is not set
+# CONFIG_BLK_DEV_IDESCSI is not set
+CONFIG_IDE_TASK_IOCTL=y
+
+#
+# IDE chipset support/bugfixes
+#
+CONFIG_IDE_GENERIC=y
+# CONFIG_BLK_DEV_IDEPCI is not set
+CONFIG_BLK_DEV_IDEDMA_PCI=y
+# CONFIG_BLK_DEV_IDEDMA_FORCED is not set
+# CONFIG_IDEDMA_PCI_AUTO is not set
+# CONFIG_BLK_DEV_AEC62XX is not set
+# CONFIG_BLK_DEV_ALI15X3 is not set
+# CONFIG_BLK_DEV_AMD74XX is not set
+# CONFIG_BLK_DEV_CMD64X is not set
+# CONFIG_BLK_DEV_TRIFLEX is not set
+# CONFIG_BLK_DEV_CY82C693 is not set
+# CONFIG_BLK_DEV_CS5520 is not set
+# CONFIG_BLK_DEV_CS5530 is not set
+# CONFIG_BLK_DEV_HPT34X is not set
+# CONFIG_BLK_DEV_HPT366 is not set
+# CONFIG_BLK_DEV_SC1200 is not set
+# CONFIG_BLK_DEV_PIIX is not set
+# CONFIG_BLK_DEV_IT821X is not set
+# CONFIG_BLK_DEV_NS87415 is not set
+# CONFIG_BLK_DEV_PDC202XX_OLD is not set
+# CONFIG_BLK_DEV_PDC202XX_NEW is not set
+# CONFIG_BLK_DEV_SVWKS is not set
+# CONFIG_BLK_DEV_SIIMAGE is not set
+# CONFIG_BLK_DEV_SLC90E66 is not set
+# CONFIG_BLK_DEV_TRM290 is not set
+# CONFIG_BLK_DEV_VIA82CXXX is not set
+# CONFIG_IDE_ARM is not set
+CONFIG_BLK_DEV_IDE_SL2312=y
+CONFIG_BLK_DEV_SL2312_IDE_CHANNEL_0=y
+CONFIG_BLK_DEV_SL2312_IDE_CHANNEL_1=y
+CONFIG_BLK_DEV_IDEDMA=y
+# CONFIG_IDEDMA_IVB is not set
+# CONFIG_IDEDMA_AUTO is not set
+# CONFIG_BLK_DEV_HD is not set
+
+#
+# SCSI device support
+#
+CONFIG_RAID_ATTRS=y
+CONFIG_SCSI=y
+CONFIG_SCSI_PROC_FS=y
+
+#
+# SCSI support type (disk, tape, CD-ROM)
+#
+CONFIG_BLK_DEV_SD=y
+# CONFIG_CHR_DEV_ST is not set
+# CONFIG_CHR_DEV_OSST is not set
+# CONFIG_BLK_DEV_SR is not set
+CONFIG_CHR_DEV_SG=y
+# CONFIG_CHR_DEV_SCH is not set
+
+#
+# Some SCSI devices (e.g. CD jukebox) support multiple LUNs
+#
+# CONFIG_SCSI_MULTI_LUN is not set
+# CONFIG_SCSI_CONSTANTS is not set
+# CONFIG_SCSI_LOGGING is not set
+
+#
+# SCSI Transport Attributes
+#
+# CONFIG_SCSI_SPI_ATTRS is not set
+# CONFIG_SCSI_FC_ATTRS is not set
+# CONFIG_SCSI_ISCSI_ATTRS is not set
+# CONFIG_SCSI_SAS_ATTRS is not set
+
+#
+# SCSI low-level drivers
+#
+# CONFIG_ISCSI_TCP is not set
+# CONFIG_BLK_DEV_3W_XXXX_RAID is not set
+# CONFIG_SCSI_3W_9XXX is not set
+# CONFIG_SCSI_ACARD is not set
+# CONFIG_SCSI_AACRAID is not set
+# CONFIG_SCSI_AIC7XXX is not set
+# CONFIG_SCSI_AIC7XXX_OLD is not set
+# CONFIG_SCSI_AIC79XX is not set
+# CONFIG_SCSI_DPT_I2O is not set
+# CONFIG_MEGARAID_NEWGEN is not set
+# CONFIG_MEGARAID_LEGACY is not set
+# CONFIG_MEGARAID_SAS is not set
+# CONFIG_SCSI_SATA is not set
+# CONFIG_SCSI_BUSLOGIC is not set
+# CONFIG_SCSI_DMX3191D is not set
+# CONFIG_SCSI_EATA is not set
+# CONFIG_SCSI_FUTURE_DOMAIN is not set
+# CONFIG_SCSI_GDTH is not set
+# CONFIG_SCSI_IPS is not set
+# CONFIG_SCSI_INITIO is not set
+# CONFIG_SCSI_INIA100 is not set
+# CONFIG_SCSI_SYM53C8XX_2 is not set
+# CONFIG_SCSI_IPR is not set
+# CONFIG_SCSI_QLOGIC_FC is not set
+# CONFIG_SCSI_QLOGIC_1280 is not set
+CONFIG_SCSI_QLA2XXX=y
+# CONFIG_SCSI_QLA21XX is not set
+# CONFIG_SCSI_QLA22XX is not set
+# CONFIG_SCSI_QLA2300 is not set
+# CONFIG_SCSI_QLA2322 is not set
+# CONFIG_SCSI_QLA6312 is not set
+# CONFIG_SCSI_QLA24XX is not set
+# CONFIG_SCSI_LPFC is not set
+# CONFIG_SCSI_DC395x is not set
+# CONFIG_SCSI_DC390T is not set
+# CONFIG_SCSI_NSP32 is not set
+# CONFIG_SCSI_DEBUG is not set
+
+#
+# Multi-device support (RAID and LVM)
+#
+CONFIG_MD=y
+CONFIG_BLK_DEV_MD=y
+CONFIG_MD_LINEAR=y
+CONFIG_MD_RAID0=y
+CONFIG_MD_RAID1=y
+CONFIG_MD_RAID10=y
+CONFIG_MD_RAID5=y
+CONFIG_GEMINI_XOR_ACCE=y
+# CONFIG_MD_RAID6 is not set
+CONFIG_MD_MULTIPATH=y
+# CONFIG_MD_FAULTY is not set
+# CONFIG_BLK_DEV_DM is not set
+
+#
+# Fusion MPT device support
+#
+# CONFIG_FUSION is not set
+# CONFIG_FUSION_SPI is not set
+# CONFIG_FUSION_FC is not set
+# CONFIG_FUSION_SAS is not set
+
+#
+# IEEE 1394 (FireWire) support
+#
+# CONFIG_IEEE1394 is not set
+
+#
+# I2O device support
+#
+# CONFIG_I2O is not set
+
+#
+# Network device support
+#
+CONFIG_NETDEVICES=y
+# CONFIG_DUMMY is not set
+# CONFIG_BONDING is not set
+# CONFIG_EQUALIZER is not set
+# CONFIG_TUN is not set
+
+#
+# ARCnet devices
+#
+# CONFIG_ARCNET is not set
+
+#
+# Ethernet (10 or 100Mbit)
+#
+# CONFIG_NET_ETHERNET is not set
+
+#
+# Ethernet (1000 Mbit)
+#
+# CONFIG_ACENIC is not set
+CONFIG_NET_GMAC=y
+# CONFIG_NET_SL2312 is not set
+CONFIG_NET_SL351X=y
+CONFIG_SL2312_TSO=y
+CONFIG_SL2312_MPAGE=y
+CONFIG_SL2312_RECVFILE=y
+# CONFIG_SL351X_BR is not set
+# CONFIG_DL2K is not set
+# CONFIG_E1000 is not set
+# CONFIG_NS83820 is not set
+# CONFIG_HAMACHI is not set
+# CONFIG_YELLOWFIN is not set
+# CONFIG_R8169 is not set
+# CONFIG_SK98LIN is not set
+# CONFIG_TIGON3 is not set
+
+#
+# Ethernet (10000 Mbit)
+#
+# CONFIG_IXGB is not set
+# CONFIG_S2IO is not set
+
+#
+# Token Ring devices
+#
+# CONFIG_TR is not set
+
+#
+# Wireless LAN (non-hamradio)
+#
+CONFIG_NET_RADIO=y
+
+#
+# Obsolete Wireless cards support (pre-802.11)
+#
+# CONFIG_STRIP is not set
+
+#
+# Wireless 802.11b ISA/PCI cards support
+#
+# CONFIG_AIRO is not set
+# CONFIG_HERMES is not set
+# CONFIG_ATMEL is not set
+
+#
+# Prism GT/Duette 802.11(a/b/g) PCI/Cardbus support
+#
+# CONFIG_PRISM54 is not set
+# CONFIG_HOSTAP is not set
+CONFIG_NET_WIRELESS=y
+
+#
+# Wan interfaces
+#
+# CONFIG_WAN is not set
+# CONFIG_FDDI is not set
+# CONFIG_HIPPI is not set
+CONFIG_PPP=y
+# CONFIG_PPP_MULTILINK is not set
+# CONFIG_PPP_FILTER is not set
+CONFIG_PPP_ASYNC=y
+CONFIG_PPP_SYNC_TTY=y
+CONFIG_PPP_DEFLATE=y
+CONFIG_PPP_BSDCOMP=y
+CONFIG_PPPOE=y
+# CONFIG_SLIP is not set
+# CONFIG_NET_FC is not set
+# CONFIG_SHAPER is not set
+# CONFIG_NETCONSOLE is not set
+
+#
+# ISDN subsystem
+#
+# CONFIG_ISDN is not set
+
+#
+# Input device support
+#
+CONFIG_INPUT=y
+
+#
+# Userland interfaces
+#
+# CONFIG_INPUT_MOUSEDEV is not set
+# CONFIG_INPUT_JOYDEV is not set
+# CONFIG_INPUT_TSDEV is not set
+# CONFIG_INPUT_EVDEV is not set
+# CONFIG_INPUT_EVBUG is not set
+
+#
+# Input Device Drivers
+#
+# CONFIG_INPUT_KEYBOARD is not set
+# CONFIG_INPUT_MOUSE is not set
+# CONFIG_INPUT_JOYSTICK is not set
+# CONFIG_INPUT_TOUCHSCREEN is not set
+# CONFIG_INPUT_MISC is not set
+
+#
+# Hardware I/O ports
+#
+# CONFIG_SERIO is not set
+# CONFIG_GAMEPORT is not set
+
+#
+# Character devices
+#
+CONFIG_VT=y
+CONFIG_VT_CONSOLE=y
+CONFIG_HW_CONSOLE=y
+# CONFIG_SERIAL_NONSTANDARD is not set
+CONFIG_GEMINI_GPIO=y
+CONFIG_GEMINI_CIR=y
+CONFIG_GEMINI_PWC=y
+# CONFIG_GEMINI_I2S is not set
+
+#
+# Serial drivers
+#
+# CONFIG_SERIAL_8250 is not set
+
+#
+# Non-8250 serial port support
+#
+CONFIG_SERIAL_SL2312=y
+CONFIG_SERIAL_SL2312_CONSOLE=y
+CONFIG_SERIAL_CORE=y
+CONFIG_SERIAL_CORE_CONSOLE=y
+# CONFIG_SERIAL_JSM is not set
+CONFIG_UNIX98_PTYS=y
+CONFIG_LEGACY_PTYS=y
+CONFIG_LEGACY_PTY_COUNT=256
+
+#
+# IPMI
+#
+# CONFIG_IPMI_HANDLER is not set
+
+#
+# Watchdog Cards
+#
+CONFIG_WATCHDOG=y
+# CONFIG_WATCHDOG_NOWAYOUT is not set
+
+#
+# Watchdog Device Drivers
+#
+# CONFIG_SOFT_WATCHDOG is not set
+
+#
+# PCI-based Watchdog Cards
+#
+# CONFIG_PCIPCWATCHDOG is not set
+# CONFIG_WDTPCI is not set
+
+#
+# USB-based Watchdog Cards
+#
+# CONFIG_USBPCWATCHDOG is not set
+CONFIG_SL2312_WATCHDOG=y
+# CONFIG_NVRAM is not set
+# CONFIG_RTC is not set
+CONFIG_SL2312_RTC=y
+# CONFIG_SL2312_LCD is not set
+# CONFIG_DTLK is not set
+# CONFIG_R3964 is not set
+# CONFIG_APPLICOM is not set
+
+#
+# Ftape, the floppy tape device driver
+#
+# CONFIG_DRM is not set
+# CONFIG_RAW_DRIVER is not set
+
+#
+# TPM devices
+#
+# CONFIG_TCG_TPM is not set
+# CONFIG_TELCLOCK is not set
+
+#
+# I2C support
+#
+# CONFIG_I2C is not set
+
+#
+# Hardware Monitoring support
+#
+# CONFIG_HWMON is not set
+# CONFIG_HWMON_VID is not set
+
+#
+# Misc devices
+#
+
+#
+# Multimedia Capabilities Port drivers
+#
+
+#
+# Multimedia devices
+#
+# CONFIG_VIDEO_DEV is not set
+
+#
+# Digital Video Broadcasting Devices
+#
+# CONFIG_DVB is not set
+
+#
+# Graphics support
+#
+# CONFIG_FB is not set
+
+#
+# Console display driver support
+#
+# CONFIG_VGA_CONSOLE is not set
+CONFIG_DUMMY_CONSOLE=y
+
+#
+# Sound
+#
+# CONFIG_SOUND is not set
+
+#
+# USB support
+#
+CONFIG_USB_ARCH_HAS_HCD=y
+CONFIG_USB_ARCH_HAS_OHCI=y
+CONFIG_USB=y
+# CONFIG_USB_DEBUG is not set
+
+#
+# Miscellaneous USB options
+#
+CONFIG_USB_DEVICEFS=y
+# CONFIG_USB_BANDWIDTH is not set
+# CONFIG_USB_DYNAMIC_MINORS is not set
+# CONFIG_USB_OTG is not set
+
+#
+# USB Host Controller Drivers
+#
+# CONFIG_USB_EHCI_HCD is not set
+# CONFIG_USB_ISP116X_HCD is not set
+# CONFIG_USB_OHCI_HCD is not set
+# CONFIG_USB_UHCI_HCD is not set
+# CONFIG_USB_SL811_HCD is not set
+CONFIG_USB_SL2312=y
+# CONFIG_USB_SL2312_1 is not set
+
+#
+# USB Device Class drivers
+#
+# CONFIG_USB_ACM is not set
+CONFIG_USB_PRINTER=y
+
+#
+# USB OTG Controller Drivers
+#
+CONFIG_USB_OTG_SL2312=y
+# CONFIG_USB_OTG_SL2312_1 is not set
+
+#
+# NOTE: USB_STORAGE enables SCSI, and 'SCSI disk support'
+#
+
+#
+# may also be needed; see USB_STORAGE Help for more information
+#
+CONFIG_USB_STORAGE=y
+# CONFIG_USB_STORAGE_DEBUG is not set
+# CONFIG_USB_STORAGE_DATAFAB is not set
+# CONFIG_USB_STORAGE_FREECOM is not set
+# CONFIG_USB_STORAGE_ISD200 is not set
+# CONFIG_USB_STORAGE_DPCM is not set
+# CONFIG_USB_STORAGE_USBAT is not set
+# CONFIG_USB_STORAGE_SDDR09 is not set
+# CONFIG_USB_STORAGE_SDDR55 is not set
+# CONFIG_USB_STORAGE_JUMPSHOT is not set
+
+#
+# USB Input Devices
+#
+# CONFIG_USB_HID is not set
+
+#
+# USB HID Boot Protocol drivers
+#
+# CONFIG_USB_KBD is not set
+# CONFIG_USB_MOUSE is not set
+# CONFIG_USB_AIPTEK is not set
+# CONFIG_USB_WACOM is not set
+# CONFIG_USB_ACECAD is not set
+# CONFIG_USB_KBTAB is not set
+# CONFIG_USB_POWERMATE is not set
+# CONFIG_USB_MTOUCH is not set
+# CONFIG_USB_ITMTOUCH is not set
+# CONFIG_USB_EGALAX is not set
+# CONFIG_USB_YEALINK is not set
+# CONFIG_USB_XPAD is not set
+# CONFIG_USB_ATI_REMOTE is not set
+# CONFIG_USB_KEYSPAN_REMOTE is not set
+# CONFIG_USB_APPLETOUCH is not set
+
+#
+# USB Imaging devices
+#
+# CONFIG_USB_MDC800 is not set
+# CONFIG_USB_MICROTEK is not set
+
+#
+# USB Multimedia devices
+#
+# CONFIG_USB_DABUSB is not set
+
+#
+# Video4Linux support is needed for USB Multimedia device support
+#
+
+#
+# USB Network Adapters
+#
+# CONFIG_USB_CATC is not set
+# CONFIG_USB_KAWETH is not set
+# CONFIG_USB_PEGASUS is not set
+# CONFIG_USB_RTL8150 is not set
+# CONFIG_USB_USBNET is not set
+# CONFIG_USB_ZD1201 is not set
+# CONFIG_USB_MON is not set
+
+#
+# USB port drivers
+#
+
+#
+# USB Serial Converter support
+#
+# CONFIG_USB_SERIAL is not set
+
+#
+# USB Miscellaneous drivers
+#
+# CONFIG_USB_EMI62 is not set
+# CONFIG_USB_EMI26 is not set
+# CONFIG_USB_AUERSWALD is not set
+# CONFIG_USB_RIO500 is not set
+# CONFIG_USB_LEGOTOWER is not set
+# CONFIG_USB_LCD is not set
+# CONFIG_USB_LED is not set
+# CONFIG_USB_CYTHERM is not set
+# CONFIG_USB_PHIDGETKIT is not set
+# CONFIG_USB_PHIDGETSERVO is not set
+# CONFIG_USB_IDMOUSE is not set
+# CONFIG_USB_LD is not set
+# CONFIG_USB_TEST is not set
+
+#
+# USB DSL modem support
+#
+
+#
+# USB Gadget Support
+#
+# CONFIG_USB_GADGET is not set
+
+#
+# MMC/SD Card support
+#
+# CONFIG_MMC is not set
+
+#
+# File systems
+#
+CONFIG_EXT2_FS=y
+# CONFIG_EXT2_FS_XATTR is not set
+# CONFIG_EXT2_FS_XIP is not set
+CONFIG_EXT3_FS=y
+# CONFIG_EXT3_FS_XATTR is not set
+CONFIG_JBD=y
+# CONFIG_JBD_DEBUG is not set
+# CONFIG_REISERFS_FS is not set
+# CONFIG_JFS_FS is not set
+# CONFIG_FS_POSIX_ACL is not set
+CONFIG_XFS_FS=y
+CONFIG_XFS_EXPORT=y
+CONFIG_XFS_QUOTA=y
+# CONFIG_XFS_SECURITY is not set
+CONFIG_XFS_POSIX_ACL=y
+# CONFIG_XFS_RT is not set
+# CONFIG_MINIX_FS is not set
+# CONFIG_ROMFS_FS is not set
+CONFIG_INOTIFY=y
+CONFIG_QUOTA=y
+# CONFIG_QFMT_V1 is not set
+CONFIG_QFMT_V2=y
+CONFIG_QUOTACTL=y
+CONFIG_DNOTIFY=y
+# CONFIG_AUTOFS_FS is not set
+CONFIG_AUTOFS4_FS=y
+# CONFIG_FUSE_FS is not set
+
+#
+# CD-ROM/DVD Filesystems
+#
+CONFIG_ISO9660_FS=y
+# CONFIG_JOLIET is not set
+# CONFIG_ZISOFS is not set
+# CONFIG_UDF_FS is not set
+
+#
+# DOS/FAT/NT Filesystems
+#
+CONFIG_FAT_FS=y
+CONFIG_MSDOS_FS=y
+CONFIG_VFAT_FS=y
+CONFIG_FAT_DEFAULT_CODEPAGE=950
+CONFIG_FAT_DEFAULT_IOCHARSET="utf8"
+CONFIG_NTFS_FS=y
+# CONFIG_NTFS_DEBUG is not set
+# CONFIG_NTFS_RW is not set
+
+#
+# Pseudo filesystems
+#
+CONFIG_PROC_FS=y
+CONFIG_SYSFS=y
+CONFIG_TMPFS=y
+# CONFIG_HUGETLB_PAGE is not set
+CONFIG_RAMFS=y
+# CONFIG_RELAYFS_FS is not set
+
+#
+# Miscellaneous filesystems
+#
+# CONFIG_ADFS_FS is not set
+# CONFIG_AFFS_FS is not set
+# CONFIG_HFS_FS is not set
+# CONFIG_HFSPLUS_FS is not set
+# CONFIG_BEFS_FS is not set
+# CONFIG_BFS_FS is not set
+# CONFIG_EFS_FS is not set
+# CONFIG_JFFS_FS is not set
+# CONFIG_JFFS2_FS is not set
+# CONFIG_CRAMFS is not set
+# CONFIG_VXFS_FS is not set
+# CONFIG_HPFS_FS is not set
+# CONFIG_QNX4FS_FS is not set
+# CONFIG_SYSV_FS is not set
+# CONFIG_UFS_FS is not set
+
+#
+# Network File Systems
+#
+CONFIG_NFS_FS=y
+CONFIG_NFS_V3=y
+# CONFIG_NFS_V3_ACL is not set
+# CONFIG_NFS_V4 is not set
+# CONFIG_NFS_DIRECTIO is not set
+CONFIG_NFSD=y
+CONFIG_NFSD_V3=y
+# CONFIG_NFSD_V3_ACL is not set
+# CONFIG_NFSD_V4 is not set
+CONFIG_NFSD_TCP=y
+CONFIG_LOCKD=y
+CONFIG_LOCKD_V4=y
+CONFIG_EXPORTFS=y
+CONFIG_NFS_COMMON=y
+CONFIG_SUNRPC=y
+# CONFIG_RPCSEC_GSS_KRB5 is not set
+# CONFIG_RPCSEC_GSS_SPKM3 is not set
+# CONFIG_SMB_FS is not set
+CONFIG_CIFS=y
+# CONFIG_CIFS_STATS is not set
+# CONFIG_CIFS_XATTR is not set
+# CONFIG_CIFS_EXPERIMENTAL is not set
+# CONFIG_NCP_FS is not set
+# CONFIG_CODA_FS is not set
+# CONFIG_AFS_FS is not set
+# CONFIG_9P_FS is not set
+
+#
+# Partition Types
+#
+# CONFIG_PARTITION_ADVANCED is not set
+CONFIG_MSDOS_PARTITION=y
+
+#
+# Native Language Support
+#
+CONFIG_NLS=y
+CONFIG_NLS_DEFAULT="utf8"
+CONFIG_NLS_CODEPAGE_437=y
+# CONFIG_NLS_CODEPAGE_737 is not set
+# CONFIG_NLS_CODEPAGE_775 is not set
+# CONFIG_NLS_CODEPAGE_850 is not set
+# CONFIG_NLS_CODEPAGE_852 is not set
+# CONFIG_NLS_CODEPAGE_855 is not set
+# CONFIG_NLS_CODEPAGE_857 is not set
+# CONFIG_NLS_CODEPAGE_860 is not set
+# CONFIG_NLS_CODEPAGE_861 is not set
+# CONFIG_NLS_CODEPAGE_862 is not set
+# CONFIG_NLS_CODEPAGE_863 is not set
+# CONFIG_NLS_CODEPAGE_864 is not set
+# CONFIG_NLS_CODEPAGE_865 is not set
+# CONFIG_NLS_CODEPAGE_866 is not set
+# CONFIG_NLS_CODEPAGE_869 is not set
+CONFIG_NLS_CODEPAGE_936=y
+CONFIG_NLS_CODEPAGE_950=y
+CONFIG_NLS_CODEPAGE_932=y
+# CONFIG_NLS_CODEPAGE_949 is not set
+# CONFIG_NLS_CODEPAGE_874 is not set
+# CONFIG_NLS_ISO8859_8 is not set
+# CONFIG_NLS_CODEPAGE_1250 is not set
+# CONFIG_NLS_CODEPAGE_1251 is not set
+# CONFIG_NLS_ASCII is not set
+# CONFIG_NLS_ISO8859_1 is not set
+# CONFIG_NLS_ISO8859_2 is not set
+# CONFIG_NLS_ISO8859_3 is not set
+# CONFIG_NLS_ISO8859_4 is not set
+# CONFIG_NLS_ISO8859_5 is not set
+# CONFIG_NLS_ISO8859_6 is not set
+# CONFIG_NLS_ISO8859_7 is not set
+# CONFIG_NLS_ISO8859_9 is not set
+# CONFIG_NLS_ISO8859_13 is not set
+# CONFIG_NLS_ISO8859_14 is not set
+# CONFIG_NLS_ISO8859_15 is not set
+# CONFIG_NLS_KOI8_R is not set
+# CONFIG_NLS_KOI8_U is not set
+CONFIG_NLS_UTF8=y
+
+#
+# Profiling support
+#
+# CONFIG_PROFILING is not set
+
+#
+# Kernel hacking
+#
+# CONFIG_PRINTK_TIME is not set
+CONFIG_DEBUG_KERNEL=y
+# CONFIG_MAGIC_SYSRQ is not set
+CONFIG_LOG_BUF_SHIFT=14
+CONFIG_DETECT_SOFTLOCKUP=y
+# CONFIG_SCHEDSTATS is not set
+# CONFIG_DEBUG_SLAB is not set
+# CONFIG_DEBUG_SPINLOCK is not set
+# CONFIG_DEBUG_SPINLOCK_SLEEP is not set
+# CONFIG_DEBUG_KOBJECT is not set
+# CONFIG_DEBUG_BUGVERBOSE is not set
+CONFIG_DEBUG_INFO=y
+# CONFIG_DEBUG_FS is not set
+# CONFIG_DEBUG_VM is not set
+CONFIG_FRAME_POINTER=y
+# CONFIG_RCU_TORTURE_TEST is not set
+# CONFIG_DEBUG_USER is not set
+# CONFIG_DEBUG_WAITQ is not set
+# CONFIG_DEBUG_ERRORS is not set
+# CONFIG_DEBUG_LL is not set
+
+#
+# Security options
+#
+# CONFIG_KEYS is not set
+# CONFIG_SECURITY is not set
+
+#
+# Cryptographic options
+#
+CONFIG_CRYPTO=y
+CONFIG_CRYPTO_HMAC=y
+# CONFIG_CRYPTO_NULL is not set
+# CONFIG_CRYPTO_MD4 is not set
+CONFIG_CRYPTO_MD5=y
+CONFIG_CRYPTO_SHA1=y
+# CONFIG_CRYPTO_SHA256 is not set
+# CONFIG_CRYPTO_SHA512 is not set
+# CONFIG_CRYPTO_WP512 is not set
+# CONFIG_CRYPTO_TGR192 is not set
+CONFIG_CRYPTO_DES=y
+# CONFIG_CRYPTO_BLOWFISH is not set
+# CONFIG_CRYPTO_TWOFISH is not set
+# CONFIG_CRYPTO_SERPENT is not set
+CONFIG_CRYPTO_AES=y
+# CONFIG_CRYPTO_CAST5 is not set
+# CONFIG_CRYPTO_CAST6 is not set
+# CONFIG_CRYPTO_TEA is not set
+# CONFIG_CRYPTO_ARC4 is not set
+# CONFIG_CRYPTO_KHAZAD is not set
+# CONFIG_CRYPTO_ANUBIS is not set
+# CONFIG_CRYPTO_DEFLATE is not set
+# CONFIG_CRYPTO_MICHAEL_MIC is not set
+# CONFIG_CRYPTO_CRC32C is not set
+# CONFIG_CRYPTO_TEST is not set
+
+#
+# Hardware crypto devices
+#
+CONFIG_SL2312_IPSEC=y
+
+#
+# Library routines
+#
+CONFIG_CRC_CCITT=y
+# CONFIG_CRC16 is not set
+# CONFIG_CRC32 is not set
+# CONFIG_LIBCRC32C is not set
+CONFIG_ZLIB_INFLATE=y
+CONFIG_ZLIB_DEFLATE=y
Index: linux-2.6.15.3/arch/arm/configs/creator_full_pxa270_defconfig
===================================================================
--- linux-2.6.15.3/arch/arm/configs/creator_full_pxa270_defconfig	(revision 0)
+++ linux-2.6.15.3/arch/arm/configs/creator_full_pxa270_defconfig	(revision 7613)
@@ -0,0 +1,1309 @@
+#
+# Automatically generated make config: don't edit
+# Linux kernel version: 2.6.15.3
+# Tue Jun 10 14:30:51 2008
+#
+CONFIG_ARM=y
+CONFIG_MMU=y
+CONFIG_UID16=y
+CONFIG_RWSEM_GENERIC_SPINLOCK=y
+CONFIG_GENERIC_CALIBRATE_DELAY=y
+
+#
+# Code maturity level options
+#
+CONFIG_EXPERIMENTAL=y
+CONFIG_CLEAN_COMPILE=y
+CONFIG_BROKEN_ON_SMP=y
+CONFIG_INIT_ENV_ARG_LIMIT=32
+
+#
+# General setup
+#
+CONFIG_LOCALVERSION=""
+CONFIG_LOCALVERSION_AUTO=y
+CONFIG_SWAP=y
+CONFIG_SYSVIPC=y
+# CONFIG_POSIX_MQUEUE is not set
+# CONFIG_BSD_PROCESS_ACCT is not set
+CONFIG_SYSCTL=y
+# CONFIG_AUDIT is not set
+CONFIG_HOTPLUG=y
+CONFIG_KOBJECT_UEVENT=y
+# CONFIG_IKCONFIG is not set
+CONFIG_INITRAMFS_SOURCE=""
+CONFIG_CC_OPTIMIZE_FOR_SIZE=y
+# CONFIG_EMBEDDED is not set
+CONFIG_KALLSYMS=y
+# CONFIG_KALLSYMS_ALL is not set
+# CONFIG_KALLSYMS_EXTRA_PASS is not set
+CONFIG_PRINTK=y
+CONFIG_BUG=y
+CONFIG_BASE_FULL=y
+CONFIG_FUTEX=y
+CONFIG_EPOLL=y
+CONFIG_SHMEM=y
+CONFIG_CC_ALIGN_FUNCTIONS=0
+CONFIG_CC_ALIGN_LABELS=0
+CONFIG_CC_ALIGN_LOOPS=0
+CONFIG_CC_ALIGN_JUMPS=0
+# CONFIG_TINY_SHMEM is not set
+CONFIG_BASE_SMALL=0
+
+#
+# Loadable module support
+#
+CONFIG_MODULES=y
+CONFIG_MODULE_UNLOAD=y
+CONFIG_MODULE_FORCE_UNLOAD=y
+CONFIG_OBSOLETE_MODPARM=y
+# CONFIG_MODVERSIONS is not set
+# CONFIG_MODULE_SRCVERSION_ALL is not set
+# CONFIG_KMOD is not set
+
+#
+# Block layer
+#
+
+#
+# IO Schedulers
+#
+CONFIG_IOSCHED_NOOP=y
+CONFIG_IOSCHED_AS=y
+CONFIG_IOSCHED_DEADLINE=y
+CONFIG_IOSCHED_CFQ=y
+CONFIG_DEFAULT_AS=y
+# CONFIG_DEFAULT_DEADLINE is not set
+# CONFIG_DEFAULT_CFQ is not set
+# CONFIG_DEFAULT_NOOP is not set
+CONFIG_DEFAULT_IOSCHED="anticipatory"
+
+#
+# System Type
+#
+# CONFIG_ARCH_CLPS7500 is not set
+# CONFIG_ARCH_CLPS711X is not set
+# CONFIG_ARCH_CO285 is not set
+# CONFIG_ARCH_EBSA110 is not set
+# CONFIG_ARCH_CAMELOT is not set
+# CONFIG_ARCH_FOOTBRIDGE is not set
+# CONFIG_ARCH_INTEGRATOR is not set
+# CONFIG_ARCH_IOP3XX is not set
+# CONFIG_ARCH_IXP4XX is not set
+# CONFIG_ARCH_IXP2000 is not set
+# CONFIG_ARCH_L7200 is not set
+CONFIG_ARCH_PXA=y
+# CONFIG_ARCH_RPC is not set
+# CONFIG_ARCH_SA1100 is not set
+# CONFIG_ARCH_S3C2410 is not set
+# CONFIG_ARCH_SHARK is not set
+# CONFIG_ARCH_LH7A40X is not set
+# CONFIG_ARCH_OMAP is not set
+# CONFIG_ARCH_VERSATILE is not set
+# CONFIG_ARCH_REALVIEW is not set
+# CONFIG_ARCH_IMX is not set
+# CONFIG_ARCH_H720X is not set
+# CONFIG_ARCH_AAEC2000 is not set
+
+#
+# Intel PXA2xx Implementations
+#
+# CONFIG_ARCH_LUBBOCK is not set
+# CONFIG_MACH_MAINSTONE is not set
+# CONFIG_ARCH_PXA_IDP is not set
+# CONFIG_PXA_SHARPSL is not set
+CONFIG_MACH_CREATOR_PXA270=y
+CONFIG_PXA27x=y
+CONFIG_IWMMXT=y
+CONFIG_CREATOR_CORE=y
+
+#
+# Processor Type
+#
+CONFIG_CPU_32=y
+CONFIG_CPU_XSCALE=y
+CONFIG_CPU_32v5=y
+CONFIG_CPU_ABRT_EV5T=y
+CONFIG_CPU_CACHE_VIVT=y
+CONFIG_CPU_TLB_V4WBI=y
+
+#
+# Processor Features
+#
+# CONFIG_ARM_THUMB is not set
+CONFIG_XSCALE_PMU=y
+
+#
+# Bus support
+#
+CONFIG_ISA_DMA_API=y
+
+#
+# PCCARD (PCMCIA/CardBus) support
+#
+CONFIG_PCCARD=y
+# CONFIG_PCMCIA_DEBUG is not set
+CONFIG_PCMCIA=y
+CONFIG_PCMCIA_LOAD_CIS=y
+CONFIG_PCMCIA_IOCTL=y
+
+#
+# PC-card bridges
+#
+CONFIG_PCMCIA_PXA2XX=y
+
+#
+# Kernel Features
+#
+# CONFIG_PREEMPT is not set
+# CONFIG_NO_IDLE_HZ is not set
+# CONFIG_ARCH_DISCONTIGMEM_ENABLE is not set
+CONFIG_SELECT_MEMORY_MODEL=y
+CONFIG_FLATMEM_MANUAL=y
+# CONFIG_DISCONTIGMEM_MANUAL is not set
+# CONFIG_SPARSEMEM_MANUAL is not set
+CONFIG_FLATMEM=y
+CONFIG_FLAT_NODE_MEM_MAP=y
+# CONFIG_SPARSEMEM_STATIC is not set
+CONFIG_SPLIT_PTLOCK_CPUS=4096
+CONFIG_ALIGNMENT_TRAP=y
+
+#
+# Boot options
+#
+CONFIG_ZBOOT_ROM_TEXT=0x0
+CONFIG_ZBOOT_ROM_BSS=0x0
+CONFIG_CMDLINE="root=/dev/mtdblock3 rw rootfstype=jffs2 console=ttyS0,9600n8 mem=64M ip=192.168.0.100::192.168.0.1:255.255.255.0::eth0:off ether=aa:11:22:33:44:55"
+# CONFIG_XIP_KERNEL is not set
+
+#
+# CPU Frequency scaling
+#
+# CONFIG_CPU_FREQ is not set
+# CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE is not set
+# CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE is not set
+
+#
+# Floating point emulation
+#
+
+#
+# At least one emulation must be selected
+#
+CONFIG_FPE_NWFPE=y
+# CONFIG_FPE_NWFPE_XP is not set
+# CONFIG_FPE_FASTFPE is not set
+
+#
+# Userspace binary formats
+#
+CONFIG_BINFMT_ELF=y
+CONFIG_BINFMT_AOUT=y
+# CONFIG_BINFMT_MISC is not set
+# CONFIG_ARTHUR is not set
+
+#
+# Power management options
+#
+# CONFIG_PM is not set
+
+#
+# Networking
+#
+CONFIG_NET=y
+
+#
+# Networking options
+#
+CONFIG_PACKET=y
+# CONFIG_PACKET_MMAP is not set
+CONFIG_UNIX=y
+# CONFIG_NET_KEY is not set
+CONFIG_INET=y
+# CONFIG_IP_MULTICAST is not set
+# CONFIG_IP_ADVANCED_ROUTER is not set
+CONFIG_IP_FIB_HASH=y
+CONFIG_IP_PNP=y
+# CONFIG_IP_PNP_DHCP is not set
+# CONFIG_IP_PNP_BOOTP is not set
+# CONFIG_IP_PNP_RARP is not set
+# CONFIG_NET_IPIP is not set
+# CONFIG_NET_IPGRE is not set
+# CONFIG_ARPD is not set
+# CONFIG_SYN_COOKIES is not set
+# CONFIG_INET_AH is not set
+# CONFIG_INET_ESP is not set
+# CONFIG_INET_IPCOMP is not set
+# CONFIG_INET_TUNNEL is not set
+CONFIG_INET_DIAG=y
+CONFIG_INET_TCP_DIAG=y
+# CONFIG_TCP_CONG_ADVANCED is not set
+CONFIG_TCP_CONG_BIC=y
+# CONFIG_IPV6 is not set
+# CONFIG_NETFILTER is not set
+
+#
+# DCCP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_DCCP is not set
+
+#
+# SCTP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_SCTP is not set
+# CONFIG_ATM is not set
+# CONFIG_BRIDGE is not set
+# CONFIG_VLAN_8021Q is not set
+# CONFIG_DECNET is not set
+# CONFIG_LLC2 is not set
+# CONFIG_IPX is not set
+# CONFIG_ATALK is not set
+# CONFIG_X25 is not set
+# CONFIG_LAPB is not set
+# CONFIG_NET_DIVERT is not set
+# CONFIG_ECONET is not set
+# CONFIG_WAN_ROUTER is not set
+
+#
+# QoS and/or fair queueing
+#
+# CONFIG_NET_SCHED is not set
+
+#
+# Network testing
+#
+# CONFIG_NET_PKTGEN is not set
+CONFIG_HAMRADIO=y
+
+#
+# Packet Radio protocols
+#
+# CONFIG_AX25 is not set
+# CONFIG_IRDA is not set
+CONFIG_BT=y
+CONFIG_BT_L2CAP=y
+CONFIG_BT_SCO=y
+CONFIG_BT_RFCOMM=y
+CONFIG_BT_RFCOMM_TTY=y
+CONFIG_BT_BNEP=y
+CONFIG_BT_BNEP_MC_FILTER=y
+CONFIG_BT_BNEP_PROTO_FILTER=y
+CONFIG_BT_HIDP=y
+
+#
+# Bluetooth device drivers
+#
+CONFIG_BT_HCIUSB=y
+CONFIG_BT_HCIUSB_SCO=y
+CONFIG_BT_HCIUART=y
+CONFIG_BT_HCIUART_H4=y
+CONFIG_BT_HCIUART_BCSP=y
+# CONFIG_BT_HCIBCM203X is not set
+# CONFIG_BT_HCIBPA10X is not set
+# CONFIG_BT_HCIBFUSB is not set
+# CONFIG_BT_HCIDTL1 is not set
+# CONFIG_BT_HCIBT3C is not set
+# CONFIG_BT_HCIBLUECARD is not set
+# CONFIG_BT_HCIBTUART is not set
+# CONFIG_BT_HCIVHCI is not set
+CONFIG_IEEE80211=y
+CONFIG_IEEE80211_DEBUG=y
+CONFIG_IEEE80211_CRYPT_WEP=y
+CONFIG_IEEE80211_CRYPT_CCMP=y
+CONFIG_IEEE80211_CRYPT_TKIP=y
+
+#
+# Device Drivers
+#
+
+#
+# Generic Driver Options
+#
+CONFIG_STANDALONE=y
+CONFIG_PREVENT_FIRMWARE_BUILD=y
+CONFIG_FW_LOADER=y
+CONFIG_DEBUG_DRIVER=y
+
+#
+# Connector - unified userspace <-> kernelspace linker
+#
+# CONFIG_CONNECTOR is not set
+
+#
+# Memory Technology Devices (MTD)
+#
+CONFIG_MTD=y
+# CONFIG_MTD_DEBUG is not set
+# CONFIG_MTD_CONCAT is not set
+CONFIG_MTD_PARTITIONS=y
+# CONFIG_MTD_REDBOOT_PARTS is not set
+# CONFIG_MTD_CMDLINE_PARTS is not set
+# CONFIG_MTD_AFS_PARTS is not set
+
+#
+# User Modules And Translation Layers
+#
+# CONFIG_MTD_CHAR is not set
+CONFIG_MTD_BLOCK=y
+# CONFIG_FTL is not set
+# CONFIG_NFTL is not set
+# CONFIG_INFTL is not set
+# CONFIG_RFD_FTL is not set
+
+#
+# RAM/ROM/Flash chip drivers
+#
+CONFIG_MTD_CFI=y
+# CONFIG_MTD_JEDECPROBE is not set
+CONFIG_MTD_GEN_PROBE=y
+CONFIG_MTD_CFI_ADV_OPTIONS=y
+CONFIG_MTD_CFI_NOSWAP=y
+# CONFIG_MTD_CFI_BE_BYTE_SWAP is not set
+# CONFIG_MTD_CFI_LE_BYTE_SWAP is not set
+CONFIG_MTD_CFI_GEOMETRY=y
+# CONFIG_MTD_MAP_BANK_WIDTH_1 is not set
+CONFIG_MTD_MAP_BANK_WIDTH_2=y
+# CONFIG_MTD_MAP_BANK_WIDTH_4 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_8 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_16 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_32 is not set
+CONFIG_MTD_CFI_I1=y
+# CONFIG_MTD_CFI_I2 is not set
+# CONFIG_MTD_CFI_I4 is not set
+# CONFIG_MTD_CFI_I8 is not set
+# CONFIG_MTD_OTP is not set
+CONFIG_MTD_CFI_INTELEXT=y
+# CONFIG_MTD_CFI_AMDSTD is not set
+# CONFIG_MTD_CFI_STAA is not set
+CONFIG_MTD_CFI_UTIL=y
+# CONFIG_MTD_RAM is not set
+# CONFIG_MTD_ROM is not set
+# CONFIG_MTD_ABSENT is not set
+# CONFIG_MTD_XIP is not set
+
+#
+# Mapping drivers for chip access
+#
+# CONFIG_MTD_COMPLEX_MAPPINGS is not set
+# CONFIG_MTD_PHYSMAP is not set
+# CONFIG_MTD_ARM_INTEGRATOR is not set
+CONFIG_MTD_CREATOR_PXA270=y
+# CONFIG_MTD_SHARP_SL is not set
+# CONFIG_MTD_PLATRAM is not set
+
+#
+# Self-contained MTD device drivers
+#
+# CONFIG_MTD_SLRAM is not set
+# CONFIG_MTD_PHRAM is not set
+# CONFIG_MTD_MTDRAM is not set
+# CONFIG_MTD_BLKMTD is not set
+CONFIG_MTD_BLOCK2MTD=y
+
+#
+# Disk-On-Chip Device Drivers
+#
+# CONFIG_MTD_DOC2000 is not set
+# CONFIG_MTD_DOC2001 is not set
+# CONFIG_MTD_DOC2001PLUS is not set
+
+#
+# NAND Flash Device Drivers
+#
+# CONFIG_MTD_NAND is not set
+
+#
+# OneNAND Flash Device Drivers
+#
+# CONFIG_MTD_ONENAND is not set
+
+#
+# Parallel port support
+#
+# CONFIG_PARPORT is not set
+
+#
+# Plug and Play support
+#
+
+#
+# Block devices
+#
+# CONFIG_BLK_DEV_COW_COMMON is not set
+# CONFIG_BLK_DEV_LOOP is not set
+# CONFIG_BLK_DEV_NBD is not set
+# CONFIG_BLK_DEV_UB is not set
+# CONFIG_BLK_DEV_RAM is not set
+CONFIG_BLK_DEV_RAM_COUNT=16
+# CONFIG_CDROM_PKTCDVD is not set
+# CONFIG_ATA_OVER_ETH is not set
+
+#
+# ATA/ATAPI/MFM/RLL support
+#
+CONFIG_IDE=y
+CONFIG_BLK_DEV_IDE=y
+
+#
+# Please see Documentation/ide.txt for help/info on IDE drives
+#
+# CONFIG_BLK_DEV_IDE_SATA is not set
+CONFIG_BLK_DEV_IDEDISK=y
+CONFIG_IDEDISK_MULTI_MODE=y
+CONFIG_BLK_DEV_IDECS=y
+# CONFIG_BLK_DEV_IDECD is not set
+# CONFIG_BLK_DEV_IDETAPE is not set
+# CONFIG_BLK_DEV_IDEFLOPPY is not set
+# CONFIG_BLK_DEV_IDESCSI is not set
+# CONFIG_IDE_TASK_IOCTL is not set
+
+#
+# IDE chipset support/bugfixes
+#
+# CONFIG_IDE_GENERIC is not set
+CONFIG_BLK_DEV_CREATOR_IDE=m
+# CONFIG_IDE_ARM is not set
+# CONFIG_BLK_DEV_IDEDMA is not set
+# CONFIG_IDEDMA_AUTO is not set
+# CONFIG_BLK_DEV_HD is not set
+
+#
+# SCSI device support
+#
+# CONFIG_RAID_ATTRS is not set
+CONFIG_SCSI=y
+CONFIG_SCSI_PROC_FS=y
+
+#
+# SCSI support type (disk, tape, CD-ROM)
+#
+CONFIG_BLK_DEV_SD=y
+# CONFIG_CHR_DEV_ST is not set
+# CONFIG_CHR_DEV_OSST is not set
+# CONFIG_BLK_DEV_SR is not set
+CONFIG_CHR_DEV_SG=y
+# CONFIG_CHR_DEV_SCH is not set
+
+#
+# Some SCSI devices (e.g. CD jukebox) support multiple LUNs
+#
+# CONFIG_SCSI_MULTI_LUN is not set
+# CONFIG_SCSI_CONSTANTS is not set
+# CONFIG_SCSI_LOGGING is not set
+
+#
+# SCSI Transport Attributes
+#
+# CONFIG_SCSI_SPI_ATTRS is not set
+# CONFIG_SCSI_FC_ATTRS is not set
+# CONFIG_SCSI_ISCSI_ATTRS is not set
+# CONFIG_SCSI_SAS_ATTRS is not set
+
+#
+# SCSI low-level drivers
+#
+# CONFIG_ISCSI_TCP is not set
+# CONFIG_SCSI_SATA is not set
+# CONFIG_SCSI_DEBUG is not set
+
+#
+# PCMCIA SCSI adapter support
+#
+# CONFIG_PCMCIA_AHA152X is not set
+# CONFIG_PCMCIA_FDOMAIN is not set
+# CONFIG_PCMCIA_NINJA_SCSI is not set
+# CONFIG_PCMCIA_QLOGIC is not set
+# CONFIG_PCMCIA_SYM53C500 is not set
+
+#
+# Multi-device support (RAID and LVM)
+#
+# CONFIG_MD is not set
+
+#
+# Fusion MPT device support
+#
+# CONFIG_FUSION is not set
+
+#
+# IEEE 1394 (FireWire) support
+#
+
+#
+# I2O device support
+#
+
+#
+# Network device support
+#
+CONFIG_NETDEVICES=y
+# CONFIG_DUMMY is not set
+# CONFIG_BONDING is not set
+# CONFIG_EQUALIZER is not set
+# CONFIG_TUN is not set
+
+#
+# PHY device support
+#
+# CONFIG_PHYLIB is not set
+
+#
+# Ethernet (10 or 100Mbit)
+#
+CONFIG_NET_ETHERNET=y
+CONFIG_MII=y
+CONFIG_SMC91X=y
+
+#
+# Ethernet (1000 Mbit)
+#
+
+#
+# Ethernet (10000 Mbit)
+#
+
+#
+# Token Ring devices
+#
+
+#
+# Wireless LAN (non-hamradio)
+#
+CONFIG_NET_RADIO=y
+
+#
+# Obsolete Wireless cards support (pre-802.11)
+#
+# CONFIG_STRIP is not set
+# CONFIG_PCMCIA_WAVELAN is not set
+# CONFIG_PCMCIA_NETWAVE is not set
+
+#
+# Wireless 802.11 Frequency Hopping cards support
+#
+# CONFIG_PCMCIA_RAYCS is not set
+
+#
+# Wireless 802.11b ISA/PCI cards support
+#
+# CONFIG_HERMES is not set
+# CONFIG_ATMEL is not set
+
+#
+# Wireless 802.11b Pcmcia/Cardbus cards support
+#
+# CONFIG_AIRO_CS is not set
+# CONFIG_PCMCIA_WL3501 is not set
+# CONFIG_HOSTAP is not set
+CONFIG_NET_WIRELESS=y
+
+#
+# PCMCIA network device support
+#
+# CONFIG_NET_PCMCIA is not set
+
+#
+# Wan interfaces
+#
+# CONFIG_WAN is not set
+# CONFIG_PPP is not set
+# CONFIG_SLIP is not set
+# CONFIG_SHAPER is not set
+# CONFIG_NETCONSOLE is not set
+# CONFIG_NETPOLL is not set
+# CONFIG_NET_POLL_CONTROLLER is not set
+
+#
+# ISDN subsystem
+#
+# CONFIG_ISDN is not set
+
+#
+# Input device support
+#
+CONFIG_INPUT=y
+
+#
+# Userland interfaces
+#
+CONFIG_INPUT_MOUSEDEV=y
+CONFIG_INPUT_MOUSEDEV_PSAUX=y
+CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
+CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
+# CONFIG_INPUT_JOYDEV is not set
+# CONFIG_INPUT_TSDEV is not set
+CONFIG_INPUT_EVDEV=y
+CONFIG_INPUT_EVBUG=y
+
+#
+# Input Device Drivers
+#
+# CONFIG_INPUT_KEYBOARD is not set
+# CONFIG_INPUT_MOUSE is not set
+# CONFIG_INPUT_JOYSTICK is not set
+# CONFIG_INPUT_TOUCHSCREEN is not set
+# CONFIG_INPUT_MISC is not set
+
+#
+# Hardware I/O ports
+#
+# CONFIG_SERIO is not set
+# CONFIG_GAMEPORT is not set
+
+#
+# Character devices
+#
+CONFIG_VT=y
+CONFIG_VT_CONSOLE=y
+CONFIG_HW_CONSOLE=y
+# CONFIG_SERIAL_NONSTANDARD is not set
+
+#
+# Serial drivers
+#
+# CONFIG_SERIAL_8250 is not set
+
+#
+# Non-8250 serial port support
+#
+CONFIG_SERIAL_PXA=y
+CONFIG_SERIAL_PXA_CONSOLE=y
+CONFIG_SERIAL_CORE=y
+CONFIG_SERIAL_CORE_CONSOLE=y
+CONFIG_UNIX98_PTYS=y
+CONFIG_LEGACY_PTYS=y
+CONFIG_LEGACY_PTY_COUNT=256
+
+#
+# IPMI
+#
+# CONFIG_IPMI_HANDLER is not set
+
+#
+# Watchdog Cards
+#
+# CONFIG_WATCHDOG is not set
+# CONFIG_NVRAM is not set
+# CONFIG_RTC is not set
+# CONFIG_DTLK is not set
+# CONFIG_R3964 is not set
+
+#
+# Ftape, the floppy tape device driver
+#
+
+#
+# PCMCIA character devices
+#
+# CONFIG_SYNCLINK_CS is not set
+# CONFIG_CARDMAN_4000 is not set
+# CONFIG_CARDMAN_4040 is not set
+# CONFIG_RAW_DRIVER is not set
+
+#
+# TPM devices
+#
+# CONFIG_TCG_TPM is not set
+# CONFIG_TELCLOCK is not set
+CONFIG_CREATOR_PXA270_LCD=m
+CONFIG_CREATOR_PXA270_CMOS=m
+CONFIG_CREATOR_PXA270_CODEC=m
+# CONFIG_CREATOR_PXA270_INFRARED is not set
+CONFIG_CREATOR_PXA270_GPRS=m
+CONFIG_CREATOR_PXA270_DSP_5502=m
+CONFIG_CREATOR_PXA270_FGPA_EP1C6_LOADER=m
+CONFIG_CREATOR_PXA270_FGPA_EP1C6_A2D=m
+
+#
+# I2C support
+#
+CONFIG_I2C=y
+CONFIG_I2C_CHARDEV=y
+
+#
+# I2C Algorithms
+#
+# CONFIG_I2C_ALGOBIT is not set
+# CONFIG_I2C_ALGOPCF is not set
+# CONFIG_I2C_ALGOPCA is not set
+
+#
+# I2C Hardware Bus support
+#
+CONFIG_I2C_PXA=y
+# CONFIG_I2C_PXA_SLAVE is not set
+# CONFIG_I2C_PARPORT_LIGHT is not set
+# CONFIG_I2C_STUB is not set
+# CONFIG_I2C_PCA_ISA is not set
+
+#
+# Miscellaneous I2C Chip support
+#
+# CONFIG_SENSORS_DS1337 is not set
+# CONFIG_SENSORS_DS1374 is not set
+# CONFIG_SENSORS_EEPROM is not set
+# CONFIG_SENSORS_PCF8574 is not set
+# CONFIG_SENSORS_PCA9539 is not set
+# CONFIG_SENSORS_PCF8591 is not set
+CONFIG_SENSORS_RTC8564=y
+# CONFIG_SENSORS_MAX6875 is not set
+# CONFIG_RTC_X1205_I2C is not set
+# CONFIG_CODEC_TLV320AIC_I2C is not set
+# CONFIG_I2C_DEBUG_CORE is not set
+# CONFIG_I2C_DEBUG_ALGO is not set
+# CONFIG_I2C_DEBUG_BUS is not set
+# CONFIG_I2C_DEBUG_CHIP is not set
+
+#
+# Hardware Monitoring support
+#
+CONFIG_HWMON=y
+# CONFIG_HWMON_VID is not set
+# CONFIG_SENSORS_ADM1021 is not set
+# CONFIG_SENSORS_ADM1025 is not set
+# CONFIG_SENSORS_ADM1026 is not set
+# CONFIG_SENSORS_ADM1031 is not set
+# CONFIG_SENSORS_ADM9240 is not set
+# CONFIG_SENSORS_ASB100 is not set
+# CONFIG_SENSORS_ATXP1 is not set
+# CONFIG_SENSORS_DS1621 is not set
+# CONFIG_SENSORS_FSCHER is not set
+# CONFIG_SENSORS_FSCPOS is not set
+# CONFIG_SENSORS_GL518SM is not set
+# CONFIG_SENSORS_GL520SM is not set
+# CONFIG_SENSORS_IT87 is not set
+# CONFIG_SENSORS_LM63 is not set
+# CONFIG_SENSORS_LM75 is not set
+# CONFIG_SENSORS_LM77 is not set
+# CONFIG_SENSORS_LM78 is not set
+# CONFIG_SENSORS_LM80 is not set
+# CONFIG_SENSORS_LM83 is not set
+# CONFIG_SENSORS_LM85 is not set
+# CONFIG_SENSORS_LM87 is not set
+# CONFIG_SENSORS_LM90 is not set
+# CONFIG_SENSORS_LM92 is not set
+# CONFIG_SENSORS_MAX1619 is not set
+# CONFIG_SENSORS_PC87360 is not set
+# CONFIG_SENSORS_SMSC47M1 is not set
+# CONFIG_SENSORS_SMSC47B397 is not set
+# CONFIG_SENSORS_W83781D is not set
+# CONFIG_SENSORS_W83792D is not set
+# CONFIG_SENSORS_W83L785TS is not set
+# CONFIG_SENSORS_W83627HF is not set
+# CONFIG_SENSORS_W83627EHF is not set
+# CONFIG_HWMON_DEBUG_CHIP is not set
+
+#
+# Misc devices
+#
+
+#
+# Multimedia Capabilities Port drivers
+#
+CONFIG_UCB1400=m
+CONFIG_UCB1400_TS=m
+
+#
+# Multimedia devices
+#
+CONFIG_VIDEO_DEV=y
+
+#
+# Video For Linux
+#
+
+#
+# Video Adapters
+#
+# CONFIG_VIDEO_CPIA is not set
+# CONFIG_VIDEO_SAA5246A is not set
+# CONFIG_VIDEO_SAA5249 is not set
+# CONFIG_TUNER_3036 is not set
+# CONFIG_VIDEO_EM28XX is not set
+# CONFIG_VIDEO_OVCAMCHIP is not set
+# CONFIG_VIDEO_AUDIO_DECODER is not set
+# CONFIG_VIDEO_DECODER is not set
+
+#
+# Radio Adapters
+#
+# CONFIG_RADIO_MAESTRO is not set
+
+#
+# Digital Video Broadcasting Devices
+#
+# CONFIG_DVB is not set
+
+#
+# Graphics support
+#
+CONFIG_FB=y
+CONFIG_FB_CFB_FILLRECT=m
+CONFIG_FB_CFB_COPYAREA=m
+CONFIG_FB_CFB_IMAGEBLIT=m
+# CONFIG_FB_MACMODES is not set
+# CONFIG_FB_MODE_HELPERS is not set
+# CONFIG_FB_TILEBLITTING is not set
+# CONFIG_FB_S1D13XXX is not set
+CONFIG_FB_PXA=m
+# CONFIG_FB_PXA_PARAMETERS is not set
+# CONFIG_FB_VIRTUAL is not set
+
+#
+# Console display driver support
+#
+# CONFIG_VGA_CONSOLE is not set
+CONFIG_DUMMY_CONSOLE=y
+CONFIG_FRAMEBUFFER_CONSOLE=y
+# CONFIG_FRAMEBUFFER_CONSOLE_ROTATION is not set
+# CONFIG_FONTS is not set
+CONFIG_FONT_8x8=y
+CONFIG_FONT_8x16=y
+
+#
+# Logo configuration
+#
+CONFIG_LOGO=y
+CONFIG_LOGO_LINUX_MONO=y
+CONFIG_LOGO_LINUX_VGA16=y
+CONFIG_LOGO_LINUX_CLUT224=y
+# CONFIG_BACKLIGHT_LCD_SUPPORT is not set
+
+#
+# Sound
+#
+CONFIG_SOUND=y
+
+#
+# Advanced Linux Sound Architecture
+#
+CONFIG_SND=y
+CONFIG_SND_AC97_CODEC=y
+CONFIG_SND_AC97_BUS=y
+CONFIG_SND_TIMER=y
+CONFIG_SND_PCM=y
+CONFIG_SND_SEQUENCER=y
+# CONFIG_SND_SEQ_DUMMY is not set
+CONFIG_SND_OSSEMUL=y
+CONFIG_SND_MIXER_OSS=y
+CONFIG_SND_PCM_OSS=y
+# CONFIG_SND_SEQUENCER_OSS is not set
+CONFIG_SND_VERBOSE_PRINTK=y
+CONFIG_SND_DEBUG=y
+CONFIG_SND_DEBUG_DETECT=y
+
+#
+# Generic devices
+#
+# CONFIG_SND_DUMMY is not set
+# CONFIG_SND_VIRMIDI is not set
+# CONFIG_SND_MTPAV is not set
+# CONFIG_SND_SERIAL_U16550 is not set
+# CONFIG_SND_MPU401 is not set
+
+#
+# ALSA ARM devices
+#
+CONFIG_SND_PXA2XX_PCM=y
+CONFIG_SND_PXA2XX_AC97=y
+
+#
+# USB devices
+#
+# CONFIG_SND_USB_AUDIO is not set
+
+#
+# PCMCIA devices
+#
+
+#
+# Open Sound System
+#
+# CONFIG_SOUND_PRIME is not set
+
+#
+# USB support
+#
+CONFIG_USB_ARCH_HAS_HCD=y
+CONFIG_USB_ARCH_HAS_OHCI=y
+CONFIG_USB=y
+# CONFIG_USB_DEBUG is not set
+
+#
+# Miscellaneous USB options
+#
+# CONFIG_USB_DEVICEFS is not set
+# CONFIG_USB_BANDWIDTH is not set
+# CONFIG_USB_DYNAMIC_MINORS is not set
+# CONFIG_USB_OTG is not set
+
+#
+# USB Host Controller Drivers
+#
+# CONFIG_USB_ISP116X_HCD is not set
+CONFIG_USB_OHCI_HCD=y
+# CONFIG_USB_OHCI_BIG_ENDIAN is not set
+CONFIG_USB_OHCI_LITTLE_ENDIAN=y
+# CONFIG_USB_SL811_HCD is not set
+
+#
+# USB Device Class drivers
+#
+# CONFIG_OBSOLETE_OSS_USB_DRIVER is not set
+# CONFIG_USB_ACM is not set
+# CONFIG_USB_PRINTER is not set
+
+#
+# NOTE: USB_STORAGE enables SCSI, and 'SCSI disk support'
+#
+
+#
+# may also be needed; see USB_STORAGE Help for more information
+#
+CONFIG_USB_STORAGE=y
+# CONFIG_USB_STORAGE_DEBUG is not set
+# CONFIG_USB_STORAGE_DATAFAB is not set
+# CONFIG_USB_STORAGE_FREECOM is not set
+# CONFIG_USB_STORAGE_ISD200 is not set
+# CONFIG_USB_STORAGE_DPCM is not set
+# CONFIG_USB_STORAGE_USBAT is not set
+# CONFIG_USB_STORAGE_SDDR09 is not set
+# CONFIG_USB_STORAGE_SDDR55 is not set
+# CONFIG_USB_STORAGE_JUMPSHOT is not set
+# CONFIG_USB_STORAGE_ONETOUCH is not set
+
+#
+# USB Input Devices
+#
+CONFIG_USB_HID=y
+CONFIG_USB_HIDINPUT=y
+# CONFIG_HID_FF is not set
+# CONFIG_USB_HIDDEV is not set
+# CONFIG_USB_AIPTEK is not set
+# CONFIG_USB_WACOM is not set
+# CONFIG_USB_ACECAD is not set
+# CONFIG_USB_KBTAB is not set
+# CONFIG_USB_POWERMATE is not set
+# CONFIG_USB_MTOUCH is not set
+# CONFIG_USB_ITMTOUCH is not set
+# CONFIG_USB_EGALAX is not set
+# CONFIG_USB_YEALINK is not set
+# CONFIG_USB_XPAD is not set
+# CONFIG_USB_ATI_REMOTE is not set
+# CONFIG_USB_KEYSPAN_REMOTE is not set
+# CONFIG_USB_APPLETOUCH is not set
+
+#
+# USB Imaging devices
+#
+# CONFIG_USB_MDC800 is not set
+# CONFIG_USB_MICROTEK is not set
+
+#
+# USB Multimedia devices
+#
+# CONFIG_USB_DABUSB is not set
+# CONFIG_USB_VICAM is not set
+# CONFIG_USB_DSBR is not set
+# CONFIG_USB_IBMCAM is not set
+# CONFIG_USB_KONICAWC is not set
+# CONFIG_USB_OV511 is not set
+# CONFIG_USB_SE401 is not set
+# CONFIG_USB_SN9C102 is not set
+# CONFIG_USB_STV680 is not set
+# CONFIG_USB_PWC is not set
+
+#
+# USB Network Adapters
+#
+# CONFIG_USB_CATC is not set
+# CONFIG_USB_KAWETH is not set
+# CONFIG_USB_PEGASUS is not set
+# CONFIG_USB_RTL8150 is not set
+# CONFIG_USB_USBNET is not set
+# CONFIG_USB_ZD1201 is not set
+# CONFIG_USB_MON is not set
+
+#
+# USB port drivers
+#
+
+#
+# USB Serial Converter support
+#
+# CONFIG_USB_SERIAL is not set
+
+#
+# USB Miscellaneous drivers
+#
+# CONFIG_USB_EMI62 is not set
+# CONFIG_USB_EMI26 is not set
+# CONFIG_USB_AUERSWALD is not set
+# CONFIG_USB_RIO500 is not set
+# CONFIG_USB_LEGOTOWER is not set
+# CONFIG_USB_LCD is not set
+# CONFIG_USB_LED is not set
+# CONFIG_USB_CYTHERM is not set
+# CONFIG_USB_PHIDGETKIT is not set
+# CONFIG_USB_PHIDGETSERVO is not set
+# CONFIG_USB_IDMOUSE is not set
+# CONFIG_USB_LD is not set
+
+#
+# USB DSL modem support
+#
+
+#
+# USB Gadget Support
+#
+# CONFIG_USB_GADGET is not set
+
+#
+# MMC/SD Card support
+#
+CONFIG_MMC=y
+# CONFIG_MMC_DEBUG is not set
+CONFIG_MMC_BLOCK=y
+CONFIG_MMC_PXA=y
+# CONFIG_MMC_WBSD is not set
+
+#
+# File systems
+#
+CONFIG_EXT2_FS=y
+# CONFIG_EXT2_FS_XATTR is not set
+# CONFIG_EXT2_FS_XIP is not set
+# CONFIG_EXT3_FS is not set
+# CONFIG_JBD is not set
+# CONFIG_REISERFS_FS is not set
+# CONFIG_JFS_FS is not set
+# CONFIG_FS_POSIX_ACL is not set
+# CONFIG_XFS_FS is not set
+# CONFIG_MINIX_FS is not set
+# CONFIG_ROMFS_FS is not set
+CONFIG_INOTIFY=y
+# CONFIG_QUOTA is not set
+CONFIG_DNOTIFY=y
+# CONFIG_AUTOFS_FS is not set
+CONFIG_AUTOFS4_FS=y
+CONFIG_FUSE_FS=y
+
+#
+# CD-ROM/DVD Filesystems
+#
+# CONFIG_ISO9660_FS is not set
+# CONFIG_UDF_FS is not set
+
+#
+# DOS/FAT/NT Filesystems
+#
+CONFIG_FAT_FS=y
+CONFIG_MSDOS_FS=y
+CONFIG_VFAT_FS=y
+CONFIG_FAT_DEFAULT_CODEPAGE=850
+CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"
+# CONFIG_NTFS_FS is not set
+
+#
+# Pseudo filesystems
+#
+CONFIG_PROC_FS=y
+CONFIG_SYSFS=y
+CONFIG_TMPFS=y
+# CONFIG_HUGETLB_PAGE is not set
+CONFIG_RAMFS=y
+# CONFIG_RELAYFS_FS is not set
+
+#
+# Miscellaneous filesystems
+#
+# CONFIG_ADFS_FS is not set
+# CONFIG_AFFS_FS is not set
+# CONFIG_HFS_FS is not set
+# CONFIG_HFSPLUS_FS is not set
+# CONFIG_BEFS_FS is not set
+# CONFIG_BFS_FS is not set
+# CONFIG_EFS_FS is not set
+# CONFIG_JFFS_FS is not set
+CONFIG_JFFS2_FS=y
+CONFIG_JFFS2_FS_DEBUG=0
+CONFIG_JFFS2_FS_WRITEBUFFER=y
+# CONFIG_JFFS2_SUMMARY is not set
+# CONFIG_JFFS2_COMPRESSION_OPTIONS is not set
+CONFIG_JFFS2_ZLIB=y
+CONFIG_JFFS2_RTIME=y
+# CONFIG_JFFS2_RUBIN is not set
+# CONFIG_CRAMFS is not set
+# CONFIG_VXFS_FS is not set
+# CONFIG_HPFS_FS is not set
+# CONFIG_QNX4FS_FS is not set
+# CONFIG_SYSV_FS is not set
+# CONFIG_UFS_FS is not set
+
+#
+# Network File Systems
+#
+CONFIG_NFS_FS=y
+CONFIG_NFS_V3=y
+# CONFIG_NFS_V3_ACL is not set
+# CONFIG_NFS_V4 is not set
+# CONFIG_NFS_DIRECTIO is not set
+# CONFIG_NFSD is not set
+CONFIG_ROOT_NFS=y
+CONFIG_LOCKD=y
+CONFIG_LOCKD_V4=y
+CONFIG_NFS_COMMON=y
+CONFIG_SUNRPC=y
+CONFIG_SUNRPC_GSS=y
+CONFIG_RPCSEC_GSS_KRB5=y
+# CONFIG_RPCSEC_GSS_SPKM3 is not set
+# CONFIG_SMB_FS is not set
+# CONFIG_CIFS is not set
+# CONFIG_NCP_FS is not set
+# CONFIG_CODA_FS is not set
+# CONFIG_AFS_FS is not set
+# CONFIG_9P_FS is not set
+
+#
+# Partition Types
+#
+CONFIG_PARTITION_ADVANCED=y
+# CONFIG_ACORN_PARTITION is not set
+# CONFIG_OSF_PARTITION is not set
+# CONFIG_AMIGA_PARTITION is not set
+# CONFIG_ATARI_PARTITION is not set
+# CONFIG_MAC_PARTITION is not set
+CONFIG_MSDOS_PARTITION=y
+# CONFIG_BSD_DISKLABEL is not set
+# CONFIG_MINIX_SUBPARTITION is not set
+# CONFIG_SOLARIS_X86_PARTITION is not set
+# CONFIG_UNIXWARE_DISKLABEL is not set
+CONFIG_LDM_PARTITION=y
+# CONFIG_LDM_DEBUG is not set
+# CONFIG_SGI_PARTITION is not set
+# CONFIG_ULTRIX_PARTITION is not set
+# CONFIG_SUN_PARTITION is not set
+# CONFIG_EFI_PARTITION is not set
+
+#
+# Native Language Support
+#
+CONFIG_NLS=y
+CONFIG_NLS_DEFAULT="iso8859-15"
+# CONFIG_NLS_CODEPAGE_437 is not set
+# CONFIG_NLS_CODEPAGE_737 is not set
+# CONFIG_NLS_CODEPAGE_775 is not set
+CONFIG_NLS_CODEPAGE_850=y
+# CONFIG_NLS_CODEPAGE_852 is not set
+# CONFIG_NLS_CODEPAGE_855 is not set
+# CONFIG_NLS_CODEPAGE_857 is not set
+# CONFIG_NLS_CODEPAGE_860 is not set
+# CONFIG_NLS_CODEPAGE_861 is not set
+# CONFIG_NLS_CODEPAGE_862 is not set
+# CONFIG_NLS_CODEPAGE_863 is not set
+# CONFIG_NLS_CODEPAGE_864 is not set
+# CONFIG_NLS_CODEPAGE_865 is not set
+# CONFIG_NLS_CODEPAGE_866 is not set
+# CONFIG_NLS_CODEPAGE_869 is not set
+# CONFIG_NLS_CODEPAGE_936 is not set
+# CONFIG_NLS_CODEPAGE_950 is not set
+# CONFIG_NLS_CODEPAGE_932 is not set
+# CONFIG_NLS_CODEPAGE_949 is not set
+# CONFIG_NLS_CODEPAGE_874 is not set
+# CONFIG_NLS_ISO8859_8 is not set
+# CONFIG_NLS_CODEPAGE_1250 is not set
+# CONFIG_NLS_CODEPAGE_1251 is not set
+# CONFIG_NLS_ASCII is not set
+CONFIG_NLS_ISO8859_1=y
+# CONFIG_NLS_ISO8859_2 is not set
+# CONFIG_NLS_ISO8859_3 is not set
+# CONFIG_NLS_ISO8859_4 is not set
+# CONFIG_NLS_ISO8859_5 is not set
+# CONFIG_NLS_ISO8859_6 is not set
+# CONFIG_NLS_ISO8859_7 is not set
+# CONFIG_NLS_ISO8859_9 is not set
+# CONFIG_NLS_ISO8859_13 is not set
+# CONFIG_NLS_ISO8859_14 is not set
+CONFIG_NLS_ISO8859_15=y
+# CONFIG_NLS_KOI8_R is not set
+# CONFIG_NLS_KOI8_U is not set
+# CONFIG_NLS_UTF8 is not set
+
+#
+# Profiling support
+#
+# CONFIG_PROFILING is not set
+
+#
+# Kernel hacking
+#
+# CONFIG_PRINTK_TIME is not set
+CONFIG_DEBUG_KERNEL=y
+CONFIG_MAGIC_SYSRQ=y
+CONFIG_LOG_BUF_SHIFT=14
+CONFIG_DETECT_SOFTLOCKUP=y
+# CONFIG_SCHEDSTATS is not set
+# CONFIG_DEBUG_SLAB is not set
+# CONFIG_DEBUG_SPINLOCK is not set
+# CONFIG_DEBUG_SPINLOCK_SLEEP is not set
+CONFIG_DEBUG_KOBJECT=y
+CONFIG_DEBUG_BUGVERBOSE=y
+CONFIG_DEBUG_INFO=y
+# CONFIG_DEBUG_FS is not set
+# CONFIG_DEBUG_VM is not set
+CONFIG_FRAME_POINTER=y
+# CONFIG_RCU_TORTURE_TEST is not set
+CONFIG_DEBUG_USER=y
+# CONFIG_DEBUG_WAITQ is not set
+CONFIG_DEBUG_ERRORS=y
+CONFIG_DEBUG_LL=y
+# CONFIG_DEBUG_ICEDCC is not set
+
+#
+# Security options
+#
+# CONFIG_KEYS is not set
+# CONFIG_SECURITY is not set
+
+#
+# Cryptographic options
+#
+CONFIG_CRYPTO=y
+# CONFIG_CRYPTO_HMAC is not set
+# CONFIG_CRYPTO_NULL is not set
+# CONFIG_CRYPTO_MD4 is not set
+CONFIG_CRYPTO_MD5=y
+# CONFIG_CRYPTO_SHA1 is not set
+# CONFIG_CRYPTO_SHA256 is not set
+# CONFIG_CRYPTO_SHA512 is not set
+# CONFIG_CRYPTO_WP512 is not set
+# CONFIG_CRYPTO_TGR192 is not set
+CONFIG_CRYPTO_DES=y
+# CONFIG_CRYPTO_BLOWFISH is not set
+# CONFIG_CRYPTO_TWOFISH is not set
+# CONFIG_CRYPTO_SERPENT is not set
+CONFIG_CRYPTO_AES=y
+# CONFIG_CRYPTO_CAST5 is not set
+# CONFIG_CRYPTO_CAST6 is not set
+# CONFIG_CRYPTO_TEA is not set
+CONFIG_CRYPTO_ARC4=y
+# CONFIG_CRYPTO_KHAZAD is not set
+# CONFIG_CRYPTO_ANUBIS is not set
+# CONFIG_CRYPTO_DEFLATE is not set
+CONFIG_CRYPTO_MICHAEL_MIC=y
+# CONFIG_CRYPTO_CRC32C is not set
+# CONFIG_CRYPTO_TEST is not set
+
+#
+# Hardware crypto devices
+#
+
+#
+# Library routines
+#
+# CONFIG_CRC_CCITT is not set
+# CONFIG_CRC16 is not set
+CONFIG_CRC32=y
+# CONFIG_LIBCRC32C is not set
+CONFIG_ZLIB_INFLATE=y
+CONFIG_ZLIB_DEFLATE=y
Index: linux-2.6.15.3/arch/arm/configs/creator_pxa270_defconfig
===================================================================
--- linux-2.6.15.3/arch/arm/configs/creator_pxa270_defconfig	(revision 0)
+++ linux-2.6.15.3/arch/arm/configs/creator_pxa270_defconfig	(revision 7613)
@@ -0,0 +1,1309 @@
+#
+# Automatically generated make config: don't edit
+# Linux kernel version: 2.6.15.3
+# Tue Jun 10 11:45:22 2008
+#
+CONFIG_ARM=y
+CONFIG_MMU=y
+CONFIG_UID16=y
+CONFIG_RWSEM_GENERIC_SPINLOCK=y
+CONFIG_GENERIC_CALIBRATE_DELAY=y
+
+#
+# Code maturity level options
+#
+CONFIG_EXPERIMENTAL=y
+CONFIG_CLEAN_COMPILE=y
+CONFIG_BROKEN_ON_SMP=y
+CONFIG_INIT_ENV_ARG_LIMIT=32
+
+#
+# General setup
+#
+CONFIG_LOCALVERSION=""
+CONFIG_LOCALVERSION_AUTO=y
+CONFIG_SWAP=y
+CONFIG_SYSVIPC=y
+# CONFIG_POSIX_MQUEUE is not set
+# CONFIG_BSD_PROCESS_ACCT is not set
+CONFIG_SYSCTL=y
+# CONFIG_AUDIT is not set
+CONFIG_HOTPLUG=y
+CONFIG_KOBJECT_UEVENT=y
+# CONFIG_IKCONFIG is not set
+CONFIG_INITRAMFS_SOURCE=""
+CONFIG_CC_OPTIMIZE_FOR_SIZE=y
+# CONFIG_EMBEDDED is not set
+CONFIG_KALLSYMS=y
+# CONFIG_KALLSYMS_ALL is not set
+# CONFIG_KALLSYMS_EXTRA_PASS is not set
+CONFIG_PRINTK=y
+CONFIG_BUG=y
+CONFIG_BASE_FULL=y
+CONFIG_FUTEX=y
+CONFIG_EPOLL=y
+CONFIG_SHMEM=y
+CONFIG_CC_ALIGN_FUNCTIONS=0
+CONFIG_CC_ALIGN_LABELS=0
+CONFIG_CC_ALIGN_LOOPS=0
+CONFIG_CC_ALIGN_JUMPS=0
+# CONFIG_TINY_SHMEM is not set
+CONFIG_BASE_SMALL=0
+
+#
+# Loadable module support
+#
+CONFIG_MODULES=y
+CONFIG_MODULE_UNLOAD=y
+CONFIG_MODULE_FORCE_UNLOAD=y
+CONFIG_OBSOLETE_MODPARM=y
+# CONFIG_MODVERSIONS is not set
+# CONFIG_MODULE_SRCVERSION_ALL is not set
+# CONFIG_KMOD is not set
+
+#
+# Block layer
+#
+
+#
+# IO Schedulers
+#
+CONFIG_IOSCHED_NOOP=y
+CONFIG_IOSCHED_AS=y
+CONFIG_IOSCHED_DEADLINE=y
+CONFIG_IOSCHED_CFQ=y
+CONFIG_DEFAULT_AS=y
+# CONFIG_DEFAULT_DEADLINE is not set
+# CONFIG_DEFAULT_CFQ is not set
+# CONFIG_DEFAULT_NOOP is not set
+CONFIG_DEFAULT_IOSCHED="anticipatory"
+
+#
+# System Type
+#
+# CONFIG_ARCH_CLPS7500 is not set
+# CONFIG_ARCH_CLPS711X is not set
+# CONFIG_ARCH_CO285 is not set
+# CONFIG_ARCH_EBSA110 is not set
+# CONFIG_ARCH_CAMELOT is not set
+# CONFIG_ARCH_FOOTBRIDGE is not set
+# CONFIG_ARCH_INTEGRATOR is not set
+# CONFIG_ARCH_IOP3XX is not set
+# CONFIG_ARCH_IXP4XX is not set
+# CONFIG_ARCH_IXP2000 is not set
+# CONFIG_ARCH_L7200 is not set
+CONFIG_ARCH_PXA=y
+# CONFIG_ARCH_RPC is not set
+# CONFIG_ARCH_SA1100 is not set
+# CONFIG_ARCH_S3C2410 is not set
+# CONFIG_ARCH_SHARK is not set
+# CONFIG_ARCH_LH7A40X is not set
+# CONFIG_ARCH_OMAP is not set
+# CONFIG_ARCH_VERSATILE is not set
+# CONFIG_ARCH_REALVIEW is not set
+# CONFIG_ARCH_IMX is not set
+# CONFIG_ARCH_H720X is not set
+# CONFIG_ARCH_AAEC2000 is not set
+
+#
+# Intel PXA2xx Implementations
+#
+# CONFIG_ARCH_LUBBOCK is not set
+# CONFIG_MACH_MAINSTONE is not set
+# CONFIG_ARCH_PXA_IDP is not set
+# CONFIG_PXA_SHARPSL is not set
+CONFIG_MACH_CREATOR_PXA270=y
+CONFIG_PXA27x=y
+CONFIG_IWMMXT=y
+CONFIG_CREATOR_CORE=y
+
+#
+# Processor Type
+#
+CONFIG_CPU_32=y
+CONFIG_CPU_XSCALE=y
+CONFIG_CPU_32v5=y
+CONFIG_CPU_ABRT_EV5T=y
+CONFIG_CPU_CACHE_VIVT=y
+CONFIG_CPU_TLB_V4WBI=y
+
+#
+# Processor Features
+#
+# CONFIG_ARM_THUMB is not set
+CONFIG_XSCALE_PMU=y
+
+#
+# Bus support
+#
+CONFIG_ISA_DMA_API=y
+
+#
+# PCCARD (PCMCIA/CardBus) support
+#
+CONFIG_PCCARD=y
+# CONFIG_PCMCIA_DEBUG is not set
+CONFIG_PCMCIA=y
+CONFIG_PCMCIA_LOAD_CIS=y
+CONFIG_PCMCIA_IOCTL=y
+
+#
+# PC-card bridges
+#
+CONFIG_PCMCIA_PXA2XX=y
+
+#
+# Kernel Features
+#
+# CONFIG_PREEMPT is not set
+# CONFIG_NO_IDLE_HZ is not set
+# CONFIG_ARCH_DISCONTIGMEM_ENABLE is not set
+CONFIG_SELECT_MEMORY_MODEL=y
+CONFIG_FLATMEM_MANUAL=y
+# CONFIG_DISCONTIGMEM_MANUAL is not set
+# CONFIG_SPARSEMEM_MANUAL is not set
+CONFIG_FLATMEM=y
+CONFIG_FLAT_NODE_MEM_MAP=y
+# CONFIG_SPARSEMEM_STATIC is not set
+CONFIG_SPLIT_PTLOCK_CPUS=4096
+CONFIG_ALIGNMENT_TRAP=y
+
+#
+# Boot options
+#
+CONFIG_ZBOOT_ROM_TEXT=0x0
+CONFIG_ZBOOT_ROM_BSS=0x0
+CONFIG_CMDLINE="root=/dev/mtdblock3 rw rootfstype=jffs2 console=ttyS0,9600n8 mem=64M ip=192.168.0.100::192.168.0.1:255.255.255.0::eth0:off ether=aa:11:22:33:44:55"
+# CONFIG_XIP_KERNEL is not set
+
+#
+# CPU Frequency scaling
+#
+# CONFIG_CPU_FREQ is not set
+# CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE is not set
+# CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE is not set
+
+#
+# Floating point emulation
+#
+
+#
+# At least one emulation must be selected
+#
+CONFIG_FPE_NWFPE=y
+# CONFIG_FPE_NWFPE_XP is not set
+# CONFIG_FPE_FASTFPE is not set
+
+#
+# Userspace binary formats
+#
+CONFIG_BINFMT_ELF=y
+CONFIG_BINFMT_AOUT=y
+# CONFIG_BINFMT_MISC is not set
+# CONFIG_ARTHUR is not set
+
+#
+# Power management options
+#
+# CONFIG_PM is not set
+
+#
+# Networking
+#
+CONFIG_NET=y
+
+#
+# Networking options
+#
+CONFIG_PACKET=y
+# CONFIG_PACKET_MMAP is not set
+CONFIG_UNIX=y
+# CONFIG_NET_KEY is not set
+CONFIG_INET=y
+# CONFIG_IP_MULTICAST is not set
+# CONFIG_IP_ADVANCED_ROUTER is not set
+CONFIG_IP_FIB_HASH=y
+CONFIG_IP_PNP=y
+# CONFIG_IP_PNP_DHCP is not set
+# CONFIG_IP_PNP_BOOTP is not set
+# CONFIG_IP_PNP_RARP is not set
+# CONFIG_NET_IPIP is not set
+# CONFIG_NET_IPGRE is not set
+# CONFIG_ARPD is not set
+# CONFIG_SYN_COOKIES is not set
+# CONFIG_INET_AH is not set
+# CONFIG_INET_ESP is not set
+# CONFIG_INET_IPCOMP is not set
+# CONFIG_INET_TUNNEL is not set
+CONFIG_INET_DIAG=y
+CONFIG_INET_TCP_DIAG=y
+# CONFIG_TCP_CONG_ADVANCED is not set
+CONFIG_TCP_CONG_BIC=y
+# CONFIG_IPV6 is not set
+# CONFIG_NETFILTER is not set
+
+#
+# DCCP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_DCCP is not set
+
+#
+# SCTP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_SCTP is not set
+# CONFIG_ATM is not set
+# CONFIG_BRIDGE is not set
+# CONFIG_VLAN_8021Q is not set
+# CONFIG_DECNET is not set
+# CONFIG_LLC2 is not set
+# CONFIG_IPX is not set
+# CONFIG_ATALK is not set
+# CONFIG_X25 is not set
+# CONFIG_LAPB is not set
+# CONFIG_NET_DIVERT is not set
+# CONFIG_ECONET is not set
+# CONFIG_WAN_ROUTER is not set
+
+#
+# QoS and/or fair queueing
+#
+# CONFIG_NET_SCHED is not set
+
+#
+# Network testing
+#
+# CONFIG_NET_PKTGEN is not set
+CONFIG_HAMRADIO=y
+
+#
+# Packet Radio protocols
+#
+# CONFIG_AX25 is not set
+# CONFIG_IRDA is not set
+CONFIG_BT=y
+CONFIG_BT_L2CAP=y
+CONFIG_BT_SCO=y
+CONFIG_BT_RFCOMM=y
+CONFIG_BT_RFCOMM_TTY=y
+CONFIG_BT_BNEP=y
+CONFIG_BT_BNEP_MC_FILTER=y
+CONFIG_BT_BNEP_PROTO_FILTER=y
+CONFIG_BT_HIDP=y
+
+#
+# Bluetooth device drivers
+#
+CONFIG_BT_HCIUSB=y
+CONFIG_BT_HCIUSB_SCO=y
+CONFIG_BT_HCIUART=y
+CONFIG_BT_HCIUART_H4=y
+CONFIG_BT_HCIUART_BCSP=y
+# CONFIG_BT_HCIBCM203X is not set
+# CONFIG_BT_HCIBPA10X is not set
+# CONFIG_BT_HCIBFUSB is not set
+# CONFIG_BT_HCIDTL1 is not set
+# CONFIG_BT_HCIBT3C is not set
+# CONFIG_BT_HCIBLUECARD is not set
+# CONFIG_BT_HCIBTUART is not set
+# CONFIG_BT_HCIVHCI is not set
+CONFIG_IEEE80211=y
+CONFIG_IEEE80211_DEBUG=y
+CONFIG_IEEE80211_CRYPT_WEP=y
+CONFIG_IEEE80211_CRYPT_CCMP=y
+CONFIG_IEEE80211_CRYPT_TKIP=y
+
+#
+# Device Drivers
+#
+
+#
+# Generic Driver Options
+#
+CONFIG_STANDALONE=y
+CONFIG_PREVENT_FIRMWARE_BUILD=y
+CONFIG_FW_LOADER=y
+CONFIG_DEBUG_DRIVER=y
+
+#
+# Connector - unified userspace <-> kernelspace linker
+#
+# CONFIG_CONNECTOR is not set
+
+#
+# Memory Technology Devices (MTD)
+#
+CONFIG_MTD=y
+# CONFIG_MTD_DEBUG is not set
+# CONFIG_MTD_CONCAT is not set
+CONFIG_MTD_PARTITIONS=y
+# CONFIG_MTD_REDBOOT_PARTS is not set
+# CONFIG_MTD_CMDLINE_PARTS is not set
+# CONFIG_MTD_AFS_PARTS is not set
+
+#
+# User Modules And Translation Layers
+#
+# CONFIG_MTD_CHAR is not set
+CONFIG_MTD_BLOCK=y
+# CONFIG_FTL is not set
+# CONFIG_NFTL is not set
+# CONFIG_INFTL is not set
+# CONFIG_RFD_FTL is not set
+
+#
+# RAM/ROM/Flash chip drivers
+#
+CONFIG_MTD_CFI=y
+# CONFIG_MTD_JEDECPROBE is not set
+CONFIG_MTD_GEN_PROBE=y
+CONFIG_MTD_CFI_ADV_OPTIONS=y
+CONFIG_MTD_CFI_NOSWAP=y
+# CONFIG_MTD_CFI_BE_BYTE_SWAP is not set
+# CONFIG_MTD_CFI_LE_BYTE_SWAP is not set
+CONFIG_MTD_CFI_GEOMETRY=y
+# CONFIG_MTD_MAP_BANK_WIDTH_1 is not set
+CONFIG_MTD_MAP_BANK_WIDTH_2=y
+# CONFIG_MTD_MAP_BANK_WIDTH_4 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_8 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_16 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_32 is not set
+CONFIG_MTD_CFI_I1=y
+# CONFIG_MTD_CFI_I2 is not set
+# CONFIG_MTD_CFI_I4 is not set
+# CONFIG_MTD_CFI_I8 is not set
+# CONFIG_MTD_OTP is not set
+CONFIG_MTD_CFI_INTELEXT=y
+# CONFIG_MTD_CFI_AMDSTD is not set
+# CONFIG_MTD_CFI_STAA is not set
+CONFIG_MTD_CFI_UTIL=y
+# CONFIG_MTD_RAM is not set
+# CONFIG_MTD_ROM is not set
+# CONFIG_MTD_ABSENT is not set
+# CONFIG_MTD_XIP is not set
+
+#
+# Mapping drivers for chip access
+#
+# CONFIG_MTD_COMPLEX_MAPPINGS is not set
+# CONFIG_MTD_PHYSMAP is not set
+# CONFIG_MTD_ARM_INTEGRATOR is not set
+CONFIG_MTD_CREATOR_PXA270=y
+# CONFIG_MTD_SHARP_SL is not set
+# CONFIG_MTD_PLATRAM is not set
+
+#
+# Self-contained MTD device drivers
+#
+# CONFIG_MTD_SLRAM is not set
+# CONFIG_MTD_PHRAM is not set
+# CONFIG_MTD_MTDRAM is not set
+# CONFIG_MTD_BLKMTD is not set
+CONFIG_MTD_BLOCK2MTD=y
+
+#
+# Disk-On-Chip Device Drivers
+#
+# CONFIG_MTD_DOC2000 is not set
+# CONFIG_MTD_DOC2001 is not set
+# CONFIG_MTD_DOC2001PLUS is not set
+
+#
+# NAND Flash Device Drivers
+#
+# CONFIG_MTD_NAND is not set
+
+#
+# OneNAND Flash Device Drivers
+#
+# CONFIG_MTD_ONENAND is not set
+
+#
+# Parallel port support
+#
+# CONFIG_PARPORT is not set
+
+#
+# Plug and Play support
+#
+
+#
+# Block devices
+#
+# CONFIG_BLK_DEV_COW_COMMON is not set
+# CONFIG_BLK_DEV_LOOP is not set
+# CONFIG_BLK_DEV_NBD is not set
+# CONFIG_BLK_DEV_UB is not set
+# CONFIG_BLK_DEV_RAM is not set
+CONFIG_BLK_DEV_RAM_COUNT=16
+# CONFIG_CDROM_PKTCDVD is not set
+# CONFIG_ATA_OVER_ETH is not set
+
+#
+# ATA/ATAPI/MFM/RLL support
+#
+CONFIG_IDE=y
+CONFIG_BLK_DEV_IDE=y
+
+#
+# Please see Documentation/ide.txt for help/info on IDE drives
+#
+# CONFIG_BLK_DEV_IDE_SATA is not set
+CONFIG_BLK_DEV_IDEDISK=y
+CONFIG_IDEDISK_MULTI_MODE=y
+CONFIG_BLK_DEV_IDECS=y
+# CONFIG_BLK_DEV_IDECD is not set
+# CONFIG_BLK_DEV_IDETAPE is not set
+# CONFIG_BLK_DEV_IDEFLOPPY is not set
+# CONFIG_BLK_DEV_IDESCSI is not set
+# CONFIG_IDE_TASK_IOCTL is not set
+
+#
+# IDE chipset support/bugfixes
+#
+# CONFIG_IDE_GENERIC is not set
+# CONFIG_BLK_DEV_CREATOR_IDE is not set
+# CONFIG_IDE_ARM is not set
+# CONFIG_BLK_DEV_IDEDMA is not set
+# CONFIG_IDEDMA_AUTO is not set
+# CONFIG_BLK_DEV_HD is not set
+
+#
+# SCSI device support
+#
+# CONFIG_RAID_ATTRS is not set
+CONFIG_SCSI=y
+CONFIG_SCSI_PROC_FS=y
+
+#
+# SCSI support type (disk, tape, CD-ROM)
+#
+CONFIG_BLK_DEV_SD=y
+# CONFIG_CHR_DEV_ST is not set
+# CONFIG_CHR_DEV_OSST is not set
+# CONFIG_BLK_DEV_SR is not set
+CONFIG_CHR_DEV_SG=y
+# CONFIG_CHR_DEV_SCH is not set
+
+#
+# Some SCSI devices (e.g. CD jukebox) support multiple LUNs
+#
+# CONFIG_SCSI_MULTI_LUN is not set
+# CONFIG_SCSI_CONSTANTS is not set
+# CONFIG_SCSI_LOGGING is not set
+
+#
+# SCSI Transport Attributes
+#
+# CONFIG_SCSI_SPI_ATTRS is not set
+# CONFIG_SCSI_FC_ATTRS is not set
+# CONFIG_SCSI_ISCSI_ATTRS is not set
+# CONFIG_SCSI_SAS_ATTRS is not set
+
+#
+# SCSI low-level drivers
+#
+# CONFIG_ISCSI_TCP is not set
+# CONFIG_SCSI_SATA is not set
+# CONFIG_SCSI_DEBUG is not set
+
+#
+# PCMCIA SCSI adapter support
+#
+# CONFIG_PCMCIA_AHA152X is not set
+# CONFIG_PCMCIA_FDOMAIN is not set
+# CONFIG_PCMCIA_NINJA_SCSI is not set
+# CONFIG_PCMCIA_QLOGIC is not set
+# CONFIG_PCMCIA_SYM53C500 is not set
+
+#
+# Multi-device support (RAID and LVM)
+#
+# CONFIG_MD is not set
+
+#
+# Fusion MPT device support
+#
+# CONFIG_FUSION is not set
+
+#
+# IEEE 1394 (FireWire) support
+#
+
+#
+# I2O device support
+#
+
+#
+# Network device support
+#
+CONFIG_NETDEVICES=y
+# CONFIG_DUMMY is not set
+# CONFIG_BONDING is not set
+# CONFIG_EQUALIZER is not set
+# CONFIG_TUN is not set
+
+#
+# PHY device support
+#
+# CONFIG_PHYLIB is not set
+
+#
+# Ethernet (10 or 100Mbit)
+#
+CONFIG_NET_ETHERNET=y
+CONFIG_MII=y
+CONFIG_SMC91X=y
+
+#
+# Ethernet (1000 Mbit)
+#
+
+#
+# Ethernet (10000 Mbit)
+#
+
+#
+# Token Ring devices
+#
+
+#
+# Wireless LAN (non-hamradio)
+#
+CONFIG_NET_RADIO=y
+
+#
+# Obsolete Wireless cards support (pre-802.11)
+#
+# CONFIG_STRIP is not set
+# CONFIG_PCMCIA_WAVELAN is not set
+# CONFIG_PCMCIA_NETWAVE is not set
+
+#
+# Wireless 802.11 Frequency Hopping cards support
+#
+# CONFIG_PCMCIA_RAYCS is not set
+
+#
+# Wireless 802.11b ISA/PCI cards support
+#
+# CONFIG_HERMES is not set
+# CONFIG_ATMEL is not set
+
+#
+# Wireless 802.11b Pcmcia/Cardbus cards support
+#
+# CONFIG_AIRO_CS is not set
+# CONFIG_PCMCIA_WL3501 is not set
+# CONFIG_HOSTAP is not set
+CONFIG_NET_WIRELESS=y
+
+#
+# PCMCIA network device support
+#
+# CONFIG_NET_PCMCIA is not set
+
+#
+# Wan interfaces
+#
+# CONFIG_WAN is not set
+# CONFIG_PPP is not set
+# CONFIG_SLIP is not set
+# CONFIG_SHAPER is not set
+# CONFIG_NETCONSOLE is not set
+# CONFIG_NETPOLL is not set
+# CONFIG_NET_POLL_CONTROLLER is not set
+
+#
+# ISDN subsystem
+#
+# CONFIG_ISDN is not set
+
+#
+# Input device support
+#
+CONFIG_INPUT=y
+
+#
+# Userland interfaces
+#
+CONFIG_INPUT_MOUSEDEV=y
+CONFIG_INPUT_MOUSEDEV_PSAUX=y
+CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
+CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
+# CONFIG_INPUT_JOYDEV is not set
+# CONFIG_INPUT_TSDEV is not set
+CONFIG_INPUT_EVDEV=y
+CONFIG_INPUT_EVBUG=y
+
+#
+# Input Device Drivers
+#
+# CONFIG_INPUT_KEYBOARD is not set
+# CONFIG_INPUT_MOUSE is not set
+# CONFIG_INPUT_JOYSTICK is not set
+# CONFIG_INPUT_TOUCHSCREEN is not set
+# CONFIG_INPUT_MISC is not set
+
+#
+# Hardware I/O ports
+#
+# CONFIG_SERIO is not set
+# CONFIG_GAMEPORT is not set
+
+#
+# Character devices
+#
+CONFIG_VT=y
+CONFIG_VT_CONSOLE=y
+CONFIG_HW_CONSOLE=y
+# CONFIG_SERIAL_NONSTANDARD is not set
+
+#
+# Serial drivers
+#
+# CONFIG_SERIAL_8250 is not set
+
+#
+# Non-8250 serial port support
+#
+CONFIG_SERIAL_PXA=y
+CONFIG_SERIAL_PXA_CONSOLE=y
+CONFIG_SERIAL_CORE=y
+CONFIG_SERIAL_CORE_CONSOLE=y
+CONFIG_UNIX98_PTYS=y
+CONFIG_LEGACY_PTYS=y
+CONFIG_LEGACY_PTY_COUNT=256
+
+#
+# IPMI
+#
+# CONFIG_IPMI_HANDLER is not set
+
+#
+# Watchdog Cards
+#
+# CONFIG_WATCHDOG is not set
+# CONFIG_NVRAM is not set
+# CONFIG_RTC is not set
+# CONFIG_DTLK is not set
+# CONFIG_R3964 is not set
+
+#
+# Ftape, the floppy tape device driver
+#
+
+#
+# PCMCIA character devices
+#
+# CONFIG_SYNCLINK_CS is not set
+# CONFIG_CARDMAN_4000 is not set
+# CONFIG_CARDMAN_4040 is not set
+# CONFIG_RAW_DRIVER is not set
+
+#
+# TPM devices
+#
+# CONFIG_TCG_TPM is not set
+# CONFIG_TELCLOCK is not set
+# CONFIG_CREATOR_PXA270_LCD is not set
+# CONFIG_CREATOR_PXA270_CMOS is not set
+# CONFIG_CREATOR_PXA270_CODEC is not set
+# CONFIG_CREATOR_PXA270_INFRARED is not set
+# CONFIG_CREATOR_PXA270_GPRS is not set
+# CONFIG_CREATOR_PXA270_DSP_5502 is not set
+# CONFIG_CREATOR_PXA270_FGPA_EP1C6_LOADER is not set
+# CONFIG_CREATOR_PXA270_FGPA_EP1C6_A2D is not set
+
+#
+# I2C support
+#
+CONFIG_I2C=y
+CONFIG_I2C_CHARDEV=y
+
+#
+# I2C Algorithms
+#
+# CONFIG_I2C_ALGOBIT is not set
+# CONFIG_I2C_ALGOPCF is not set
+# CONFIG_I2C_ALGOPCA is not set
+
+#
+# I2C Hardware Bus support
+#
+CONFIG_I2C_PXA=y
+# CONFIG_I2C_PXA_SLAVE is not set
+# CONFIG_I2C_PARPORT_LIGHT is not set
+# CONFIG_I2C_STUB is not set
+# CONFIG_I2C_PCA_ISA is not set
+
+#
+# Miscellaneous I2C Chip support
+#
+# CONFIG_SENSORS_DS1337 is not set
+# CONFIG_SENSORS_DS1374 is not set
+# CONFIG_SENSORS_EEPROM is not set
+# CONFIG_SENSORS_PCF8574 is not set
+# CONFIG_SENSORS_PCA9539 is not set
+# CONFIG_SENSORS_PCF8591 is not set
+CONFIG_SENSORS_RTC8564=y
+# CONFIG_SENSORS_MAX6875 is not set
+# CONFIG_RTC_X1205_I2C is not set
+# CONFIG_CODEC_TLV320AIC_I2C is not set
+# CONFIG_I2C_DEBUG_CORE is not set
+# CONFIG_I2C_DEBUG_ALGO is not set
+# CONFIG_I2C_DEBUG_BUS is not set
+# CONFIG_I2C_DEBUG_CHIP is not set
+
+#
+# Hardware Monitoring support
+#
+CONFIG_HWMON=y
+# CONFIG_HWMON_VID is not set
+# CONFIG_SENSORS_ADM1021 is not set
+# CONFIG_SENSORS_ADM1025 is not set
+# CONFIG_SENSORS_ADM1026 is not set
+# CONFIG_SENSORS_ADM1031 is not set
+# CONFIG_SENSORS_ADM9240 is not set
+# CONFIG_SENSORS_ASB100 is not set
+# CONFIG_SENSORS_ATXP1 is not set
+# CONFIG_SENSORS_DS1621 is not set
+# CONFIG_SENSORS_FSCHER is not set
+# CONFIG_SENSORS_FSCPOS is not set
+# CONFIG_SENSORS_GL518SM is not set
+# CONFIG_SENSORS_GL520SM is not set
+# CONFIG_SENSORS_IT87 is not set
+# CONFIG_SENSORS_LM63 is not set
+# CONFIG_SENSORS_LM75 is not set
+# CONFIG_SENSORS_LM77 is not set
+# CONFIG_SENSORS_LM78 is not set
+# CONFIG_SENSORS_LM80 is not set
+# CONFIG_SENSORS_LM83 is not set
+# CONFIG_SENSORS_LM85 is not set
+# CONFIG_SENSORS_LM87 is not set
+# CONFIG_SENSORS_LM90 is not set
+# CONFIG_SENSORS_LM92 is not set
+# CONFIG_SENSORS_MAX1619 is not set
+# CONFIG_SENSORS_PC87360 is not set
+# CONFIG_SENSORS_SMSC47M1 is not set
+# CONFIG_SENSORS_SMSC47B397 is not set
+# CONFIG_SENSORS_W83781D is not set
+# CONFIG_SENSORS_W83792D is not set
+# CONFIG_SENSORS_W83L785TS is not set
+# CONFIG_SENSORS_W83627HF is not set
+# CONFIG_SENSORS_W83627EHF is not set
+# CONFIG_HWMON_DEBUG_CHIP is not set
+
+#
+# Misc devices
+#
+
+#
+# Multimedia Capabilities Port drivers
+#
+CONFIG_UCB1400=m
+CONFIG_UCB1400_TS=m
+
+#
+# Multimedia devices
+#
+CONFIG_VIDEO_DEV=y
+
+#
+# Video For Linux
+#
+
+#
+# Video Adapters
+#
+# CONFIG_VIDEO_CPIA is not set
+# CONFIG_VIDEO_SAA5246A is not set
+# CONFIG_VIDEO_SAA5249 is not set
+# CONFIG_TUNER_3036 is not set
+# CONFIG_VIDEO_EM28XX is not set
+# CONFIG_VIDEO_OVCAMCHIP is not set
+# CONFIG_VIDEO_AUDIO_DECODER is not set
+# CONFIG_VIDEO_DECODER is not set
+
+#
+# Radio Adapters
+#
+# CONFIG_RADIO_MAESTRO is not set
+
+#
+# Digital Video Broadcasting Devices
+#
+# CONFIG_DVB is not set
+
+#
+# Graphics support
+#
+CONFIG_FB=y
+CONFIG_FB_CFB_FILLRECT=m
+CONFIG_FB_CFB_COPYAREA=m
+CONFIG_FB_CFB_IMAGEBLIT=m
+# CONFIG_FB_MACMODES is not set
+# CONFIG_FB_MODE_HELPERS is not set
+# CONFIG_FB_TILEBLITTING is not set
+# CONFIG_FB_S1D13XXX is not set
+CONFIG_FB_PXA=m
+# CONFIG_FB_PXA_PARAMETERS is not set
+# CONFIG_FB_VIRTUAL is not set
+
+#
+# Console display driver support
+#
+# CONFIG_VGA_CONSOLE is not set
+CONFIG_DUMMY_CONSOLE=y
+CONFIG_FRAMEBUFFER_CONSOLE=y
+# CONFIG_FRAMEBUFFER_CONSOLE_ROTATION is not set
+# CONFIG_FONTS is not set
+CONFIG_FONT_8x8=y
+CONFIG_FONT_8x16=y
+
+#
+# Logo configuration
+#
+CONFIG_LOGO=y
+CONFIG_LOGO_LINUX_MONO=y
+CONFIG_LOGO_LINUX_VGA16=y
+CONFIG_LOGO_LINUX_CLUT224=y
+# CONFIG_BACKLIGHT_LCD_SUPPORT is not set
+
+#
+# Sound
+#
+CONFIG_SOUND=y
+
+#
+# Advanced Linux Sound Architecture
+#
+CONFIG_SND=y
+CONFIG_SND_AC97_CODEC=y
+CONFIG_SND_AC97_BUS=y
+CONFIG_SND_TIMER=y
+CONFIG_SND_PCM=y
+CONFIG_SND_SEQUENCER=y
+# CONFIG_SND_SEQ_DUMMY is not set
+CONFIG_SND_OSSEMUL=y
+CONFIG_SND_MIXER_OSS=y
+CONFIG_SND_PCM_OSS=y
+# CONFIG_SND_SEQUENCER_OSS is not set
+CONFIG_SND_VERBOSE_PRINTK=y
+CONFIG_SND_DEBUG=y
+CONFIG_SND_DEBUG_DETECT=y
+
+#
+# Generic devices
+#
+# CONFIG_SND_DUMMY is not set
+# CONFIG_SND_VIRMIDI is not set
+# CONFIG_SND_MTPAV is not set
+# CONFIG_SND_SERIAL_U16550 is not set
+# CONFIG_SND_MPU401 is not set
+
+#
+# ALSA ARM devices
+#
+CONFIG_SND_PXA2XX_PCM=y
+CONFIG_SND_PXA2XX_AC97=y
+
+#
+# USB devices
+#
+# CONFIG_SND_USB_AUDIO is not set
+
+#
+# PCMCIA devices
+#
+
+#
+# Open Sound System
+#
+# CONFIG_SOUND_PRIME is not set
+
+#
+# USB support
+#
+CONFIG_USB_ARCH_HAS_HCD=y
+CONFIG_USB_ARCH_HAS_OHCI=y
+CONFIG_USB=y
+# CONFIG_USB_DEBUG is not set
+
+#
+# Miscellaneous USB options
+#
+# CONFIG_USB_DEVICEFS is not set
+# CONFIG_USB_BANDWIDTH is not set
+# CONFIG_USB_DYNAMIC_MINORS is not set
+# CONFIG_USB_OTG is not set
+
+#
+# USB Host Controller Drivers
+#
+# CONFIG_USB_ISP116X_HCD is not set
+CONFIG_USB_OHCI_HCD=y
+# CONFIG_USB_OHCI_BIG_ENDIAN is not set
+CONFIG_USB_OHCI_LITTLE_ENDIAN=y
+# CONFIG_USB_SL811_HCD is not set
+
+#
+# USB Device Class drivers
+#
+# CONFIG_OBSOLETE_OSS_USB_DRIVER is not set
+# CONFIG_USB_ACM is not set
+# CONFIG_USB_PRINTER is not set
+
+#
+# NOTE: USB_STORAGE enables SCSI, and 'SCSI disk support'
+#
+
+#
+# may also be needed; see USB_STORAGE Help for more information
+#
+CONFIG_USB_STORAGE=y
+# CONFIG_USB_STORAGE_DEBUG is not set
+# CONFIG_USB_STORAGE_DATAFAB is not set
+# CONFIG_USB_STORAGE_FREECOM is not set
+# CONFIG_USB_STORAGE_ISD200 is not set
+# CONFIG_USB_STORAGE_DPCM is not set
+# CONFIG_USB_STORAGE_USBAT is not set
+# CONFIG_USB_STORAGE_SDDR09 is not set
+# CONFIG_USB_STORAGE_SDDR55 is not set
+# CONFIG_USB_STORAGE_JUMPSHOT is not set
+# CONFIG_USB_STORAGE_ONETOUCH is not set
+
+#
+# USB Input Devices
+#
+CONFIG_USB_HID=y
+CONFIG_USB_HIDINPUT=y
+# CONFIG_HID_FF is not set
+# CONFIG_USB_HIDDEV is not set
+# CONFIG_USB_AIPTEK is not set
+# CONFIG_USB_WACOM is not set
+# CONFIG_USB_ACECAD is not set
+# CONFIG_USB_KBTAB is not set
+# CONFIG_USB_POWERMATE is not set
+# CONFIG_USB_MTOUCH is not set
+# CONFIG_USB_ITMTOUCH is not set
+# CONFIG_USB_EGALAX is not set
+# CONFIG_USB_YEALINK is not set
+# CONFIG_USB_XPAD is not set
+# CONFIG_USB_ATI_REMOTE is not set
+# CONFIG_USB_KEYSPAN_REMOTE is not set
+# CONFIG_USB_APPLETOUCH is not set
+
+#
+# USB Imaging devices
+#
+# CONFIG_USB_MDC800 is not set
+# CONFIG_USB_MICROTEK is not set
+
+#
+# USB Multimedia devices
+#
+# CONFIG_USB_DABUSB is not set
+# CONFIG_USB_VICAM is not set
+# CONFIG_USB_DSBR is not set
+# CONFIG_USB_IBMCAM is not set
+# CONFIG_USB_KONICAWC is not set
+# CONFIG_USB_OV511 is not set
+# CONFIG_USB_SE401 is not set
+# CONFIG_USB_SN9C102 is not set
+# CONFIG_USB_STV680 is not set
+# CONFIG_USB_PWC is not set
+
+#
+# USB Network Adapters
+#
+# CONFIG_USB_CATC is not set
+# CONFIG_USB_KAWETH is not set
+# CONFIG_USB_PEGASUS is not set
+# CONFIG_USB_RTL8150 is not set
+# CONFIG_USB_USBNET is not set
+# CONFIG_USB_ZD1201 is not set
+# CONFIG_USB_MON is not set
+
+#
+# USB port drivers
+#
+
+#
+# USB Serial Converter support
+#
+# CONFIG_USB_SERIAL is not set
+
+#
+# USB Miscellaneous drivers
+#
+# CONFIG_USB_EMI62 is not set
+# CONFIG_USB_EMI26 is not set
+# CONFIG_USB_AUERSWALD is not set
+# CONFIG_USB_RIO500 is not set
+# CONFIG_USB_LEGOTOWER is not set
+# CONFIG_USB_LCD is not set
+# CONFIG_USB_LED is not set
+# CONFIG_USB_CYTHERM is not set
+# CONFIG_USB_PHIDGETKIT is not set
+# CONFIG_USB_PHIDGETSERVO is not set
+# CONFIG_USB_IDMOUSE is not set
+# CONFIG_USB_LD is not set
+
+#
+# USB DSL modem support
+#
+
+#
+# USB Gadget Support
+#
+# CONFIG_USB_GADGET is not set
+
+#
+# MMC/SD Card support
+#
+CONFIG_MMC=y
+# CONFIG_MMC_DEBUG is not set
+CONFIG_MMC_BLOCK=y
+CONFIG_MMC_PXA=y
+# CONFIG_MMC_WBSD is not set
+
+#
+# File systems
+#
+CONFIG_EXT2_FS=y
+# CONFIG_EXT2_FS_XATTR is not set
+# CONFIG_EXT2_FS_XIP is not set
+# CONFIG_EXT3_FS is not set
+# CONFIG_JBD is not set
+# CONFIG_REISERFS_FS is not set
+# CONFIG_JFS_FS is not set
+# CONFIG_FS_POSIX_ACL is not set
+# CONFIG_XFS_FS is not set
+# CONFIG_MINIX_FS is not set
+# CONFIG_ROMFS_FS is not set
+CONFIG_INOTIFY=y
+# CONFIG_QUOTA is not set
+CONFIG_DNOTIFY=y
+# CONFIG_AUTOFS_FS is not set
+CONFIG_AUTOFS4_FS=y
+CONFIG_FUSE_FS=y
+
+#
+# CD-ROM/DVD Filesystems
+#
+# CONFIG_ISO9660_FS is not set
+# CONFIG_UDF_FS is not set
+
+#
+# DOS/FAT/NT Filesystems
+#
+CONFIG_FAT_FS=y
+CONFIG_MSDOS_FS=y
+CONFIG_VFAT_FS=y
+CONFIG_FAT_DEFAULT_CODEPAGE=850
+CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"
+# CONFIG_NTFS_FS is not set
+
+#
+# Pseudo filesystems
+#
+CONFIG_PROC_FS=y
+CONFIG_SYSFS=y
+CONFIG_TMPFS=y
+# CONFIG_HUGETLB_PAGE is not set
+CONFIG_RAMFS=y
+# CONFIG_RELAYFS_FS is not set
+
+#
+# Miscellaneous filesystems
+#
+# CONFIG_ADFS_FS is not set
+# CONFIG_AFFS_FS is not set
+# CONFIG_HFS_FS is not set
+# CONFIG_HFSPLUS_FS is not set
+# CONFIG_BEFS_FS is not set
+# CONFIG_BFS_FS is not set
+# CONFIG_EFS_FS is not set
+# CONFIG_JFFS_FS is not set
+CONFIG_JFFS2_FS=y
+CONFIG_JFFS2_FS_DEBUG=0
+CONFIG_JFFS2_FS_WRITEBUFFER=y
+# CONFIG_JFFS2_SUMMARY is not set
+# CONFIG_JFFS2_COMPRESSION_OPTIONS is not set
+CONFIG_JFFS2_ZLIB=y
+CONFIG_JFFS2_RTIME=y
+# CONFIG_JFFS2_RUBIN is not set
+# CONFIG_CRAMFS is not set
+# CONFIG_VXFS_FS is not set
+# CONFIG_HPFS_FS is not set
+# CONFIG_QNX4FS_FS is not set
+# CONFIG_SYSV_FS is not set
+# CONFIG_UFS_FS is not set
+
+#
+# Network File Systems
+#
+CONFIG_NFS_FS=y
+CONFIG_NFS_V3=y
+# CONFIG_NFS_V3_ACL is not set
+# CONFIG_NFS_V4 is not set
+# CONFIG_NFS_DIRECTIO is not set
+# CONFIG_NFSD is not set
+CONFIG_ROOT_NFS=y
+CONFIG_LOCKD=y
+CONFIG_LOCKD_V4=y
+CONFIG_NFS_COMMON=y
+CONFIG_SUNRPC=y
+CONFIG_SUNRPC_GSS=y
+CONFIG_RPCSEC_GSS_KRB5=y
+# CONFIG_RPCSEC_GSS_SPKM3 is not set
+# CONFIG_SMB_FS is not set
+# CONFIG_CIFS is not set
+# CONFIG_NCP_FS is not set
+# CONFIG_CODA_FS is not set
+# CONFIG_AFS_FS is not set
+# CONFIG_9P_FS is not set
+
+#
+# Partition Types
+#
+CONFIG_PARTITION_ADVANCED=y
+# CONFIG_ACORN_PARTITION is not set
+# CONFIG_OSF_PARTITION is not set
+# CONFIG_AMIGA_PARTITION is not set
+# CONFIG_ATARI_PARTITION is not set
+# CONFIG_MAC_PARTITION is not set
+CONFIG_MSDOS_PARTITION=y
+# CONFIG_BSD_DISKLABEL is not set
+# CONFIG_MINIX_SUBPARTITION is not set
+# CONFIG_SOLARIS_X86_PARTITION is not set
+# CONFIG_UNIXWARE_DISKLABEL is not set
+CONFIG_LDM_PARTITION=y
+# CONFIG_LDM_DEBUG is not set
+# CONFIG_SGI_PARTITION is not set
+# CONFIG_ULTRIX_PARTITION is not set
+# CONFIG_SUN_PARTITION is not set
+# CONFIG_EFI_PARTITION is not set
+
+#
+# Native Language Support
+#
+CONFIG_NLS=y
+CONFIG_NLS_DEFAULT="iso8859-15"
+# CONFIG_NLS_CODEPAGE_437 is not set
+# CONFIG_NLS_CODEPAGE_737 is not set
+# CONFIG_NLS_CODEPAGE_775 is not set
+CONFIG_NLS_CODEPAGE_850=y
+# CONFIG_NLS_CODEPAGE_852 is not set
+# CONFIG_NLS_CODEPAGE_855 is not set
+# CONFIG_NLS_CODEPAGE_857 is not set
+# CONFIG_NLS_CODEPAGE_860 is not set
+# CONFIG_NLS_CODEPAGE_861 is not set
+# CONFIG_NLS_CODEPAGE_862 is not set
+# CONFIG_NLS_CODEPAGE_863 is not set
+# CONFIG_NLS_CODEPAGE_864 is not set
+# CONFIG_NLS_CODEPAGE_865 is not set
+# CONFIG_NLS_CODEPAGE_866 is not set
+# CONFIG_NLS_CODEPAGE_869 is not set
+# CONFIG_NLS_CODEPAGE_936 is not set
+# CONFIG_NLS_CODEPAGE_950 is not set
+# CONFIG_NLS_CODEPAGE_932 is not set
+# CONFIG_NLS_CODEPAGE_949 is not set
+# CONFIG_NLS_CODEPAGE_874 is not set
+# CONFIG_NLS_ISO8859_8 is not set
+# CONFIG_NLS_CODEPAGE_1250 is not set
+# CONFIG_NLS_CODEPAGE_1251 is not set
+# CONFIG_NLS_ASCII is not set
+CONFIG_NLS_ISO8859_1=y
+# CONFIG_NLS_ISO8859_2 is not set
+# CONFIG_NLS_ISO8859_3 is not set
+# CONFIG_NLS_ISO8859_4 is not set
+# CONFIG_NLS_ISO8859_5 is not set
+# CONFIG_NLS_ISO8859_6 is not set
+# CONFIG_NLS_ISO8859_7 is not set
+# CONFIG_NLS_ISO8859_9 is not set
+# CONFIG_NLS_ISO8859_13 is not set
+# CONFIG_NLS_ISO8859_14 is not set
+CONFIG_NLS_ISO8859_15=y
+# CONFIG_NLS_KOI8_R is not set
+# CONFIG_NLS_KOI8_U is not set
+# CONFIG_NLS_UTF8 is not set
+
+#
+# Profiling support
+#
+# CONFIG_PROFILING is not set
+
+#
+# Kernel hacking
+#
+# CONFIG_PRINTK_TIME is not set
+CONFIG_DEBUG_KERNEL=y
+CONFIG_MAGIC_SYSRQ=y
+CONFIG_LOG_BUF_SHIFT=14
+CONFIG_DETECT_SOFTLOCKUP=y
+# CONFIG_SCHEDSTATS is not set
+# CONFIG_DEBUG_SLAB is not set
+# CONFIG_DEBUG_SPINLOCK is not set
+# CONFIG_DEBUG_SPINLOCK_SLEEP is not set
+CONFIG_DEBUG_KOBJECT=y
+CONFIG_DEBUG_BUGVERBOSE=y
+CONFIG_DEBUG_INFO=y
+# CONFIG_DEBUG_FS is not set
+# CONFIG_DEBUG_VM is not set
+CONFIG_FRAME_POINTER=y
+# CONFIG_RCU_TORTURE_TEST is not set
+CONFIG_DEBUG_USER=y
+# CONFIG_DEBUG_WAITQ is not set
+CONFIG_DEBUG_ERRORS=y
+CONFIG_DEBUG_LL=y
+# CONFIG_DEBUG_ICEDCC is not set
+
+#
+# Security options
+#
+# CONFIG_KEYS is not set
+# CONFIG_SECURITY is not set
+
+#
+# Cryptographic options
+#
+CONFIG_CRYPTO=y
+# CONFIG_CRYPTO_HMAC is not set
+# CONFIG_CRYPTO_NULL is not set
+# CONFIG_CRYPTO_MD4 is not set
+CONFIG_CRYPTO_MD5=y
+# CONFIG_CRYPTO_SHA1 is not set
+# CONFIG_CRYPTO_SHA256 is not set
+# CONFIG_CRYPTO_SHA512 is not set
+# CONFIG_CRYPTO_WP512 is not set
+# CONFIG_CRYPTO_TGR192 is not set
+CONFIG_CRYPTO_DES=y
+# CONFIG_CRYPTO_BLOWFISH is not set
+# CONFIG_CRYPTO_TWOFISH is not set
+# CONFIG_CRYPTO_SERPENT is not set
+CONFIG_CRYPTO_AES=y
+# CONFIG_CRYPTO_CAST5 is not set
+# CONFIG_CRYPTO_CAST6 is not set
+# CONFIG_CRYPTO_TEA is not set
+CONFIG_CRYPTO_ARC4=y
+# CONFIG_CRYPTO_KHAZAD is not set
+# CONFIG_CRYPTO_ANUBIS is not set
+# CONFIG_CRYPTO_DEFLATE is not set
+CONFIG_CRYPTO_MICHAEL_MIC=y
+# CONFIG_CRYPTO_CRC32C is not set
+# CONFIG_CRYPTO_TEST is not set
+
+#
+# Hardware crypto devices
+#
+
+#
+# Library routines
+#
+# CONFIG_CRC_CCITT is not set
+# CONFIG_CRC16 is not set
+CONFIG_CRC32=y
+# CONFIG_LIBCRC32C is not set
+CONFIG_ZLIB_INFLATE=y
+CONFIG_ZLIB_DEFLATE=y
Index: linux-2.6.15.3/arch/arm/configs/creator_simple_pxa270_defconfig
===================================================================
--- linux-2.6.15.3/arch/arm/configs/creator_simple_pxa270_defconfig	(revision 0)
+++ linux-2.6.15.3/arch/arm/configs/creator_simple_pxa270_defconfig	(revision 7613)
@@ -0,0 +1,1171 @@
+#
+# Automatically generated make config: don't edit
+# Linux kernel version: 2.6.15.3
+# Fri Nov 23 13:29:51 2007
+#
+CONFIG_ARM=y
+CONFIG_MMU=y
+CONFIG_UID16=y
+CONFIG_RWSEM_GENERIC_SPINLOCK=y
+CONFIG_GENERIC_CALIBRATE_DELAY=y
+
+#
+# Code maturity level options
+#
+CONFIG_EXPERIMENTAL=y
+CONFIG_CLEAN_COMPILE=y
+CONFIG_BROKEN_ON_SMP=y
+CONFIG_LOCK_KERNEL=y
+CONFIG_INIT_ENV_ARG_LIMIT=32
+
+#
+# General setup
+#
+CONFIG_LOCALVERSION=""
+CONFIG_LOCALVERSION_AUTO=y
+CONFIG_SWAP=y
+CONFIG_SYSVIPC=y
+# CONFIG_POSIX_MQUEUE is not set
+# CONFIG_BSD_PROCESS_ACCT is not set
+CONFIG_SYSCTL=y
+# CONFIG_AUDIT is not set
+CONFIG_HOTPLUG=y
+CONFIG_KOBJECT_UEVENT=y
+# CONFIG_IKCONFIG is not set
+CONFIG_INITRAMFS_SOURCE=""
+CONFIG_CC_OPTIMIZE_FOR_SIZE=y
+# CONFIG_EMBEDDED is not set
+CONFIG_KALLSYMS=y
+# CONFIG_KALLSYMS_ALL is not set
+# CONFIG_KALLSYMS_EXTRA_PASS is not set
+CONFIG_PRINTK=y
+CONFIG_BUG=y
+CONFIG_BASE_FULL=y
+CONFIG_FUTEX=y
+CONFIG_EPOLL=y
+CONFIG_SHMEM=y
+CONFIG_CC_ALIGN_FUNCTIONS=0
+CONFIG_CC_ALIGN_LABELS=0
+CONFIG_CC_ALIGN_LOOPS=0
+CONFIG_CC_ALIGN_JUMPS=0
+# CONFIG_TINY_SHMEM is not set
+CONFIG_BASE_SMALL=0
+
+#
+# Loadable module support
+#
+CONFIG_MODULES=y
+CONFIG_MODULE_UNLOAD=y
+CONFIG_MODULE_FORCE_UNLOAD=y
+CONFIG_OBSOLETE_MODPARM=y
+# CONFIG_MODVERSIONS is not set
+# CONFIG_MODULE_SRCVERSION_ALL is not set
+# CONFIG_KMOD is not set
+
+#
+# Block layer
+#
+
+#
+# IO Schedulers
+#
+CONFIG_IOSCHED_NOOP=y
+CONFIG_IOSCHED_AS=y
+CONFIG_IOSCHED_DEADLINE=y
+CONFIG_IOSCHED_CFQ=y
+CONFIG_DEFAULT_AS=y
+# CONFIG_DEFAULT_DEADLINE is not set
+# CONFIG_DEFAULT_CFQ is not set
+# CONFIG_DEFAULT_NOOP is not set
+CONFIG_DEFAULT_IOSCHED="anticipatory"
+
+#
+# System Type
+#
+# CONFIG_ARCH_CLPS7500 is not set
+# CONFIG_ARCH_CLPS711X is not set
+# CONFIG_ARCH_CO285 is not set
+# CONFIG_ARCH_EBSA110 is not set
+# CONFIG_ARCH_CAMELOT is not set
+# CONFIG_ARCH_FOOTBRIDGE is not set
+# CONFIG_ARCH_INTEGRATOR is not set
+# CONFIG_ARCH_IOP3XX is not set
+# CONFIG_ARCH_IXP4XX is not set
+# CONFIG_ARCH_IXP2000 is not set
+# CONFIG_ARCH_L7200 is not set
+CONFIG_ARCH_PXA=y
+# CONFIG_ARCH_RPC is not set
+# CONFIG_ARCH_SA1100 is not set
+# CONFIG_ARCH_S3C2410 is not set
+# CONFIG_ARCH_SHARK is not set
+# CONFIG_ARCH_LH7A40X is not set
+# CONFIG_ARCH_OMAP is not set
+# CONFIG_ARCH_VERSATILE is not set
+# CONFIG_ARCH_REALVIEW is not set
+# CONFIG_ARCH_IMX is not set
+# CONFIG_ARCH_H720X is not set
+# CONFIG_ARCH_AAEC2000 is not set
+
+#
+# Intel PXA2xx Implementations
+#
+# CONFIG_ARCH_LUBBOCK is not set
+# CONFIG_MACH_MAINSTONE is not set
+# CONFIG_ARCH_PXA_IDP is not set
+# CONFIG_PXA_SHARPSL is not set
+CONFIG_MACH_CREATOR_PXA270=y
+CONFIG_PXA27x=y
+CONFIG_IWMMXT=y
+CONFIG_CREATOR_CORE=y
+
+#
+# Processor Type
+#
+CONFIG_CPU_32=y
+CONFIG_CPU_XSCALE=y
+CONFIG_CPU_32v5=y
+CONFIG_CPU_ABRT_EV5T=y
+CONFIG_CPU_CACHE_VIVT=y
+CONFIG_CPU_TLB_V4WBI=y
+
+#
+# Processor Features
+#
+# CONFIG_ARM_THUMB is not set
+CONFIG_XSCALE_PMU=y
+
+#
+# Bus support
+#
+CONFIG_ISA_DMA_API=y
+
+#
+# PCCARD (PCMCIA/CardBus) support
+#
+# CONFIG_PCCARD is not set
+
+#
+# Kernel Features
+#
+CONFIG_PREEMPT=y
+# CONFIG_NO_IDLE_HZ is not set
+# CONFIG_ARCH_DISCONTIGMEM_ENABLE is not set
+CONFIG_SELECT_MEMORY_MODEL=y
+CONFIG_FLATMEM_MANUAL=y
+# CONFIG_DISCONTIGMEM_MANUAL is not set
+# CONFIG_SPARSEMEM_MANUAL is not set
+CONFIG_FLATMEM=y
+CONFIG_FLAT_NODE_MEM_MAP=y
+# CONFIG_SPARSEMEM_STATIC is not set
+CONFIG_SPLIT_PTLOCK_CPUS=4096
+CONFIG_ALIGNMENT_TRAP=y
+
+#
+# Boot options
+#
+CONFIG_ZBOOT_ROM_TEXT=0x0
+CONFIG_ZBOOT_ROM_BSS=0x0
+CONFIG_CMDLINE="root=/dev/mtdblock3 rw rootfstype=jffs2 console=ttyS0,9600n8 mem=64M ip=192.168.0.100::192.168.0.1:255.255.255.0::eth0:off ether=aa:11:22:33:44:55"
+# CONFIG_XIP_KERNEL is not set
+
+#
+# CPU Frequency scaling
+#
+# CONFIG_CPU_FREQ is not set
+
+#
+# Floating point emulation
+#
+
+#
+# At least one emulation must be selected
+#
+CONFIG_FPE_NWFPE=y
+# CONFIG_FPE_NWFPE_XP is not set
+# CONFIG_FPE_FASTFPE is not set
+
+#
+# Userspace binary formats
+#
+CONFIG_BINFMT_ELF=y
+CONFIG_BINFMT_AOUT=y
+# CONFIG_BINFMT_MISC is not set
+# CONFIG_ARTHUR is not set
+
+#
+# Power management options
+#
+# CONFIG_PM is not set
+
+#
+# Networking
+#
+CONFIG_NET=y
+
+#
+# Networking options
+#
+CONFIG_PACKET=y
+# CONFIG_PACKET_MMAP is not set
+CONFIG_UNIX=y
+# CONFIG_NET_KEY is not set
+CONFIG_INET=y
+# CONFIG_IP_MULTICAST is not set
+# CONFIG_IP_ADVANCED_ROUTER is not set
+CONFIG_IP_FIB_HASH=y
+CONFIG_IP_PNP=y
+# CONFIG_IP_PNP_DHCP is not set
+# CONFIG_IP_PNP_BOOTP is not set
+# CONFIG_IP_PNP_RARP is not set
+# CONFIG_NET_IPIP is not set
+# CONFIG_NET_IPGRE is not set
+# CONFIG_ARPD is not set
+# CONFIG_SYN_COOKIES is not set
+# CONFIG_INET_AH is not set
+# CONFIG_INET_ESP is not set
+# CONFIG_INET_IPCOMP is not set
+# CONFIG_INET_TUNNEL is not set
+CONFIG_INET_DIAG=y
+CONFIG_INET_TCP_DIAG=y
+# CONFIG_TCP_CONG_ADVANCED is not set
+CONFIG_TCP_CONG_BIC=y
+# CONFIG_IPV6 is not set
+# CONFIG_NETFILTER is not set
+
+#
+# DCCP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_DCCP is not set
+
+#
+# SCTP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_SCTP is not set
+# CONFIG_ATM is not set
+# CONFIG_BRIDGE is not set
+# CONFIG_VLAN_8021Q is not set
+# CONFIG_DECNET is not set
+# CONFIG_LLC2 is not set
+# CONFIG_IPX is not set
+# CONFIG_ATALK is not set
+# CONFIG_X25 is not set
+# CONFIG_LAPB is not set
+# CONFIG_NET_DIVERT is not set
+# CONFIG_ECONET is not set
+# CONFIG_WAN_ROUTER is not set
+
+#
+# QoS and/or fair queueing
+#
+# CONFIG_NET_SCHED is not set
+
+#
+# Network testing
+#
+# CONFIG_NET_PKTGEN is not set
+# CONFIG_HAMRADIO is not set
+# CONFIG_IRDA is not set
+# CONFIG_BT is not set
+# CONFIG_IEEE80211 is not set
+
+#
+# Device Drivers
+#
+
+#
+# Generic Driver Options
+#
+CONFIG_STANDALONE=y
+CONFIG_PREVENT_FIRMWARE_BUILD=y
+CONFIG_FW_LOADER=y
+CONFIG_DEBUG_DRIVER=y
+
+#
+# Connector - unified userspace <-> kernelspace linker
+#
+# CONFIG_CONNECTOR is not set
+
+#
+# Memory Technology Devices (MTD)
+#
+CONFIG_MTD=y
+# CONFIG_MTD_DEBUG is not set
+# CONFIG_MTD_CONCAT is not set
+CONFIG_MTD_PARTITIONS=y
+# CONFIG_MTD_REDBOOT_PARTS is not set
+# CONFIG_MTD_CMDLINE_PARTS is not set
+# CONFIG_MTD_AFS_PARTS is not set
+
+#
+# User Modules And Translation Layers
+#
+# CONFIG_MTD_CHAR is not set
+CONFIG_MTD_BLOCK=y
+# CONFIG_FTL is not set
+# CONFIG_NFTL is not set
+# CONFIG_INFTL is not set
+# CONFIG_RFD_FTL is not set
+
+#
+# RAM/ROM/Flash chip drivers
+#
+CONFIG_MTD_CFI=y
+# CONFIG_MTD_JEDECPROBE is not set
+CONFIG_MTD_GEN_PROBE=y
+CONFIG_MTD_CFI_ADV_OPTIONS=y
+CONFIG_MTD_CFI_NOSWAP=y
+# CONFIG_MTD_CFI_BE_BYTE_SWAP is not set
+# CONFIG_MTD_CFI_LE_BYTE_SWAP is not set
+CONFIG_MTD_CFI_GEOMETRY=y
+# CONFIG_MTD_MAP_BANK_WIDTH_1 is not set
+CONFIG_MTD_MAP_BANK_WIDTH_2=y
+# CONFIG_MTD_MAP_BANK_WIDTH_4 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_8 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_16 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_32 is not set
+CONFIG_MTD_CFI_I1=y
+# CONFIG_MTD_CFI_I2 is not set
+# CONFIG_MTD_CFI_I4 is not set
+# CONFIG_MTD_CFI_I8 is not set
+# CONFIG_MTD_OTP is not set
+CONFIG_MTD_CFI_INTELEXT=y
+# CONFIG_MTD_CFI_AMDSTD is not set
+# CONFIG_MTD_CFI_STAA is not set
+CONFIG_MTD_CFI_UTIL=y
+# CONFIG_MTD_RAM is not set
+# CONFIG_MTD_ROM is not set
+# CONFIG_MTD_ABSENT is not set
+# CONFIG_MTD_XIP is not set
+
+#
+# Mapping drivers for chip access
+#
+# CONFIG_MTD_COMPLEX_MAPPINGS is not set
+# CONFIG_MTD_PHYSMAP is not set
+# CONFIG_MTD_ARM_INTEGRATOR is not set
+CONFIG_MTD_CREATOR_PXA270=y
+# CONFIG_MTD_SHARP_SL is not set
+# CONFIG_MTD_PLATRAM is not set
+
+#
+# Self-contained MTD device drivers
+#
+# CONFIG_MTD_SLRAM is not set
+# CONFIG_MTD_PHRAM is not set
+# CONFIG_MTD_MTDRAM is not set
+# CONFIG_MTD_BLKMTD is not set
+CONFIG_MTD_BLOCK2MTD=y
+
+#
+# Disk-On-Chip Device Drivers
+#
+# CONFIG_MTD_DOC2000 is not set
+# CONFIG_MTD_DOC2001 is not set
+# CONFIG_MTD_DOC2001PLUS is not set
+
+#
+# NAND Flash Device Drivers
+#
+# CONFIG_MTD_NAND is not set
+
+#
+# OneNAND Flash Device Drivers
+#
+# CONFIG_MTD_ONENAND is not set
+
+#
+# Parallel port support
+#
+# CONFIG_PARPORT is not set
+
+#
+# Plug and Play support
+#
+
+#
+# Block devices
+#
+# CONFIG_BLK_DEV_COW_COMMON is not set
+CONFIG_BLK_DEV_LOOP=m
+# CONFIG_BLK_DEV_CRYPTOLOOP is not set
+# CONFIG_BLK_DEV_NBD is not set
+# CONFIG_BLK_DEV_UB is not set
+# CONFIG_BLK_DEV_RAM is not set
+CONFIG_BLK_DEV_RAM_COUNT=16
+# CONFIG_CDROM_PKTCDVD is not set
+# CONFIG_ATA_OVER_ETH is not set
+
+#
+# ATA/ATAPI/MFM/RLL support
+#
+# CONFIG_IDE is not set
+
+#
+# SCSI device support
+#
+# CONFIG_RAID_ATTRS is not set
+CONFIG_SCSI=y
+CONFIG_SCSI_PROC_FS=y
+
+#
+# SCSI support type (disk, tape, CD-ROM)
+#
+CONFIG_BLK_DEV_SD=y
+# CONFIG_CHR_DEV_ST is not set
+# CONFIG_CHR_DEV_OSST is not set
+# CONFIG_BLK_DEV_SR is not set
+CONFIG_CHR_DEV_SG=y
+# CONFIG_CHR_DEV_SCH is not set
+
+#
+# Some SCSI devices (e.g. CD jukebox) support multiple LUNs
+#
+# CONFIG_SCSI_MULTI_LUN is not set
+# CONFIG_SCSI_CONSTANTS is not set
+# CONFIG_SCSI_LOGGING is not set
+
+#
+# SCSI Transport Attributes
+#
+# CONFIG_SCSI_SPI_ATTRS is not set
+# CONFIG_SCSI_FC_ATTRS is not set
+# CONFIG_SCSI_ISCSI_ATTRS is not set
+# CONFIG_SCSI_SAS_ATTRS is not set
+
+#
+# SCSI low-level drivers
+#
+# CONFIG_ISCSI_TCP is not set
+# CONFIG_SCSI_SATA is not set
+# CONFIG_SCSI_DEBUG is not set
+
+#
+# Multi-device support (RAID and LVM)
+#
+# CONFIG_MD is not set
+
+#
+# Fusion MPT device support
+#
+# CONFIG_FUSION is not set
+
+#
+# IEEE 1394 (FireWire) support
+#
+
+#
+# I2O device support
+#
+
+#
+# Network device support
+#
+CONFIG_NETDEVICES=y
+# CONFIG_DUMMY is not set
+# CONFIG_BONDING is not set
+# CONFIG_EQUALIZER is not set
+# CONFIG_TUN is not set
+
+#
+# PHY device support
+#
+# CONFIG_PHYLIB is not set
+
+#
+# Ethernet (10 or 100Mbit)
+#
+CONFIG_NET_ETHERNET=y
+CONFIG_MII=y
+CONFIG_SMC91X=y
+
+#
+# Ethernet (1000 Mbit)
+#
+
+#
+# Ethernet (10000 Mbit)
+#
+
+#
+# Token Ring devices
+#
+
+#
+# Wireless LAN (non-hamradio)
+#
+CONFIG_NET_RADIO=y
+
+#
+# Obsolete Wireless cards support (pre-802.11)
+#
+# CONFIG_STRIP is not set
+# CONFIG_ATMEL is not set
+# CONFIG_HOSTAP is not set
+
+#
+# Wan interfaces
+#
+# CONFIG_WAN is not set
+# CONFIG_PPP is not set
+# CONFIG_SLIP is not set
+# CONFIG_SHAPER is not set
+# CONFIG_NETCONSOLE is not set
+# CONFIG_NETPOLL is not set
+# CONFIG_NET_POLL_CONTROLLER is not set
+
+#
+# ISDN subsystem
+#
+# CONFIG_ISDN is not set
+
+#
+# Input device support
+#
+CONFIG_INPUT=y
+
+#
+# Userland interfaces
+#
+CONFIG_INPUT_MOUSEDEV=y
+CONFIG_INPUT_MOUSEDEV_PSAUX=y
+CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
+CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
+# CONFIG_INPUT_JOYDEV is not set
+# CONFIG_INPUT_TSDEV is not set
+CONFIG_INPUT_EVDEV=y
+CONFIG_INPUT_EVBUG=y
+
+#
+# Input Device Drivers
+#
+# CONFIG_INPUT_KEYBOARD is not set
+# CONFIG_INPUT_MOUSE is not set
+# CONFIG_INPUT_JOYSTICK is not set
+# CONFIG_INPUT_TOUCHSCREEN is not set
+# CONFIG_INPUT_MISC is not set
+
+#
+# Hardware I/O ports
+#
+# CONFIG_SERIO is not set
+# CONFIG_GAMEPORT is not set
+
+#
+# Character devices
+#
+CONFIG_VT=y
+CONFIG_VT_CONSOLE=y
+CONFIG_HW_CONSOLE=y
+# CONFIG_SERIAL_NONSTANDARD is not set
+
+#
+# Serial drivers
+#
+# CONFIG_SERIAL_8250 is not set
+
+#
+# Non-8250 serial port support
+#
+CONFIG_SERIAL_PXA=y
+CONFIG_SERIAL_PXA_CONSOLE=y
+CONFIG_SERIAL_CORE=y
+CONFIG_SERIAL_CORE_CONSOLE=y
+CONFIG_UNIX98_PTYS=y
+CONFIG_LEGACY_PTYS=y
+CONFIG_LEGACY_PTY_COUNT=256
+
+#
+# IPMI
+#
+# CONFIG_IPMI_HANDLER is not set
+
+#
+# Watchdog Cards
+#
+# CONFIG_WATCHDOG is not set
+# CONFIG_NVRAM is not set
+# CONFIG_RTC is not set
+# CONFIG_DTLK is not set
+# CONFIG_R3964 is not set
+
+#
+# Ftape, the floppy tape device driver
+#
+# CONFIG_RAW_DRIVER is not set
+
+#
+# TPM devices
+#
+# CONFIG_TCG_TPM is not set
+# CONFIG_TELCLOCK is not set
+# CONFIG_CREATOR_PXA270_LCD is not set
+# CONFIG_CREATOR_PXA270_CMOS is not set
+# CONFIG_CREATOR_PXA270_CODEC is not set
+# CONFIG_CREATOR_PXA270_INFRARED is not set
+# CONFIG_CREATOR_PXA270_GPRS is not set
+# CONFIG_CREATOR_PXA270_DSP_5502 is not set
+# CONFIG_CREATOR_PXA270_FGPA_EP1C6_LOADER is not set
+# CONFIG_CREATOR_PXA270_FGPA_EP1C6_A2D is not set
+
+#
+# I2C support
+#
+CONFIG_I2C=y
+CONFIG_I2C_CHARDEV=y
+
+#
+# I2C Algorithms
+#
+# CONFIG_I2C_ALGOBIT is not set
+# CONFIG_I2C_ALGOPCF is not set
+# CONFIG_I2C_ALGOPCA is not set
+
+#
+# I2C Hardware Bus support
+#
+CONFIG_I2C_PXA=y
+# CONFIG_I2C_PXA_SLAVE is not set
+# CONFIG_I2C_PARPORT_LIGHT is not set
+# CONFIG_I2C_STUB is not set
+# CONFIG_I2C_PCA_ISA is not set
+
+#
+# Miscellaneous I2C Chip support
+#
+# CONFIG_SENSORS_DS1337 is not set
+# CONFIG_SENSORS_DS1374 is not set
+# CONFIG_SENSORS_EEPROM is not set
+# CONFIG_SENSORS_PCF8574 is not set
+# CONFIG_SENSORS_PCA9539 is not set
+# CONFIG_SENSORS_PCF8591 is not set
+CONFIG_SENSORS_RTC8564=y
+# CONFIG_SENSORS_MAX6875 is not set
+# CONFIG_RTC_X1205_I2C is not set
+# CONFIG_CODEC_TLV320AIC_I2C is not set
+# CONFIG_I2C_DEBUG_CORE is not set
+# CONFIG_I2C_DEBUG_ALGO is not set
+# CONFIG_I2C_DEBUG_BUS is not set
+# CONFIG_I2C_DEBUG_CHIP is not set
+
+#
+# Hardware Monitoring support
+#
+# CONFIG_HWMON is not set
+# CONFIG_HWMON_VID is not set
+
+#
+# Misc devices
+#
+
+#
+# Multimedia Capabilities Port drivers
+#
+CONFIG_UCB1400=m
+CONFIG_UCB1400_TS=m
+
+#
+# Multimedia devices
+#
+CONFIG_VIDEO_DEV=y
+
+#
+# Video For Linux
+#
+
+#
+# Video Adapters
+#
+# CONFIG_VIDEO_CPIA is not set
+# CONFIG_VIDEO_SAA5246A is not set
+# CONFIG_VIDEO_SAA5249 is not set
+# CONFIG_TUNER_3036 is not set
+# CONFIG_VIDEO_EM28XX is not set
+# CONFIG_VIDEO_OVCAMCHIP is not set
+# CONFIG_VIDEO_AUDIO_DECODER is not set
+# CONFIG_VIDEO_DECODER is not set
+
+#
+# Radio Adapters
+#
+# CONFIG_RADIO_MAESTRO is not set
+
+#
+# Digital Video Broadcasting Devices
+#
+# CONFIG_DVB is not set
+
+#
+# Graphics support
+#
+CONFIG_FB=y
+CONFIG_FB_CFB_FILLRECT=m
+CONFIG_FB_CFB_COPYAREA=m
+CONFIG_FB_CFB_IMAGEBLIT=m
+# CONFIG_FB_MACMODES is not set
+# CONFIG_FB_MODE_HELPERS is not set
+# CONFIG_FB_TILEBLITTING is not set
+# CONFIG_FB_S1D13XXX is not set
+CONFIG_FB_PXA=m
+# CONFIG_FB_PXA_PARAMETERS is not set
+# CONFIG_FB_VIRTUAL is not set
+
+#
+# Console display driver support
+#
+# CONFIG_VGA_CONSOLE is not set
+CONFIG_DUMMY_CONSOLE=y
+CONFIG_FRAMEBUFFER_CONSOLE=y
+# CONFIG_FRAMEBUFFER_CONSOLE_ROTATION is not set
+# CONFIG_FONTS is not set
+CONFIG_FONT_8x8=y
+CONFIG_FONT_8x16=y
+
+#
+# Logo configuration
+#
+CONFIG_LOGO=y
+CONFIG_LOGO_LINUX_MONO=y
+CONFIG_LOGO_LINUX_VGA16=y
+CONFIG_LOGO_LINUX_CLUT224=y
+# CONFIG_BACKLIGHT_LCD_SUPPORT is not set
+
+#
+# Sound
+#
+CONFIG_SOUND=y
+
+#
+# Advanced Linux Sound Architecture
+#
+CONFIG_SND=y
+CONFIG_SND_AC97_CODEC=y
+CONFIG_SND_AC97_BUS=y
+CONFIG_SND_TIMER=y
+CONFIG_SND_PCM=y
+CONFIG_SND_SEQUENCER=y
+# CONFIG_SND_SEQ_DUMMY is not set
+CONFIG_SND_OSSEMUL=y
+CONFIG_SND_MIXER_OSS=y
+CONFIG_SND_PCM_OSS=y
+# CONFIG_SND_SEQUENCER_OSS is not set
+CONFIG_SND_VERBOSE_PRINTK=y
+CONFIG_SND_DEBUG=y
+CONFIG_SND_DEBUG_DETECT=y
+
+#
+# Generic devices
+#
+# CONFIG_SND_DUMMY is not set
+# CONFIG_SND_VIRMIDI is not set
+# CONFIG_SND_MTPAV is not set
+# CONFIG_SND_SERIAL_U16550 is not set
+# CONFIG_SND_MPU401 is not set
+
+#
+# ALSA ARM devices
+#
+CONFIG_SND_PXA2XX_PCM=y
+CONFIG_SND_PXA2XX_AC97=y
+
+#
+# USB devices
+#
+# CONFIG_SND_USB_AUDIO is not set
+
+#
+# Open Sound System
+#
+# CONFIG_SOUND_PRIME is not set
+
+#
+# USB support
+#
+CONFIG_USB_ARCH_HAS_HCD=y
+CONFIG_USB_ARCH_HAS_OHCI=y
+CONFIG_USB=y
+# CONFIG_USB_DEBUG is not set
+
+#
+# Miscellaneous USB options
+#
+# CONFIG_USB_DEVICEFS is not set
+# CONFIG_USB_BANDWIDTH is not set
+# CONFIG_USB_DYNAMIC_MINORS is not set
+# CONFIG_USB_OTG is not set
+
+#
+# USB Host Controller Drivers
+#
+# CONFIG_USB_ISP116X_HCD is not set
+CONFIG_USB_OHCI_HCD=y
+# CONFIG_USB_OHCI_BIG_ENDIAN is not set
+CONFIG_USB_OHCI_LITTLE_ENDIAN=y
+# CONFIG_USB_SL811_HCD is not set
+
+#
+# USB Device Class drivers
+#
+# CONFIG_OBSOLETE_OSS_USB_DRIVER is not set
+# CONFIG_USB_ACM is not set
+# CONFIG_USB_PRINTER is not set
+
+#
+# NOTE: USB_STORAGE enables SCSI, and 'SCSI disk support'
+#
+
+#
+# may also be needed; see USB_STORAGE Help for more information
+#
+CONFIG_USB_STORAGE=y
+# CONFIG_USB_STORAGE_DEBUG is not set
+# CONFIG_USB_STORAGE_DATAFAB is not set
+# CONFIG_USB_STORAGE_FREECOM is not set
+# CONFIG_USB_STORAGE_DPCM is not set
+# CONFIG_USB_STORAGE_USBAT is not set
+# CONFIG_USB_STORAGE_SDDR09 is not set
+# CONFIG_USB_STORAGE_SDDR55 is not set
+# CONFIG_USB_STORAGE_JUMPSHOT is not set
+# CONFIG_USB_STORAGE_ONETOUCH is not set
+
+#
+# USB Input Devices
+#
+# CONFIG_USB_HID is not set
+
+#
+# USB HID Boot Protocol drivers
+#
+# CONFIG_USB_KBD is not set
+# CONFIG_USB_MOUSE is not set
+# CONFIG_USB_AIPTEK is not set
+# CONFIG_USB_WACOM is not set
+# CONFIG_USB_ACECAD is not set
+# CONFIG_USB_KBTAB is not set
+# CONFIG_USB_POWERMATE is not set
+# CONFIG_USB_MTOUCH is not set
+# CONFIG_USB_ITMTOUCH is not set
+# CONFIG_USB_EGALAX is not set
+# CONFIG_USB_YEALINK is not set
+# CONFIG_USB_XPAD is not set
+# CONFIG_USB_ATI_REMOTE is not set
+# CONFIG_USB_KEYSPAN_REMOTE is not set
+# CONFIG_USB_APPLETOUCH is not set
+
+#
+# USB Imaging devices
+#
+# CONFIG_USB_MDC800 is not set
+# CONFIG_USB_MICROTEK is not set
+
+#
+# USB Multimedia devices
+#
+# CONFIG_USB_DABUSB is not set
+# CONFIG_USB_VICAM is not set
+# CONFIG_USB_DSBR is not set
+# CONFIG_USB_IBMCAM is not set
+# CONFIG_USB_KONICAWC is not set
+# CONFIG_USB_OV511 is not set
+# CONFIG_USB_SE401 is not set
+# CONFIG_USB_SN9C102 is not set
+# CONFIG_USB_STV680 is not set
+# CONFIG_USB_PWC is not set
+
+#
+# USB Network Adapters
+#
+# CONFIG_USB_CATC is not set
+# CONFIG_USB_KAWETH is not set
+# CONFIG_USB_PEGASUS is not set
+# CONFIG_USB_RTL8150 is not set
+# CONFIG_USB_USBNET is not set
+# CONFIG_USB_ZD1201 is not set
+# CONFIG_USB_MON is not set
+
+#
+# USB port drivers
+#
+
+#
+# USB Serial Converter support
+#
+# CONFIG_USB_SERIAL is not set
+
+#
+# USB Miscellaneous drivers
+#
+# CONFIG_USB_EMI62 is not set
+# CONFIG_USB_EMI26 is not set
+# CONFIG_USB_AUERSWALD is not set
+# CONFIG_USB_RIO500 is not set
+# CONFIG_USB_LEGOTOWER is not set
+# CONFIG_USB_LCD is not set
+# CONFIG_USB_LED is not set
+# CONFIG_USB_CYTHERM is not set
+# CONFIG_USB_PHIDGETKIT is not set
+# CONFIG_USB_PHIDGETSERVO is not set
+# CONFIG_USB_IDMOUSE is not set
+# CONFIG_USB_LD is not set
+
+#
+# USB DSL modem support
+#
+
+#
+# USB Gadget Support
+#
+# CONFIG_USB_GADGET is not set
+
+#
+# MMC/SD Card support
+#
+CONFIG_MMC=y
+# CONFIG_MMC_DEBUG is not set
+CONFIG_MMC_BLOCK=y
+CONFIG_MMC_PXA=y
+# CONFIG_MMC_WBSD is not set
+
+#
+# File systems
+#
+CONFIG_EXT2_FS=y
+# CONFIG_EXT2_FS_XATTR is not set
+# CONFIG_EXT2_FS_XIP is not set
+# CONFIG_EXT3_FS is not set
+# CONFIG_JBD is not set
+# CONFIG_REISERFS_FS is not set
+# CONFIG_JFS_FS is not set
+# CONFIG_FS_POSIX_ACL is not set
+# CONFIG_XFS_FS is not set
+# CONFIG_MINIX_FS is not set
+# CONFIG_ROMFS_FS is not set
+CONFIG_INOTIFY=y
+# CONFIG_QUOTA is not set
+CONFIG_DNOTIFY=y
+# CONFIG_AUTOFS_FS is not set
+CONFIG_AUTOFS4_FS=y
+CONFIG_FUSE_FS=y
+
+#
+# CD-ROM/DVD Filesystems
+#
+# CONFIG_ISO9660_FS is not set
+# CONFIG_UDF_FS is not set
+
+#
+# DOS/FAT/NT Filesystems
+#
+CONFIG_FAT_FS=y
+CONFIG_MSDOS_FS=y
+CONFIG_VFAT_FS=y
+CONFIG_FAT_DEFAULT_CODEPAGE=850
+CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"
+# CONFIG_NTFS_FS is not set
+
+#
+# Pseudo filesystems
+#
+CONFIG_PROC_FS=y
+CONFIG_SYSFS=y
+CONFIG_TMPFS=y
+# CONFIG_HUGETLB_PAGE is not set
+CONFIG_RAMFS=y
+# CONFIG_RELAYFS_FS is not set
+
+#
+# Miscellaneous filesystems
+#
+# CONFIG_ADFS_FS is not set
+# CONFIG_AFFS_FS is not set
+# CONFIG_HFS_FS is not set
+# CONFIG_HFSPLUS_FS is not set
+# CONFIG_BEFS_FS is not set
+# CONFIG_BFS_FS is not set
+# CONFIG_EFS_FS is not set
+# CONFIG_JFFS_FS is not set
+CONFIG_JFFS2_FS=y
+CONFIG_JFFS2_FS_DEBUG=0
+CONFIG_JFFS2_FS_WRITEBUFFER=y
+# CONFIG_JFFS2_SUMMARY is not set
+# CONFIG_JFFS2_COMPRESSION_OPTIONS is not set
+CONFIG_JFFS2_ZLIB=y
+CONFIG_JFFS2_RTIME=y
+# CONFIG_JFFS2_RUBIN is not set
+# CONFIG_CRAMFS is not set
+# CONFIG_VXFS_FS is not set
+# CONFIG_HPFS_FS is not set
+# CONFIG_QNX4FS_FS is not set
+# CONFIG_SYSV_FS is not set
+# CONFIG_UFS_FS is not set
+
+#
+# Network File Systems
+#
+CONFIG_NFS_FS=y
+CONFIG_NFS_V3=y
+# CONFIG_NFS_V3_ACL is not set
+# CONFIG_NFS_V4 is not set
+# CONFIG_NFS_DIRECTIO is not set
+# CONFIG_NFSD is not set
+CONFIG_ROOT_NFS=y
+CONFIG_LOCKD=y
+CONFIG_LOCKD_V4=y
+CONFIG_NFS_COMMON=y
+CONFIG_SUNRPC=y
+CONFIG_SUNRPC_GSS=y
+CONFIG_RPCSEC_GSS_KRB5=y
+# CONFIG_RPCSEC_GSS_SPKM3 is not set
+# CONFIG_SMB_FS is not set
+CONFIG_CIFS=m
+# CONFIG_CIFS_STATS is not set
+# CONFIG_CIFS_XATTR is not set
+# CONFIG_CIFS_EXPERIMENTAL is not set
+# CONFIG_NCP_FS is not set
+# CONFIG_CODA_FS is not set
+# CONFIG_AFS_FS is not set
+# CONFIG_9P_FS is not set
+
+#
+# Partition Types
+#
+CONFIG_PARTITION_ADVANCED=y
+# CONFIG_ACORN_PARTITION is not set
+# CONFIG_OSF_PARTITION is not set
+# CONFIG_AMIGA_PARTITION is not set
+# CONFIG_ATARI_PARTITION is not set
+# CONFIG_MAC_PARTITION is not set
+CONFIG_MSDOS_PARTITION=y
+# CONFIG_BSD_DISKLABEL is not set
+# CONFIG_MINIX_SUBPARTITION is not set
+# CONFIG_SOLARIS_X86_PARTITION is not set
+# CONFIG_UNIXWARE_DISKLABEL is not set
+CONFIG_LDM_PARTITION=y
+# CONFIG_LDM_DEBUG is not set
+# CONFIG_SGI_PARTITION is not set
+# CONFIG_ULTRIX_PARTITION is not set
+# CONFIG_SUN_PARTITION is not set
+# CONFIG_EFI_PARTITION is not set
+
+#
+# Native Language Support
+#
+CONFIG_NLS=y
+CONFIG_NLS_DEFAULT="iso8859-15"
+# CONFIG_NLS_CODEPAGE_437 is not set
+# CONFIG_NLS_CODEPAGE_737 is not set
+# CONFIG_NLS_CODEPAGE_775 is not set
+CONFIG_NLS_CODEPAGE_850=m
+# CONFIG_NLS_CODEPAGE_852 is not set
+# CONFIG_NLS_CODEPAGE_855 is not set
+# CONFIG_NLS_CODEPAGE_857 is not set
+# CONFIG_NLS_CODEPAGE_860 is not set
+# CONFIG_NLS_CODEPAGE_861 is not set
+# CONFIG_NLS_CODEPAGE_862 is not set
+# CONFIG_NLS_CODEPAGE_863 is not set
+# CONFIG_NLS_CODEPAGE_864 is not set
+# CONFIG_NLS_CODEPAGE_865 is not set
+# CONFIG_NLS_CODEPAGE_866 is not set
+# CONFIG_NLS_CODEPAGE_869 is not set
+# CONFIG_NLS_CODEPAGE_936 is not set
+CONFIG_NLS_CODEPAGE_950=m
+# CONFIG_NLS_CODEPAGE_932 is not set
+# CONFIG_NLS_CODEPAGE_949 is not set
+# CONFIG_NLS_CODEPAGE_874 is not set
+# CONFIG_NLS_ISO8859_8 is not set
+# CONFIG_NLS_CODEPAGE_1250 is not set
+# CONFIG_NLS_CODEPAGE_1251 is not set
+CONFIG_NLS_ASCII=m
+CONFIG_NLS_ISO8859_1=m
+# CONFIG_NLS_ISO8859_2 is not set
+# CONFIG_NLS_ISO8859_3 is not set
+# CONFIG_NLS_ISO8859_4 is not set
+# CONFIG_NLS_ISO8859_5 is not set
+# CONFIG_NLS_ISO8859_6 is not set
+# CONFIG_NLS_ISO8859_7 is not set
+# CONFIG_NLS_ISO8859_9 is not set
+# CONFIG_NLS_ISO8859_13 is not set
+# CONFIG_NLS_ISO8859_14 is not set
+CONFIG_NLS_ISO8859_15=m
+# CONFIG_NLS_KOI8_R is not set
+# CONFIG_NLS_KOI8_U is not set
+CONFIG_NLS_UTF8=m
+
+#
+# Profiling support
+#
+# CONFIG_PROFILING is not set
+
+#
+# Kernel hacking
+#
+# CONFIG_PRINTK_TIME is not set
+CONFIG_DEBUG_KERNEL=y
+CONFIG_MAGIC_SYSRQ=y
+CONFIG_LOG_BUF_SHIFT=14
+CONFIG_DETECT_SOFTLOCKUP=y
+# CONFIG_SCHEDSTATS is not set
+# CONFIG_DEBUG_SLAB is not set
+CONFIG_DEBUG_PREEMPT=y
+# CONFIG_DEBUG_SPINLOCK is not set
+# CONFIG_DEBUG_SPINLOCK_SLEEP is not set
+CONFIG_DEBUG_KOBJECT=y
+CONFIG_DEBUG_BUGVERBOSE=y
+CONFIG_DEBUG_INFO=y
+# CONFIG_DEBUG_FS is not set
+# CONFIG_DEBUG_VM is not set
+CONFIG_FRAME_POINTER=y
+# CONFIG_RCU_TORTURE_TEST is not set
+CONFIG_DEBUG_USER=y
+# CONFIG_DEBUG_WAITQ is not set
+CONFIG_DEBUG_ERRORS=y
+CONFIG_DEBUG_LL=y
+# CONFIG_DEBUG_ICEDCC is not set
+
+#
+# Security options
+#
+# CONFIG_KEYS is not set
+# CONFIG_SECURITY is not set
+
+#
+# Cryptographic options
+#
+CONFIG_CRYPTO=y
+# CONFIG_CRYPTO_HMAC is not set
+# CONFIG_CRYPTO_NULL is not set
+# CONFIG_CRYPTO_MD4 is not set
+CONFIG_CRYPTO_MD5=y
+# CONFIG_CRYPTO_SHA1 is not set
+# CONFIG_CRYPTO_SHA256 is not set
+# CONFIG_CRYPTO_SHA512 is not set
+# CONFIG_CRYPTO_WP512 is not set
+# CONFIG_CRYPTO_TGR192 is not set
+CONFIG_CRYPTO_DES=y
+# CONFIG_CRYPTO_BLOWFISH is not set
+# CONFIG_CRYPTO_TWOFISH is not set
+# CONFIG_CRYPTO_SERPENT is not set
+CONFIG_CRYPTO_AES=y
+# CONFIG_CRYPTO_CAST5 is not set
+# CONFIG_CRYPTO_CAST6 is not set
+# CONFIG_CRYPTO_TEA is not set
+CONFIG_CRYPTO_ARC4=y
+# CONFIG_CRYPTO_KHAZAD is not set
+# CONFIG_CRYPTO_ANUBIS is not set
+# CONFIG_CRYPTO_DEFLATE is not set
+CONFIG_CRYPTO_MICHAEL_MIC=y
+# CONFIG_CRYPTO_CRC32C is not set
+# CONFIG_CRYPTO_TEST is not set
+
+#
+# Hardware crypto devices
+#
+
+#
+# Library routines
+#
+# CONFIG_CRC_CCITT is not set
+# CONFIG_CRC16 is not set
+CONFIG_CRC32=y
+# CONFIG_LIBCRC32C is not set
+CONFIG_ZLIB_INFLATE=y
+CONFIG_ZLIB_DEFLATE=y
Index: linux-2.6.15.3/arch/arm/mach-pxa/Kconfig
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/Kconfig	(revision 1)
+++ linux-2.6.15.3/arch/arm/mach-pxa/Kconfig	(revision 7613)
@@ -30,6 +30,13 @@
 	  SL-C3000 (Spitz), SL-C3100 (Borzoi) or SL-C6000x (Tosa)
 	  handheld computer.
 
+config MACH_CREATOR_PXA270
+	bool "Creator XScale PXA270 Module"
+	select PXA27x
+	select IWMMXT
+	select CREATOR_CORE	
+
+
 endchoice
 
 if PXA_SHARPSL
@@ -125,4 +132,16 @@
 	tristate
 	help
 	  Enable support for PXA2xx SSP ports
+	  
+config CREATOR_CORE
+	bool	  
+
+config PXA27x_VOLTAGE
+    tristate "Support PXA27x CPU Core Voltage Change Sequencer"
+    depends PXA27x && CPU_FREQ_PXA
+    
+config PXA27x_VOLTAGE_LP3971
+    tristate "LP3971 PMIC Module"
+    depends on PXA27x_VOLTAGE	
+    	  
 endif
Index: linux-2.6.15.3/arch/arm/mach-pxa/generic.c
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/generic.c	(revision 1)
+++ linux-2.6.15.3/arch/arm/mach-pxa/generic.c	(revision 7613)
@@ -36,8 +36,9 @@
 #include <asm/arch/pxafb.h>
 #include <asm/arch/mmc.h>
 #include <asm/arch/irda.h>
+#if 0 
 #include <asm/arch/i2c.h>
-
+#endif
 #include "generic.h"
 
 /*
@@ -259,7 +260,7 @@
 	.name		= "pxa2xx-uart",
 	.id		= 3,
 };
-
+#if 1
 static struct resource i2c_resources[] = {
 	{
 		.start	= 0x40301680,
@@ -279,11 +280,11 @@
 	.num_resources	= ARRAY_SIZE(i2c_resources),
 };
 
-void __init pxa_set_i2c_info(struct i2c_pxa_platform_data *info)
+void __init pxa_set_i2c_info(/* struct i2c_pxa_platform_data */ void *info)
 {
 	i2c_device.dev.platform_data = info;
 }
-
+#endif
 static struct resource i2s_resources[] = {
 	{
 		.start	= 0x40400000,
Index: linux-2.6.15.3/arch/arm/mach-pxa/irq.c
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/irq.c	(revision 1)
+++ linux-2.6.15.3/arch/arm/mach-pxa/irq.c	(revision 7613)
@@ -86,7 +86,7 @@
 	gpio = IRQ_TO_GPIO(irq);
 	idx = gpio >> 5;
 
-	if (type == IRQT_PROBE) {
+	if (type == IRQT_PROBE) {    
 	    /* Don't mess with enabled GPIOs using preconfigured edges or
 	       GPIOs set to alternate function during probe */
 		if ((GPIO_IRQ_rising_edge[idx] | GPIO_IRQ_falling_edge[idx]) &
Index: linux-2.6.15.3/arch/arm/mach-pxa/Makefile
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/Makefile	(revision 1)
+++ linux-2.6.15.3/arch/arm/mach-pxa/Makefile	(revision 7613)
@@ -16,6 +16,9 @@
 obj-$(CONFIG_MACH_AKITA)	+= akita-ioexp.o
 obj-$(CONFIG_MACH_POODLE)	+= poodle.o
 obj-$(CONFIG_MACH_TOSA)         += tosa.o
+obj-$(CONFIG_MACH_CREATOR_PXA270)	+= mach-creator-pxa270.o
+obj-$(CONFIG_MACH_CREATOR_PXA270)	+= creator-pxa270-irq.o
+obj-$(CONFIG_CREATOR_CORE)	+= creator-pxa270-core.o
 
 # Support for blinky lights
 led-y := leds.o
@@ -25,6 +28,7 @@
 
 obj-$(CONFIG_LEDS) += $(led-y)
 
+
 # Misc features
 obj-$(CONFIG_PM) += pm.o sleep.o
 obj-$(CONFIG_PXA_SSP) += ssp.o
@@ -32,3 +36,9 @@
 ifeq ($(CONFIG_PXA27x),y)
 obj-$(CONFIG_PM) += standby.o
 endif
+
+# CPU Frequency scaling
+obj-$(CONFIG_CPU_FREQ_PXA)              += cpu-pxa.o
+
+obj-$(CONFIG_PXA27x_VOLTAGE)            += pxa27x_voltage.o
+obj-$(CONFIG_PXA27x_VOLTAGE_LP3971)     += pxa27x_voltage_lp3971.o
\ No newline at end of file
Index: linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-core.c
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-core.c	(revision 0)
+++ linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-core.c	(revision 7613)
@@ -0,0 +1,385 @@
+// --------------------------------------------------------------------
+//	Directory  : linux/arch/arm/mach-creator-s3c2410/
+//
+//   Title     :  creator-s3c2410-core.c
+//             :
+//   Library   :
+//             :
+//   Developers:  MICROTIME MDS group
+//             :
+//   Purpose   :  Global variables
+//             :
+//   Limitation:
+//             :
+//   Note      :
+//             :
+// --------------------------------------------------------------------
+//   modification history :
+// --------------------------------------------------------------------
+//   Version | mod. date: |
+//   Vx.xx   | mm/dd/yyyy | 
+//   V1.00   | 05/22/2006 | First release
+//   V1.01   | 05/08/2009 | support linux 2.6.27
+//   V1.02   | 12/16/2009 | fixed: check Creator Board exist
+//   V1.03   | 12/28/2009 | fixed: check Creator Board version <= 0x11
+// --------------------------------------------------------------------
+//
+// Note:
+//
+//       MICROTIME COMPUTER INC.
+//
+//
+/*************************************************************************
+Include files
+*************************************************************************/
+#include <linux/config.h>
+#include <linux/kernel.h>
+#include <linux/module.h>
+#include <linux/init.h>
+#include <linux/delay.h>
+
+#include <asm/hardware.h>
+#include <asm/io.h>
+#include <asm/system.h>
+#include <asm/mach-types.h>
+#include "asm/arch/lib/creator_pxa270_core.h"
+
+
+/*************************************************************************
+Constant define
+*************************************************************************/
+
+/* ****** Debug Information ******************************************** */
+//#define DEBUG
+#ifdef DEBUG 
+#define MSG(string, args...) printk("<1>" string, ##args)
+#else   
+#define MSG(string, args...)
+#endif
+
+
+
+/*************************************************************************
+Function prototypes
+*************************************************************************/
+
+
+/*************************************************************************
+Variable define
+*************************************************************************/
+creator_io_t creator_io ;
+/* ************************************************************************** */
+
+
+void 
+creator_cf_reset (void)
+{ 
+        unsigned long flags;
+            
+        spin_lock_irqsave(&creator_io.creator_lock, flags);            
+        creator_io.io_reg0 &= 0x7FFFF;		// Bit 15 : CF_nRST = 0
+        IO_REG0 = creator_io.io_reg0;
+        spin_unlock_irqrestore(&creator_io.creator_lock, flags);        
+        
+        
+        mdelay(10);
+        
+        spin_lock_irqsave(&creator_io.creator_lock, flags);                 
+        creator_io.io_reg0 |= 0x8000;		// Bit 15 : CF_nRST = 1
+        IO_REG0 = creator_io.io_reg0;        
+        spin_unlock_irqrestore(&creator_io.creator_lock, flags);        
+        
+        mdelay(500);       
+}
+/* ************************************************************************** */
+
+
+
+int 
+creator_pxa270_core_init (void)
+{  
+        unsigned long flags;
+            
+        spin_lock_init(&creator_io.creator_lock);    
+        
+        spin_lock_irqsave(&creator_io.creator_lock, flags);        
+        creator_io.io_reg0 = 0xc000;
+        IO_REG0 = creator_io.io_reg0;
+        spin_unlock_irqrestore(&creator_io.creator_lock, flags);
+        
+        mdelay(1);
+
+        spin_lock_irqsave(&creator_io.creator_lock, flags);  
+        creator_io.cpld_ctrl = 0x3D;
+        CPLD_CTRL = creator_io.cpld_ctrl;
+        spin_unlock_irqrestore(&creator_io.creator_lock, flags);       
+
+        creator_io.cf_reset = creator_cf_reset;
+        creator_io.cf_reset();     
+        return 0;
+
+}
+/* ************************************************************************** */
+enum LCDCommand{
+	LCD_START_OSC=0,		// Start oscillation	
+	LCD_DEVICE_CODE=0,		// Device code read	
+	LCD_DRV_OUT=1,			// Driver output control
+	LCD_WAVEFORM=2,			// LCD-driving-waveform control
+	LCD_PWR_CONTROL=3,		// Power control
+	LCD_CONTRAST=4,			// Contrast control
+	LCD_ENTRY_MODE=5,		// Entry mode
+	LCD_ROTATION=6,			// Rotation
+	LCD_DISPLAY=7,			// Display control		
+	LCD_CURSOR=8,			// Cursor control
+	LCD_DB_HEIGHT=9,		// Double-height display position
+	LCD_VET_SCROLL=0xa,		// Vertical scroll
+	LCD_HOR_CURSOR_POS=0xb,		// Horizontal cursor position
+	LCD_VER_CURSOR_POS=0xc,		// Vertical cursor position
+	LCD_RAM_MASK=0x10,		// RAM write data mask
+	LCD_RAM_ADDR=0x11,		// RAM address set
+	LCD_RAM_DATA=0x12,		// RAM Data
+	LCD_RAM_WR=0x12,		// RAM data write
+	LCD_RAM_RD=0x12			// RAM data read
+};
+
+
+
+#define SET_ADDRESS_LCD(x)		WriteLCD(LCD_RAM_ADDR, x);
+#define SET_RAM_DATA_LCD(x)		WriteLCD(LCD_RAM_DATA, x);
+#define LCD_COMMAND(command)	{LCD_CMD=0xff; LCD_CMD=(UI)command;}
+
+static void
+OptimizationDelay (void)
+{
+}	
+
+
+
+
+
+/*Procedure*******************************
+*          Create date : 03/04/2003       *
+*          Modify date :                  *
+*                                         *
+******************************************/
+unsigned short 
+ReadLCD (unsigned short addr)
+{
+	unsigned short data;
+
+	LCD_CMD = 0xff;	//MSB
+	OptimizationDelay();	// for Optimization	
+	LCD_CMD = addr;	//LSB
+	data = LCD_DATA << 8;
+	data |= LCD_DATA;
+
+	if (addr == LCD_RAM_DATA) {
+	    LCD_CMD = 0xff;	//MSB
+    	OptimizationDelay();	// for Optimization	    
+	    LCD_CMD = addr;	//LSB
+	    data = LCD_DATA << 8;
+	    data |= LCD_DATA;
+	}
+	return (data);
+}
+
+
+
+/*Procedure*******************************
+*          Create date : 03/04/2003       *
+*          Modify date :                  *
+*                                         *
+******************************************/
+void 
+WriteLCD (UI addr, UI data)
+{
+	LCD_CMD = 0xff;	//MSB
+	OptimizationDelay();	// for Optimization	
+	LCD_CMD = addr;	//LSB
+		
+	LCD_DATA = (data >> 8) ;
+	OptimizationDelay();	// for Optimization	
+	LCD_DATA = data;
+}
+
+
+
+static void 
+InitialLCD (void)
+{
+	int 	i;
+	
+	// The eight upper and lower bits can be corrected by a reset triggered by
+	// consecutively writing a 00H instruction four times.
+	//		
+	for (i=0; i < 4; i++){
+            LCD_CMD = 0;
+            OptimizationDelay();
+        }
+		
+	//The start oscillation instruction restarts the oscillator from the halt state in the standby mode. After issuing
+	//this instruction, wait at least 10 ms for oscillation to stabilize before issuing the next instruction	
+	//
+	WriteLCD(LCD_START_OSC, 1);
+	mdelay(15);
+	
+	WriteLCD(LCD_DRV_OUT, 0x030f);		// 128 * 128 ; Inervt Comm&Segment
+	WriteLCD(LCD_WAVEFORM, 0);
+	WriteLCD(LCD_PWR_CONTROL, 0x23c);	// 0x033c
+	WriteLCD(LCD_CONTRAST, 0x18);
+	WriteLCD(LCD_ENTRY_MODE, 0x10);
+	WriteLCD(LCD_ROTATION, 0);
+	
+	WriteLCD(LCD_CURSOR, 4);
+	WriteLCD(LCD_DB_HEIGHT, 0);
+	WriteLCD(LCD_VET_SCROLL, 0);
+	WriteLCD(LCD_HOR_CURSOR_POS, 0);
+	WriteLCD(LCD_RAM_MASK, 0);
+	WriteLCD(LCD_RAM_ADDR, 0);	
+	//WriteLCD(LCD_DISPLAY, 1); 
+	//LCD_ClearScreen();	
+}
+
+
+
+/*Procedure*******************************
+*          Create date : 03/17/2003       *
+*          Modify date :                  *
+*                                         *
+******************************************/
+void LCD_PutRAMData (UI address, UI data)
+{
+	    SET_ADDRESS_LCD(address);
+	    SET_RAM_DATA_LCD(data);
+}
+
+
+
+/*Procedure*******************************
+*          Create date : 03/17/2003       *
+*          Modify date :                  *
+*                                         *
+******************************************/
+UI LCD_GetRAMData (UI address)
+{
+	    SET_ADDRESS_LCD(address);
+	    return(ReadLCD(LCD_RAM_DATA));
+}
+
+
+
+/**
+ * Purpose ............: check Creator Board present ?
+ * @param  None  ......: 
+ * @return     ........: return >=0 when Creator Board present, otherwise return -1;
+ */ 
+static int
+check_creator_board_exist (void)
+{
+	    int i;
+	    unsigned short addr, lcd_data ;
+	    unsigned char  CreatorBoardVersion ;       	
+	    
+	    /*
+	     *  Set main board CPLD : mask creator board IRQ
+	     *  CPLD Version must above 1.2(include)
+	     */
+        MASTER_INTMASK1 |= (0xF0);        
+        
+        /*
+         * check creator board present.
+         */         
+        IRQ3_MASK = 0;
+        IRQ3_PEND = 3 ;
+        if ((IRQ3_MASK & 3) != 0){
+        	goto err;
+        }    
+
+        IRQ3_MASK = 1;
+        IRQ3_PEND = 2 ;
+        if ((IRQ3_MASK & 3) != 1){        	
+        	goto err;   
+        }      
+
+        IRQ3_MASK = 2;
+        IRQ3_PEND = 1 ;
+        if ((IRQ3_MASK & 3) != 2){  
+        	goto err;       
+        }    
+            
+        IRQ3_MASK = 3;
+        IRQ3_PEND = 0 ;
+        if ((IRQ3_MASK & 3) != 3){
+        	goto err;       
+        }      
+	    /*
+	     *  Set main board CPLD : mask creator board IRQ
+	     */
+        MASTER_INTMASK1 &= (~0xF0);
+            
+        return (0);
+        
+err:
+        /*
+         * maybe CPLD version <= 0x11
+         */
+      	printk("Check LCD RAM when Creator board version <= 0x11\n");          
+        for (i=0; i < 3; i++){
+            IRQ3_PEND = 3 ;
+	        CreatorBoardVersion = (unsigned char)(CPLD_STATUS >> 8); 	        
+	        if (CreatorBoardVersion != 0x10 && CreatorBoardVersion != 0x11){
+      	        printk("Warning: Not support Creator board version=%x.\n", CreatorBoardVersion);  	        	
+	            return (-1);
+	       	}
+	    }
+	    
+	    /* 
+	     * double check LCD RAM.
+	     */
+	    InitialLCD();
+        addr = 0x800;
+        LCD_PutRAMData(addr, ~addr);        
+
+        mdelay(1);
+        lcd_data = LCD_GetRAMData(addr);	    
+        if (lcd_data != (unsigned short)(~addr)) {
+      	    printk("Warning(%s) : Creator board not exist.\n", __FUNCTION__);          	
+        	return (-1);
+        }    
+	    
+        return (0);
+}	
+
+
+
+/**
+ * Purpose ............: Get Creator Board Version.
+ * @param  None  ......: 
+ * @return     ........: return CPLD Version when Creator Board present, otherwise return 0xFF;
+ */ 
+unsigned char
+creator_GetCreatorCPLDVersion (void)
+{      
+	    static int first = 1;
+	    static unsigned char CreatorBoardVersion ;
+	   
+	    if (first){
+	        if (check_creator_board_exist() >= 0){
+	       	    CreatorBoardVersion = (unsigned char)(CPLD_STATUS >> 8);
+	        }
+	        else{
+	            CreatorBoardVersion = CREATOR_BOARD_NOT_EXIST;
+	        }
+	        first = 0;
+	    }	
+        return (CreatorBoardVersion);                                 
+}    
+/* ************************************************************************** */
+
+
+EXPORT_SYMBOL(creator_io);
+EXPORT_SYMBOL(creator_pxa270_core_init);
+EXPORT_SYMBOL(creator_cf_reset);
+EXPORT_SYMBOL(creator_GetCreatorCPLDVersion);
+
+__initcall(creator_pxa270_core_init);

Property changes on: linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-core.c
___________________________________________________________________
Name: svn:executable
   + *

Index: linux-2.6.15.3/arch/arm/mach-pxa/pxa27x_voltage_max1586b.c
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/pxa27x_voltage_max1586b.c	(revision 0)
+++ linux-2.6.15.3/arch/arm/mach-pxa/pxa27x_voltage_max1586b.c	(revision 7613)
@@ -0,0 +1,72 @@
+/* Driver for the Maxim 1586B PMIC, connected to PXA27x PWR_I2C.
+ *
+ * Copyright (c) 2006  Michal Sroczynski 
+ * <msroczyn-ZGDBLhmm9VR4rM3dGMyr8Q@public.gmane.org> 
+ * Copyright (c) 2006  Anton Vorontsov <cbou-JGs/UdohzUI@public.gmane.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ * 
+ * History:
+ * 2006-02-04 : Michal Sroczynski 
+ * <msroczyn-ZGDBLhmm9VR4rM3dGMyr8Q@public.gmane.org> 
+ *   initial driver for Asus730
+ * 2006-06-05 : Anton Vorontsov <cbou-JGs/UdohzUI@public.gmane.org>
+ *      hx4700 port, various changes
+ * 2006-12-06 : Anton Vorontsov <cbou-JGs/UdohzUI@public.gmane.org>
+ *      Convert to the generic PXA driver.
+ */
+
+#include <linux/module.h>
+#include <linux/platform_device.h>
+#include <asm/arch/pxa27x_voltage.h>
+
+static inline u_int8_t mv2cmd (int mv)
+{
+     u_int8_t val = (mv - 700) / 25;
+     if (val > 31) val = 31;
+     return val;
+}
+
+
+static struct platform_device *pdev;
+
+static int __init max1586b_init(void)
+{
+     int ret;
+     struct pxa27x_voltage_chip chip;
+     
+     memset(&chip, 0, sizeof(chip));
+     chip.address = 0x14;
+     chip.mv2cmd  = mv2cmd;
+
+     pdev = platform_device_alloc("pxa27x-voltage", -1);
+     if (!pdev) return -ENOMEM;
+     
+     ret = platform_device_add_data(pdev, &chip, sizeof(chip));
+     if (ret) goto failed;
+     
+     ret = platform_device_register(pdev);
+     if (ret) goto failed;
+
+     return 0;
+failed:
+     platform_device_put(pdev);
+     return ret;
+}
+
+static void __exit max1586b_exit(void)
+{
+     platform_device_unregister(pdev);
+     return;
+}
+
+module_init(max1586b_init);
+module_exit(max1586b_exit);
+
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("Michal Sroczynski <msroczyn-ZGDBLhmm9VR4rM3dGMyr8Q@public.gmane.org>, " \
+              "Anton Vorontsov <cbou-JGs/UdohzUI@public.gmane.org>");
+MODULE_DESCRIPTION("Driver for the Maxim 1586B PMIC");
Index: linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-irq.c
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-irq.c	(revision 0)
+++ linux-2.6.15.3/arch/arm/mach-pxa/creator-pxa270-irq.c	(revision 7613)
@@ -0,0 +1,524 @@
+// --------------------------------------------------------------------
+//
+//   Title     :  creator-pxa270-irq.c
+//             :
+//   Library   :
+//             :
+//   Developers:  MICROTIME MDS group
+//             :
+//   Purpose   :  
+//             :
+//   Limitation:
+//             :
+//   Note      :
+//             :
+// --------------------------------------------------------------------
+//   modification history :
+// --------------------------------------------------------------------
+//   Version| mod. date: |
+//   Vx.xx  | mm/dd/yyyy |
+//   V1.00  | 04/02/2006 | First release
+//   V1.01  | 06/06/2006 | fixed bug that pending process.
+//   V1.02  | 11/13/2009 | fixed: check Creator Board exist
+// --------------------------------------------------------------------
+// --------------------------------------------------------------------
+//
+// Note:
+//
+//       MICROTIME COMPUTER INC.
+//
+//
+/*************************************************************************
+Include files
+*************************************************************************/
+#include <linux/init.h>
+#include <linux/platform_device.h>
+#include <linux/initrd.h>
+#include <linux/device.h>
+#include <linux/delay.h>
+#include <linux/fb.h>
+#include <linux/kdev_t.h>
+#include <linux/root_dev.h>
+
+#include <asm/setup.h>
+#include <asm/memory.h>
+#include <asm/mach-types.h>
+#include <asm/hardware.h>
+#include <asm/irq.h>
+
+#include <asm/mach/arch.h>
+#include <asm/mach/map.h>
+
+#include <asm/arch/audio.h>
+#include <asm/mach/irq.h>
+#include <asm/arch/pxafb.h>
+#include <asm/arch/mmc.h>
+#include <asm/arch/creator-regs.h>
+#include <asm/arch/lib/creator_pxa270_core.h>
+
+#include "generic.h"
+
+/*************************************************************************
+Constant define
+*************************************************************************/
+//#define DEBUG
+#ifdef DEBUG
+#define MSG(string, args...) printk("<1>%s(), line=%d, " string, __FUNCTION__, __LINE__, ##args)
+#else   
+#define MSG(string, args...)
+#endif
+
+
+
+/*************************************************************************
+Function prototypes
+*************************************************************************/
+unsigned char creator_GetCreatorCPLDVersion (void);
+
+static void creator_ack_extirq3 (unsigned int irqno);
+static void creator_mask_extirq3 (unsigned int irqno);
+static void creator_unmask_extirq3 (unsigned int irqno);
+static void creator_ExtIRQ3_demux (unsigned int irqno, struct irqdesc *desc, struct pt_regs *regs);
+
+static void creator_ack_irq_gpio1 (unsigned int irqno);
+static void creator_mask_irq_gpio1 (unsigned int irqno);
+static void creator_unmask_irq_gpio1 (unsigned int irqno);
+static void creator_gpio1_demux (unsigned int irqno, struct irqdesc *desc, struct pt_regs *regs);
+
+static void creator_mask_OST_4_11_irq (unsigned int irqno);
+static void creator_unmask_OST_4_11_irq (unsigned int irqno);
+static void creator_OST_4_11_irq_handler (unsigned int irqno, struct irqdesc *desc, struct pt_regs *regs);
+
+
+/*************************************************************************
+Variable define
+*************************************************************************/
+static DEFINE_SPINLOCK(irq_controller_lock);
+
+
+int 
+creator_get_irq_extirq3 (unsigned int extirq3_subid)
+{
+        int     irqno ;
+            
+        if (creator_GetCreatorCPLDVersion() >= 0x14){
+            // Creator Mather board VB.
+            irqno = extirq3_subid;              
+        }        
+        else {
+            unsigned long flags;                
+            
+            spin_lock_irqsave(&creator_io.creator_lock, flags);             
+		    creator_io.cpld_ctrl |= 0x40;		//int3 = X_nINT
+            CPLD_CTRL = creator_io.cpld_ctrl;  
+            spin_unlock_irqrestore(&creator_io.creator_lock, flags);              
+            
+            irqno = CREATOR_IO_XIRQ3_IRQ;                            
+        }    
+        
+        return (irqno);
+}    
+EXPORT_SYMBOL(creator_get_irq_extirq3);
+
+
+
+static void 
+creator_ack_extirq3 (unsigned int irqno)
+{
+/*
+clear pending & unmask ExtIRQ3 :
+mask : 1 : disable, 
+       0 : Enable.
+       
+pend : 1 : has IRQ : 
+           Once a PENDING bit is set by an edge event, the bit remains set until it is cleared by writing a
+           one to the status bit. Writing a zero to a GEDR status bit has no effect.
+       0 : no IRQ        
+*/    
+        unsigned short bitval   ;      
+       
+        MSG("EXT3IRQ Ack irqno=%d\n", irqno) ;         
+        bitval = 1 << (irqno - CREATOR_IO_XIRQ3_EXT_CF_IRQ);
+        /* the irq can be acknowledged only if deasserted, so it's done here */                 
+        MASTER_IRQ3_PEND = (bitval);                                 
+}
+
+
+
+static void 
+creator_mask_extirq3 (unsigned int irqno)
+{
+/*
+mask ExtIRQ3 :
+mask : 1 : disable, 
+       0 : Enable.
+       
+pend : 1 : has IRQ : 
+           Once a PENDING bit is set by an edge event, the bit remains set until it is cleared by writing a
+           one to the status bit. Writing a zero to a GEDR status bit has no effect.
+       0 : no IRQ        
+*/    
+        unsigned short  bitval, mask ;
+       
+        MSG("EXT3IRQ Mask irq=%d\n", irqno) ;          
+        bitval = (1 <<(irqno - CREATOR_IO_XIRQ3_EXT_CF_IRQ));        
+
+        mask = MASTER_IRQ3_MASK;
+        mask |= bitval;
+        MASTER_IRQ3_MASK = mask;                                
+}
+
+
+
+static void 
+creator_unmask_extirq3 (unsigned int irqno)
+{
+/*
+unmask ExtIRQ3 :
+mask : 1 : disable, 
+       0 : Enable.
+       
+pend : 1 : has IRQ : 
+           Once a PENDING bit is set by an edge event, the bit remains set until it is cleared by writing a
+           one to the status bit. Writing a zero to a GEDR status bit has no effect.
+       0 : no IRQ        
+*/    
+        unsigned short bitval, mask;
+        MSG("EXT3IRQ unmask  irq=%d\n", irqno) ;     
+             
+        /* the irq can be acknowledged only if deasserted, so it's done here */
+        bitval = (1 << (irqno - CREATOR_IO_XIRQ3_EXT_CF_IRQ));  
+                                     
+        mask = MASTER_IRQ3_MASK;           
+        mask &= (~bitval);
+        MASTER_IRQ3_MASK = mask;                                  
+        creator_unmask_irq_gpio1(CREATOR_IO_XIRQ3_IRQ);  
+}
+
+
+
+static struct irqchip creator_ExtIRQ3_edge_chip = {
+	.ack		= creator_ack_extirq3,
+	.mask		= creator_mask_extirq3,
+	.unmask		= creator_unmask_extirq3,
+};
+
+
+
+static void 
+creator_ExtIRQ3_demux (unsigned int irqno, struct irqdesc *desc, struct pt_regs *regs)
+{
+        unsigned long   pending;      
+        
+        MSG("ExtIRQ3, irq=%d, MASTER_IRQ3_MASK=%x, MASTER_IRQ3_PEND=%x\n", irqno, MASTER_IRQ3_MASK, MASTER_IRQ3_PEND);                   
+        pending = (unsigned char)(MASTER_IRQ3_PEND & (~MASTER_IRQ3_MASK)) ;          
+        do {
+            MASTER_INTPEND1 = (1<<(CREATOR_IO_XIRQ3_IRQ - CREATOR_IRQ(0)));            
+            if (pending){                                
+                irqno = CREATOR_IO_XIRQ3_EXT_CF_IRQ;
+                desc = irq_desc + irqno;        
+                do {
+                    if (pending & 1){
+                        MSG("irq=%d\n", irqno);
+                        desc_handle_irq(irqno, desc, regs);                                  
+                    }    
+                    irqno++;
+                    desc++;
+                    pending >>= 1;
+                } while (pending);  
+                pending = (unsigned char)(MASTER_IRQ3_PEND & (~MASTER_IRQ3_MASK)) ;                    
+            }   
+        }while (pending) ;  
+}
+
+
+
+static void 
+creator_ack_irq_gpio1 (unsigned int irqno)
+{
+/*
+Enable IRQ
+mask : 1 : disable, 
+       0 : Enable.
+       
+pend : 1 : has IRQ : 
+           Once a PENDING bit is set by an edge event, the bit remains set until it is cleared by writing a
+           one to the status bit. Writing a zero to a GEDR status bit has no effect.
+       0 : no IRQ           
+*/    
+        unsigned short   bitval ;  
+       
+        if (irqno < CREATOR_CFI_IRQ){
+            /* the irq can be acknowledged only if deasserted, so it's done here */
+            bitval = (1 <<(irqno - CREATOR_IRQ(0)));                                 
+            MASTER_INTPEND1 = (bitval);            
+        }
+        else{
+            bitval = (1 <<(irqno - CREATOR_IRQ(8)));                                 
+            MASTER_INTPEND2 = (bitval);                                   
+        }                 
+}
+
+
+
+static void 
+creator_mask_irq_gpio1 (unsigned int irqno)
+{
+/*
+mask : 1 : disable, 
+       0 : Enable.
+       
+pend : 1 : has IRQ : 
+           Once a PENDING bit is set by an edge event, the bit remains set until it is cleared by writing a
+           one to the status bit. Writing a zero to a GEDR status bit has no effect.
+       0 : no IRQ           
+*/    
+        unsigned short bitval, mask ;
+ 
+        MSG("Mask irq=%d\n", irqno) ;         
+
+        if (irqno < CREATOR_CFI_IRQ){
+            bitval = 1 << (irqno - CREATOR_IRQ(0)); 
+            mask = MASTER_INTMASK1;
+            mask |= bitval;
+            MASTER_INTMASK1 = mask;            
+        } 
+        else{
+            bitval = 1 << (irqno - CREATOR_IRQ(8)); 
+            mask = MASTER_INTMASK2;
+            mask |= bitval;
+            MASTER_INTMASK2 = mask;                           
+        }                  
+}
+
+
+
+static void 
+creator_unmask_irq_gpio1 (unsigned int irqno)
+{
+/*
+unmask IRQ :
+mask : 1 : disable, 
+       0 : Enable.
+       
+pend : 1 : has IRQ : 
+           Once a PENDING bit is set by an edge event, the bit remains set until it is cleared by writing a
+           one to the status bit. Writing a zero to a GEDR status bit has no effect.
+       0 : no IRQ     
+*/    
+        unsigned short bitval, mask;
+   
+        MSG("unMask irq=%d\n", irqno) ;         
+        if (irqno < CREATOR_CFI_IRQ){
+            /* the irq can be acknowledged only if deasserted, so it's done here */
+            bitval = (1 <<(irqno - CREATOR_IRQ(0)));                                           
+            mask = MASTER_INTMASK1;           
+            mask &= (~bitval);
+            MASTER_INTMASK1 = mask;
+        }
+        else{
+            bitval = (1 <<(irqno - CREATOR_IRQ(8)));                                            
+            mask = MASTER_INTMASK2;           
+            mask &= (~bitval);
+            MASTER_INTMASK2 = mask;                          
+        }                                                 
+}
+
+
+
+static struct irqchip creator_irq_edge_chip = {
+	.ack		= creator_ack_irq_gpio1,	
+	.mask		= creator_mask_irq_gpio1,
+	.unmask		= creator_unmask_irq_gpio1,
+};
+
+
+
+static void 
+creator_gpio1_demux (unsigned int irqno, struct irqdesc *desc, struct pt_regs *regs)
+{        
+        unsigned long  pending;         
+                 
+        MSG("Entry GPIO1 irqno=%d\n", irqno);                      
+        pending =  (((MASTER_INTPEND2 & (~MASTER_INTMASK2)) & 0xff)<<8)+ ((MASTER_INTPEND1 & (~MASTER_INTMASK1)) & 0xff);                        
+        do {       ;       
+            GEDR0 = GPIO_bit(1);  /* clear useless edge notification */           
+            if (pending){                 
+                irqno = CREATOR_IRQ(0);
+                desc = irq_desc + irqno;                              
+                do {
+                    if (pending & 1){
+                        MSG("irqno=%d\n", irqno);
+                        desc_handle_irq(irqno, desc, regs);                                         
+                    }    
+                    irqno++;
+                    desc++;
+                    pending >>= 1;
+                } while (pending);                    
+                pending =  (((MASTER_INTPEND2 & (~MASTER_INTMASK2)) & 0xff)<<8)+ ((MASTER_INTPEND1 & (~MASTER_INTMASK1)) & 0xff);               
+            }         
+        }while (pending) ;                        
+}             
+
+
+
+static void 
+creator_mask_OST_4_11_irq (unsigned int irqno)
+{
+        int ost_irq = (irqno - CREATOR_OST_4_IRQ) + 4;
+	    unsigned long flags;    
+      
+        spin_lock_irqsave(&irq_controller_lock, flags);                
+        OIER &= ~(1 << ost_irq);               
+	    spin_unlock_irqrestore(&irq_controller_lock, flags);       
+}
+
+
+
+static void 
+creator_unmask_OST_4_11_irq (unsigned int irqno)
+{      
+        int ost_irq = (irqno - CREATOR_OST_4_IRQ) + 4;
+	    unsigned long flags;       
+
+        /* the irq can be acknowledged only if deasserted, so it's done here */
+        spin_lock_irqsave(&irq_controller_lock, flags);     
+       
+        OSSR = (1 << ost_irq);              
+        OIER |= (1 << ost_irq);            
+
+	    spin_unlock_irqrestore(&irq_controller_lock, flags);           
+}
+
+
+
+static struct irqchip creator_OST_4_11_irq = {
+	.ack		= creator_mask_OST_4_11_irq,
+	.mask		= creator_mask_OST_4_11_irq,
+	.unmask		= creator_unmask_OST_4_11_irq,
+};
+
+
+
+static void 
+creator_OST_4_11_irq_handler (unsigned int irqno, struct irqdesc *desc, struct pt_regs *regs)
+
+{       
+        unsigned long  pending;         
+
+        pending =  ((OSSR & 0xFFF)>> 4);                 
+        do {           
+		    if (likely(pending)) { 
+		        irqno = CREATOR_OST_4_IRQ + __ffs(pending);
+                desc = irq_desc + irqno;
+                desc_handle_irq(irqno, desc, regs);	
+                return ;	                           
+            }    
+            pending =  ((OSSR & 0xFFF)>> 4);
+        } while (pending);                         
+}
+       
+
+
+void  
+creator_pxa270_init_irq (void)
+{        
+        int irqno;	              
+        unsigned char CreatorBoardVersion;
+        
+        /* setup extra creat_pxa270 irqs */
+        /* set_irq_type has to be called before an irq can be requested */
+        pxa_init_irq();
+
+        set_irq_type(CREATOR_ETH_IRQ, IRQT_RISING);       
+        
+        // Extend XINT3
+        CreatorBoardVersion = creator_GetCreatorCPLDVersion();
+        if (CreatorBoardVersion == CREATOR_BOARD_NOT_EXIST){
+            printk("Warning %s(): Creator board not present.\n", __FUNCTION__);          	
+        }	
+        else if (CreatorBoardVersion >= 0x14){        	
+            printk("Creator Board CPLD Version=%x\n", CreatorBoardVersion);
+            // Creator Board XINTREQ map.
+            // IRQ SELECT :
+            //  bit  2-0  : IRQ0_MUX : PHY_nINT(U19)
+            //  bit  5-3  : IRQ1_MUX : USB_nINT(U25)
+            //  bit  8-6  : IRQ2_MUX : CODEC_INT(U21)
+            //  bit 11-9  : IRQ3_MUX : SubXINT3
+            //  bit 12    : INKCF_1  : 0 : Normal Mode, 1 : invert CF_IRQ signal
+            //  bit 13    : IRQ3_MODE: 0 : Old Mode. 1 : User 1.2 Mode.
+            //  bit 14    : IRQ0_MODE: 0 : XINTREQ(0) map to ethernet of creator board.
+            //                         1 : XINTREQ(0) map to CF of creator board.
+            //  bit 15    : IRQ_DEFAULT : 0 : Use V1.0 INT 
+            //                            1 : Use V1.2 INT       
+            IRQ_SELECT = (1<<15) + (1<<13) + (0<<12) + (2 << 6) + (1<<3) + (0) ;                 
+
+            for(irqno = CREATOR_IO_XIRQ3_EXT_CF_IRQ; irqno <= CREATOR_IO_XIRQ3_EXT_CCD_IRQ; irqno++) {            
+                set_irq_chip(irqno, &creator_ExtIRQ3_edge_chip);
+                set_irq_handler(irqno, do_edge_IRQ);
+                set_irq_flags(irqno, 0);       // disable               
+            }                                                   
+            set_irq_flags(CREATOR_IO_XIRQ3_EXT_CF_IRQ, IRQF_VALID);       // enable ExtIRQ3_CF 
+            set_irq_flags(CREATOR_IO_XIRQ3_EXT_SLAVE_IRQ, IRQF_VALID);    // enable ExtIRQ3_Slave IRQ                           
+             
+        } 
+        else{
+            printk("Creator Board CPLD Version=%x\n", CreatorBoardVersion);            
+        }           
+        
+
+        // GPIO1 : 16 Interrupts
+        //       
+        for (irqno = CREATOR_IRQ(0); irqno <= CREATOR_IRQ(15); irqno++) {            
+            switch (irqno){
+            default :    
+                set_irq_chip(irqno, &creator_irq_edge_chip);                            
+                set_irq_handler(irqno, do_edge_IRQ);                                   
+                set_irq_flags(irqno, 0);       // disable                     
+            }             
+        }        
+        
+        set_irq_flags(CREATOR_TOUCH_IRQ,  IRQF_VALID | IRQF_PROBE);          
+        set_irq_flags(CREATOR_MMC_CD_IRQ,  IRQF_VALID);         // MMC/SD card insert irq      
+        set_irq_flags(CREATOR_MMCO_IRQ,  IRQF_VALID);           // MMC/SD card remove irq   
+        set_irq_flags(CREATOR_CFI_IRQ,  IRQF_VALID);         
+        set_irq_flags(CREATOR_CFO_IRQ,  IRQF_VALID);           
+        set_irq_flags(CREATOR_CF_IRQ,  IRQF_VALID);               
+        
+        if (CreatorBoardVersion != CREATOR_BOARD_NOT_EXIST){
+            set_irq_flags(CREATOR_IO_XIRQ2_IRQ,  IRQF_VALID);       // Codec         
+            set_irq_flags(CREATOR_IO_XIRQ3_IRQ,  IRQF_VALID);       // DSP             	
+        }
+        
+        MASTER_IRQ3_MASK = ~(0);
+        if (CreatorBoardVersion != CREATOR_BOARD_NOT_EXIST)              
+            MASTER_INTMASK1 = ~(0);        
+        else
+            MASTER_INTMASK1 = (0x0F);                
+        MASTER_INTMASK2 = ~(0);  
+        
+        MASTER_IRQ3_PEND = ~0;                  
+        MASTER_INTPEND1 = ~0;
+        MASTER_INTPEND2 = ~0;                   
+
+        if (CreatorBoardVersion != CREATOR_BOARD_NOT_EXIST){
+        	if (CreatorBoardVersion >= 0x14){        
+                set_irq_chained_handler(CREATOR_IO_XIRQ3_IRQ, creator_ExtIRQ3_demux);
+            }    
+        }
+        
+        MSG("IRQ_GPIO chain to creator_gpio1_demux\n");
+        set_irq_chained_handler(IRQ_GPIO(1), creator_gpio1_demux);
+        set_irq_type(IRQ_GPIO(1), IRQT_FALLING);           
+                
+
+        // Timer4-11 Interrupts 
+        //
+        for(irqno = CREATOR_OST_4_IRQ; irqno <= CREATOR_OST_11_IRQ; irqno++) {            
+            set_irq_chip(irqno, &creator_OST_4_11_irq);
+            set_irq_handler(irqno, do_level_IRQ);        
+            set_irq_flags(irqno, IRQF_VALID);       // enable               
+        }                       
+        set_irq_chained_handler(IRQ_OST_4_11, creator_OST_4_11_irq_handler);                                                               
+}
+
Index: linux-2.6.15.3/arch/arm/mach-pxa/mach-creator-pxa270.c
===================================================================
--- linux-2.6.15.3/arch/arm/mach-pxa/mach-creator-pxa270.c	(revision 0)
+++ linux-2.6.15.3/arch/arm/mach-pxa/mach-creator-pxa270.c	(revision 7613)
@@ -0,0 +1,584 @@
+// --------------------------------------------------------------------
+//
+//   Title     :  mach-creator-pxa270.c
+//             :
+//   Library   :
+//             :
+//   Developers:  MICROTIME MDS group
+//             :
+//   Purpose   :  
+//             :
+//   Limitation:
+//             :
+//   Note      :
+//             :
+// --------------------------------------------------------------------
+//   modification history :
+// --------------------------------------------------------------------
+//   Version| mod. date: |
+//   Vx.xx  | mm/dd/yyyy |
+//   V1.00  | 05/29/2006 | First release
+//   V1.01  | 05/08/2007 | support MTLCD-0353224A (320*240 Landscape)
+//   V1.02  | 08/07/2008 | fixed:  name error for pxafb_device_mtlcd_0283224
+//   V1.03  | 12/02/2009 | support MTLCD-0708048  (7", 800*480 Landscape)
+// --------------------------------------------------------------------
+// --------------------------------------------------------------------
+//
+// Note:
+//
+//       MICROTIME COMPUTER INC.
+//
+//
+/*************************************************************************
+Include files
+*************************************************************************/
+#include <linux/init.h>
+#include <linux/platform_device.h>
+#include <linux/initrd.h>
+#include <linux/device.h>
+#include <linux/delay.h>
+#include <linux/fb.h>
+#include <linux/kdev_t.h>
+#include <linux/mtd/mtd.h>
+#include <linux/mtd/partitions.h>
+#include <linux/root_dev.h>
+
+#include <asm/setup.h>
+#include <asm/memory.h>
+#include <asm/mach-types.h>
+#include <asm/hardware.h>
+#include <asm/irq.h>
+#include <asm/sizes.h>
+
+#include <asm/mach/arch.h>
+#include <asm/mach/map.h>
+
+#include <asm/arch/creator-pxa270.h>
+#include <asm/arch/audio.h>
+#include <asm/mach/flash.h>
+#include <asm/mach/irq.h>
+#include <asm/arch/pxafb.h>
+#include <asm/arch/mmc.h>
+#include <asm/arch/creator-regs.h>
+
+
+#include "generic.h"
+
+/*************************************************************************
+Constant define
+*************************************************************************/
+//#define DEBUG
+#ifdef DEBUG
+#define MSG(string, args...) printk("<1>%s(), line=%d, " string, __FUNCTION__, __LINE__, ##args)
+#else   
+#define MSG(string, args...)
+#endif
+
+
+/*************************************************************************
+Function prototypes
+*************************************************************************/
+
+
+/*************************************************************************
+Variable define
+*************************************************************************/
+
+
+
+static int 
+creator_pxa270_mst_audio_startup (snd_pcm_substream_t *substream, void *priv)
+{  
+        volatile unsigned int *ptrAddr ;
+     
+        ptrAddr = (unsigned int*)(0xf2500200 + (2<<1));
+        *ptrAddr = 0x0808 ;
+        udelay(100);     
+       
+        ptrAddr = (unsigned int*)(0xf2500200 + (0x6a<<1));
+        *ptrAddr = 0x40 ;       
+        udelay(100);	
+	
+        return (0);
+}
+
+static void 
+creator_pxa270_mst_audio_shutdown (snd_pcm_substream_t *substream, void *priv)
+{	
+}
+
+static void 
+creator_pxa270_mst_audio_suspend (void *priv)
+{
+}
+
+static void 
+creator_pxa270_mst_audio_resume (void *priv)
+{
+}
+
+static pxa2xx_audio_ops_t creator_pxa270_mst_audio_ops = {
+	.startup	= creator_pxa270_mst_audio_startup,
+	.shutdown	= creator_pxa270_mst_audio_shutdown,
+	.suspend	= creator_pxa270_mst_audio_suspend,
+	.resume		= creator_pxa270_mst_audio_resume,
+};
+
+static struct platform_device creator_pxa270_mst_audio_device = {
+	.name		= "pxa2xx-ac97",
+	.id		= -1,
+	.dev		= { .platform_data = &creator_pxa270_mst_audio_ops },
+};
+
+static void 
+create_pxa270_TFTLCD_power (int on)
+{ 
+        if (on)
+           MASTER_CTRL1 = MASTER_CTRL1 | 0x20;
+        else    
+           MASTER_CTRL1 = MASTER_CTRL1 & 0xdf;                     
+}
+
+
+static u64 fb_dma_mask = ~(u64)0;
+
+/**
+ * Set lcd on or off
+ **/
+static struct pxafb_mach_info LTS280Q1  = {
+	.pixclock		= 156250,    // Clock frequency=6.4M. pixclock=(1/6.4M)*10E12=156250
+	.xres			= 240,
+	.yres			= 320,
+	.bpp			= 16,
+	.hsync_len		= 60,
+	.left_margin	= 10,
+	.right_margin	= 10,
+	.vsync_len		= 13,
+	.upper_margin	= 0,
+	.lower_margin	= 0,
+	.sync			= 0,
+	.lccr0			= LCCR0_Act,
+	.lccr3			= LCCR3_PCP,
+	.pxafb_lcd_power = create_pxa270_TFTLCD_power,
+	.pxafb_backlight_power	= NULL,	
+};
+
+
+static struct pxafb_mach_info TD035STEB1  = {
+	.pixclock		= 156250,     // Clock frequency=6.4M. pixclock=(1/6.4M)*10E12=156250
+	.xres			= 240,
+	.yres			= 320,
+	.bpp			= 16,
+	.hsync_len		= 60,
+	.left_margin	= 12,
+	.right_margin	= 12,
+	.vsync_len		= 13,
+	.upper_margin	= 0,
+	.lower_margin	= 0,
+	.sync			= 0,
+	.lccr0			= LCCR0_Act,
+	.lccr3			= LCCR3_PCP,
+	.pxafb_lcd_power = create_pxa270_TFTLCD_power,
+	.pxafb_backlight_power	= NULL,	
+};
+
+
+static struct pxafb_mach_info HX8218A  = {
+	.pixclock		= 156250,   // Clock frequency=6.4M. pixclock=(1/6.4M)*10E12=156250
+	.xres			= 320,
+	.yres			= 240,
+	.bpp			= 16,
+	.hsync_len		= 30,
+	.left_margin	=  2,
+	.right_margin	=  2,
+	.vsync_len		=  3,
+	.upper_margin	= 1,
+	.lower_margin	= 1,
+	.sync			= 0,
+	.lccr0			= LCCR0_Act,
+	.lccr3			= 0,
+	.pxafb_lcd_power = create_pxa270_TFTLCD_power,
+	.pxafb_backlight_power	= NULL,	
+};
+
+
+static struct pxafb_mach_info NL6448BC33  = {
+	.pixclock		= 39682,     // Clock frequency=25.18M. pixclock=(1/25.2M)*10E12=39682 
+	.xres			= 640,
+	.yres			= 480,
+	.bpp			= 16,
+	.hsync_len		= 60,
+	.left_margin	= 10,
+	.right_margin	= 10,
+	.vsync_len		= 13,
+	.upper_margin	= 0,
+	.lower_margin	= 0,
+	.sync			= 0,
+	.lccr0			= LCCR0_Act,
+	.lccr3			= LCCR3_PCP,
+	.pxafb_lcd_power = create_pxa270_TFTLCD_power,
+	.pxafb_backlight_power	= NULL,	
+};
+
+
+static struct pxafb_mach_info GATW70SN9F3E0  = {
+	.pixclock		= 33330,      // Clock frequency=6.4M. pixclock=(1/6.4M)*10E12=156250
+	.xres			= 800,
+	.yres			= 480,
+	.bpp			= 16,
+	.hsync_len		= 48,
+	.left_margin	= 40,
+	.right_margin	= 40,
+	.vsync_len		= 3,
+	.upper_margin	= 29,
+	.lower_margin	= 29,
+	.sync			= 0,
+	.lccr0			= LCCR0_Act,
+	.lccr3			= 0,
+	.pxafb_lcd_power = create_pxa270_TFTLCD_power,
+	.pxafb_backlight_power	= NULL,	
+};
+
+
+static struct platform_device pxafb_device_mtlcd_0283224  = {
+	.name		= "pxa2xx-fb-0283224",
+	.id		= -1,
+	.dev		= {
+ 		.platform_data	= &LTS280Q1,
+		.dma_mask	= &fb_dma_mask,
+		.coherent_dma_mask = 0xffffffff,
+	},
+};
+
+static struct platform_device pxafb_device_mtlcd_0353224 = {
+	.name		= "pxa2xx-fb-0353224",
+	.id		= -1,
+	.dev		= {
+ 		.platform_data	= &TD035STEB1,
+		.dma_mask	= &fb_dma_mask,
+		.coherent_dma_mask = 0xffffffff,
+	},
+};
+
+static struct platform_device pxafb_device_mtlcd_1046448 = {
+	.name		= "pxa2xx-fb-1046448",
+	.id		= -1,
+	.dev		= {
+ 		.platform_data	= &NL6448BC33,
+		.dma_mask	= &fb_dma_mask,
+		.coherent_dma_mask = 0xffffffff,
+	},
+};
+
+static struct platform_device pxafb_device_mtlcd_0353224A = {
+	.name		= "pxa2xx-fb-0353224A",
+	.id		= -1,
+	.dev		= {
+ 		.platform_data	= &HX8218A,
+		.dma_mask	= &fb_dma_mask,
+		.coherent_dma_mask = 0xffffffff,
+	},
+};
+
+static struct platform_device pxafb_device_mtlcd_0708048 = {
+	.name		= "pxa2xx-fb-0708048",
+	.id		= -1,
+	.dev		= {
+ 		.platform_data	= &GATW70SN9F3E0,
+		.dma_mask	= &fb_dma_mask,
+		.coherent_dma_mask = 0xffffffff,
+	},
+};
+
+static struct resource creator_pxa270_smc91x_resources[] = {
+	[0] = {
+		.start	= (CREATOR_ETH_PHYS + 0x300),
+		.end	= (CREATOR_ETH_PHYS + CREATOR_ETH_SIZE),
+		.flags	= IORESOURCE_MEM,
+	},
+	[1] = {
+		.start	= CREATOR_ETH_IRQ,
+		.end	= CREATOR_ETH_IRQ,
+		.flags	= IORESOURCE_IRQ,
+	}
+};
+
+
+
+static struct platform_device creator_pxa270_smc91x_device = {
+	.name		= "smc91x",
+	.id		= 0,
+	.num_resources	= ARRAY_SIZE(creator_pxa270_smc91x_resources),
+	.resource	= creator_pxa270_smc91x_resources,
+};
+
+
+
+static struct pxamci_platform_data creator_pxa270_mci_platform_data ;
+/*
+ * MMC/SD Device
+ *
+ */
+static int 
+creator_pxa270_mci_init (struct device *dev, irqreturn_t (*detect_int)(int, void *, struct pt_regs *), void *data)
+{
+       int err;
+
+       printk("Create XScale-PXA270 MMC/SD setup ");
+       /* setup GPIO for PXA25x MMC controller	*/
+       pxa_gpio_mode(GPIO_MMCCLK_AF);
+       pxa_gpio_mode(GPIO_MMCCMD_AF);
+       pxa_gpio_mode(GPIO_MMCDAT0_AF);
+       pxa_gpio_mode(GPIO_MMCDAT1_AF);
+       pxa_gpio_mode(GPIO_MMCDAT2_AF);
+       pxa_gpio_mode(GPIO_MMCDAT3_AF);
+
+	   creator_pxa270_mci_platform_data.detect_delay = msecs_to_jiffies(250);
+   
+       err = request_irq(CREATOR_MMC_CD_IRQ, detect_int, 
+                         SA_INTERRUPT, 
+                         "MMC card detect", data);
+       if (err) {
+           printk(KERN_ERR "creator_pxa270_mci_init: MMC/SD: can't request MMC card Insert IRQ\n");
+           return -1;
+       } 
+
+       err = request_irq(CREATOR_MMCO_IRQ, detect_int, 
+                         SA_INTERRUPT, 
+                         "MMC card detect", data);
+       if (err) {
+           printk(KERN_ERR "creator_pxa270_mci_init: MMC/SD: can't request MMC card Remove IRQ=%d\n", CREATOR_MMCO_IRQ);
+           return -1;
+       } 
+
+       printk("done.\n");
+       return (0);
+}
+
+
+
+static void 
+creator_pxa270_mci_exit (struct device *dev, void *data)
+{
+	    free_irq(CREATOR_MMC_CD_IRQ, data);
+}
+
+
+
+static struct pxamci_platform_data creator_pxa270_mci_platform_data = {
+	.ocr_mask	= MMC_VDD_32_33|MMC_VDD_33_34,
+	.init 		= creator_pxa270_mci_init,
+	.exit       = creator_pxa270_mci_exit,	
+};
+
+
+
+static struct mtd_partition creator_pxa270_partitions[] = {
+	{
+		name:		"Bootloader",
+		offset:		0,		
+		size:		0x00040000,      /* 256K U-Boot and 256K config params */
+		mask_flags:	MTD_WRITEABLE,   /* force read-only */
+	},{
+		name:		"Diag",
+		offset:		0x00040000,		
+		size:		0x000C0000,      /* 768k Diag program */
+		mask_flags:	MTD_WRITEABLE,   /* force read-only */
+	},{	    
+		name:		"Kernel",
+		offset:		0x00100000,		 
+		size:		0x00380000,      /* 3.5M for kernel */
+       mask_flags:  MTD_WRITEABLE	 /* force read-only */	
+	},{
+		name:		"Filesystem",
+		offset:		0x00480000,
+//      size:		MTDPART_SIZ_FULL,
+  		size:		0x001200000,		 /* 18M for rootfs */	
+	}
+};
+
+
+
+static struct flash_platform_data creator_pxa270_flash_data = {
+	.map_name	= "cfi_probe",
+	.width		= 2,
+	.parts		= creator_pxa270_partitions,
+	.nr_parts	= ARRAY_SIZE(creator_pxa270_partitions),	
+};
+
+
+
+static struct resource creator_pxa270_flash_resource = {
+	.start		= PXA_CS0_PHYS,
+	.end		= PXA_CS0_PHYS + SZ_32M - 1,
+	.flags		= IORESOURCE_MEM,
+};
+
+
+
+static struct platform_device creator_pxa270_cfi_flash_device = {
+	.name		= "creator_pxa270_flash",
+	.id		= 0,
+	.dev		= {
+		.platform_data	= &creator_pxa270_flash_data,
+	},
+	.num_resources	= 1,
+	.resource	= &creator_pxa270_flash_resource,
+};
+
+
+static struct platform_device *devices[] __initdata = {
+	&creator_pxa270_smc91x_device,
+	&creator_pxa270_mst_audio_device,
+	&creator_pxa270_cfi_flash_device,
+	&pxafb_device_mtlcd_0283224,
+	&pxafb_device_mtlcd_0353224,
+	&pxafb_device_mtlcd_1046448,
+	&pxafb_device_mtlcd_0353224A,	
+	&pxafb_device_mtlcd_0708048,	
+};
+
+
+
+static void __init 
+creator_pxa270_init (void)
+{
+       /* reset UCB1400 */
+       GPSR3 &= ~(1u << (113-96));
+       pxa_gpio_mode(GPIO113_AC97_RESET_N_MD);               
+       udelay(12);
+
+       pxa_set_mci_info(&creator_pxa270_mci_platform_data);
+       
+       
+#ifdef  CONFIG_MTLCD_0283224
+       set_pxa_fb_info(&LTS280Q1);          
+#endif
+
+#ifdef  CONFIG_MTLCD_0353224
+       set_pxa_fb_info(&TD035STEB1);          
+#endif
+
+#ifdef  CONFIG_MTLCD_0353224A
+       set_pxa_fb_info(&HX8218A);          
+#endif
+
+#ifdef  CONFIG_MTLCD_0708048
+       set_pxa_fb_info(&GATW70SN9F3E0);          
+#endif
+
+#ifdef  CONFIG_MTLCD_1046448
+       set_pxa_fb_info(&NL6448BC33);          
+#endif
+	   (void) platform_add_devices(devices, ARRAY_SIZE(devices));            
+}
+
+
+
+static void __init
+fixup_creator_pxa270 (struct machine_desc *desc, struct tag *tags, char **cmdline, struct meminfo *mi)
+{
+       SET_BANK (0, 0xa0000000, 64*1024*1024);
+       mi->nr_banks      = 1;
+	
+#ifdef CONFIG_BLK_DEV_INITRD
+       if (initrd_start)
+           ROOT_DEV = Root_RAM0;
+#endif	
+
+#ifdef CONFIG_BLK_DEV_INITRD
+		initrd_start = __phys_to_virt(RAMDISK_DN_ADDR);
+		initrd_end = initrd_start + CONFIG_BLK_DEV_RAM_SIZE;
+#endif			
+}
+
+
+
+static struct map_desc creator_pxa270_io_desc[] __initdata = {
+ /* virtual         physical            length              type */
+  	{	/* Ethernet */
+		.virtual	=  CREATOR_ETH_VIRT,
+		.pfn		= __phys_to_pfn(CREATOR_ETH_PHYS),
+		.length		= CREATOR_ETH_SIZE,
+		.type		= MT_DEVICE
+	}, {	/* Creator Mainboard I/O */
+		.virtual	=  MASTER_ECS0_VIRT,
+		.pfn		= __phys_to_pfn(MASTER_ECS0_PHYS),
+		.length		= MASTER_ECS0_SIZE,
+		.type		= MT_DEVICE
+	}, {	/* Creator Mainboard Flash */
+		.virtual	=  MASTER_RCS0_VIRT,
+		.pfn		= __phys_to_pfn(MASTER_RCS0_PHYS),
+		.length		= MASTER_RCS0_SIZE,
+		.type		= MT_DEVICE
+	}, {	/* Slave bus : FPGA I/O */
+		.virtual	=  MASTER_ECS3_VIRT,
+		.pfn		= __phys_to_pfn(MASTER_ECS3_PHYS),
+		.length		= MASTER_ECS3_SIZE,
+		.type		= MT_DEVICE
+	}, {	/* Slabe bus : FPGA SRAM */
+		.virtual	=  MASTER_RCS3_VIRT,
+		.pfn		= __phys_to_pfn(MASTER_RCS3_PHYS),
+		.length		= MASTER_RCS3_SIZE,
+		.type		= MT_DEVICE
+	}, {	/* CPLD : */
+		.virtual	=  CREATOR_CPLD_VIRT,
+		.pfn		= __phys_to_pfn(CREATOR_CPLD_PHYS),
+		.length		= CREATOR_CPLD_SIZE,
+		.type		= MT_DEVICE
+	}                                            
+};
+                           
+
+
+static void __init 
+creator_pxa270_map_io (void)
+{
+       pxa_map_io();
+       iotable_init(creator_pxa270_io_desc, ARRAY_SIZE(creator_pxa270_io_desc));
+
+       /* enabling FFUART */
+       CKEN |= CKEN6_FFUART;
+       pxa_gpio_mode(GPIO41_FFRXD_MD);
+       pxa_gpio_mode(GPIO35_FFCTS_MD);
+       pxa_gpio_mode(GPIO36_FFDCD_MD);
+       pxa_gpio_mode(GPIO37_FFDSR_MD);
+       pxa_gpio_mode(GPIO38_FFRI_MD);
+       pxa_gpio_mode(GPIO39_FFTXD_MD);
+       pxa_gpio_mode(GPIO40_FFDTR_MD);
+       pxa_gpio_mode(GPIO83_FFRTS_MD);	
+
+       /* enabling BTUART */
+       CKEN |= CKEN7_BTUART;
+       pxa_gpio_mode(GPIO42_BTRXD_MD);
+       pxa_gpio_mode(GPIO43_BTTXD_MD);
+       pxa_gpio_mode(GPIO44_BTCTS_MD);
+       pxa_gpio_mode(GPIO45_BTRTS_MD);
+
+       /* This is for the Davicom chip select */
+       pxa_gpio_mode(GPIO78_nCS_2_MD);
+
+       /* setup sleep mode values */
+       PWER  = 0x00000002;
+       PFER  = 0x00000000;
+       PRER  = 0x00000002;
+       PGSR0 = 0x00008000;
+       PGSR1 = 0x003F0202;
+       PGSR2 = 0x0001C000;
+       PCFR |= PCFR_OPDE;
+}
+
+
+void creator_pxa270_init_irq (void);
+
+MACHINE_START(CREATOR_PXA270, "Microtime Create XScale-PXA270 Module")
+    .phys_ram	= 0xa0000000,
+	.phys_io	= 0x40000000,
+	.io_pg_offst	= (io_p2v(0x40000000) >> 18) & 0xfffc,    
+	.boot_params = 0xa0000100,
+	.fixup = fixup_creator_pxa270,
+	.map_io     = creator_pxa270_map_io,
+	.init_irq	= creator_pxa270_init_irq,
+    .timer = &pxa_timer,
+    .init_machine = creator_pxa270_init,
+MACHINE_END
Index: linux-2.6.15.3/Makefile
===================================================================
--- linux-2.6.15.3/Makefile	(revision 1)
+++ linux-2.6.15.3/Makefile	(revision 7613)
@@ -190,8 +190,8 @@
 # Default value for CROSS_COMPILE is not to prefix executables
 # Note: Some architectures assign CROSS_COMPILE in their arch/*/Makefile
 
-ARCH		?= $(SUBARCH)
-CROSS_COMPILE	?=
+ARCH		= arm
+CROSS_COMPILE	= arm-unknown-linux-gnu-
 
 # Architecture as present in compile.h
 UTS_MACHINE := $(ARCH)
@@ -354,7 +354,7 @@
 
 CFLAGS 		:= -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs \
 	  	   -fno-strict-aliasing -fno-common \
-		   -ffreestanding
+		   -ffreestanding -fno-inline
 AFLAGS		:= -D__ASSEMBLY__
 
 export	VERSION PATCHLEVEL SUBLEVEL EXTRAVERSION LOCALVERSION KERNELRELEASE \
@@ -578,7 +578,7 @@
 # relocations required by build roots.  This is not defined in the
 # makefile but the arguement can be passed to make if needed.
 #
-
+INSTALL_MOD_PATH = $(TOPDIR)/../../../arm/pxa270/target
 MODLIB	:= $(INSTALL_MOD_PATH)/lib/modules/$(KERNELRELEASE)
 export MODLIB
 
Index: linux-2.6.15.3/drivers/mtd/maps/Makefile
===================================================================
--- linux-2.6.15.3/drivers/mtd/maps/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/mtd/maps/Makefile	(revision 7613)
@@ -72,3 +72,4 @@
 obj-$(CONFIG_MTD_OMAP_NOR)	+= omap_nor.o
 obj-$(CONFIG_MTD_MTX1)		+= mtx-1_flash.o
 obj-$(CONFIG_MTD_TQM834x)	+= tqm834x.o
+obj-$(CONFIG_MTD_CREATOR_PXA270) += creator-pxa270-flash.o
\ No newline at end of file
Index: linux-2.6.15.3/drivers/mtd/maps/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/mtd/maps/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/mtd/maps/Kconfig	(revision 7613)
@@ -531,6 +531,13 @@
 	  This enables access to the flash chips on the Hynix evaluation boards.
 	  If you have such a board, say 'Y'.
 
+config MTD_CREATOR_PXA270
+	tristate "Creator XScale Pxa270 module flash mapping"
+	depends on ARM && MTD_CFI && MACH_CREATOR_PXA270
+	help
+	  This enables access to the flash memory on the Creator XScale Pxa270 module.
+	  If you have such a module, say 'Y'.
+
 config MTD_MPC1211
 	tristate "CFI Flash device mapped on Interface MPC-1211"
 	depends on SH_MPC1211 && MTD_CFI
Index: linux-2.6.15.3/drivers/mtd/maps/creator-pxa270-flash.c
===================================================================
--- linux-2.6.15.3/drivers/mtd/maps/creator-pxa270-flash.c	(revision 0)
+++ linux-2.6.15.3/drivers/mtd/maps/creator-pxa270-flash.c	(revision 7613)
@@ -0,0 +1,283 @@
+// --------------------------------------------------------------------
+//
+//   Title     :  creator-pxa270-flash.c
+//             :
+//   Library   :
+//             :
+//   Developers:  MICROTIME MDS group
+//             :
+//   Purpose   :  
+//             :
+//   Limitation:
+//             :
+//   Note      :
+//             :
+// --------------------------------------------------------------------
+//   modification history :
+// --------------------------------------------------------------------
+//   Version| mod. date: |
+//   Vx.xx  | mm/dd/yyyy |
+//   V1.00  | 05/25/2006 | First release
+// --------------------------------------------------------------------
+// --------------------------------------------------------------------
+//
+// Note:
+//
+//       MICROTIME COMPUTER INC.
+//
+//
+/*************************************************************************
+Include files
+*************************************************************************/
+#include <linux/config.h>
+#include <linux/module.h>
+#include <linux/types.h>
+#include <linux/kernel.h>
+#include <linux/slab.h>
+#include <linux/ioport.h>
+#include <linux/platform_device.h>
+#include <linux/init.h>
+
+#include <linux/mtd/mtd.h>
+#include <linux/mtd/map.h>
+#include <linux/mtd/partitions.h>
+
+#include <asm/mach/flash.h>
+#include <asm/hardware.h>
+#include <asm/io.h>
+#include <asm/system.h>
+
+/*************************************************************************
+Constant define
+*************************************************************************/
+#define DO_FLASH_UNLOCK
+
+struct creator_pxa270_flash_info {
+	struct flash_platform_data *plat;
+	struct resource		*res;
+	struct mtd_partition	*parts;
+	struct mtd_info		*mtd;
+	struct map_info		map;
+	unsigned int		nr_parts;	
+};
+
+
+/*************************************************************************
+Function prototypes
+*************************************************************************/
+
+
+/*************************************************************************
+Variable define
+*************************************************************************/
+
+
+static void 
+creator_pxa270_flash_set_vpp (struct map_info *map, int on)
+{
+        struct creator_pxa270_flash_info *info = container_of(map, struct creator_pxa270_flash_info, map);
+
+        if (info->plat && info->plat->set_vpp)
+            info->plat->set_vpp(on);
+}
+
+
+
+static void 
+creator_pxa270_flash_destroy (struct creator_pxa270_flash_info *info)
+{
+        if (info->mtd) {
+            if (info->nr_parts == 0)
+                del_mtd_device(info->mtd);
+#ifdef CONFIG_MTD_PARTITIONS
+            else
+                del_mtd_partitions(info->mtd);
+#endif
+        }
+        
+        kfree(info->parts);
+
+        iounmap(info->map.virt);
+        release_resource(info->res);
+        kfree(info->res);
+
+        if (info->plat && info->plat->exit){
+            info->plat->exit();
+        }    
+        kfree(info);        
+}
+
+
+    
+
+static const char* part_probes[] = { "RedBoot", "cmdlinepart", NULL };
+
+
+static int 
+creator_pxa270_flash_probe (struct platform_device *pdev)
+{
+        struct flash_platform_data        *plat = pdev->dev.platform_data;
+        struct resource                   *res  = pdev->resource;
+        struct creator_pxa270_flash_info  *info;    
+	    struct mtd_partition              *parts;            
+        void __iomem                      *base;    
+        struct mtd_info                   *mymtd;        
+	    const char                        *part_type = NULL;       
+	    unsigned long                     phys;	         
+        unsigned int                      size ;
+	    int                               i, ret, nr_parts = 0;
+
+        phys = res->start;
+        size = res->end - phys + 1;
+
+        info = kmalloc(sizeof(struct creator_pxa270_flash_info), GFP_KERNEL);
+        if (!info) {
+            ret = -ENOMEM;
+            goto out;
+        }
+
+        memset(info, 0, sizeof(struct creator_pxa270_flash_info));
+
+        info->plat = plat;
+        if (plat && plat->init) {
+            ret = plat->init();
+            if (ret)
+                goto err;
+        }
+
+        info->res = request_mem_region(phys, size, "creator_pxa270_flash");
+        if (!info->res) {
+            ret = -EBUSY;
+            goto err;
+        }
+
+        base = ioremap(phys, size);
+        if (!base) {
+            ret = -ENOMEM;
+            goto err;
+        }
+
+        /*
+         * look for CFI based flash parts fitted to this board
+         */
+        info->map.phys		= phys;         
+        info->map.size		= size;
+        info->map.bankwidth	= plat->width;
+        info->map.virt		= base;
+        info->map.name		= pdev->dev.bus_id;
+        info->map.set_vpp	= creator_pxa270_flash_set_vpp;
+
+        simple_map_init(&info->map);
+
+        /*
+        * Also, the CFI layer automatically works out what size
+        * of chips we have, and does the necessary identification
+        * for us automatically.
+        */
+        info->mtd = mymtd = do_map_probe(plat->map_name, &info->map);
+        if (!info->mtd) {
+            ret = -ENXIO;
+            goto err;
+        }        
+        info->mtd->owner = THIS_MODULE;
+        
+
+#ifdef DO_FLASH_UNLOCK
+        /* Unlock the flash device. */
+        for (i = 0; i < mymtd->numeraseregions; i++) {
+            int j;
+            
+            for(j = 0; j < mymtd->eraseregions[i].numblocks; j++) {
+                mymtd->unlock(mymtd, mymtd->eraseregions[i].offset +
+                              j * mymtd->eraseregions[i].erasesize,
+                              mymtd->eraseregions[i].erasesize);
+            }
+        }
+#endif        
+        
+        /*
+         * Partition selection stuff.
+         */
+        
+#ifdef CONFIG_MTD_PARTITIONS
+        nr_parts = parse_mtd_partitions(info->mtd, part_probes, &parts, 0);
+        if (nr_parts > 0) {
+            info->parts = parts;
+            part_type = "dynamic";
+        } else
+#endif
+
+        {
+            parts = plat->parts;
+            nr_parts = plat->nr_parts;
+            part_type = "static";
+        }
+
+        if (nr_parts == 0) {
+            printk(KERN_NOTICE "Creator XScale-PXA270 flash: no partition info "
+			                   "available, registering whole flash\n");
+            add_mtd_device(info->mtd);
+        } else {
+            printk(KERN_NOTICE "Creator XScale-PXA270  flash: using %s partition "
+                               "definition\n", part_type);
+            add_mtd_partitions(info->mtd, parts, nr_parts);
+        }
+
+        info->nr_parts = nr_parts;
+
+        platform_set_drvdata(pdev, info);
+        ret = 0;
+        return (ret);
+        
+err:
+        creator_pxa270_flash_destroy(info);
+out:
+        return (ret);
+}
+
+
+
+static int 
+creator_pxa270_flash_remove (struct platform_device *pdev)
+{
+        struct creator_pxa270_flash_info *info = platform_get_drvdata(pdev);      
+
+        platform_set_drvdata(pdev, NULL);
+        creator_pxa270_flash_destroy(info);
+
+        return (0);
+}
+
+
+
+static struct platform_driver creator_pxa270_flash_driver = {
+	.probe		= creator_pxa270_flash_probe,
+	.remove		= creator_pxa270_flash_remove,
+	.driver		= {
+		.name	= "creator_pxa270_flash",
+	},
+};
+
+
+
+static int __init 
+creator_pxa270_flash_init (void)
+{
+         return platform_driver_register(&creator_pxa270_flash_driver);
+}
+
+
+
+static void __exit 
+creator_pxa270_flash_exit (void)
+{
+        platform_driver_unregister(&creator_pxa270_flash_driver);
+}
+
+
+module_init(creator_pxa270_flash_init);
+module_exit(creator_pxa270_flash_exit);
+
+
+MODULE_DESCRIPTION("Creator XScale-PXA270 CFI map driver");
+MODULE_LICENSE("GPL");
Index: linux-2.6.15.3/drivers/mtd/chips/jedec_probe.c
===================================================================
--- linux-2.6.15.3/drivers/mtd/chips/jedec_probe.c	(revision 1)
+++ linux-2.6.15.3/drivers/mtd/chips/jedec_probe.c	(revision 7613)
@@ -106,6 +106,8 @@
 #define I28F640B3B	0x8899
 #define I82802AB	0x00ad
 #define I82802AC	0x00ac
+#define I28F256P30T 0x8919
+#define I28F256P30B 0x891C
 
 /* Macronix */
 #define MX29LV040C	0x004F
@@ -262,6 +264,8 @@
 #define SIZE_2MiB   21
 #define SIZE_4MiB   22
 #define SIZE_8MiB   23
+#define SIZE_16MiB  24
+#define SIZE_32MiB  25
 
 
 /*
@@ -1104,7 +1108,37 @@
 		.regions	= {
 			ERASEINFO(0x10000,16),
 		}
+	}, {	    
+		.mfr_id		= MANUFACTURER_INTEL,
+		.dev_id		= I28F256P30T,
+		.name		= "Intel 28F256P30T",
+		.uaddr		= {
+			[0] = MTD_UADDR_UNNECESSARY,    /* x8 */
+			[1] = MTD_UADDR_UNNECESSARY,    /* x16 */
+		},
+		.DevSize	= SIZE_32MiB,
+		.CmdSet		= P_ID_INTEL_STD,
+		.NumEraseRegions= 2,
+		.regions	= {
+			ERASEINFO(0x20000, 255),
+			ERASEINFO(0x8000, 4),
+		}
 	}, {
+		.mfr_id		= MANUFACTURER_INTEL,
+		.dev_id		= I28F256P30B,
+		.name		= "Intel 28F256P30B",
+		.uaddr		= {
+			[0] = MTD_UADDR_UNNECESSARY,    /* x8 */
+			[1] = MTD_UADDR_UNNECESSARY,    /* x16 */
+		},
+		.DevSize	= SIZE_32MiB,
+		.CmdSet		= P_ID_INTEL_STD,
+		.NumEraseRegions= 2,
+		.regions	= {
+			ERASEINFO(0x08000, 4),
+			ERASEINFO(0x20000, 255),
+		}	    
+    }, {		
 		.mfr_id		= MANUFACTURER_MACRONIX,
 		.dev_id		= MX29LV040C,
 		.name		= "Macronix MX29LV040C",
Index: linux-2.6.15.3/drivers/input/tsdev.c
===================================================================
--- linux-2.6.15.3/drivers/input/tsdev.c	(revision 1)
+++ linux-2.6.15.3/drivers/input/tsdev.c	(revision 7613)
@@ -214,7 +214,7 @@
 
 	if (!list->tsdev->exist)
 		return -ENODEV;
-
+    printk("<1> tsdev_event, read %s(),line=%d\n", __FUNCTION__, __LINE__);
 	while (list->head != list->tail &&
 	       retval + sizeof (struct ts_event) <= count) {
 		if (copy_to_user (buffer + retval, list->event + list->tail,
@@ -284,17 +284,21 @@
 		switch (code) {
 		case ABS_X:
 			tsdev->x = value;
+	        printk("<1> tsdev_event %s(),line=%d, X=%d\n", __FUNCTION__, __LINE__, value);			
 			break;
 		case ABS_Y:
 			tsdev->y = value;
+	        printk("<1> tsdev_event %s(),line=%d, Y=%d\n", __FUNCTION__, __LINE__, value);					
 			break;
 		case ABS_PRESSURE:
+	        printk("<1> Before tsdev_event %s(),line=%d, pressure=%d\n", __FUNCTION__, __LINE__, value);			
 			if (value > handle->dev->absmax[ABS_PRESSURE])
 				value = handle->dev->absmax[ABS_PRESSURE];
 			value -= handle->dev->absmin[ABS_PRESSURE];
 			if (value < 0)
 				value = 0;
 			tsdev->pressure = value;
+	        printk("<1> After tsdev_event %s(),line=%d, pressure=%d\n", __FUNCTION__, __LINE__, value);				
 			break;
 		}
 		break;
@@ -345,16 +349,19 @@
 
 		x = tsdev->x;
 		y = tsdev->y;
-
+        printk("<1> tsdev_event %s(),line=%d, X=%d, Y=%d\n", __FUNCTION__, __LINE__, x, y);	
 		/* Calibration */
+	#if 0	
 		if (!list->raw) {
+	        printk("<1> tsdev_event %s(),line=%d, X=%d, Y=%d\n", __FUNCTION__, __LINE__, x, y);			    
 			x = ((x * tsdev->cal.xscale) >> 8) + tsdev->cal.xtrans;
 			y = ((y * tsdev->cal.yscale) >> 8) + tsdev->cal.ytrans;
 			if (tsdev->cal.xyswap) {
 				tmp = x; x = y; y = tmp;
 			}
 		}
-
+	#endif	
+        printk("<1> tsdev_event %s(),line=%d, X=%d, Y=%d\n", __FUNCTION__, __LINE__, x, y);	
 		list->event[list->head].x = x;
 		list->event[list->head].y = y;
 		list->head = (list->head + 1) & (TSDEV_BUFFER_SIZE - 1);
@@ -387,7 +394,7 @@
 	init_waitqueue_head(&tsdev->wait);
 
 	sprintf(tsdev->name, "ts%d", minor);
-
+   
 	tsdev->exist = 1;
 	tsdev->minor = minor;
 	tsdev->handle.dev = dev;
Index: linux-2.6.15.3/drivers/cpufreq/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/cpufreq/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/cpufreq/Kconfig	(revision 7613)
@@ -52,7 +52,7 @@
 
 choice
 	prompt "Default CPUFreq governor"
-	default CPU_FREQ_DEFAULT_GOV_USERSPACE if CPU_FREQ_SA1100 || CPU_FREQ_SA1110
+	default CPU_FREQ_DEFAULT_GOV_USERSPACE if CPU_FREQ_SA1100 || CPU_FREQ_SA1110 || CPU_FREQ_PXA27x
 	default CPU_FREQ_DEFAULT_GOV_PERFORMANCE
 	help
 	  This option sets which CPUFreq governor shall be loaded at
Index: linux-2.6.15.3/drivers/video/pxafb.c
===================================================================
--- linux-2.6.15.3/drivers/video/pxafb.c	(revision 1)
+++ linux-2.6.15.3/drivers/video/pxafb.c	(revision 7613)
@@ -70,6 +70,39 @@
 static char g_options[PXAFB_OPTIONS_SIZE] __initdata = "";
 #endif
 
+#ifdef MODULE
+#define PXAFB_OPTIONS_SIZE 256
+static char g_lcdtype_options[PXAFB_OPTIONS_SIZE] __initdata = "";
+
+
+
+static void __init lcd_demo (struct pxafb_info *fbi)
+{
+        // Test LCD Initialization. by displaying R.G.B and White.
+        unsigned char *famebuffer = fbi->fb.screen_base ;    
+        int x, y;
+        int width, height;
+        unsigned short color ;
+    
+        width = fbi->max_xres;
+        height = fbi->max_yres ;
+    
+	    for (y=0 ; y < height/2; y++){	
+		    for(x=0; x < width; x++){		
+		        color =  (x < width/2) ? 0xffff : 0xf800 ;
+                (*(unsigned short*)(famebuffer + (((y*width)+ x)<<1))) = color;
+            }                 
+        }
+       for(y=height/2 ; y < height; y++){	
+           for(x=0; x < width; x++){	
+               color =  (x < width/2) ? 0x07e0 : 0x001f;	
+               (*(unsigned short*)(famebuffer + (((y*width)+ x)<<1))) = color;			
+           }               
+       }                
+}
+#endif
+
+
 static inline void pxafb_schedule_work(struct pxafb_info *fbi, u_int state)
 {
 	unsigned long flags;
@@ -781,7 +814,7 @@
 	LCCR0 &= ~LCCR0_LDM;	/* Enable LCD Disable Done Interrupt */
 	LCCR0 |= LCCR0_DIS;	/* Disable LCD Controller */
 
-	schedule_timeout(20 * HZ / 1000);
+	schedule_timeout(200 * HZ / 1000);
 	remove_wait_queue(&fbi->ctrlr_wait, &wait);
 
 	/* disable LCD controller clock */
@@ -1372,6 +1405,10 @@
 	 * Ok, now enable the LCD controller
 	 */
 	set_ctrlr_state(fbi, C_ENABLE);
+	
+#ifdef MODULE	
+    lcd_demo(fbi);
+#endif
 
 	return 0;
 
@@ -1402,10 +1439,41 @@
 	return 0;
 }
 #else
+
+typedef struct FB_PLATFORM_DATA
+{
+    char *lcdtype;
+    char *fb_name;	
+} FB_PLATFORM_DATA_T ;	
+static FB_PLATFORM_DATA_T fb_platform_name[] = {
+    { "MTLCD-0283224",  "pxa2xx-fb-0283224"  },    
+    { "MTLCD-0353224",  "pxa2xx-fb-0353224"  },  
+    { "MTLCD-0353224A", "pxa2xx-fb-0353224A" },  
+    { "MTLCD-1046448",  "pxa2xx-fb-1046448"  },     
+    { "MTLCD-0708048",  "pxa2xx-fb-0708048"  },   
+    { NULL, NULL }         
+};	
+
+int __devinit pxafb_setup(char *options)
+{
+       int i;
+       
+       for (i=0; fb_platform_name[i].lcdtype; i++){
+           if (strcmp(options, fb_platform_name[i].lcdtype) == 0){
+               pxafb_driver.driver.name = fb_platform_name[i].fb_name;	
+	           printk("module lcdtype=%s\n", options);                
+	           return (0);
+           }           		
+       }       	       
+       return (-1);               
+}
+
 # ifdef CONFIG_FB_PXA_PARAMETERS
 module_param_string(options, g_options, sizeof(g_options), 0);
 MODULE_PARM_DESC(options, "LCD parameters (see Documentation/fb/pxafb.txt)");
 # endif
+module_param_string(lcdtype, g_lcdtype_options, sizeof(g_lcdtype_options), 0);
+MODULE_PARM_DESC(lcdtype, "LCD Type(MTLCD-0283224, MTLCD-0353224, MTLCD-0353224A, MTLCD-0708048, MTLCD-1046448)");
 #endif
 
 int __devinit pxafb_init(void)
@@ -1416,6 +1484,8 @@
 	if (fb_get_options("pxafb", &option))
 		return -ENODEV;
 	pxafb_setup(option);
+#else
+	pxafb_setup(g_lcdtype_options);
 #endif
 	return platform_driver_register(&pxafb_driver);
 }
Index: linux-2.6.15.3/drivers/video/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/video/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/video/Kconfig	(revision 7613)
@@ -1381,6 +1381,27 @@
 
 	  If unsure, say N.
 
+choice
+    prompt "LCD type"
+    default MTLCD_0353224A
+    depends on (FB_PXA = y)
+
+config MTLCD_0283224
+    bool "MTLCD-0283224  2.8 inches"
+
+config MTLCD_0353224
+    bool "MTLCD-0353224  3.5 inches(Portrait)"
+    
+config MTLCD_0353224A
+    bool "MTLCD-0353224A 3.5 inches(Landscape)"    
+    
+config MTLCD_0708048
+    bool "MTLCD-0708048 7.0 inches"       
+
+config MTLCD_1046448
+    bool "MTLCD-1046448  10.4 inches"
+endchoice
+
 config FB_PXA_PARAMETERS
 	bool "PXA LCD command line parameters"
 	default n
Index: linux-2.6.15.3/drivers/mmc/mmc.c
===================================================================
--- linux-2.6.15.3/drivers/mmc/mmc.c	(revision 1)
+++ linux-2.6.15.3/drivers/mmc/mmc.c	(revision 7613)
@@ -26,9 +26,9 @@
 #include <linux/mmc/protocol.h>
 
 #include "mmc.h"
-
 #ifdef CONFIG_MMC_DEBUG
-#define DBG(x...)	printk(KERN_DEBUG x)
+//#define DBG(x...)	printk(KERN_DEBUG x)
+#define DBG(x...)	printk(KERN_ALERT x)
 #else
 #define DBG(x...)	do { } while (0)
 #endif
Index: linux-2.6.15.3/drivers/mmc/pxamci.c
===================================================================
--- linux-2.6.15.3/drivers/mmc/pxamci.c	(revision 1)
+++ linux-2.6.15.3/drivers/mmc/pxamci.c	(revision 7613)
@@ -38,7 +38,8 @@
 #include "pxamci.h"
 
 #ifdef CONFIG_MMC_DEBUG
-#define DBG(x...)	printk(KERN_DEBUG x)
+//#define DBG(x...)	printk(KERN_DEBUG x)
+#define DBG(x...)	printk(KERN_ALERT x)
 #else
 #define DBG(x...)	do { } while (0)
 #endif
@@ -313,7 +314,7 @@
 	struct pxamci_host *host = devid;
 	unsigned int ireg;
 	int handled = 0;
-
+    //printk("%s(), line=%d, irq=%d, host->base=%x, MMC_I_REG=%x\n", __FUNCTION__, __LINE__, irq, host->base, MMC_I_REG);
 	ireg = readl(host->base + MMC_I_REG);
 
 	DBG("PXAMCI: irq %08x\n", ireg);
Index: linux-2.6.15.3/drivers/mmc/pxamci.h
===================================================================
--- linux-2.6.15.3/drivers/mmc/pxamci.h	(revision 1)
+++ linux-2.6.15.3/drivers/mmc/pxamci.h	(revision 7613)
@@ -115,6 +115,7 @@
 #ifdef CONFIG_PXA27x
 #define CLOCKRATE_MIN	304688
 #define CLOCKRATE_MAX	19500000
+//#define CLOCKRATE_MAX	304688
 #else
 #define CLOCKRATE_MIN	312500
 #define CLOCKRATE_MAX	20000000
Index: linux-2.6.15.3/drivers/mmc/mmc_block.c
===================================================================
--- linux-2.6.15.3/drivers/mmc/mmc_block.c	(revision 1)
+++ linux-2.6.15.3/drivers/mmc/mmc_block.c	(revision 7613)
@@ -492,7 +492,8 @@
 static int __init mmc_blk_init(void)
 {
 	int res = -ENOMEM;
-
+	
+    major = MMC_BLOCK_MAJOR;
 	res = register_blkdev(major, "mmc");
 	if (res < 0) {
 		printk(KERN_WARNING "Unable to get major %d for MMC media: %d\n",
Index: linux-2.6.15.3/drivers/Makefile
===================================================================
--- linux-2.6.15.3/drivers/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/Makefile	(revision 7613)
@@ -40,7 +40,7 @@
 obj-$(CONFIG_IEEE1394)		+= ieee1394/
 obj-y				+= cdrom/
 obj-$(CONFIG_MTD)		+= mtd/
-obj-$(CONFIG_PCCARD)		+= pcmcia/
+obj-$(CONFIG_PCCARD)		+= pcmcia/        
 obj-$(CONFIG_DIO)		+= dio/
 obj-$(CONFIG_SBUS)		+= sbus/
 obj-$(CONFIG_ZORRO)		+= zorro/
Index: linux-2.6.15.3/drivers/char/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/char/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/char/Kconfig	(revision 7613)
@@ -1013,5 +1013,54 @@
 	  sysfs directory, /sys/devices/platform/telco_clock, with a number of
 	  files for controlling the behavior of this hardware.
 
+config CREATOR_PXA270_LCD
+    tristate "Creator-pxa270 LCD"
+    depends on MACH_CREATOR_PXA270
+    default n
+    
+config CREATOR_PXA270_CMOS
+    tristate "Creator-pxa270 CMOS"
+    depends on MACH_CREATOR_PXA270
+    default n
+    
+config CREATOR_PXA270_CODEC
+    tristate "Creator-pxa270 Codec"
+    depends on MACH_CREATOR_PXA270
+    default n
+    
+config CREATOR_PXA270_INFRARED
+    tristate "Creator-pxa270 Infrared"
+    depends on MACH_CREATOR_PXA270
+    default n
+    
+config CREATOR_PXA270_GPRS
+    tristate "Creator-pxa270 GPRS"
+    depends on MACH_CREATOR_PXA270
+    default n            
+
+config CREATOR_PXA270_DSP_5502
+    tristate "Creator-pxa270 DSP 5502"
+    depends on MACH_CREATOR_PXA270
+    default n 
+    
+config CREATOR_PXA270_FGPA_EP1C6_LOADER
+    tristate "Creator-pxa270 FGPA-EP1C6-LOADER"
+    depends on MACH_CREATOR_PXA270
+    default n     
+    
+config CREATOR_PXA270_FGPA_EP1C6_A2D
+    tristate "Creator-pxa270 FGPA-EP1C6-A2D"
+    depends on MACH_CREATOR_PXA270
+    default n
+    
+config CREATOR_PXA270_A2D_UNDER_UCB1400
+    tristate "Creator-pxa270 A2D Under UCB1400"
+	select CREATOR_PXA270_UCB1400_A2D_ENABLE    
+    depends on MACH_CREATOR_PXA270
+    default n   
+
+config CREATOR_PXA270_UCB1400_A2D_ENABLE
+	bool	 
+   
 endmenu
 
Index: linux-2.6.15.3/drivers/char/create-dsp-5502/hpi.h
===================================================================
--- linux-2.6.15.3/drivers/char/create-dsp-5502/hpi.h	(revision 0)
+++ linux-2.6.15.3/drivers/char/create-dsp-5502/hpi.h	(revision 7613)
@@ -0,0 +1,57 @@
+#ifndef _HPI_H
+#define _HPI_H
+
+#include    "asm/arch/lib/creator_pxa270_addr.h"
+
+void Delay (UI timems);
+
+#define DSP_BASE       (MASTER_ECS3_VIRT+0x0)
+
+// ARM I/O address to CPLD 
+#define REG_HPIC	    (*(volatile unsigned short *)(DSP_BASE + 0x00))
+#define REG_HPID_AINC	(*(volatile unsigned short *)(DSP_BASE + 0x02))
+#define REG_HPIA	    (*(volatile unsigned short *)(DSP_BASE + 0x04))
+#define REG_HPID	    (*(volatile unsigned short *)(DSP_BASE + 0x06))
+#define REG_SLAVE_S     (*(volatile unsigned short *)(DSP_BASE + 0x10))
+#define REG_SLAVE_C     (*(volatile unsigned short *)(DSP_BASE + 0x18))
+
+
+// Host Commands and DSP ACK
+#define STOP_HOST2DSP_CMD           0x00
+#define START_HOST2DSP_CMD          0x11
+#define UPLOAD_HOST2DSP_CMD         0x22
+#define DOWNLOAD_HOST2DSP_CMD       0x33
+#define EXPOSURETIME_HOST2DSP_CMD   0x55
+#define DOWNLOAD_ACK_HOST2DSP_CMD   0xEE
+
+// DSP ACK State.
+#define STOP_DPS_ACK                0x00
+#define START_DSP_ACK               0x11    // wait until DSP finish one block data
+#define UPLOADING_DSP_ACK           0x22    // 0x22 transfer state. 0x55AA-- finish
+#define UPLOAD_END_DSP_ACK          0x55AA  // 0x22 transfer state. 0x55AA-- finish
+#define DOWNLOAD_DSP2HOST_CMD       0x33
+#define DOWNLOAD_ACK_DSP_ACK        0x44
+
+// Data Buffer.
+#define PING_BUFFER_INDEX           1
+#define PONG_BUFFER_INDEX           2
+
+#define HOST_TO_DSP_MAILBOX_ADDR    0x1000
+#define DSP_TO_HOST_MAILBOX_ADDR    0x1080
+
+#define PING_BUFFER_ADDR            0x1100
+#define PONG_BUFFER_ADDR            0X4280
+
+
+#define HINT_BIT_INDEX              2       // Host Notify DSP when Command ready
+#define DSPINT_BIT_INDEX            1       // DSP Notify Host when Command ready
+
+typedef struct MAILBOX {
+        U16      wCommand ;                 // Host/DSP command.
+        U16      wDataWordLength;           // Data Length of Current Transfer
+        U16      wBufferAddress;            // Buffer Pointer
+        U16      wACKState;                 // Command ACK from Host/DSP
+        U16      wExposureTime ;            // CCM Exposure Time. Range 0x01~0x3F.(7 Bits)
+} ST_MAILBOX ;    
+
+#endif // _HPI_H

Property changes on: linux-2.6.15.3/drivers/char/create-dsp-5502/hpi.h
___________________________________________________________________
Name: svn:executable
   + *

Index: linux-2.6.15.3/drivers/char/create-dsp-5502/Makefile
===================================================================
--- linux-2.6.15.3/drivers/char/create-dsp-5502/Makefile	(revision 0)
+++ linux-2.6.15.3/drivers/char/create-dsp-5502/Makefile	(revision 7613)
@@ -0,0 +1,12 @@
+#
+# Makefile for the Create DSP 5502 device drivers.
+#
+# 15 Aug 2000, Christoph Hellwig <hch@infradead.org>
+# Rewritten to use lists instead of if-statements.
+#
+
+
+
+obj-$(CONFIG_CREATOR_PXA270_DSP_5502)			+= creator-pxa270-dsp-5502.o
+creator-pxa270-dsp-5502-objs := creator-pxa270-dsp5502.o halhpiapi.o halhpisys.o 
+

Property changes on: linux-2.6.15.3/drivers/char/create-dsp-5502/Makefile
___________________________________________________________________
Name: svn:executable
   + *

Index: linux-2.6.15.3/drivers/char/defkeymap.c
===================================================================
--- linux-2.6.15.3/drivers/char/defkeymap.c	(revision 0)
+++ linux-2.6.15.3/drivers/char/defkeymap.c	(revision 7613)
@@ -0,0 +1,262 @@
+/* Do not edit this file! It was automatically generated by   */
+/*    loadkeys --mktable defkeymap.map > defkeymap.c          */
+
+#include <linux/types.h>
+#include <linux/keyboard.h>
+#include <linux/kd.h>
+
+u_short plain_map[NR_KEYS] = {
+	0xf200,	0xf01b,	0xf031,	0xf032,	0xf033,	0xf034,	0xf035,	0xf036,
+	0xf037,	0xf038,	0xf039,	0xf030,	0xf02d,	0xf03d,	0xf07f,	0xf009,
+	0xfb71,	0xfb77,	0xfb65,	0xfb72,	0xfb74,	0xfb79,	0xfb75,	0xfb69,
+	0xfb6f,	0xfb70,	0xf05b,	0xf05d,	0xf201,	0xf702,	0xfb61,	0xfb73,
+	0xfb64,	0xfb66,	0xfb67,	0xfb68,	0xfb6a,	0xfb6b,	0xfb6c,	0xf03b,
+	0xf027,	0xf060,	0xf700,	0xf05c,	0xfb7a,	0xfb78,	0xfb63,	0xfb76,
+	0xfb62,	0xfb6e,	0xfb6d,	0xf02c,	0xf02e,	0xf02f,	0xf700,	0xf30c,
+	0xf703,	0xf020,	0xf207,	0xf100,	0xf101,	0xf102,	0xf103,	0xf104,
+	0xf105,	0xf106,	0xf107,	0xf108,	0xf109,	0xf208,	0xf209,	0xf307,
+	0xf308,	0xf309,	0xf30b,	0xf304,	0xf305,	0xf306,	0xf30a,	0xf301,
+	0xf302,	0xf303,	0xf300,	0xf310,	0xf206,	0xf200,	0xf03c,	0xf10a,
+	0xf10b,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf01c,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf118,	0xf601,	0xf602,	0xf117,	0xf600,	0xf119,	0xf115,	0xf116,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+u_short shift_map[NR_KEYS] = {
+	0xf200,	0xf01b,	0xf021,	0xf040,	0xf023,	0xf024,	0xf025,	0xf05e,
+	0xf026,	0xf02a,	0xf028,	0xf029,	0xf05f,	0xf02b,	0xf07f,	0xf009,
+	0xfb51,	0xfb57,	0xfb45,	0xfb52,	0xfb54,	0xfb59,	0xfb55,	0xfb49,
+	0xfb4f,	0xfb50,	0xf07b,	0xf07d,	0xf201,	0xf702,	0xfb41,	0xfb53,
+	0xfb44,	0xfb46,	0xfb47,	0xfb48,	0xfb4a,	0xfb4b,	0xfb4c,	0xf03a,
+	0xf022,	0xf07e,	0xf700,	0xf07c,	0xfb5a,	0xfb58,	0xfb43,	0xfb56,
+	0xfb42,	0xfb4e,	0xfb4d,	0xf03c,	0xf03e,	0xf03f,	0xf700,	0xf30c,
+	0xf703,	0xf020,	0xf207,	0xf10a,	0xf10b,	0xf10c,	0xf10d,	0xf10e,
+	0xf10f,	0xf110,	0xf111,	0xf112,	0xf113,	0xf213,	0xf203,	0xf307,
+	0xf308,	0xf309,	0xf30b,	0xf304,	0xf305,	0xf306,	0xf30a,	0xf301,
+	0xf302,	0xf303,	0xf300,	0xf310,	0xf206,	0xf200,	0xf03e,	0xf10a,
+	0xf10b,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf200,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf20b,	0xf601,	0xf602,	0xf117,	0xf600,	0xf20a,	0xf115,	0xf116,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+u_short altgr_map[NR_KEYS] = {
+	0xf200,	0xf200,	0xf200,	0xf040,	0xf200,	0xf024,	0xf200,	0xf200,
+	0xf07b,	0xf05b,	0xf05d,	0xf07d,	0xf05c,	0xf200,	0xf200,	0xf200,
+	0xfb71,	0xfb77,	0xf918,	0xfb72,	0xfb74,	0xfb79,	0xfb75,	0xfb69,
+	0xfb6f,	0xfb70,	0xf200,	0xf07e,	0xf201,	0xf702,	0xf914,	0xfb73,
+	0xf917,	0xf919,	0xfb67,	0xfb68,	0xfb6a,	0xfb6b,	0xfb6c,	0xf200,
+	0xf200,	0xf200,	0xf700,	0xf200,	0xfb7a,	0xfb78,	0xf916,	0xfb76,
+	0xf915,	0xfb6e,	0xfb6d,	0xf200,	0xf200,	0xf200,	0xf700,	0xf30c,
+	0xf703,	0xf200,	0xf207,	0xf50c,	0xf50d,	0xf50e,	0xf50f,	0xf510,
+	0xf511,	0xf512,	0xf513,	0xf514,	0xf515,	0xf208,	0xf202,	0xf911,
+	0xf912,	0xf913,	0xf30b,	0xf90e,	0xf90f,	0xf910,	0xf30a,	0xf90b,
+	0xf90c,	0xf90d,	0xf90a,	0xf310,	0xf206,	0xf200,	0xf07c,	0xf516,
+	0xf517,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf200,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf118,	0xf601,	0xf602,	0xf117,	0xf600,	0xf119,	0xf115,	0xf116,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+u_short ctrl_map[NR_KEYS] = {
+	0xf200,	0xf200,	0xf200,	0xf000,	0xf01b,	0xf01c,	0xf01d,	0xf01e,
+	0xf01f,	0xf07f,	0xf200,	0xf200,	0xf01f,	0xf200,	0xf008,	0xf200,
+	0xf011,	0xf017,	0xf005,	0xf012,	0xf014,	0xf019,	0xf015,	0xf009,
+	0xf00f,	0xf010,	0xf01b,	0xf01d,	0xf201,	0xf702,	0xf001,	0xf013,
+	0xf004,	0xf006,	0xf007,	0xf008,	0xf00a,	0xf00b,	0xf00c,	0xf200,
+	0xf007,	0xf000,	0xf700,	0xf01c,	0xf01a,	0xf018,	0xf003,	0xf016,
+	0xf002,	0xf00e,	0xf00d,	0xf200,	0xf20e,	0xf07f,	0xf700,	0xf30c,
+	0xf703,	0xf000,	0xf207,	0xf100,	0xf101,	0xf102,	0xf103,	0xf104,
+	0xf105,	0xf106,	0xf107,	0xf108,	0xf109,	0xf208,	0xf204,	0xf307,
+	0xf308,	0xf309,	0xf30b,	0xf304,	0xf305,	0xf306,	0xf30a,	0xf301,
+	0xf302,	0xf303,	0xf300,	0xf310,	0xf206,	0xf200,	0xf200,	0xf10a,
+	0xf10b,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf01c,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf118,	0xf601,	0xf602,	0xf117,	0xf600,	0xf119,	0xf115,	0xf116,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+u_short shift_ctrl_map[NR_KEYS] = {
+	0xf200,	0xf200,	0xf200,	0xf000,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf01f,	0xf200,	0xf200,	0xf200,
+	0xf011,	0xf017,	0xf005,	0xf012,	0xf014,	0xf019,	0xf015,	0xf009,
+	0xf00f,	0xf010,	0xf200,	0xf200,	0xf201,	0xf702,	0xf001,	0xf013,
+	0xf004,	0xf006,	0xf007,	0xf008,	0xf00a,	0xf00b,	0xf00c,	0xf200,
+	0xf200,	0xf200,	0xf700,	0xf200,	0xf01a,	0xf018,	0xf003,	0xf016,
+	0xf002,	0xf00e,	0xf00d,	0xf200,	0xf200,	0xf200,	0xf700,	0xf30c,
+	0xf703,	0xf200,	0xf207,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf208,	0xf200,	0xf307,
+	0xf308,	0xf309,	0xf30b,	0xf304,	0xf305,	0xf306,	0xf30a,	0xf301,
+	0xf302,	0xf303,	0xf300,	0xf310,	0xf206,	0xf200,	0xf200,	0xf200,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf200,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf118,	0xf601,	0xf602,	0xf117,	0xf600,	0xf119,	0xf115,	0xf116,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+u_short alt_map[NR_KEYS] = {
+	0xf200,	0xf81b,	0xf831,	0xf832,	0xf833,	0xf834,	0xf835,	0xf836,
+	0xf837,	0xf838,	0xf839,	0xf830,	0xf82d,	0xf83d,	0xf87f,	0xf809,
+	0xf871,	0xf877,	0xf865,	0xf872,	0xf874,	0xf879,	0xf875,	0xf869,
+	0xf86f,	0xf870,	0xf85b,	0xf85d,	0xf80d,	0xf702,	0xf861,	0xf873,
+	0xf864,	0xf866,	0xf867,	0xf868,	0xf86a,	0xf86b,	0xf86c,	0xf83b,
+	0xf827,	0xf860,	0xf700,	0xf85c,	0xf87a,	0xf878,	0xf863,	0xf876,
+	0xf862,	0xf86e,	0xf86d,	0xf82c,	0xf82e,	0xf82f,	0xf700,	0xf30c,
+	0xf703,	0xf820,	0xf207,	0xf500,	0xf501,	0xf502,	0xf503,	0xf504,
+	0xf505,	0xf506,	0xf507,	0xf508,	0xf509,	0xf208,	0xf209,	0xf907,
+	0xf908,	0xf909,	0xf30b,	0xf904,	0xf905,	0xf906,	0xf30a,	0xf901,
+	0xf902,	0xf903,	0xf900,	0xf310,	0xf206,	0xf200,	0xf83c,	0xf50a,
+	0xf50b,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf01c,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf118,	0xf210,	0xf211,	0xf117,	0xf600,	0xf119,	0xf115,	0xf116,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+u_short ctrl_alt_map[NR_KEYS] = {
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf811,	0xf817,	0xf805,	0xf812,	0xf814,	0xf819,	0xf815,	0xf809,
+	0xf80f,	0xf810,	0xf200,	0xf200,	0xf201,	0xf702,	0xf801,	0xf813,
+	0xf804,	0xf806,	0xf807,	0xf808,	0xf80a,	0xf80b,	0xf80c,	0xf200,
+	0xf200,	0xf200,	0xf700,	0xf200,	0xf81a,	0xf818,	0xf803,	0xf816,
+	0xf802,	0xf80e,	0xf80d,	0xf200,	0xf200,	0xf200,	0xf700,	0xf30c,
+	0xf703,	0xf200,	0xf207,	0xf500,	0xf501,	0xf502,	0xf503,	0xf504,
+	0xf505,	0xf506,	0xf507,	0xf508,	0xf509,	0xf208,	0xf200,	0xf307,
+	0xf308,	0xf309,	0xf30b,	0xf304,	0xf305,	0xf306,	0xf30a,	0xf301,
+	0xf302,	0xf303,	0xf300,	0xf20c,	0xf206,	0xf200,	0xf200,	0xf50a,
+	0xf50b,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+	0xf30e,	0xf702,	0xf30d,	0xf200,	0xf701,	0xf205,	0xf114,	0xf603,
+	0xf118,	0xf601,	0xf602,	0xf117,	0xf600,	0xf119,	0xf115,	0xf20c,
+	0xf11a,	0xf10c,	0xf10d,	0xf11b,	0xf11c,	0xf110,	0xf311,	0xf11d,
+	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,	0xf200,
+};
+
+ushort *key_maps[MAX_NR_KEYMAPS] = {
+	plain_map, shift_map, altgr_map, NULL,
+	ctrl_map, shift_ctrl_map, NULL, NULL,
+	alt_map, NULL, NULL, NULL,
+	ctrl_alt_map, NULL
+};
+
+unsigned int keymap_count = 7;
+
+/*
+ * Philosophy: most people do not define more strings, but they who do
+ * often want quite a lot of string space. So, we statically allocate
+ * the default and allocate dynamically in chunks of 512 bytes.
+ */
+
+char func_buf[] = {
+	'\033', '[', '[', 'A', 0, 
+	'\033', '[', '[', 'B', 0, 
+	'\033', '[', '[', 'C', 0, 
+	'\033', '[', '[', 'D', 0, 
+	'\033', '[', '[', 'E', 0, 
+	'\033', '[', '1', '7', '~', 0, 
+	'\033', '[', '1', '8', '~', 0, 
+	'\033', '[', '1', '9', '~', 0, 
+	'\033', '[', '2', '0', '~', 0, 
+	'\033', '[', '2', '1', '~', 0, 
+	'\033', '[', '2', '3', '~', 0, 
+	'\033', '[', '2', '4', '~', 0, 
+	'\033', '[', '2', '5', '~', 0, 
+	'\033', '[', '2', '6', '~', 0, 
+	'\033', '[', '2', '8', '~', 0, 
+	'\033', '[', '2', '9', '~', 0, 
+	'\033', '[', '3', '1', '~', 0, 
+	'\033', '[', '3', '2', '~', 0, 
+	'\033', '[', '3', '3', '~', 0, 
+	'\033', '[', '3', '4', '~', 0, 
+	'\033', '[', '1', '~', 0, 
+	'\033', '[', '2', '~', 0, 
+	'\033', '[', '3', '~', 0, 
+	'\033', '[', '4', '~', 0, 
+	'\033', '[', '5', '~', 0, 
+	'\033', '[', '6', '~', 0, 
+	'\033', '[', 'M', 0, 
+	'\033', '[', 'P', 0, 
+};
+
+char *funcbufptr = func_buf;
+int funcbufsize = sizeof(func_buf);
+int funcbufleft = 0;          /* space left */
+
+char *func_table[MAX_NR_FUNC] = {
+	func_buf + 0,
+	func_buf + 5,
+	func_buf + 10,
+	func_buf + 15,
+	func_buf + 20,
+	func_buf + 25,
+	func_buf + 31,
+	func_buf + 37,
+	func_buf + 43,
+	func_buf + 49,
+	func_buf + 55,
+	func_buf + 61,
+	func_buf + 67,
+	func_buf + 73,
+	func_buf + 79,
+	func_buf + 85,
+	func_buf + 91,
+	func_buf + 97,
+	func_buf + 103,
+	func_buf + 109,
+	func_buf + 115,
+	func_buf + 120,
+	func_buf + 125,
+	func_buf + 130,
+	func_buf + 135,
+	func_buf + 140,
+	func_buf + 145,
+	NULL,
+	NULL,
+	func_buf + 149,
+	NULL,
+};
+
+struct kbdiacr accent_table[MAX_DIACR] = {
+	{'`', 'A', '\300'},	{'`', 'a', '\340'},
+	{'\'', 'A', '\301'},	{'\'', 'a', '\341'},
+	{'^', 'A', '\302'},	{'^', 'a', '\342'},
+	{'~', 'A', '\303'},	{'~', 'a', '\343'},
+	{'"', 'A', '\304'},	{'"', 'a', '\344'},
+	{'O', 'A', '\305'},	{'o', 'a', '\345'},
+	{'0', 'A', '\305'},	{'0', 'a', '\345'},
+	{'A', 'A', '\305'},	{'a', 'a', '\345'},
+	{'A', 'E', '\306'},	{'a', 'e', '\346'},
+	{',', 'C', '\307'},	{',', 'c', '\347'},
+	{'`', 'E', '\310'},	{'`', 'e', '\350'},
+	{'\'', 'E', '\311'},	{'\'', 'e', '\351'},
+	{'^', 'E', '\312'},	{'^', 'e', '\352'},
+	{'"', 'E', '\313'},	{'"', 'e', '\353'},
+	{'`', 'I', '\314'},	{'`', 'i', '\354'},
+	{'\'', 'I', '\315'},	{'\'', 'i', '\355'},
+	{'^', 'I', '\316'},	{'^', 'i', '\356'},
+	{'"', 'I', '\317'},	{'"', 'i', '\357'},
+	{'-', 'D', '\320'},	{'-', 'd', '\360'},
+	{'~', 'N', '\321'},	{'~', 'n', '\361'},
+	{'`', 'O', '\322'},	{'`', 'o', '\362'},
+	{'\'', 'O', '\323'},	{'\'', 'o', '\363'},
+	{'^', 'O', '\324'},	{'^', 'o', '\364'},
+	{'~', 'O', '\325'},	{'~', 'o', '\365'},
+	{'"', 'O', '\326'},	{'"', 'o', '\366'},
+	{'/', 'O', '\330'},	{'/', 'o', '\370'},
+	{'`', 'U', '\331'},	{'`', 'u', '\371'},
+	{'\'', 'U', '\332'},	{'\'', 'u', '\372'},
+	{'^', 'U', '\333'},	{'^', 'u', '\373'},
+	{'"', 'U', '\334'},	{'"', 'u', '\374'},
+	{'\'', 'Y', '\335'},	{'\'', 'y', '\375'},
+	{'T', 'H', '\336'},	{'t', 'h', '\376'},
+	{'s', 's', '\337'},	{'"', 'y', '\377'},
+	{'s', 'z', '\337'},	{'i', 'j', '\377'},
+};
+
+unsigned int accent_table_size = 68;
Index: linux-2.6.15.3/drivers/char/Makefile
===================================================================
--- linux-2.6.15.3/drivers/char/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/char/Makefile	(revision 7613)
@@ -96,6 +96,16 @@
 # Files generated that shall be removed upon make clean
 clean-files := consolemap_deftbl.c defkeymap.c qtronixmap.c
 
+obj-$(CONFIG_CREATOR_PXA270_LCD) +=   creator-pxa270-lcd.o
+obj-$(CONFIG_CREATOR_PXA270_CMOS) +=  creator-pxa270-cmos.o
+obj-$(CONFIG_CREATOR_PXA270_CODEC) += creator-pxa270-codec.o
+obj-$(CONFIG_CREATOR_PXA270_INFRARED) += creator-pxa270-infrared.o
+obj-$(CONFIG_CREATOR_PXA270_GPRS) += creator-pxa270-gprs.o
+obj-$(CONFIG_CREATOR_PXA270_DSP_5502) += create-dsp-5502/
+obj-$(CONFIG_CREATOR_PXA270_FGPA_EP1C6_LOADER) += creator-pxa270-fpga-ep1c6-loader.o
+obj-$(CONFIG_CREATOR_PXA270_FGPA_EP1C6_A2D) += creator-pxa270-fpga-ep1c6-a2d.o
+obj-$(CONFIG_CREATOR_PXA270_A2D_UNDER_UCB1400) += creator-pxa270-a2d-under-ucb1400-driver.o
+
 quiet_cmd_conmk = CONMK   $@
       cmd_conmk = scripts/conmakehash $< > $@
 
Index: linux-2.6.15.3/drivers/char/consolemap_deftbl.c
===================================================================
--- linux-2.6.15.3/drivers/char/consolemap_deftbl.c	(revision 0)
+++ linux-2.6.15.3/drivers/char/consolemap_deftbl.c	(revision 7613)
@@ -0,0 +1,86 @@
+/*
+ * Do not edit this file; it was automatically generated by
+ *
+ * conmakehash drivers/char/cp437.uni > [this file]
+ *
+ */
+
+#include <linux/types.h>
+
+u8 dfont_unicount[256] = 
+{
+	  1,   1,   1,   1,   2,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  2,   2,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   2,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   2,   2,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   5,   1,   2,   1,   4,   1,   1,
+	  1,   5,   1,   2,   1,   1,   1,   5,
+	  1,   1,   2,   1,   1,   4,   1,   1,
+	  1,   2,   1,   1,   1,   1,   1,   3,
+	  1,   2,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   2,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  2,   2,   1,   1,   2,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   2,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   2,   1,   1,   1,   1,   2,   1,
+	  2,   1,   2,   1,   1,   2,   1,   1,
+	  1,   1,   1,   1,   1,   1,   1,   1,
+	  1,   1,   1,   1,   1,   1,   2,   1
+};
+
+u16 dfont_unitable[298] = 
+{
+	0x0000, 0x263a, 0x263b, 0x2665, 0x2666, 0x25c6, 0x2663, 0x2660,
+	0x2022, 0x25d8, 0x25cb, 0x25d9, 0x2642, 0x2640, 0x266a, 0x266b,
+	0x263c, 0x25b6, 0x25ba, 0x25c0, 0x25c4, 0x2195, 0x203c, 0x00b6,
+	0x00a7, 0x25ac, 0x21a8, 0x2191, 0x2193, 0x2192, 0x2190, 0x221f,
+	0x2194, 0x25b2, 0x25bc, 0x0020, 0x0021, 0x0022, 0x00a8, 0x0023,
+	0x0024, 0x0025, 0x0026, 0x0027, 0x0028, 0x0029, 0x002a, 0x002b,
+	0x002c, 0x00b8, 0x002d, 0x00ad, 0x002e, 0x002f, 0x0030, 0x0031,
+	0x0032, 0x0033, 0x0034, 0x0035, 0x0036, 0x0037, 0x0038, 0x0039,
+	0x003a, 0x003b, 0x003c, 0x003d, 0x003e, 0x003f, 0x0040, 0x0041,
+	0x00c0, 0x00c1, 0x00c2, 0x00c3, 0x0042, 0x0043, 0x00a9, 0x0044,
+	0x0045, 0x00c8, 0x00ca, 0x00cb, 0x0046, 0x0047, 0x0048, 0x0049,
+	0x00cc, 0x00cd, 0x00ce, 0x00cf, 0x004a, 0x004b, 0x212a, 0x004c,
+	0x004d, 0x004e, 0x004f, 0x00d2, 0x00d3, 0x00d4, 0x00d5, 0x0050,
+	0x0051, 0x0052, 0x00ae, 0x0053, 0x0054, 0x0055, 0x00d9, 0x00da,
+	0x00db, 0x0056, 0x0057, 0x0058, 0x0059, 0x00dd, 0x005a, 0x005b,
+	0x005c, 0x005d, 0x005e, 0x005f, 0x23bd, 0xf804, 0x0060, 0x0061,
+	0x00e3, 0x0062, 0x0063, 0x0064, 0x0065, 0x0066, 0x0067, 0x0068,
+	0x0069, 0x006a, 0x006b, 0x006c, 0x006d, 0x006e, 0x006f, 0x00f5,
+	0x0070, 0x0071, 0x0072, 0x0073, 0x0074, 0x0075, 0x0076, 0x0077,
+	0x0078, 0x00d7, 0x0079, 0x00fd, 0x007a, 0x007b, 0x007c, 0x00a5,
+	0x007d, 0x007e, 0x2302, 0x00c7, 0x00fc, 0x00e9, 0x00e2, 0x00e4,
+	0x00e0, 0x00e5, 0x00e7, 0x00ea, 0x00eb, 0x00e8, 0x00ef, 0x00ee,
+	0x00ec, 0x00c4, 0x00c5, 0x212b, 0x00c9, 0x00e6, 0x00c6, 0x00f4,
+	0x00f6, 0x00f2, 0x00fb, 0x00f9, 0x00ff, 0x00d6, 0x00dc, 0x00a2,
+	0x00a3, 0x00a5, 0x20a7, 0x0192, 0x00e1, 0x00ed, 0x00f3, 0x00fa,
+	0x00f1, 0x00d1, 0x00aa, 0x00ba, 0x00bf, 0x2310, 0x00ac, 0x00bd,
+	0x00bc, 0x00a1, 0x00ab, 0x00bb, 0x2591, 0x2592, 0x2593, 0x2502,
+	0x2524, 0x2561, 0x2562, 0x2556, 0x2555, 0x2563, 0x2551, 0x2557,
+	0x255d, 0x255c, 0x255b, 0x2510, 0x2514, 0x2534, 0x252c, 0x251c,
+	0x2500, 0x253c, 0x255e, 0x255f, 0x255a, 0x2554, 0x2569, 0x2566,
+	0x2560, 0x2550, 0x256c, 0x2567, 0x2568, 0x2564, 0x2565, 0x2559,
+	0x2558, 0x2552, 0x2553, 0x256b, 0x256a, 0x2518, 0x250c, 0x2588,
+	0x2584, 0x258c, 0x2590, 0x2580, 0x03b1, 0x03b2, 0x00df, 0x0393,
+	0x03c0, 0x03a3, 0x03c3, 0x00b5, 0x03bc, 0x03c4, 0x03a6, 0x00d8,
+	0x0398, 0x03a9, 0x2126, 0x03b4, 0x221e, 0x03c6, 0x00f8, 0x03b5,
+	0x2229, 0x2261, 0x00b1, 0x2265, 0x2264, 0x2320, 0x2321, 0x00f7,
+	0x2248, 0x00b0, 0x2219, 0x00b7, 0x221a, 0x207f, 0x00b2, 0x25a0,
+	0xfffd, 0x00a0
+};
Index: linux-2.6.15.3/drivers/net/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/net/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/net/Kconfig	(revision 7613)
@@ -842,18 +842,6 @@
 	  <file:Documentation/networking/net-modules.txt>. The module
 	  will be called smc9194.
 
-config DM9000
-	tristate "DM9000 support"
-	depends on ARM && NET_ETHERNET
-	select CRC32
-	select MII
-	---help---
-	  Support for DM9000 chipset.
-
-	  To compile this driver as a module, choose M here and read
-	  <file:Documentation/networking/net-modules.txt>.  The module will be
-	  called dm9000.
-
 config NET_VENDOR_RACAL
 	bool "Racal-Interlan (Micom) NI cards"
 	depends on NET_ETHERNET && ISA
Index: linux-2.6.15.3/drivers/net/Makefile
===================================================================
--- linux-2.6.15.3/drivers/net/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/net/Makefile	(revision 7613)
@@ -188,7 +188,6 @@
 obj-$(CONFIG_IBMVETH) += ibmveth.o
 obj-$(CONFIG_S2IO) += s2io.o
 obj-$(CONFIG_SMC91X) += smc91x.o
-obj-$(CONFIG_DM9000) += dm9000.o
 obj-$(CONFIG_FEC_8XX) += fec_8xx/
 
 obj-$(CONFIG_ARM) += arm/
Index: linux-2.6.15.3/drivers/net/smc91x.c
===================================================================
--- linux-2.6.15.3/drivers/net/smc91x.c	(revision 1)
+++ linux-2.6.15.3/drivers/net/smc91x.c	(revision 7613)
@@ -1922,6 +1922,33 @@
 	/* Get the MAC address */
 	SMC_SELECT_BANK(1);
 	SMC_GET_MAC_ADDR(dev->dev_addr);
+	printk(KERN_NOTICE "get macaddr from net=%x:%x:%x:%x:%x:%x\n", dev->dev_addr[0],dev->dev_addr[1],dev->dev_addr[2],dev->dev_addr[3],dev->dev_addr[4],dev->dev_addr[5]);
+	if (!is_valid_ether_addr(dev->dev_addr)) {
+		char *buf;        
+		int ilen;
+		int iMac[6];
+		buf = saved_command_line;
+		ilen = strlen(buf);
+		if((buf=strstr(buf, "ether"))!=NULL)
+		{
+			buf=strchr(buf, '=');
+			buf=buf+1;
+			sscanf(buf, "%x:%x:%x:%x:%x:%x", &(iMac[0]), &(iMac[1]),&(iMac[2]),&(iMac[3]),&(iMac[4]),&(iMac[5]) ); 
+		    for(i=0; i<6; i++)
+		    	dev->dev_addr[i] = iMac[i]; 
+			printk(KERN_NOTICE "get ethaddr from cmdline=%x:%x:%x:%x:%x:%x\n", dev->dev_addr[0],dev->dev_addr[1],dev->dev_addr[2],dev->dev_addr[3],dev->dev_addr[4],dev->dev_addr[5]);
+		}
+		if(!is_valid_ether_addr(dev->dev_addr))
+		{
+			dev->dev_addr[0] = 0x00; 
+			dev->dev_addr[1] = 0x11; 
+			dev->dev_addr[2] = 0x22; 
+			dev->dev_addr[3] = 0x33; 
+			dev->dev_addr[4] = 0x44; 
+			dev->dev_addr[5] = 0x55; 
+			printk(KERN_NOTICE "setting net default macaddr=%x:%x:%x:%x:%x:%x\n", dev->dev_addr[0],dev->dev_addr[1],dev->dev_addr[2],dev->dev_addr[3],dev->dev_addr[4],dev->dev_addr[5]);
+		} 
+	}		
 
 	/* now, reset the chip, and put it into a known state */
 	smc_reset(dev);
Index: linux-2.6.15.3/drivers/usb/gadget/pxa2xx_udc.c
===================================================================
--- linux-2.6.15.3/drivers/usb/gadget/pxa2xx_udc.c	(revision 1)
+++ linux-2.6.15.3/drivers/usb/gadget/pxa2xx_udc.c	(revision 7613)
@@ -24,8 +24,8 @@
  *
  */
 
-#undef	DEBUG
-// #define	VERBOSE	DBG_VERBOSE
+#define	DEBUG
+#define	VERBOSE	DBG_VERBOSE
 
 #include <linux/config.h>
 #include <linux/module.h>
Index: linux-2.6.15.3/drivers/usb/host/ohci-pxa27x.c
===================================================================
--- linux-2.6.15.3/drivers/usb/host/ohci-pxa27x.c	(revision 1)
+++ linux-2.6.15.3/drivers/usb/host/ohci-pxa27x.c	(revision 7613)
@@ -97,7 +97,8 @@
 	/* This could be properly abstracted away through the
 	   device data the day more machines are supported and
 	   their differences can be figured out correctly. */
-	if (machine_is_mainstone()) {
+//	if (machine_is_mainstone() || machine_is_colibri()) {
+	if (machine_is_mainstone() || machine_is_creator_pxa270()) {
 		/* setup Port1 GPIO pin. */
 		pxa_gpio_mode( 88 | GPIO_ALT_FN_1_IN);	/* USBHPWR1 */
 		pxa_gpio_mode( 89 | GPIO_ALT_FN_2_OUT);	/* USBHPEN1 */
Index: linux-2.6.15.3/drivers/block/sbull.c
===================================================================
--- linux-2.6.15.3/drivers/block/sbull.c	(revision 0)
+++ linux-2.6.15.3/drivers/block/sbull.c	(revision 7613)
@@ -0,0 +1,156 @@
+//sbull.c Source Code :
+#include <linux/init.h>
+#include <linux/module.h>
+#include <linux/kernel.h>
+#include <linux/fs.h>
+#include <linux/genhd.h>
+#include <linux/blkdev.h>
+#include <linux/vmalloc.h>
+
+#define KERNEL_SECTOR_SIZE 512
+// define sector size is 512 in kernel
+// HARDWARE define (ramdisk size = 20000*512 = 10M bytes)
+int nsectors = 20000;
+// number of secotrs
+int hardsector_size = 512; 
+// sector size = 512 bytes
+int dev_major_nr = 0;
+// system automatically allocate major number
+int SBULL_MINORS = 1; 
+// MAX minor number is 1 ,ie.only one partition
+char dev_name[8] = "sbull";
+MODULE_AUTHOR("wisemark");
+MODULE_LICENSE("Dual BSD/GPL");
+
+struct sbull_dev
+{
+	unsigned long
+	size;
+	unsigned char 
+	*data;
+	spinlock_t
+	lock;
+	struct gendisk *gd;
+	struct block_device *bdev;
+}Device;
+static struct sbull_dev *dev = &Device;
+
+// function prototype
+static int sbull_open(struct inode *inode, struct file *filp);
+static int sbull_release(struct inode *inode, struct file *filp);
+static void sbull_transfer(struct sbull_dev *dev, unsigned long sector,
+unsigned long nsect, char *buffer, int write); 
+static void sbull_request(request_queue_t *q);
+
+static struct block_device_operations sbull_ops =
+{
+	.owner = THIS_MODULE,
+	.open = sbull_open,
+	.release = sbull_release
+};
+
+static int sbull_open(struct inode *inode, struct file *filp)
+{
+	printk("sbull_open(): do nothing...\n");
+	return 0;
+}
+
+static int sbull_release(struct inode *inode, struct file *filp)
+{
+	printk("sbull_release(): do nothing...\n");
+	return 0;
+}
+ 
+static int sbull_init(void)
+{
+	printk("sbull_init(): initial sbull...\n");
+	
+	// initial struct sbull_dev
+	dev_major_nr = register_blkdev(dev_major_nr,dev_name);
+	if (dev_major_nr <= 0)
+	{
+		printk("sbull_init(): unable to get major number\n");
+		return 0;
+	}
+	memset(dev, 0, sizeof(struct sbull_dev));
+	dev->size = nsectors * hardsector_size;
+	dev->data = vmalloc(dev->size);
+	if (dev->data == NULL)
+	{
+		printk("sbull_init(): vmalloc failure.\n");
+		return 0;
+	}
+	
+	// initial spinlock
+	spin_lock_init(&dev->lock);
+	
+	// initial gendisk struct *gd
+	dev->gd = alloc_disk(SBULL_MINORS); 
+	if (!dev->gd)
+	{
+		printk("sbull_init(): allocate disk failure.\n");
+		return 0;
+	}
+	dev->gd->major = dev_major_nr;
+	dev->gd->first_minor = 0;
+	dev->gd->fops = &sbull_ops;
+	// file operations pointer
+	dev->gd->private_data = dev;
+	// for private use
+	strcpy(dev->gd->disk_name,"sbulla");
+	// device name is sbull
+	set_capacity(dev->gd,nsectors);
+	// initial queue
+	dev->gd->queue = blk_init_queue(sbull_request, &dev->lock);
+	add_disk(dev->gd);
+	return 0;
+}
+
+static void sbull_request(request_queue_t *q)
+{
+	struct request *req;
+	while((req = elv_next_request(q)) != NULL)
+	{
+		struct sbull_dev *dev = req->rq_disk->private_data;
+		if( !blk_fs_request(req))
+		{
+			end_request(req,0);
+		}
+		else
+		{
+			sbull_transfer(dev, req->sector, 
+			req->current_nr_sectors,
+			req->buffer, rq_data_dir(req));
+			end_request(req,1);
+		} 
+	}
+}
+
+static void sbull_transfer(struct sbull_dev *dev, unsigned long sector, 
+							unsigned long nsect, char *buffer, int write) 
+{
+	unsigned long offset = sector*KERNEL_SECTOR_SIZE;
+	unsigned long nbytes = nsect*KERNEL_SECTOR_SIZE;
+	if( (offset+nbytes) > dev->size )
+	{
+		printk(KERN_NOTICE "beyond-end write (%ld %ld)\n",
+		offset, nbytes); 
+		return;
+	}
+	if(write)
+		memcpy(dev->data + offset, buffer, nbytes);
+	else
+		memcpy(buffer, dev->data + offset, nbytes);
+}
+
+static void sbull_exit(void)
+{
+	printk("sbull_exit(): exit sbull...\n");
+	del_gendisk(dev->gd);
+	put_disk(dev->gd);
+	unregister_blkdev(dev_major_nr, dev_name);
+	vfree(dev->data);
+}
+
+module_init(sbull_init);
+module_exit(sbull_exit);
\ No newline at end of file
Index: linux-2.6.15.3/drivers/pcmcia/Makefile
===================================================================
--- linux-2.6.15.3/drivers/pcmcia/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/pcmcia/Makefile	(revision 7613)
@@ -68,4 +68,5 @@
 pxa2xx_cs-$(CONFIG_ARCH_LUBBOCK)		+= pxa2xx_lubbock.o sa1111_generic.o
 pxa2xx_cs-$(CONFIG_MACH_MAINSTONE)		+= pxa2xx_mainstone.o
 pxa2xx_cs-$(CONFIG_PXA_SHARPSL)			+= pxa2xx_sharpsl.o
+pxa2xx_cs-$(CONFIG_MACH_CREATOR_PXA270)	+= pxa2xx-creator-pxa270.o
 
Index: linux-2.6.15.3/drivers/pcmcia/pxa2xx-creator-pxa270.c
===================================================================
--- linux-2.6.15.3/drivers/pcmcia/pxa2xx-creator-pxa270.c	(revision 0)
+++ linux-2.6.15.3/drivers/pcmcia/pxa2xx-creator-pxa270.c	(revision 7613)
@@ -0,0 +1,211 @@
+/*
+ * linux26/drivers/pcmcia/pxa2xx-creator-pxa270.c
+ *
+ */
+
+#include <linux/kernel.h>
+#include <linux/sched.h>
+#include <linux/platform_device.h>
+
+#include <pcmcia/ss.h>
+
+#include <asm/delay.h>
+#include <asm/hardware.h>
+#include <asm/irq.h>
+#include <asm/arch/creator-pxa270.h>
+
+#include "soc_common.h"
+
+#define DEBUG_COL_PCMCIA
+
+#define DEBUG
+#ifdef DEBUG
+#define MSG(string, args...) printk("<1>%s(), line=%d" string, __FUNCTION__, __LINE__, ##args)
+#else   
+#define MSG(string, args...)
+#endif
+
+#ifdef DEBUG_COL_PCMCIA
+#define MARK printk("<1> %s: %d\n", __FUNCTION__, __LINE__);
+#else
+//#define MARK (0)
+#endif
+#ifdef PCMCIA_DEBUG
+int pc_debug = PCMCIA_DEBUG;
+#endif
+
+static struct pcmcia_irqs irqs[] = {
+    { 0, CREATOR_CFI_IRQ, "PCMCIA CD"},
+};
+
+static int creator_pxa270_pcmcia_init_dev(struct soc_pcmcia_socket *skt)
+{
+    printk("Create-XScale-PXA270 PCMCIA\n");
+    /* set power GPIO; switch off */
+
+    /* set PCMCIA AFs */
+    GPSR(GPIO_PCMCIA_NPOE) |= GPIO_bit(GPIO_PCMCIA_NPOE);
+    pxa_gpio_mode(GPIO_PCMCIA_NPOE | GPIO_PCMCIA_NPOE_AF);
+
+    GPSR(GPIO_PCMCIA_NPIOR) |= GPIO_bit(GPIO_PCMCIA_NPIOR);
+    pxa_gpio_mode(GPIO_PCMCIA_NPIOR | GPIO_PCMCIA_NPIOR_AF);
+
+    GPSR(GPIO_PCMCIA_NPIOW) |= GPIO_bit(GPIO_PCMCIA_NPIOW);
+    pxa_gpio_mode(GPIO_PCMCIA_NPIOW | GPIO_PCMCIA_NPIOW_AF);
+
+    GPSR(GPIO_PCMCIA_NPCE1) |= GPIO_bit(GPIO_PCMCIA_NPCE1);
+    pxa_gpio_mode(GPIO_PCMCIA_NPCE1 | GPIO_PCMCIA_NPCE1_AF);
+
+    GPCR(GPIO_PCMCIA_NPCE2) |= GPIO_bit(GPIO_PCMCIA_NPCE2);
+    pxa_gpio_mode(GPIO_PCMCIA_NPCE2 | GPIO_PCMCIA_NPCE2_AF);
+
+    GPSR(GPIO_PCMCIA_NPREG) |= GPIO_bit(GPIO_PCMCIA_NPREG);
+    pxa_gpio_mode(GPIO_PCMCIA_NPREG | GPIO_PCMCIA_NPREG_AF);
+
+    pxa_gpio_mode(GPIO_PCMCIA_NPWAIT | GPIO_PCMCIA_NPWAIT_AF);
+
+    pxa_gpio_mode(GPIO_PCMCIA_NPIOIS16 | GPIO_PCMCIA_NPIOIS16_AF);
+
+    GPSR(GPIO_PCMCIA_PSKTSEL) |= GPIO_bit(GPIO_PCMCIA_PSKTSEL);
+    pxa_gpio_mode(GPIO_PCMCIA_PSKTSEL | GPIO_PCMCIA_PSKTSEL_AF);
+
+    /* set other PCMCIA GPIOs */
+
+    /* switch power on */
+    PCC_PWR_ON();
+
+	/* reset the PCMCIA controller */
+		PCC_RESET_ASSERT
+		udelay(500);
+		PCC_RESET_DEASSERT
+	
+
+    /* set interrupts */	
+    skt->irq = CREATOR_CF_IRQ;	
+    return soc_pcmcia_request_irqs(skt, irqs, ARRAY_SIZE(irqs));
+}
+
+static void creator_pxa270_pcmcia_shutdown(struct soc_pcmcia_socket *skt)
+{
+	soc_pcmcia_free_irqs(skt, irqs, ARRAY_SIZE(irqs));
+
+    /* switch power off */
+    PCC_PWR_OFF();
+}
+
+static void creator_pxa270_pcmcia_socket_state(struct soc_pcmcia_socket *skt,
+                                        struct pcmcia_state *state)
+{
+	//memset(state, 0, sizeof(*state));
+
+    /* these are gpios */
+	state->detect = (PCC_DETECT) ? 0 : 1;    /* active high??? */
+	state->ready =  (PCC_READY) ? 1 : 0;
+/*
+    printk(KERN_INFO "CF status: detect: %u, ready: %u\n",
+           GPLR(84) & GPIO_bit(84),
+           GPLR(1) & GPIO_bit(1));
+*/
+
+	state->bvd1   = PCC_BVD1() ? 1 : 0;
+	state->bvd2   = PCC_BVD2() ? 1 : 0;
+	state->wrprot = 0; /* r/w all the time */
+	state->vs_3v  = PCC_VS3V() ? 1 : 0;
+	state->vs_Xv  = PCC_VS5V() ? 1 : 0;
+}
+
+static int creator_pxa270_pcmcia_configure_socket(struct soc_pcmcia_socket *skt,
+                                           socket_state_t const *state)
+{
+    unsigned long flags;
+ 
+    local_irq_save(flags);
+	/* configure Vcc and Vpp */
+    if (state->Vcc == 0 && state->Vpp == 0)
+    {
+        PCC_PWR_OFF();   
+    }
+    else if (state->Vcc == 33 && state->Vpp < 50)
+    {
+        PCC_PWR_ON();       
+    }
+    else
+    {
+        printk(KERN_ERR "%s(): unsupported Vcc %u Vpp %u combination\n",
+               __FUNCTION__, state->Vcc, state->Vpp);              
+        return -1;
+    }
+
+    /* reset PCMCIA if requested */
+    if (state->flags & SS_RESET)
+    {
+        PCC_RESET_ASSERT		//JUPITER : ???   
+    }
+    else{
+		PCC_RESET_DEASSERT        
+    }
+
+    local_irq_restore(flags);
+    udelay(200);   
+	return 0;
+}
+
+static void creator_pxa270_pcmcia_socket_init(struct soc_pcmcia_socket *skt)
+{
+}
+
+static void creator_pxa270_pcmcia_socket_suspend(struct soc_pcmcia_socket *skt)
+{
+}
+
+struct pcmcia_low_level creator_pxa270_pcmcia_ops = { 
+    .owner             = THIS_MODULE,
+    .hw_init           = creator_pxa270_pcmcia_init_dev,
+    .hw_shutdown       = creator_pxa270_pcmcia_shutdown,
+    .socket_state      = creator_pxa270_pcmcia_socket_state,
+    .configure_socket  = creator_pxa270_pcmcia_configure_socket,
+    .socket_init       = creator_pxa270_pcmcia_socket_init,
+    .socket_suspend    = creator_pxa270_pcmcia_socket_suspend,
+    .first             = 0,
+    .nr                = 1
+};
+
+
+
+static struct platform_device *creator_pxa270_pcmcia_device;
+
+static int __init creator_pxa270_pcmcia_init(void)
+{
+    int ret;
+
+    creator_pxa270_pcmcia_device = kmalloc(sizeof(*creator_pxa270_pcmcia_device), GFP_KERNEL);
+    if (!creator_pxa270_pcmcia_device)
+        return -ENOMEM;
+    memset(creator_pxa270_pcmcia_device, 0, sizeof(*creator_pxa270_pcmcia_device));
+    creator_pxa270_pcmcia_device->name = "pxa2xx-pcmcia";
+    creator_pxa270_pcmcia_device->dev.platform_data = &creator_pxa270_pcmcia_ops;
+
+    ret = platform_device_register(creator_pxa270_pcmcia_device);
+    if (ret)
+        kfree(creator_pxa270_pcmcia_device);
+
+    return ret;    
+}
+
+
+static void __exit creator_pxa270_pcmcia_exit(void)
+{
+    /* Are there still references to creator_pxa270_pcmcia_device?
+     * I don't know, so I'd better not free it.
+     * Actually, I don't really care, as I don't really support
+     * this driver as module anyway...
+     */
+    platform_device_unregister(creator_pxa270_pcmcia_device);
+}
+
+
+module_init(creator_pxa270_pcmcia_init);
+module_exit(creator_pxa270_pcmcia_exit);
+
+MODULE_DESCRIPTION("Create XScale-PXA270 CF Support");
+MODULE_LICENSE("GPL");
Index: linux-2.6.15.3/drivers/pcmcia/ds.c
===================================================================
--- linux-2.6.15.3/drivers/pcmcia/ds.c	(revision 1)
+++ linux-2.6.15.3/drivers/pcmcia/ds.c	(revision 7613)
@@ -43,13 +43,13 @@
 MODULE_LICENSE("GPL");
 
 #ifdef DEBUG
-int ds_pc_debug;
+int ds_pc_debug=1;
 
 module_param_named(pc_debug, ds_pc_debug, int, 0644);
 
 #define ds_dbg(lvl, fmt, arg...) do {				\
 	if (ds_pc_debug > (lvl))					\
-		printk(KERN_DEBUG "ds: " fmt , ## arg);		\
+		printk(KERN_ALERT "ds: " fmt , ## arg);		\
 } while (0)
 #else
 #define ds_dbg(lvl, fmt, arg...) do { } while (0)
@@ -786,6 +786,8 @@
 	int i, length = 0;
 	u32 hash[4] = { 0, 0, 0, 0};
 
+	ds_dbg(1, "before pcmcia_bus_hotplug\n");
+
 	if (!dev)
 		return -ENODEV;
 
@@ -826,7 +828,7 @@
 				hash[2],
 				hash[3]))
 		return -ENOMEM;
-
+	ds_dbg(1, "after pcmcia_bus_hotplug\n");
 	envp[i] = NULL;
 
 	return 0;
@@ -1231,6 +1233,8 @@
 
 static int __init init_pcmcia_bus(void)
 {
+
+	ds_dbg(1, "init_pcmcia_bus\n");
 	spin_lock_init(&pcmcia_dev_list_lock);
 
 	bus_register(&pcmcia_bus_type);
@@ -1247,7 +1251,7 @@
 static void __exit exit_pcmcia_bus(void)
 {
 	pcmcia_cleanup_ioctl();
-
+	ds_dbg(1, "exit_pcmcia_bus\n");
 	class_interface_unregister(&pcmcia_bus_interface);
 
 	bus_unregister(&pcmcia_bus_type);
Index: linux-2.6.15.3/drivers/ide/arm/Makefile
===================================================================
--- linux-2.6.15.3/drivers/ide/arm/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/ide/arm/Makefile	(revision 7613)
@@ -2,5 +2,6 @@
 obj-$(CONFIG_BLK_DEV_IDE_ICSIDE)	+= icside.o
 obj-$(CONFIG_BLK_DEV_IDE_RAPIDE)	+= rapide.o
 obj-$(CONFIG_BLK_DEV_IDE_BAST)		+= bast-ide.o
+obj-$(CONFIG_BLK_DEV_CREATOR_IDE)	+= creator-pxa270-ide.o
 
 EXTRA_CFLAGS	:= -Idrivers/ide
Index: linux-2.6.15.3/drivers/ide/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/ide/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/ide/Kconfig	(revision 7613)
@@ -279,6 +279,12 @@
 	default y
 	help
 	  If unsure, say Y.
+	  
+config BLK_DEV_CREATOR_IDE
+	tristate "Creator True IDE interface support"
+	depends on MACH_CREATOR_PXA270
+	---help---
+	  If unsure, say Y.	  
 
 config BLK_DEV_CMD640
 	bool "CMD640 chipset bugfix/support"
Index: linux-2.6.15.3/drivers/ide/legacy/ide-cs.c
===================================================================
--- linux-2.6.15.3/drivers/ide/legacy/ide-cs.c	(revision 1)
+++ linux-2.6.15.3/drivers/ide/legacy/ide-cs.c	(revision 7613)
@@ -64,6 +64,7 @@
 
 #define INT_MODULE_PARM(n, v) static int n = v; module_param(n, int, 0)
 
+
 #ifdef PCMCIA_DEBUG
 INT_MODULE_PARM(pc_debug, PCMCIA_DEBUG);
 #define DEBUG(n, args...) if (pc_debug>(n)) printk(KERN_DEBUG args)
@@ -452,11 +453,14 @@
 
 static struct pcmcia_device_id ide_ids[] = {
 	PCMCIA_DEVICE_FUNC_ID(4),
+    PCMCIA_DEVICE_MANF_CARD(0x0007, 0x0000),	/* Hitachi, Transcend */	
+    PCMCIA_DEVICE_MANF_CARD(0x000a, 0x0000),	/* Transcend (1G) */    
 	PCMCIA_DEVICE_MANF_CARD(0x0032, 0x0704),
-	PCMCIA_DEVICE_MANF_CARD(0x0045, 0x0401),
+	PCMCIA_DEVICE_MANF_CARD(0x0045, 0x0401),    /* SanDisk */
 	PCMCIA_DEVICE_MANF_CARD(0x0098, 0x0000),	/* Toshiba */
 	PCMCIA_DEVICE_MANF_CARD(0x00a4, 0x002d),
 	PCMCIA_DEVICE_MANF_CARD(0x00ce, 0x0000),	/* Samsung */
+    PCMCIA_DEVICE_MANF_CARD(0x0319, 0x0000),	/* Hitachi */	
 	PCMCIA_DEVICE_MANF_CARD(0x2080, 0x0001),
 	PCMCIA_DEVICE_MANF_CARD(0x4e01, 0x0200),	/* Lexar */
 	PCMCIA_DEVICE_PROD_ID123("Caravelle", "PSC-IDE ", "PSC000", 0x8c36137c, 0xd0693ab8, 0x2768a9f0),
@@ -471,6 +475,8 @@
 	PCMCIA_DEVICE_PROD_ID12("EXP   ", "CD-ROM", 0x0a5c52fd, 0x66536591),
 	PCMCIA_DEVICE_PROD_ID12("EXP   ", "PnPIDE", 0x0a5c52fd, 0x0c694728),
 	PCMCIA_DEVICE_PROD_ID12("FREECOM", "PCCARD-IDE", 0x5714cbf7, 0x48e0ab8e),
+	PCMCIA_DEVICE_PROD_ID12("HITACHI", "FLASH", 0xf4f43949, 0x9eb86aae),
+ 	PCMCIA_DEVICE_PROD_ID12("HITACHI", "microdrive", 0xf4f43949, 0xa6d76178),	
 	PCMCIA_DEVICE_PROD_ID12("IBM", "IBM17JSSFP20", 0xb569a6e5, 0xf2508753),
 	PCMCIA_DEVICE_PROD_ID12("IO DATA", "CBIDE2      ", 0x547e66dc, 0x8671043b),
 	PCMCIA_DEVICE_PROD_ID12("IO DATA", "PCIDE", 0x547e66dc, 0x5c5ab149),
@@ -481,6 +487,7 @@
 	PCMCIA_DEVICE_PROD_ID12("PCMCIA", "PnPIDE", 0x281f1c5d, 0x0c694728),
 	PCMCIA_DEVICE_PROD_ID12("SHUTTLE TECHNOLOGY LTD.", "PCCARD-IDE/ATAPI Adapter", 0x4a3f0ba0, 0x322560e1),
 	PCMCIA_DEVICE_PROD_ID12("TOSHIBA", "MK2001MPL", 0xb4585a1a, 0x3489e003),
+    PCMCIA_DEVICE_PROD_ID1("TRANSCEND    512M   ", 0xd0909443), 	
 	PCMCIA_DEVICE_PROD_ID12("WIT", "IDE16", 0x244e5994, 0x3e232852),
 	PCMCIA_DEVICE_PROD_ID1("STI Flash", 0xe4a13209),
 	PCMCIA_DEVICE_PROD_ID12("STI", "Flash 5.0", 0xbf2df18d, 0x8cb57a0e),
Index: linux-2.6.15.3/drivers/mfd/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/mfd/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/Kconfig	(revision 7613)
@@ -5,7 +5,7 @@
 menu "Multimedia Capabilities Port drivers"
 
 config MCP
-	tristate
+	tristate 
 
 # Interface drivers
 config MCP_SA11X0
@@ -23,3 +23,16 @@
 	depends on MCP_UCB1200 && INPUT
 
 endmenu
+
+config UCB1400
+	tristate 
+
+config UCB1400_TS
+	tristate "UCB1400 Touchscreen support"
+#	depends on ARCH_LUBBOCK || MACH_MAINSTONE || MACH_COLIBRI
+	select UCB1400
+	select SND_AC97_BUS
+	depends on ARCH_LUBBOCK || MACH_MAINSTONE || MACH_CREATOR_PXA270
+
+
+
Index: linux-2.6.15.3/drivers/mfd/mcp-ac97.c
===================================================================
--- linux-2.6.15.3/drivers/mfd/mcp-ac97.c	(revision 0)
+++ linux-2.6.15.3/drivers/mfd/mcp-ac97.c	(revision 7613)
@@ -0,0 +1,175 @@
+/*
+ * linux/drivers/misc/mcp-ac97.c
+ *
+ * Author:	Nicolas Pitre
+ * Created:	Jan 14, 2005
+ * Copyright:	(C) MontaVista Software Inc.
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * version 2 as published by the Free Software Foundation.
+ *
+ * This module provides the minimum replacement for mcp-core.c allowing for
+ * the UCB1400 chip to be driven by the ucb1x00 driver over an AC97 link.
+ */
+
+#include <linux/module.h>
+#include <linux/moduleparam.h>
+#include <linux/init.h>
+#include <linux/errno.h>
+#include <linux/device.h>
+
+#include <sound/driver.h>
+#include <sound/core.h>
+#include <sound/ac97_codec.h>
+
+#include "mcp.h"
+
+/* ucb1x00 SIB register to ucb1400 AC-link register mapping */
+
+static const unsigned char regmap[] = {
+	0x5a,	/* UCB_IO_DATA */
+	0X5C,	/* UCB_IO_DIR */
+	0X5E,	/* UCB_IE_RIS */
+	0x60,	/* UCB_IE_FAL */
+	0x62,	/* UCB_IE_STATUS */
+	0,	/* UCB_TC_A */
+	0,	/* UCB_TC_B */
+	0,	/* UCB_AC_A */
+	0,	/* UCB_AC_B */
+	0x64,	/* UCB_TS_CR */
+	0x66,	/* UCB_ADC_CR */
+	0x68,	/* UCB_ADC_DATA */
+	0x7e,	/* UCB_ID */
+	0,	/* UCB_MODE */
+	0x6a, /* Reserved : 14 */  
+	0x2,  /* Reserved : 15 */
+	0x6c  /* Reserved : 16*/		
+};
+
+unsigned int mcp_reg_read(struct mcp *mcp, unsigned int reg)
+{
+	ac97_t *ac97 = to_ac97_t(mcp->dev);
+	if (reg < ARRAY_SIZE(regmap)) {
+		reg = regmap[reg];
+		if (reg)
+			return ac97->bus->ops->read(ac97, reg);
+	}
+	return -1;
+}
+
+void mcp_reg_write(struct mcp *mcp, unsigned int reg, unsigned int val)
+{
+	ac97_t *ac97 = to_ac97_t(mcp->dev);
+	if (reg < ARRAY_SIZE(regmap)) {
+		reg = regmap[reg];
+		if (reg)
+			ac97->bus->ops->write(ac97, reg, val);
+	}
+}
+
+void mcp_enable(struct mcp *mcp)
+{
+}
+
+void mcp_disable(struct mcp *mcp)
+{  
+}
+
+
+#define to_mcp_driver(d)	container_of(d, struct mcp_driver, drv)
+
+static int mcp_probe(struct device *dev)
+{
+	struct mcp_driver *drv = to_mcp_driver(dev->driver);
+	struct mcp *mcp;
+	int ret;
+
+	ret = -ENOMEM;
+	mcp = kmalloc(sizeof(*mcp), GFP_KERNEL);
+	if (mcp) {
+		memset(mcp, 0, sizeof(*mcp));
+		mcp->owner = THIS_MODULE;
+		mcp->dev = dev;
+		ret = drv->probe(mcp);
+		if (ret)
+			kfree(mcp);
+	}
+	if (!ret)
+		dev_set_drvdata(dev, mcp);
+	return ret;
+}
+
+static int mcp_remove(struct device *dev)
+{
+	struct mcp_driver *drv = to_mcp_driver(dev->driver);
+	struct mcp *mcp = dev_get_drvdata(dev);
+
+	drv->remove(mcp);
+	dev_set_drvdata(dev, NULL);
+	kfree(mcp);
+	return 0;
+}
+
+static int mcp_suspend(struct device *dev, pm_message_t state)
+{
+	struct mcp_driver *drv = to_mcp_driver(dev->driver);
+	struct mcp *mcp = dev_get_drvdata(dev);
+	int ret = 0;
+
+	if (drv->suspend)
+		ret = drv->suspend(mcp, state);
+	return ret;
+}
+
+static int mcp_resume(struct device *dev)
+{
+	struct mcp_driver *drv = to_mcp_driver(dev->driver);
+	struct mcp *mcp = dev_get_drvdata(dev);
+	int ret = 0;
+
+	if (drv->resume)
+		ret = drv->resume(mcp);
+	return ret;
+}
+
+int mcp_driver_register(struct mcp_driver *mcpdrv)
+{
+	mcpdrv->drv.owner = THIS_MODULE;
+	mcpdrv->drv.bus = &ac97_bus_type;
+	mcpdrv->drv.probe = mcp_probe;
+	mcpdrv->drv.remove = mcp_remove;
+	mcpdrv->drv.suspend = mcp_suspend;
+	mcpdrv->drv.resume = mcp_resume;
+	return driver_register(&mcpdrv->drv);
+}
+
+void mcp_driver_unregister(struct mcp_driver *mcpdrv)
+{
+	driver_unregister(&mcpdrv->drv);
+}
+
+#ifdef MODULE
+static int __init mcp97_init(void)
+{
+	return (0);
+}
+
+static void __exit mcp97_exit (void)
+{
+}	
+
+
+module_init(mcp97_init);
+module_exit(mcp97_exit);
+
+EXPORT_SYMBOL(mcp_reg_read);
+EXPORT_SYMBOL(mcp_reg_write);
+EXPORT_SYMBOL(mcp_enable);
+EXPORT_SYMBOL(mcp_disable);
+EXPORT_SYMBOL(mcp_driver_register);
+EXPORT_SYMBOL(mcp_driver_unregister);
+
+#endif
+
+MODULE_LICENSE("GPL");
\ No newline at end of file

Property changes on: linux-2.6.15.3/drivers/mfd/mcp-ac97.c
___________________________________________________________________
Name: svn:executable
   + *

Index: linux-2.6.15.3/drivers/mfd/mcp.h
===================================================================
--- linux-2.6.15.3/drivers/mfd/mcp.h	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/mcp.h	(revision 7613)
@@ -19,11 +19,17 @@
 	int		use_count;
 	unsigned int	sclk_rate;
 	unsigned int	rw_timeout;
+	
+#ifdef CONFIG_MCP_SA11X0
+	
 	dma_device_t	dma_audio_rd;
 	dma_device_t	dma_audio_wr;
 	dma_device_t	dma_telco_rd;
 	dma_device_t	dma_telco_wr;
+#endif
+	
 	struct device	attached_device;
+	struct device	*dev;
 };
 
 struct mcp_ops {
@@ -64,3 +70,4 @@
 #define mcp_priv(mcp)		((void *)((mcp)+1))
 
 #endif
+
Index: linux-2.6.15.3/drivers/mfd/mcp-core.c
===================================================================
--- linux-2.6.15.3/drivers/mfd/mcp-core.c	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/mcp-core.c	(revision 7613)
@@ -206,6 +206,7 @@
 		mcp->attached_device.bus = &mcp_bus_type;
 		mcp->attached_device.dma_mask = parent->dma_mask;
 		mcp->attached_device.release = mcp_release;
+		mcp->dev = &mcp->attached_device;
 	}
 	return mcp;
 }
Index: linux-2.6.15.3/drivers/mfd/ucb1x00-ts.c
===================================================================
--- linux-2.6.15.3/drivers/mfd/ucb1x00-ts.c	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/ucb1x00-ts.c	(revision 7613)
@@ -36,32 +36,171 @@
 
 #include <asm/dma.h>
 #include <asm/semaphore.h>
+
+#ifdef CONFIG_MCP_SA11X0
 #include <asm/arch/collie.h>
+#endif
+
+
+#ifdef CONFIG_MACH_CREATOR_PXA270
+#include <asm/arch/creator-pxa270.h>
+#endif
+
+
 #include <asm/mach-types.h>
 
 #include "ucb1x00.h"
 
+#ifdef MODULE
+#define PXAFB_OPTIONS_SIZE 256
+static char g_lcdtype_options[PXAFB_OPTIONS_SIZE] __initdata = "";
+#endif
 
+
+#ifdef CONFIG_CREATOR_PXA270_UCB1400_A2D_ENABLE
+#define ADC_SAMPLE_TIME	(HZ/2)
+#endif
+
+#define TS_SWAP_NONE       0x00
+#define TS_SWAP_X_Y        0x01
+#define TS_SWAP_X_MIN_MAX  0x02
+#define TS_SWAP_Y_MIN_MAX  0x04
+
+#define TS_TYPE_0         (TS_SWAP_NONE)
+#define TS_TYPE_1         (TS_SWAP_X_Y)
+#define TS_TYPE_2         (TS_SWAP_X_MIN_MAX)
+#define TS_TYPE_3         (TS_SWAP_X_Y | TS_SWAP_X_MIN_MAX)
+#define TS_TYPE_4         (TS_SWAP_Y_MIN_MAX)
+#define TS_TYPE_5         (TS_SWAP_X_Y | TS_SWAP_Y_MIN_MAX)
+#define TS_TYPE_6         (TS_SWAP_X_MIN_MAX | TS_SWAP_Y_MIN_MAX)
+#define TS_TYPE_7         (TS_SWAP_X_Y | TS_SWAP_X_MIN_MAX | TS_SWAP_Y_MIN_MAX)
+
+
+
+// Supported LCD type
+enum LCD_TYPE {
+	TFT_NONE_TYPE=-1,
+	TFT_MTLCD_0283224=0,		
+	TFT_MTLCD_0353224,	
+	TFT_MTLCD_1046448,
+	TFT_MTLCD_0353224A,
+	TFT_MTLCD_0708048			
+};
+
+typedef struct MTLCD_INFO {
+    int            id ;
+    unsigned short xres ;
+    unsigned short yres ;
+    unsigned short min_x ;
+    unsigned short min_y ;
+    unsigned short adc_max_x ;
+    unsigned short adc_max_y ;    
+    char           *lcdtype;        
+    unsigned short ts_convert_type;
+    
+} ST_MTLCD_INFO ;
+    
+ST_MTLCD_INFO  MT_LCD [] = {     
+	 // id ,                  xres,  yres,  min_x,  min_y,  adc_max_x ;  adc_max_y 
+
+    {   TFT_MTLCD_0283224,    240,   320,   80,    100,     960,         930     , "MTLCD-0283224"   , TS_TYPE_7 },  // MTLCD-0283224(2.8")
+    {   TFT_MTLCD_0353224,    240,   320,   90,    100,     950,         970     , "MTLCD-0353224"   , TS_TYPE_4 },  // MTLCD-0353224(3.5" 240*320 Portrait)
+    {   TFT_MTLCD_1046448,    640,   480,   16,     80,     965,         900     , "MTLCD-1046448"   , TS_TYPE_0 },  // MTLCD-1046448(10.4")        
+    {   TFT_MTLCD_0353224A,   320,   240,   60,     68,     965,         940     , "MTLCD-0353224A"  , TS_TYPE_4 },  // MTLCD-0353224(3.5" 320*240 Landscape)
+    {   TFT_MTLCD_0708048,    800,   480,  140,     55,     900,         999     , "MTLCD-0708048"   , TS_TYPE_1 },  // MTLCD-0708048(7.0" 800*480 Landscape)
+    {   TFT_NONE_TYPE,        0,     0,     0,      0,      0,           0,        NULL              , 0 } ,
+} ;   
+static int touch_convert_type, select_lcd_index = TFT_NONE_TYPE;
+
 struct ucb1x00_ts {
 	struct input_dev	*idev;
 	struct ucb1x00		*ucb;
 
-	wait_queue_head_t	irq_wait;
+	struct completion	irq_wait;
 	struct task_struct	*rtask;
 	u16			x_res;
 	u16			y_res;
-
+	
 	unsigned int		restart:1;
 	unsigned int		adcsync:1;
+	ST_MTLCD_INFO       *pMTLCD;
 };
 
 static int adcsync;
+static void ts_option (struct ucb1x00_ts *ts);
 
+#ifdef MODULE
+
+int __devinit ucb1x00_ts_setup (char *options)
+{
+        int i;
+       
+        for (i=0; MT_LCD[i].lcdtype; i++){
+            if (strcmp(options, MT_LCD[i].lcdtype) == 0){	              
+                select_lcd_index = i ;   	
+	            return (0);
+            }           		
+        }       	       
+        return (-1);               
+}
+#endif
+
+
+
+static void 
+ts_option (struct ucb1x00_ts *ts)
+{
+	    struct input_dev *idev = ts->idev;
+	    ST_MTLCD_INFO       *pMTLCD ;	
+	    	
+	    printk("LCD lcd index = %d\n", select_lcd_index); 
+		touch_convert_type = MT_LCD[select_lcd_index].ts_convert_type;
+		ts->pMTLCD = &MT_LCD[select_lcd_index];	
+		pMTLCD = ts->pMTLCD ;		
+		if (pMTLCD->ts_convert_type & TS_SWAP_X_Y){
+		    input_set_abs_params(idev, ABS_X, pMTLCD->min_y, pMTLCD->adc_max_y, 0, 0);
+    	    input_set_abs_params(idev, ABS_Y, pMTLCD->min_x, pMTLCD->adc_max_x, 0, 0);			
+	    }
+	    else{
+		    input_set_abs_params(idev, ABS_X, pMTLCD->min_x, pMTLCD->adc_max_x, 0, 0);
+    	    input_set_abs_params(idev, ABS_Y, pMTLCD->min_y, pMTLCD->adc_max_y, 0, 0);	    
+	    }		
+}
+
+
 static inline void ucb1x00_ts_evt_add(struct ucb1x00_ts *ts, u16 pressure, u16 x, u16 y)
 {
 	struct input_dev *idev = ts->idev;
-	input_report_abs(idev, ABS_X, x);
-	input_report_abs(idev, ABS_Y, y);
+	ST_MTLCD_INFO       *pMTLCD = ts->pMTLCD;
+    u16 x1, y1;
+	//printk("<1>Touch before X=%d, Y=%d\n", x, y);          
+  
+        if (x > pMTLCD->adc_max_x)  x = pMTLCD->adc_max_x;
+        if (y > pMTLCD->adc_max_y)  y = pMTLCD->adc_max_y;        
+        x  = (x <= pMTLCD->min_x) ? 0 : (x - pMTLCD->min_x);
+        y  = (y <= pMTLCD->min_y) ? 0 : (y - pMTLCD->min_y);
+        
+        if (touch_convert_type & TS_SWAP_X_Y){ 
+        	x1 = y; y1 = x;
+		    x1  = (x1 * pMTLCD->xres) / (pMTLCD->adc_max_y - pMTLCD->min_y);
+		    y1  = (y1 * pMTLCD->yres) / (pMTLCD->adc_max_x - pMTLCD->min_x);	
+        }	
+        else{
+        	x1 = x; y1 = y;    
+		    x1  = (x1 * pMTLCD->xres) / (pMTLCD->adc_max_x - pMTLCD->min_x);
+		    y1  = (y1 * pMTLCD->yres) / (pMTLCD->adc_max_y - pMTLCD->min_y);        	    
+        }        			    
+   
+	    if (touch_convert_type & TS_SWAP_X_MIN_MAX){  
+            x1 = pMTLCD->xres - x1;
+	    }	
+	    if (touch_convert_type & TS_SWAP_Y_MIN_MAX){
+            y1 = pMTLCD->yres - y1;          
+	    }       	         	  	
+
+	//printk("<1>Touch after X=%d, Y=%d\n", x1, y1);    
+	input_report_abs(idev, ABS_X, x1);
+	input_report_abs(idev, ABS_Y, y1);
 	input_report_abs(idev, ABS_PRESSURE, pressure);
 	input_sync(idev);
 }
@@ -89,7 +228,7 @@
  * here, since both plates are being driven.
  */
 static inline unsigned int ucb1x00_ts_read_pressure(struct ucb1x00_ts *ts)
-{
+{   
 	if (machine_is_collie()) {
 		ucb1x00_io_write(ts->ucb, COLLIE_TC35143_GPIO_TBL_CHK, 0);
 		ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
@@ -99,14 +238,14 @@
 		udelay(55);
 
 		return ucb1x00_adc_read(ts->ucb, UCB_ADC_INP_AD2, ts->adcsync);
-	} else {
+	} else {	    
 		ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
 				  UCB_TS_CR_TSMX_POW | UCB_TS_CR_TSPX_POW |
 				  UCB_TS_CR_TSMY_GND | UCB_TS_CR_TSPY_GND |
 				  UCB_TS_CR_MODE_PRES | UCB_TS_CR_BIAS_ENA);
 
-		return ucb1x00_adc_read(ts->ucb, UCB_ADC_INP_TSPY, ts->adcsync);
-	}
+		return ucb1x00_adc_read(ts->ucb, UCB_ADC_INP_TSPY, ts->adcsync);	
+	}	
 }
 
 /*
@@ -116,17 +255,19 @@
  * for things to stabilise.
  */
 static inline unsigned int ucb1x00_ts_read_xpos(struct ucb1x00_ts *ts)
-{
+{  
 	if (machine_is_collie())
 		ucb1x00_io_write(ts->ucb, 0, COLLIE_TC35143_GPIO_TBL_CHK);
-	else {
+	else {	    
 		ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
 				  UCB_TS_CR_TSMX_GND | UCB_TS_CR_TSPX_POW |
 				  UCB_TS_CR_MODE_PRES | UCB_TS_CR_BIAS_ENA);
 		ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
 				  UCB_TS_CR_TSMX_GND | UCB_TS_CR_TSPX_POW |
-				  UCB_TS_CR_MODE_PRES | UCB_TS_CR_BIAS_ENA);
+				  UCB_TS_CR_MODE_PRES | UCB_TS_CR_BIAS_ENA);			  
+				  
 	}
+	
 	ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
 			UCB_TS_CR_TSMX_GND | UCB_TS_CR_TSPX_POW |
 			UCB_TS_CR_MODE_POS | UCB_TS_CR_BIAS_ENA);
@@ -143,16 +284,18 @@
  * for things to stabilise.
  */
 static inline unsigned int ucb1x00_ts_read_ypos(struct ucb1x00_ts *ts)
-{
+{  
 	if (machine_is_collie())
 		ucb1x00_io_write(ts->ucb, 0, COLLIE_TC35143_GPIO_TBL_CHK);
 	else {
+	    
 		ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
 				  UCB_TS_CR_TSMY_GND | UCB_TS_CR_TSPY_POW |
 				  UCB_TS_CR_MODE_PRES | UCB_TS_CR_BIAS_ENA);
 		ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
 				  UCB_TS_CR_TSMY_GND | UCB_TS_CR_TSPY_POW |
 				  UCB_TS_CR_MODE_PRES | UCB_TS_CR_BIAS_ENA);
+			  
 	}
 
 	ucb1x00_reg_write(ts->ucb, UCB_TS_CR,
@@ -191,13 +334,79 @@
 static inline int ucb1x00_ts_pen_down(struct ucb1x00_ts *ts)
 {
 	unsigned int val = ucb1x00_reg_read(ts->ucb, UCB_TS_CR);
-	if (machine_is_collie())
+	if (machine_is_collie()){
 		return (!(val & (UCB_TS_CR_TSPX_LOW)));
-	else
+	}	
+	else{
 		return (val & (UCB_TS_CR_TSPX_LOW | UCB_TS_CR_TSMX_LOW));
+	}	
 }
 
+#ifdef CONFIG_CREATOR_PXA270_UCB1400_A2D_ENABLE
+static long adc_sample_time=ADC_SAMPLE_TIME;
+static unsigned int gADC0, gADC1, gADC2, gADC3;
+static unsigned int gstart_adc=0;
 /*
+ * Switch to ADC Mode.  Even so, we need to wait about 55us
+ * for things to stabilise.
+ */
+static inline unsigned int ucb1x00_ts_read_adc(struct ucb1x00_ts *ts, int ADCIndex)
+{  
+	unsigned int value;
+
+	ucb1x00_reg_write(ts->ucb, UCB_TS_CR, UCB_TS_CR_BIAS_ENA);	
+
+	value = ucb1x00_adc_read(ts->ucb, ADCIndex, ts->adcsync);
+	return (value);
+}
+
+
+static void ucb1x00_read_adc (struct ucb1x00_ts *ts)
+{
+		gADC0 = ucb1x00_ts_read_adc(ts, UCB_ADC_INP_AD0);
+		gADC1 = ucb1x00_ts_read_adc(ts, UCB_ADC_INP_AD1);
+		gADC2 = ucb1x00_ts_read_adc(ts, UCB_ADC_INP_AD2);
+		gADC3 = ucb1x00_ts_read_adc(ts, UCB_ADC_INP_AD3);
+}	
+
+unsigned int ucb1x00_get_adc (int index)
+{
+        unsigned int value;
+        
+        switch (index) {
+        case 0 :
+            value = gADC0 ;
+            break ;	
+        case 1 :
+            value = gADC1 ;
+            break ;	
+        case 2 :
+            value = gADC2 ;
+            break ;	
+        case 3 :
+            value = gADC3 ;
+            break ;	    
+        default :
+            value = 0;
+            break ;
+        }
+        return (value);
+}	
+
+void ucb1x00_enable_adc (int enable)
+{
+        gstart_adc = (enable) ? 1 : 0;    	
+}	
+
+void ucb1x00__adc (int enable)
+{
+        gstart_adc = (enable) ? 1 : 0;    	
+}	
+
+#endif // CONFIG_CREATOR_PXA270_UCB1400_A2D_ENABLE
+
+
+/*
  * This is a RT kernel thread that handles the ADC accesses
  * (mainly so we can use semaphores in the UCB1200 core code
  * to serialise accesses to the ADC).
@@ -206,7 +415,6 @@
 {
 	struct ucb1x00_ts *ts = _ts;
 	struct task_struct *tsk = current;
-	DECLARE_WAITQUEUE(wait, tsk);
 	int valid;
 
 	/*
@@ -218,10 +426,8 @@
 
 	valid = 0;
 
-	add_wait_queue(&ts->irq_wait, &wait);
 	while (!kthread_should_stop()) {
 		unsigned int x, y, p;
-		signed long timeout;
 
 		ts->restart = 0;
 
@@ -230,21 +436,20 @@
 		x = ucb1x00_ts_read_xpos(ts);
 		y = ucb1x00_ts_read_ypos(ts);
 		p = ucb1x00_ts_read_pressure(ts);
-
+	
 		/*
 		 * Switch back to interrupt mode.
 		 */
 		ucb1x00_ts_mode_int(ts);
 		ucb1x00_adc_disable(ts->ucb);
 
-		msleep(10);
-
+		//msleep(10);
+		msleep(1);		
+	//printk("ucb1x00-tc.c, %s(), line=%d\n", __FUNCTION__, __LINE__);
 		ucb1x00_enable(ts->ucb);
 
 
 		if (ucb1x00_ts_pen_down(ts)) {
-			set_task_state(tsk, TASK_INTERRUPTIBLE);
-
 			ucb1x00_enable_irq(ts->ucb, UCB_IRQ_TSPX, machine_is_collie() ? UCB_RISING : UCB_FALLING);
 			ucb1x00_disable(ts->ucb);
 
@@ -257,10 +462,40 @@
 				valid = 0;
 			}
 
-			timeout = MAX_SCHEDULE_TIMEOUT;
+			/*
+			 * Since ucb1x00_enable_irq() might sleep due
+			 * to the way the UCB1400 regs are accessed, we
+			 * can't use set_task_state() before that call,
+			 * and not changing state before enabling the
+			 * interrupt is racy. A completion handler avoids
+			 * the issue.
+			 */
+#ifndef CONFIG_CREATOR_PXA270_UCB1400_A2D_ENABLE			 
+			wait_for_completion_interruptible(&ts->irq_wait);
+#else			
+            {
+				long timeout ;				
+
+			    while (1){
+			    	timeout = wait_for_completion_interruptible_timeout(&ts->irq_wait, adc_sample_time);
+			        if (!timeout){
+			        	if (gstart_adc){
+		                    ucb1x00_adc_enable(ts->ucb);
+			        	    ucb1x00_read_adc(ts);
+		                    ucb1x00_adc_disable(ts->ucb);
+		                }
+			        }
+                    else
+                        break ;
+                }        
+		    }
+#endif // CONFIG_CREATOR_PXA270_UCB1400_A2D_ENABLE		    
+			//printk("ucb1x00-tc.c, %s(), line=%d\n", __FUNCTION__, __LINE__);
 		} else {
+		
+			
 			ucb1x00_disable(ts->ucb);
-
+			//printk("ucb1x00-tc.c, %s(), line=%d\n", __FUNCTION__, __LINE__);
 			/*
 			 * Filtering is policy.  Policy belongs in user
 			 * space.  We therefore leave it to user space
@@ -269,19 +504,16 @@
 			if (!ts->restart) {
 				ucb1x00_ts_evt_add(ts, p, x, y);
 				valid = 1;
+			//printk("ucb1x00-tc.c, %s(), line=%d\n", __FUNCTION__, __LINE__);				
 			}
 
 			set_task_state(tsk, TASK_INTERRUPTIBLE);
-			timeout = HZ / 100;
+			schedule_timeout(HZ/100);
 		}
 
 		try_to_freeze();
-
-		schedule_timeout(timeout);
 	}
 
-	remove_wait_queue(&ts->irq_wait, &wait);
-
 	ts->rtask = NULL;
 	return 0;
 }
@@ -293,8 +525,9 @@
 static void ucb1x00_ts_irq(int idx, void *id)
 {
 	struct ucb1x00_ts *ts = id;
+	//printk("usb1x00-ts.c %s(), line=%d\n", __FUNCTION__, __LINE__);
 	ucb1x00_disable_irq(ts->ucb, UCB_IRQ_TSPX, UCB_FALLING);
-	wake_up(&ts->irq_wait);
+	complete(&ts->irq_wait);
 }
 
 static int ucb1x00_ts_open(struct input_dev *idev)
@@ -303,8 +536,8 @@
 	int ret = 0;
 
 	BUG_ON(ts->rtask);
-
-	init_waitqueue_head(&ts->irq_wait);
+    ts_option(ts);
+	init_completion(&ts->irq_wait);
 	ret = ucb1x00_hook_irq(ts->ucb, UCB_IRQ_TSPX, ucb1x00_ts_irq, ts);
 	if (ret < 0)
 		goto out;
@@ -359,7 +592,7 @@
 		 * after sleep.
 		 */
 		ts->restart = 1;
-		wake_up(&ts->irq_wait);
+		complete(&ts->irq_wait);
 	}
 	return 0;
 }
@@ -390,19 +623,25 @@
 
 	ts->idev->private = ts;
 	ts->idev->name       = "Touchscreen panel";
+	ts->idev->phys = "creator-pxa270/input0";	
 	ts->idev->id.product = ts->ucb->id;
 	ts->idev->open       = ucb1x00_ts_open;
 	ts->idev->close      = ucb1x00_ts_close;
+	
+	ts->idev->absfuzz[ABS_X] = 6;
+	ts->idev->absfuzz[ABS_Y] = 6;	
 
+    ts->idev->absmax[ABS_PRESSURE] = 0x100;
+
 	__set_bit(EV_ABS, ts->idev->evbit);
 	__set_bit(ABS_X, ts->idev->absbit);
 	__set_bit(ABS_Y, ts->idev->absbit);
 	__set_bit(ABS_PRESSURE, ts->idev->absbit);
 
 	input_register_device(ts->idev);
-
 	dev->priv = ts;
-
+	ucb1x00_reg_write(ts->ucb, 16, 0x1000);
+    
 	return 0;
 }
 
@@ -422,18 +661,61 @@
 
 static int __init ucb1x00_ts_init(void)
 {
-	return ucb1x00_register_driver(&ucb1x00_ts_driver);
+        int lcd_type = TFT_NONE_TYPE;     	
+#ifdef MODULE	
+        int ret;
+#endif        
+        	
+#ifdef CONFIG_MTLCD_0283224 
+        lcd_type = TFT_MTLCD_0283224;
+#endif    
+		
+#ifdef CONFIG_MTLCD_0353224 
+        lcd_type = TFT_MTLCD_0353224;   		
+#endif 
+		
+#ifdef CONFIG_MTLCD_0353224A   
+        lcd_type = TFT_MTLCD_0353224A;   
+#endif 
+		
+#ifdef CONFIG_MTLCD_1046448    
+        lcd_type = TFT_MTLCD_1046448;  
+#endif	
+
+#ifdef CONFIG_MTLCD_0708048    
+        lcd_type = TFT_MTLCD_0708048;  
+#endif	
+        
+        select_lcd_index	= lcd_type ;
+	
+#ifdef MODULE	
+	   ret = ucb1x00_ts_setup(g_lcdtype_options);	
+	   if (ret != 0){
+	   	   printk("lcdtype parameter  = MTLCD-0283224, MTLCD-0353224, MTLCD-0353224A, MTLCD-1046448 or MTLCD-0708048\n");
+       }	   	
+#endif	
+	   return ucb1x00_register_driver(&ucb1x00_ts_driver);
 }
 
+
 static void __exit ucb1x00_ts_exit(void)
 {
 	ucb1x00_unregister_driver(&ucb1x00_ts_driver);
 }
 
 module_param(adcsync, int, 0444);
+#ifdef MODULE
+module_param_string(lcdtype, g_lcdtype_options, sizeof(g_lcdtype_options), 0);
+MODULE_PARM_DESC(lcdtype, "LCD Type(MTLCD-0283224, MTLCD-0353224, MTLCD-0353224A, MTLCD-1046448,  MTLCD-0708048)");
+#endif
 module_init(ucb1x00_ts_init);
 module_exit(ucb1x00_ts_exit);
 
+#ifdef CONFIG_CREATOR_PXA270_UCB1400_A2D_ENABLE
+EXPORT_SYMBOL(ucb1x00_get_adc);
+EXPORT_SYMBOL(ucb1x00_enable_adc);
+#endif
+
 MODULE_AUTHOR("Russell King <rmk@arm.linux.org.uk>");
 MODULE_DESCRIPTION("UCB1x00 touchscreen driver");
 MODULE_LICENSE("GPL");
Index: linux-2.6.15.3/drivers/mfd/ucb1x00.h
===================================================================
--- linux-2.6.15.3/drivers/mfd/ucb1x00.h	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/ucb1x00.h	(revision 7613)
@@ -94,6 +94,7 @@
 #define UCB_ID		0x0c
 #define UCB_ID_1200		0x1004
 #define UCB_ID_1300		0x1005
+#define UCB_ID_1400		0x4304
 
 #define UCB_MODE	0x0d
 #define UCB_MODE_DYN_VFLAG_ENA	(1 << 12)
@@ -110,6 +111,8 @@
 	spinlock_t		lock;
 	struct mcp		*mcp;
 	unsigned int		irq;
+	struct task_struct	*irq_task;
+	struct completion	irq_wait;
 	struct semaphore	adc_sem;
 	spinlock_t		io_lock;
 	u16			id;
@@ -122,6 +125,7 @@
 	struct class_device	cdev;
 	struct list_head	node;
 	struct list_head	devs;
+
 };
 
 struct ucb1x00_driver;
Index: linux-2.6.15.3/drivers/mfd/ucb1x00-core.c
===================================================================
--- linux-2.6.15.3/drivers/mfd/ucb1x00-core.c	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/ucb1x00-core.c	(revision 7613)
@@ -23,7 +23,9 @@
 #include <linux/init.h>
 #include <linux/errno.h>
 #include <linux/interrupt.h>
+#include <linux/kthread.h>
 #include <linux/device.h>
+//#include <linux/mutex.h>
 
 #include <asm/dma.h>
 #include <asm/hardware.h>
@@ -31,6 +33,25 @@
 
 #include "ucb1x00.h"
 
+#define DEBUG
+#ifdef DEBUG
+#define MSG(string, args...) printk("<1>" string, ##args)
+#else   
+#define MSG(string, args...)
+#endif
+
+#if 1
+#define UCB_IS_1400(id)  ((id) == UCB_ID_1400)
+#else
+
+#ifdef CONFIG_UCB1400
+#define UCB_IS_1400(id)  ((id) == UCB_ID_1400)
+#else
+#define UCB_IS_1400(id)  (0)
+#endif
+#endif
+
+
 static DECLARE_MUTEX(ucb1x00_sem);
 static LIST_HEAD(ucb1x00_drivers);
 static LIST_HEAD(ucb1x00_devices);
@@ -58,9 +79,9 @@
 	spin_lock_irqsave(&ucb->io_lock, flags);
 	ucb->io_dir |= out;
 	ucb->io_dir &= ~in;
+	spin_unlock_irqrestore(&ucb->io_lock, flags);
 
 	ucb1x00_reg_write(ucb, UCB_IO_DIR, ucb->io_dir);
-	spin_unlock_irqrestore(&ucb->io_lock, flags);
 }
 
 /**
@@ -86,9 +107,9 @@
 	spin_lock_irqsave(&ucb->io_lock, flags);
 	ucb->io_out |= set;
 	ucb->io_out &= ~clear;
+	spin_unlock_irqrestore(&ucb->io_lock, flags);
 
 	ucb1x00_reg_write(ucb, UCB_IO_DATA, ucb->io_out);
-	spin_unlock_irqrestore(&ucb->io_lock, flags);
 }
 
 /**
@@ -136,11 +157,10 @@
 void ucb1x00_adc_enable(struct ucb1x00 *ucb)
 {
 	down(&ucb->adc_sem);
-
 	ucb->adc_cr |= UCB_ADC_ENA;
 
 	ucb1x00_enable(ucb);
-	ucb1x00_reg_write(ucb, UCB_ADC_CR, ucb->adc_cr);
+	ucb1x00_reg_write(ucb, UCB_ADC_CR, ucb->adc_cr);	
 }
 
 /**
@@ -178,7 +198,7 @@
 		schedule_timeout(1);
 	}
 
-	return UCB_ADC_DAT(val);
+	return UCB_IS_1400(ucb->id) ? (val & 0x3ff) : ((val & 0x7fe0) >> 5);
 }
 
 /**
@@ -223,6 +243,47 @@
 	return IRQ_HANDLED;
 }
 
+/*
+ * A restriction with interrupts exists when using the ucb1400, as
+ * the codec read/write routines may sleep while waiting for codec
+ * access completion and uses semaphores for access control to the
+ * AC97 bus.  A complete codec read cycle could take  anywhere from
+ * 60 to 100uSec so we *definitely* don't want to spin inside the
+ * interrupt handler waiting for codec access.  So, we handle the
+ * interrupt by scheduling a RT kernel thread to run in process
+ * context instead of interrupt context.
+ */
+static int ucb1x00_thread(void *_ucb)
+{
+	struct task_struct *tsk = current;
+	struct ucb1x00 *ucb = _ucb;
+
+	tsk->policy = SCHED_FIFO;
+	tsk->rt_priority = 1;
+
+	while (!kthread_should_stop()) {
+		wait_for_completion_interruptible(&ucb->irq_wait);
+		if (try_to_freeze())
+			continue;
+		ucb1x00_irq(ucb->irq, ucb, NULL);
+		enable_irq(ucb->irq);
+	}
+
+	ucb->irq_task = NULL;
+	return 0;
+}
+
+static irqreturn_t ucb1x00_threaded_irq(int irqnr, void *devid, struct pt_regs *regs)
+{
+	struct ucb1x00 *ucb = devid;
+	if (irqnr == ucb->irq) { 
+		disable_irq(ucb->irq);
+		complete(&ucb->irq_wait);
+		return IRQ_HANDLED;
+	}
+	return IRQ_NONE;
+}
+
 /**
  *	ucb1x00_hook_irq - hook a UCB1x00 interrupt
  *	@ucb:   UCB1x00 structure describing chip
@@ -243,9 +304,9 @@
 int ucb1x00_hook_irq(struct ucb1x00 *ucb, unsigned int idx, void (*fn)(int, void *), void *devid)
 {
 	struct ucb1x00_irq *irq;
-	int ret = -EINVAL;
+	int ret = -EINVAL; 
 
-	if (idx < 16) {
+	if (idx < 16) {    
 		irq = ucb->irq_handler + idx;
 		ret = -EBUSY;
 
@@ -257,6 +318,7 @@
 		}
 		spin_unlock_irq(&ucb->lock);
 	}
+	
 	return ret;
 }
 
@@ -273,21 +335,24 @@
 void ucb1x00_enable_irq(struct ucb1x00 *ucb, unsigned int idx, int edges)
 {
 	unsigned long flags;
-
-	if (idx < 16) {
+	if (idx < 16) {   
 		spin_lock_irqsave(&ucb->lock, flags);
+		if (edges & UCB_RISING)
+			ucb->irq_ris_enbl |= 1 << idx;
+		if (edges & UCB_FALLING)
+			ucb->irq_fal_enbl |= 1 << idx;
+		spin_unlock_irqrestore(&ucb->lock, flags);
 
 		ucb1x00_enable(ucb);
-		if (edges & UCB_RISING) {
-			ucb->irq_ris_enbl |= 1 << idx;
-			ucb1x00_reg_write(ucb, UCB_IE_RIS, ucb->irq_ris_enbl);
-		}
-		if (edges & UCB_FALLING) {
-			ucb->irq_fal_enbl |= 1 << idx;
-			ucb1x00_reg_write(ucb, UCB_IE_FAL, ucb->irq_fal_enbl);
-		}
+
+		/* This prevents spurious interrupts on the UCB1400 */
+		ucb1x00_reg_write(ucb, UCB_IE_CLEAR, 1 << idx);
+		ucb1x00_reg_write(ucb, UCB_IE_CLEAR, 0);
+
+		ucb1x00_reg_write(ucb, UCB_IE_RIS, ucb->irq_ris_enbl);
+		ucb1x00_reg_write(ucb, UCB_IE_FAL, ucb->irq_fal_enbl);
+
 		ucb1x00_disable(ucb);
-		spin_unlock_irqrestore(&ucb->lock, flags);
 	}
 }
 
@@ -303,20 +368,18 @@
 {
 	unsigned long flags;
 
-	if (idx < 16) {
+	if (idx < 16) {    
 		spin_lock_irqsave(&ucb->lock, flags);
+		if (edges & UCB_RISING)
+			ucb->irq_ris_enbl &= ~(1 << idx);
+		if (edges & UCB_FALLING)
+			ucb->irq_fal_enbl &= ~(1 << idx);
+		spin_unlock_irqrestore(&ucb->lock, flags);
 
 		ucb1x00_enable(ucb);
-		if (edges & UCB_RISING) {
-			ucb->irq_ris_enbl &= ~(1 << idx);
-			ucb1x00_reg_write(ucb, UCB_IE_RIS, ucb->irq_ris_enbl);
-		}
-		if (edges & UCB_FALLING) {
-			ucb->irq_fal_enbl &= ~(1 << idx);
-			ucb1x00_reg_write(ucb, UCB_IE_FAL, ucb->irq_fal_enbl);
-		}
+		ucb1x00_reg_write(ucb, UCB_IE_RIS, ucb->irq_ris_enbl);
+		ucb1x00_reg_write(ucb, UCB_IE_FAL, ucb->irq_fal_enbl);
 		ucb1x00_disable(ucb);
-		spin_unlock_irqrestore(&ucb->lock, flags);
 	}
 }
 
@@ -349,16 +412,17 @@
 		ucb->irq_ris_enbl &= ~(1 << idx);
 		ucb->irq_fal_enbl &= ~(1 << idx);
 
-		ucb1x00_enable(ucb);
-		ucb1x00_reg_write(ucb, UCB_IE_RIS, ucb->irq_ris_enbl);
-		ucb1x00_reg_write(ucb, UCB_IE_FAL, ucb->irq_fal_enbl);
-		ucb1x00_disable(ucb);
-
 		irq->fn = NULL;
 		irq->devid = NULL;
 		ret = 0;
 	}
 	spin_unlock_irq(&ucb->lock);
+
+	ucb1x00_enable(ucb);
+	ucb1x00_reg_write(ucb, UCB_IE_RIS, ucb->irq_ris_enbl);
+	ucb1x00_reg_write(ucb, UCB_IE_FAL, ucb->irq_fal_enbl);
+	ucb1x00_disable(ucb);
+
 	return ret;
 
 bad:
@@ -380,7 +444,7 @@
 
 		if (ret == 0) {
 			list_add(&dev->dev_node, &ucb->devs);
-			list_add(&dev->drv_node, &drv->devs);
+			list_add(&dev->drv_node, &drv->devs);	
 		} else {
 			kfree(dev);
 		}
@@ -478,7 +542,7 @@
 	mcp_enable(mcp);
 	id = mcp_reg_read(mcp, UCB_ID);
 
-	if (id != UCB_ID_1200 && id != UCB_ID_1300) {
+	if (id != UCB_ID_1200 && id != UCB_ID_1300 && !UCB_IS_1400(id)) {				
 		printk(KERN_WARNING "UCB1x00 ID not found: %04x\n", id);
 		goto err_disable;
 	}
@@ -491,12 +555,13 @@
 	memset(ucb, 0, sizeof(struct ucb1x00));
 
 	ucb->cdev.class = &ucb1x00_class;
-	ucb->cdev.dev = &mcp->attached_device;
+	ucb->cdev.dev = mcp->dev;
 	strlcpy(ucb->cdev.class_id, "ucb1x00", sizeof(ucb->cdev.class_id));
 
 	spin_lock_init(&ucb->lock);
 	spin_lock_init(&ucb->io_lock);
 	sema_init(&ucb->adc_sem, 1);
+	 init_completion(&ucb->irq_wait);
 
 	ucb->id  = id;
 	ucb->mcp = mcp;
@@ -507,12 +572,21 @@
 		goto err_free;
 	}
 
-	ret = request_irq(ucb->irq, ucb1x00_irq, 0, "UCB1x00", ucb);
+	//ret = request_irq(ucb->irq, UCB_IS_1400(id) ? ucb1x00_threaded_irq : ucb1x00_irq, SA_TRIGGER_RISING, "UCB1x00", ucb);
+	ret = request_irq(ucb->irq, UCB_IS_1400(id) ? ucb1x00_threaded_irq : ucb1x00_irq, 0, "UCB1x00", ucb);	
 	if (ret) {
 		printk(KERN_ERR "ucb1x00: unable to grab irq%d: %d\n",
 			ucb->irq, ret);
 		goto err_free;
 	}
+	if (UCB_IS_1400(id)) {
+		ucb->irq_task = kthread_run(ucb1x00_thread, ucb, "kUCB1x00d");
+		if (IS_ERR(ucb->irq_task)) {
+			ret = PTR_ERR(ucb->irq_task);
+			ucb->irq_task = NULL;
+			goto err_irq;
+		}
+	}	
 
 	set_irq_type(ucb->irq, IRQT_RISING);
 	mcp_set_drvdata(mcp, ucb);
@@ -523,7 +597,7 @@
 
 	INIT_LIST_HEAD(&ucb->devs);
 	down(&ucb1x00_sem);
-	list_add(&ucb->node, &ucb1x00_devices);
+	list_add(&ucb->node, &ucb1x00_devices);	
 	list_for_each_entry(drv, &ucb1x00_drivers, node) {
 		ucb1x00_add_dev(ucb, drv);
 	}
@@ -531,6 +605,8 @@
 	goto out;
 
  err_irq:
+	if (UCB_IS_1400(id) && ucb->irq_task)
+		kthread_stop(ucb->irq_task);
 	free_irq(ucb->irq, ucb);
  err_free:
 	kfree(ucb);
@@ -553,6 +629,8 @@
 	}
 	up(&ucb1x00_sem);
 
+	if (UCB_IS_1400(ucb->id) && ucb->irq_task)
+		kthread_stop(ucb->irq_task);
 	free_irq(ucb->irq, ucb);
 	class_device_unregister(&ucb->cdev);
 }
Index: linux-2.6.15.3/drivers/mfd/Makefile
===================================================================
--- linux-2.6.15.3/drivers/mfd/Makefile	(revision 1)
+++ linux-2.6.15.3/drivers/mfd/Makefile	(revision 7613)
@@ -10,3 +10,8 @@
 ifeq ($(CONFIG_SA1100_ASSABET),y)
 obj-$(CONFIG_MCP_UCB1200)	+= ucb1x00-assabet.o
 endif
+
+
+#ucb1400-core-$(CONFIG_UCB1400)	:= ucb1x00-core.o mcp-ac97.o 
+obj-$(CONFIG_UCB1400_TS)	+= ucb1x00-core.o mcp-ac97.o ucb1x00-ts.o 
+
Index: linux-2.6.15.3/drivers/i2c/busses/i2c-pxa.c
===================================================================
--- linux-2.6.15.3/drivers/i2c/busses/i2c-pxa.c	(revision 1)
+++ linux-2.6.15.3/drivers/i2c/busses/i2c-pxa.c	(revision 7613)
@@ -854,7 +854,7 @@
 {
 	struct pxa_i2c *i2c = dev_id;
 	u32 isr = ISR;
-
+    //by pyliu printk("pxa I2C ISR, %s(), line=%d\n", __FUNCTION__, __LINE__);
 	if (i2c_debug > 2 && 0) {
 		dev_dbg(&i2c->adap.dev, "%s: ISR=%08x, ICR=%08x, IBMR=%02x\n",
 			__func__, isr, ICR, IBMR);
Index: linux-2.6.15.3/drivers/i2c/chips/Kconfig
===================================================================
--- linux-2.6.15.3/drivers/i2c/chips/Kconfig	(revision 1)
+++ linux-2.6.15.3/drivers/i2c/chips/Kconfig	(revision 7613)
@@ -135,4 +135,13 @@
 	  This driver can also be built as a module. If so, the module
 	  will be called x1205.
 
+config CODEC_TLV320AIC_I2C
+	tristate "TI TLV320AIC Codec chip"
+	depends on I2C && EXPERIMENTAL
+	help
+	  If you say yes here you get support for the TI TLV320AIC Codec chip.
+
+	  This driver can also be built as a module. If so, the module
+	  will be called creator-pxa270-tlv320aic12.
+
 endmenu
Index: linux-2.6.15.3/drivers/i2c/chips/rtc8564.c
===================================================================
--- linux-2.6.15.3/drivers/i2c/chips/rtc8564.c	(revision 1)
+++ linux-2.6.15.3/drivers/i2c/chips/rtc8564.c	(revision 7613)
@@ -19,9 +19,16 @@
 #include <linux/string.h>
 #include <linux/rtc.h>		/* get the user-level API */
 #include <linux/init.h>
+#include <linux/miscdevice.h>
+#include <linux/proc_fs.h>
+#include <asm/uaccess.h>
 
 #include "rtc8564.h"
 
+#ifdef CONFIG_MACH_CREATOR_PXA270
+#include "asm/arch/lib/creator_pxa270_core.h"
+#endif
+
 #ifdef DEBUG
 # define _DBG(x, fmt, args...) do{ if (debug>=x) printk(KERN_DEBUG"%s: " fmt "\n", __FUNCTION__, ##args); } while(0);
 #else
@@ -30,8 +37,8 @@
 
 #define _DBGRTCTM(x, rtctm) if (debug>=x) printk("%s: secs=%d, mins=%d, hours=%d, mday=%d, " \
 			"mon=%d, year=%d, wday=%d VL=%d\n", __FUNCTION__, \
-			(rtctm).secs, (rtctm).mins, (rtctm).hours, (rtctm).mday, \
-			(rtctm).mon, (rtctm).year, (rtctm).wday, (rtctm).vl);
+			(rtctm).tm_sec, (rtctm).tm_min, (rtctm).tm_hour, (rtctm).tm_mday, \
+			(rtctm).tm_mon, (rtctm).tm_year, (rtctm).tm_wday, (rtctm).tm_isdst);
 
 struct rtc8564_data {
 	struct i2c_client client;
@@ -55,10 +62,11 @@
 #define BCD_TO_BIN(val) (((val)&15) + ((val)>>4)*10)
 #define BIN_TO_BCD(val) ((((val)/10)<<4) + (val)%10)
 
-static int debug;;
+static int debug=0;
 module_param(debug, int, S_IRUGO | S_IWUSR);
 
 static struct i2c_driver rtc8564_driver;
+struct i2c_client *rtc8564_i2c_client = 0;
 
 static unsigned short ignore[] = { I2C_CLIENT_END };
 static unsigned short normal_addr[] = { 0x51, I2C_CLIENT_END };
@@ -68,10 +76,14 @@
 	.probe			= ignore,
 	.ignore			= ignore,
 };
+static spinlock_t epson8564_rtc_lock = SPIN_LOCK_UNLOCKED;
 
+
 static int rtc8564_read_mem(struct i2c_client *client, struct mem *mem);
 static int rtc8564_write_mem(struct i2c_client *client, struct mem *mem);
 
+
+
 static int rtc8564_read(struct i2c_client *client, unsigned char adr,
 			unsigned char *buf, unsigned char len)
 {
@@ -187,6 +199,7 @@
 	_DBG(1, "RTC8564_REG_CTRL1=%02x, RTC8564_REG_CTRL2=%02x",
 	     data[0], data[1]);
 
+    rtc8564_i2c_client = new_client;
 	ret = i2c_attach_client(new_client);
 done:
 	if (ret) {
@@ -207,7 +220,7 @@
 	return 0;
 }
 
-static int rtc8564_get_datetime(struct i2c_client *client, struct rtc_tm *dt)
+static int rtc8564_get_datetime(struct i2c_client *client, struct rtc_time *dt)
 {
 	int ret = -EIO;
 	unsigned char buf[15];
@@ -224,24 +237,26 @@
 		return ret;
 
 	/* century stored in minute alarm reg */
-	dt->year = BCD_TO_BIN(buf[RTC8564_REG_YEAR]);
-	dt->year += 100 * BCD_TO_BIN(buf[RTC8564_REG_AL_MIN] & 0x3f);
-	dt->mday = BCD_TO_BIN(buf[RTC8564_REG_DAY] & 0x3f);
-	dt->wday = BCD_TO_BIN(buf[RTC8564_REG_WDAY] & 7);
-	dt->mon = BCD_TO_BIN(buf[RTC8564_REG_MON_CENT] & 0x1f);
+	dt->tm_year = BCD_TO_BIN(buf[RTC8564_REG_YEAR]);
+	dt->tm_year += 100 * BCD_TO_BIN(buf[RTC8564_REG_AL_MIN] & 0x3f);
 
-	dt->secs = BCD_TO_BIN(buf[RTC8564_REG_SEC] & 0x7f);
-	dt->vl = (buf[RTC8564_REG_SEC] & 0x80) == 0x80;
-	dt->mins = BCD_TO_BIN(buf[RTC8564_REG_MIN] & 0x7f);
-	dt->hours = BCD_TO_BIN(buf[RTC8564_REG_HR] & 0x3f);
+	dt->tm_mday = BCD_TO_BIN(buf[RTC8564_REG_DAY] & 0x3f) ;
+	dt->tm_wday = BCD_TO_BIN(buf[RTC8564_REG_WDAY] & 7);
+	/* dt->tm_mon is zero-based */	
+	dt->tm_mon = BCD_TO_BIN(buf[RTC8564_REG_MON_CENT] & 0x1f) - 1;
 
+	dt->tm_sec = BCD_TO_BIN(buf[RTC8564_REG_SEC] & 0x7f);
+	dt->tm_isdst = (buf[RTC8564_REG_SEC] & 0x80) == 0x80;
+	dt->tm_min = BCD_TO_BIN(buf[RTC8564_REG_MIN] & 0x7f);
+	dt->tm_hour = BCD_TO_BIN(buf[RTC8564_REG_HR] & 0x3f);
+
 	_DBGRTCTM(2, *dt);
 
 	return 0;
 }
 
 static int
-rtc8564_set_datetime(struct i2c_client *client, struct rtc_tm *dt, int datetoo)
+rtc8564_set_datetime(struct i2c_client *client, struct rtc_time *dt, int datetoo)
 {
 	int ret, len = 5;
 	unsigned char buf[15];
@@ -255,18 +270,19 @@
 
 	buf[RTC8564_REG_CTRL1] = CTRL1(client) | RTC8564_CTRL1_STOP;
 	buf[RTC8564_REG_CTRL2] = CTRL2(client);
-	buf[RTC8564_REG_SEC] = BIN_TO_BCD(dt->secs);
-	buf[RTC8564_REG_MIN] = BIN_TO_BCD(dt->mins);
-	buf[RTC8564_REG_HR] = BIN_TO_BCD(dt->hours);
+	buf[RTC8564_REG_SEC] = BIN_TO_BCD(dt->tm_sec);
+	buf[RTC8564_REG_MIN] = BIN_TO_BCD(dt->tm_min);
+	buf[RTC8564_REG_HR] = BIN_TO_BCD(dt->tm_hour);
 
 	if (datetoo) {
 		len += 5;
-		buf[RTC8564_REG_DAY] = BIN_TO_BCD(dt->mday);
-		buf[RTC8564_REG_WDAY] = BIN_TO_BCD(dt->wday);
-		buf[RTC8564_REG_MON_CENT] = BIN_TO_BCD(dt->mon) & 0x1f;
+		buf[RTC8564_REG_DAY] = BIN_TO_BCD(dt->tm_mday) ;
+		buf[RTC8564_REG_WDAY] = BIN_TO_BCD(dt->tm_wday);
+	    /* dt->tm_mon is zero-based */			
+		buf[RTC8564_REG_MON_CENT] = (BIN_TO_BCD(dt->tm_mon+1) & 0x1f);
 		/* century stored in minute alarm reg */
-		buf[RTC8564_REG_YEAR] = BIN_TO_BCD(dt->year % 100);
-		buf[RTC8564_REG_AL_MIN] = BIN_TO_BCD(dt->year / 100);
+		buf[RTC8564_REG_YEAR] = BIN_TO_BCD(dt->tm_year % 100);
+		buf[RTC8564_REG_AL_MIN] = BIN_TO_BCD(dt->tm_year / 100);
 	}
 
 	ret = rtc8564_write(client, 0, buf, len);
@@ -370,13 +386,211 @@
 	.command	= rtc8564_command
 };
 
+static int epson8564_rtc_ioctl( struct inode *, struct file *, unsigned int, unsigned long);
+static int epson8564_rtc_open(struct inode *inode, struct file *file);
+static int epson8564_rtc_release(struct inode *inode, struct file *file);
+
+static struct file_operations rtc_fops = {
+	owner:		THIS_MODULE,
+	ioctl:		epson8564_rtc_ioctl,
+	open:		epson8564_rtc_open,
+	release:	epson8564_rtc_release,
+};
+
+static struct miscdevice epson8564_rtc_miscdev = {
+	RTC_MINOR,
+	"rtc",
+	&rtc_fops
+};
+
+
+static int
+epson8564_rtc_open(struct inode *inode, struct file *file)
+{
+	return 0;
+}
+
+static int
+epson8564_rtc_release(struct inode *inode, struct file *file)
+{
+	return 0;
+}
+
+static int
+epson8564_rtc_ioctl( struct inode *inode, struct file *file,
+		unsigned int cmd, unsigned long arg)
+{
+	unsigned long	flags;
+	struct rtc_time wtime;
+	int status = 0;
+
+	//DPRINTK(2, "%s: cmd %c %x\n", __FUNCTION__, (char)(cmd>>8)&0xff, cmd&0xff);
+
+	switch (cmd) {
+		default:
+		case RTC_UIE_ON:
+		case RTC_UIE_OFF:
+		case RTC_PIE_ON:
+		case RTC_PIE_OFF:
+		case RTC_AIE_ON:
+		case RTC_AIE_OFF:
+		case RTC_ALM_SET:
+		case RTC_ALM_READ:
+		case RTC_IRQP_READ:
+		case RTC_IRQP_SET:
+		case RTC_EPOCH_READ:
+		case RTC_EPOCH_SET:
+		case RTC_WKALM_SET:
+		case RTC_WKALM_RD:
+			status = -EINVAL;
+			break;
+
+		case RTC_RD_TIME:
+			spin_lock_irqsave(&epson8564_rtc_lock, flags);
+			rtc8564_command( rtc8564_i2c_client, RTC_GETDATETIME, &wtime);
+			spin_unlock_irqrestore(&epson8564_rtc_lock,flags);
+
+			if( copy_to_user((void *)arg, &wtime, sizeof (struct rtc_time)))
+				status = -EFAULT;
+			break;
+
+		case RTC_SET_TIME:
+			if (!capable(CAP_SYS_TIME))
+			{
+				status = -EACCES;
+				break;
+			}
+
+			if (copy_from_user(&wtime, (struct rtc_time *)arg, sizeof(struct rtc_time)) )
+			{
+				status = -EFAULT;
+				break;
+			}
+
+			spin_lock_irqsave(&epson8564_rtc_lock, flags);
+			rtc8564_command( rtc8564_i2c_client, RTC_SETDATETIME, &wtime);
+			spin_unlock_irqrestore(&epson8564_rtc_lock,flags);
+			break;
+	}
+
+	return status;
+}
+#if 0
+static char *
+epson8564_mon2str( unsigned int mon)
+{
+	char *mon2str[12] = {
+	  "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+	  "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
+	};
+	if( mon > 11) return "error";
+	else return mon2str[ mon];
+}
+
+
+static int epson8564_rtc_proc_output( char *buf)
+{
+#define CHECK(ctrl,bit) ((ctrl & bit) ? "yes" : "no")
+	unsigned char ram[epson8564_RAM_SIZE];
+	int ret;
+
+	char *p = buf;
+
+	ret = epson8564_readram( ram, epson8564_RAM_SIZE);
+	if( ret > 0)
+	{
+		int i;
+		struct rtc_time dt;
+		char text[9];
+
+		p += sprintf(p, "DS1307 (64x8 Serial Real Time Clock)\n");
+
+		epson8564_convert_to_time( &dt, ram);
+		p += sprintf(p, "Date/Time	     : %02d-%s-%04d %02d:%02d:%02d\n",
+			dt.tm_mday, epson8564_mon2str(dt.tm_mon), dt.tm_year + 1900,
+			dt.tm_hour, dt.tm_min, dt.tm_sec);
+
+		p += sprintf(p, "Clock halted	     : %s\n", CHECK(ram[0],0x80));
+		p += sprintf(p, "24h mode	     : %s\n", CHECK(ram[2],0x40));
+		p += sprintf(p, "Square wave enabled : %s\n", CHECK(ram[7],0x10));
+		p += sprintf(p, "Freq		     : ");
+
+		switch( ram[7] & 0x03)
+		{
+			case RTC8564_TD_1HZ:
+				p += sprintf(p, "1Hz\n");
+				break;
+			case RTC8564_TD_4096HZ:
+				p += sprintf(p, "4.096kHz\n");
+				break;
+			case RTC8564_TD_8192HZ:
+				p += sprintf(p, "8.192kHz\n");
+				break;
+			case RTC8564_TD_32768HZ:
+			default:
+				p += sprintf(p, "32.768kHz\n");
+				break;
+
+		}
+
+		p += sprintf(p, "RAM dump:\n");
+		text[8]='\0';
+		for( i=0; i<epson8564_RAM_SIZE; i++)
+		{
+			p += sprintf(p, "%02X ", ram[i]);
+
+			if( (ram[i] < 32) || (ram[i]>126)) ram[i]='.';
+			text[i%8] = ram[i];
+			if( (i%8) == 7) p += sprintf(p, "%s\n",text);
+		}
+		p += sprintf(p, "\n");
+	}
+	else
+	{
+		p += sprintf(p, "Failed to read RTC memory!\n");
+	}
+
+	return	p - buf;
+}
+
+static int epson8564_rtc_read_proc(char *page, char **start, off_t off,
+		int count, int *eof, void *data)
+{
+	int len = epson8564_rtc_proc_output (page);
+	if (len <= off+count) *eof = 1;
+	*start = page + off;
+	len -= off;
+	if (len>count) len = count;
+	if (len<0) len = 0;
+	return len;
+}
+#endif
+
 static __init int rtc8564_init(void)
 {
-	return i2c_add_driver(&rtc8564_driver);
+    int retval=0;	
+
+#ifdef CONFIG_MACH_CREATOR_PXA270
+       if (creator_GetCreatorCPLDVersion() == CREATOR_BOARD_NOT_EXIST){
+            printk("Warning : Not support rtc8564 because of Creator board not present.\n");        	    
+       	    return (-1);
+       }
+#endif	
+    
+	retval =  i2c_add_driver(&rtc8564_driver);
+	if (retval==0)
+	{
+		misc_register (&epson8564_rtc_miscdev);
+		//create_proc_read_entry (PROC_epson8564_NAME, 0, 0, epson8564_rtc_read_proc, NULL);
+		printk("I2C: Epson 8564 RTC driver successfully loaded\n");
+		//if (rtc_debug > 2) epson8564_dumpram();
+	}
+	return retval;	
 }
 
 static __exit void rtc8564_exit(void)
 {
+	misc_deregister(&epson8564_rtc_miscdev);	
 	i2c_del_driver(&rtc8564_driver);
 }
 
Index: linux-2.6.15.3/drivers/i2c/chips/creator-pxa270-tlv320aic12.c
===================================================================
--- linux-2.6.15.3/drivers/i2c/chips/creator-pxa270-tlv320aic12.c	(revision 0)
+++ linux-2.6.15.3/drivers/i2c/chips/creator-pxa270-tlv320aic12.c	(revision 7613)
@@ -0,0 +1,337 @@
+// --------------------------------------------------------------------
+//
+//   Title     :  creator-pxa270-tlv320aic12.c
+//             :
+//   Library   :
+//             :
+//   Developers:  MICROTIME MDS group
+//             :
+//   Purpose   :  Non Interrupt (Polling)IIC bus for CODEC (TLV320AIC12)
+//             :
+//   Limitation:
+//             :
+//   Note      :
+//             :
+// --------------------------------------------------------------------
+//   modification history :
+// --------------------------------------------------------------------
+//   Version| mod. date: |
+//   Vx.xx  | mm/dd/yyyy |
+//   V1.0   | 06/28/2004 | First release
+// --------------------------------------------------------------------
+// --------------------------------------------------------------------
+//
+// Note:
+//
+//       MICROTIME COMPUTER INC.
+//
+//
+/*************************************************************************
+Include files
+*************************************************************************/
+#include <linux/module.h>
+#include <linux/kernel.h>
+#include <linux/i2c.h>
+#include <linux/slab.h>
+#include <linux/string.h>
+#include <linux/rtc.h>		/* get the user-level API */
+#include <linux/init.h>
+
+#include "rtc8564.h"
+
+/*************************************************************************
+Constant define
+*************************************************************************/
+#define SLAVE_ADDR                  0x80
+#define I2C_DRIVERID_TLV320AIC12    0xf010  
+
+#ifdef DEBUG
+# define _DBG(x, fmt, args...) do{ if (1) printk(KERN_ALERT"%s(), line=%d, : " fmt "\n", __FUNCTION__, __LINE__, ##args); } while(0);
+#else
+# define _DBG(x, fmt, args...) do { } while(0);
+#endif
+
+
+
+struct creator_tlv320aic12_data {
+	struct i2c_client client;
+	u16 ctrl;
+};
+/*************************************************************************
+Function prototypes
+*************************************************************************/
+static int creator_tlv320aic12_read_mem (struct i2c_client *client, struct mem *mem);
+static int creator_tlv320aic12_write_mem (struct i2c_client *client, struct mem *mem);
+
+
+/*************************************************************************
+Variable define
+*************************************************************************/
+static int debug;
+module_param(debug, int, S_IRUGO | S_IWUSR);
+
+static struct i2c_driver creator_tlv320aic12_driver;
+
+static unsigned short ignore[] = { I2C_CLIENT_END };
+static unsigned short normal_addr[] = { SLAVE_ADDR, I2C_CLIENT_END };
+
+static struct i2c_client_address_data addr_data = {
+	.normal_i2c		= normal_addr,
+	.probe			= ignore,
+	.ignore			= ignore,
+};
+
+
+
+
+static int 
+creator_tlv320aic12_read (struct i2c_client *client, unsigned char adr,	unsigned char *buf, unsigned char len)
+{
+       int ret = -EIO;
+       unsigned char addr[1] = { adr };
+       struct i2c_msg msgs[2] = {
+           {client->addr, 0, 1, addr},
+           {client->addr, I2C_M_RD, len, buf}
+       };
+
+       _DBG(1, "client=%p, adr=%d, buf=%p, len=%d", client, adr, buf, len);
+
+       if (!buf) {
+           ret = -EINVAL;
+           goto done;
+       }
+
+       ret = i2c_transfer(client->adapter, msgs, 2);
+       if (ret == 2) {
+           ret = 0;
+       }
+
+done:
+       return ret;
+}
+
+
+
+static int 
+creator_tlv320aic12_write (struct i2c_client *client, unsigned char adr, unsigned char *data, unsigned char len)
+{
+       int ret = 0;
+       unsigned char _data[16];
+       struct i2c_msg wr;
+       int i;
+
+       if (!data || len > 15) {
+           ret = -EINVAL;
+           goto done;
+       }
+
+       _DBG(1, "client=%p, adr=%d, buf=%p, len=%d", client, adr, data, len);
+
+       _data[0] = adr;
+       for (i = 0; i < len; i++) {
+           _data[i + 1] = data[i];
+           _DBG(5, "data[%d] = 0x%02x (%d)", i, data[i], data[i]);
+       }
+
+       wr.addr = client->addr;
+       wr.flags = 0;
+       wr.len = len + 1;
+       wr.buf = _data;
+
+       ret = i2c_transfer(client->adapter, &wr, 1);
+       if (ret == 1) {
+           ret = 0;
+       }
+
+done:
+       return ret;
+}
+
+
+
+static int 
+creator_tlv320aic12_attach (struct i2c_adapter *adap, int addr, int kind)
+{
+       int ret;
+       struct i2c_client *new_client;
+       struct creator_tlv320aic12_data *d;
+       unsigned char data[10];
+       unsigned char ad[1] = { 0 };
+       struct i2c_msg ctrl_wr[1] = {
+           {addr, 0, 2, data}
+       };
+       struct i2c_msg ctrl_rd[2] = {
+           {addr, 0, 1, ad},
+           {addr, I2C_M_RD, 2, data}
+       };
+
+       d = kzalloc(sizeof(struct creator_tlv320aic12_data), GFP_KERNEL);
+       if (!d) {
+           ret = -ENOMEM;
+           goto done;
+       }
+       new_client = &d->client;
+
+       strlcpy(new_client->name, "TLV320AIC12", I2C_NAME_SIZE);
+       i2c_set_clientdata(new_client, d);
+       new_client->flags = I2C_CLIENT_ALLOW_USE;
+       new_client->addr = addr;
+       new_client->adapter = adap;
+       new_client->driver = &creator_tlv320aic12_driver;
+
+       _DBG(1, "client=%p", new_client);
+
+       /* init ctrl1 reg */
+       data[0] = 0;
+       data[1] = 0;
+       ret = i2c_transfer(new_client->adapter, ctrl_wr, 1);
+       if (ret != 1) {
+           printk(KERN_INFO "tlv320aic12: cant init ctrl1\n");
+           ret = -ENODEV;
+           goto done;
+       }
+
+       /* read back ctrl1 and ctrl2 */
+       ret = i2c_transfer(new_client->adapter, ctrl_rd, 2);
+       if (ret != 2) {
+           printk(KERN_INFO "tlv320aic12: cant read ctrl\n");
+           ret = -ENODEV;
+           goto done;
+       }
+
+       d->ctrl = data[0] | (data[1] << 8);
+
+       _DBG(1, "RTC8564_REG_CTRL1=%02x, RTC8564_REG_CTRL2=%02x",
+       data[0], data[1]);
+
+       ret = i2c_attach_client(new_client);
+done:
+       if (ret) {
+           kfree(d);
+       }
+       return ret;
+}
+
+
+
+static int 
+creator_tlv320aic12_probe (struct i2c_adapter *adap)
+{
+       return i2c_probe (adap, &addr_data, creator_tlv320aic12_attach);
+}
+
+
+
+static int creator_tlv320aic12_detach(struct i2c_client *client)
+{
+       i2c_detach_client(client);
+       kfree(i2c_get_clientdata(client));
+       return 0;
+}
+
+
+
+static int creator_tlv320aic12_get_ctrl(struct i2c_client *client, unsigned int *ctrl)
+{
+struct creator_tlv320aic12_data *data = i2c_get_clientdata(client);
+
+       if (!ctrl)
+           return -1;
+
+       *ctrl = data->ctrl;
+       return 0;
+}
+
+
+static int creator_tlv320aic12_set_ctrl(struct i2c_client *client, unsigned int *ctrl)
+{
+       struct creator_tlv320aic12_data *data = i2c_get_clientdata(client);
+       unsigned char buf[2];
+
+       if (!ctrl)
+           return -1;
+
+       buf[0] = *ctrl & 0xff;
+       buf[1] = (*ctrl & 0xff00) >> 8;
+       data->ctrl = *ctrl;
+
+       return creator_tlv320aic12_write(client, 0, buf, 2);
+}
+
+static int creator_tlv320aic12_read_mem(struct i2c_client *client, struct mem *mem)
+{
+       if (!mem)
+           return -EINVAL;
+
+       return creator_tlv320aic12_read(client, mem->loc, mem->data, mem->nr);
+}
+
+static int creator_tlv320aic12_write_mem(struct i2c_client *client, struct mem *mem)
+{
+
+       if (!mem)
+           return -EINVAL;
+
+       return creator_tlv320aic12_write(client, mem->loc, mem->data, mem->nr);
+}
+
+static int
+creator_tlv320aic12_command(struct i2c_client *client, unsigned int cmd, void *arg)
+{
+       _DBG(1, "cmd=%d", cmd);
+
+       switch (cmd) {
+
+
+       case RTC_GETCTRL:
+           return creator_tlv320aic12_get_ctrl(client, arg);
+
+       case RTC_SETCTRL:
+           return creator_tlv320aic12_set_ctrl(client, arg);
+
+       case MEM_READ:
+           return creator_tlv320aic12_read_mem(client, arg);
+
+       case MEM_WRITE:
+           return creator_tlv320aic12_write_mem(client, arg);
+
+       default:
+           return -EINVAL;
+       }
+}
+
+
+
+static struct i2c_driver creator_tlv320aic12_driver = {
+	.owner		= THIS_MODULE,
+	.name		= "TLV320AIC12",
+	.id		    = I2C_DRIVERID_TLV320AIC12,
+	.flags		= I2C_DF_NOTIFY,
+	.attach_adapter = creator_tlv320aic12_probe,
+	.detach_client	= creator_tlv320aic12_detach,
+	.command	= creator_tlv320aic12_command
+};
+
+
+
+
+static __init int 
+creator_tlv320aic12_init(void)
+{
+       return i2c_add_driver(&creator_tlv320aic12_driver);
+}
+
+
+
+static __exit void creator_tlv320aic12_exit(void)
+{
+       i2c_del_driver(&creator_tlv320aic12_driver);
+}
+
+
+MODULE_AUTHOR("Microtime Computer Inc.");
+MODULE_DESCRIPTION("Create XScale-PXA270 tlv320aic12 Driver");
+MODULE_LICENSE("GPL");
+
+module_init(creator_tlv320aic12_init);
+module_exit(creator_tlv320aic12_exit);

Property changes on: linux-2.6.15.3/drivers/i2c/chips/creator-pxa270-tlv320aic12.c
___________________________________________________________________
Name: svn:executable
   + *

